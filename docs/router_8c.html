<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/router.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">router.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Miscellaneous relay functionality, including RSA key maintenance, generating and uploading server descriptors, picking an address to advertise, and so on.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="or_8h_source.html">or.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitbuild_8h_source.html">circuitbuild.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitlist_8h_source.html">circuitlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuituse_8h_source.html">circuituse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection_8h_source.html">connection.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__rand_8h_source.html">crypto_rand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__util_8h_source.html">crypto_util.h</a>&quot;</code><br />
<code>#include &quot;crypto_curve25519.h&quot;</code><br />
<code>#include &quot;<a class="el" href="directory_8h_source.html">directory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dirserv_8h_source.html">dirserv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dns_8h_source.html">dns.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="geoip_8h_source.html">geoip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hibernate_8h_source.html">hibernate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="networkstatus_8h_source.html">networkstatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nodelist_8h_source.html">nodelist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="policies_8h_source.html">policies.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protover_8h_source.html">protover.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="relay_8h_source.html">relay.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rephist_8h_source.html">rephist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="router_8h_source.html">router.h</a>&quot;</code><br />
<code>#include &quot;routerkeys.h&quot;</code><br />
<code>#include &quot;<a class="el" href="routerlist_8h_source.html">routerlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="routerparse_8h_source.html">routerparse.h</a>&quot;</code><br />
<code>#include &quot;statefile.h&quot;</code><br />
<code>#include &quot;torcert.h&quot;</code><br />
<code>#include &quot;<a class="el" href="transports_8h_source.html">transports.h</a>&quot;</code><br />
<code>#include &quot;routerset.h&quot;</code><br />
<code>#include &quot;<a class="el" href="mode_8h_source.html">dirauth/mode.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for router.c:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2router_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2router_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2router_8c">
<area shape="rect" id="node2" href="or_8h.html" title="Master header file for Tor&#45;specific functionality. " alt="" coords="933,109,977,136"/>
<area shape="rect" id="node8" href="crypto__curve25519_8h_source.html" title="crypto_curve25519.h" alt="" coords="1542,333,1685,360"/>
<area shape="rect" id="node22" href="circuitbuild_8h.html" title="Header file for circuitbuild.c. " alt="" coords="1001,109,1095,136"/>
<area shape="rect" id="node23" href="circuitlist_8h.html" title="Header file for circuitlist.c. " alt="" coords="1120,109,1205,136"/>
<area shape="rect" id="node24" href="circuituse_8h.html" title="Header file for circuituse.c. " alt="" coords="1230,109,1319,136"/>
<area shape="rect" id="node25" href="config_8h.html" title="Header file for config.c. " alt="" coords="1343,109,1411,136"/>
<area shape="rect" id="node26" href="connection_8h.html" title="Header file for connection.c. " alt="" coords="1436,109,1532,136"/>
<area shape="rect" id="node27" href="control_8h.html" title="Header file for control.c. " alt="" coords="1556,109,1628,136"/>
<area shape="rect" id="node28" href="crypto__rand_8h.html" title="Common functions for using (pseudo&#45;)random number generators. " alt="" coords="2388,259,2489,285"/>
<area shape="rect" id="node29" href="crypto__util_8h.html" title="Common functions for cryptographic routines. " alt="" coords="2741,333,2835,360"/>
<area shape="rect" id="node30" href="directory_8h.html" title="Header file for directory.c. " alt="" coords="1753,109,1836,136"/>
<area shape="rect" id="node31" href="dirserv_8h.html" title="Header file for dirserv.c. " alt="" coords="1860,109,1932,136"/>
<area shape="rect" id="node32" href="dns_8h.html" title="Header file for dns.c. " alt="" coords="1957,109,2011,136"/>
<area shape="rect" id="node33" href="geoip_8h.html" title="Header file for geoip.c. " alt="" coords="2036,109,2100,136"/>
<area shape="rect" id="node34" href="hibernate_8h.html" title="Header file for hibernate.c. " alt="" coords="2125,109,2211,136"/>
<area shape="rect" id="node35" href="main_8h.html" title="Header file for main.c. " alt="" coords="2236,109,2297,136"/>
<area shape="rect" id="node36" href="networkstatus_8h.html" title="Header file for networkstatus.c. " alt="" coords="2321,109,2436,136"/>
<area shape="rect" id="node37" href="nodelist_8h.html" title="Header file for nodelist.c. " alt="" coords="2461,109,2539,136"/>
<area shape="rect" id="node38" href="policies_8h.html" title="Header file for policies.c. " alt="" coords="2564,109,2641,136"/>
<area shape="rect" id="node39" href="protover_8h.html" title="Headers and type declarations for protover.c. " alt="" coords="5,184,85,211"/>
<area shape="rect" id="node40" href="relay_8h.html" title="Header file for relay.c. " alt="" coords="2716,109,2777,136"/>
<area shape="rect" id="node41" href="rephist_8h.html" title="Header file for rephist.c. " alt="" coords="2801,109,2873,136"/>
<area shape="rect" id="node42" href="router_8h.html" title="Header file for router.c. " alt="" coords="2897,109,2964,136"/>
<area shape="rect" id="node43" href="routerkeys_8h_source.html" title="routerkeys.h" alt="" coords="2215,184,2310,211"/>
<area shape="rect" id="node44" href="routerlist_8h.html" title="Header file for routerlist.c. " alt="" coords="3039,109,3121,136"/>
<area shape="rect" id="node45" href="routerparse_8h.html" title="Header file for routerparse.c. " alt="" coords="3145,109,3244,136"/>
<area shape="rect" id="node46" href="statefile_8h_source.html" title="statefile.h" alt="" coords="3269,109,3347,136"/>
<area shape="rect" id="node47" href="torcert_8h_source.html" title="torcert.h" alt="" coords="1703,184,1774,211"/>
<area shape="rect" id="node48" href="transports_8h.html" title="Headers for transports.c. " alt="" coords="3423,109,3513,136"/>
<area shape="rect" id="node49" href="routerset_8h_source.html" title="routerset.h" alt="" coords="3538,109,3622,136"/>
<area shape="rect" id="node50" href="mode_8h.html" title="Standalone header file for directory authority mode. " alt="" coords="3646,109,3754,136"/>
<area shape="rect" id="node3" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="571,483,650,509"/>
<area shape="rect" id="node4" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="1359,408,1422,435"/>
<area shape="rect" id="node5" href="crypto_8h.html" title="Headers for crypto.c. " alt="" coords="1103,333,1172,360"/>
<area shape="rect" id="node6" href="crypto__format_8h_source.html" title="crypto_format.h" alt="" coords="1463,184,1577,211"/>
<area shape="rect" id="node7" href="crypto__ed25519_8h_source.html" title="crypto_ed25519.h" alt="" coords="1676,259,1801,285"/>
<area shape="rect" id="node9" href="tortls_8h.html" title="Headers for tortls.c. " alt="" coords="161,184,223,211"/>
<area shape="rect" id="node10" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="247,184,313,211"/>
<area shape="rect" id="node11" href="container_8h_source.html" title="container.h" alt="" coords="859,259,946,285"/>
<area shape="rect" id="node12" href="compress_8h.html" title="Headers for compress.c. " alt="" coords="388,184,479,211"/>
<area shape="rect" id="node13" href="address_8h.html" title="Headers for address.h. " alt="" coords="571,184,650,211"/>
<area shape="rect" id="node14" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="123,408,251,435"/>
<area shape="rect" id="node15" href="ht_8h_source.html" title="ht.h" alt="" coords="503,184,547,211"/>
<area shape="rect" id="node16" href="confline_8h_source.html" title="confline.h" alt="" coords="917,184,995,211"/>
<area shape="rect" id="node17" href="replaycache_8h.html" title="Header file for replaycache.c. " alt="" coords="674,184,777,211"/>
<area shape="rect" id="node18" href="tor__queue_8h_source.html" title="tor_queue.h" alt="" coords="801,184,892,211"/>
<area shape="rect" id="node19" href="token__bucket_8h_source.html" title="token_bucket.h" alt="" coords="1175,259,1286,285"/>
<area shape="rect" id="node20" href="util__format_8h_source.html" title="util_format.h" alt="" coords="1258,333,1353,360"/>
<area shape="rect" id="node21" href="hs__circuitmap_8h.html" title="Header file for hs_circuitmap.c. " alt="" coords="1071,184,1185,211"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af9d03950b25197bf3dbde3042243561b"><td class="memItemLeft" align="right" valign="top"><a id="af9d03950b25197bf3dbde3042243561b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ROUTER_PRIVATE</b></td></tr>
<tr class="separator:af9d03950b25197bf3dbde3042243561b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d57890ad63643fa76208ba85c78126"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a90d57890ad63643fa76208ba85c78126">MIN_BW_TO_ADVERTISE_DIRSERVER</a>&#160;&#160;&#160;51200</td></tr>
<tr class="separator:a90d57890ad63643fa76208ba85c78126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade6315180d2438b9fdfc5edfb9b8dbf9"><td class="memItemLeft" align="right" valign="top"><a id="ade6315180d2438b9fdfc5edfb9b8dbf9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SELF_EXCLUDED_WARN_INTERVAL</b>&#160;&#160;&#160;3600</td></tr>
<tr class="separator:ade6315180d2438b9fdfc5edfb9b8dbf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59cbdc9027536eba598d9f9f6f0abde1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a59cbdc9027536eba598d9f9f6f0abde1">FORCE_REGENERATE_DESCRIPTOR_INTERVAL</a>&#160;&#160;&#160;(18*60*60)</td></tr>
<tr class="separator:a59cbdc9027536eba598d9f9f6f0abde1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a832609389b143be8385fa39212d958"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a0a832609389b143be8385fa39212d958">FAST_RETRY_DESCRIPTOR_INTERVAL</a>&#160;&#160;&#160;(90*60)</td></tr>
<tr class="separator:a0a832609389b143be8385fa39212d958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3d02e45b0d835ccab6569238182608"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a3c3d02e45b0d835ccab6569238182608">MAX_BANDWIDTH_CHANGE_FREQ</a>&#160;&#160;&#160;(3*60*60)</td></tr>
<tr class="separator:a3c3d02e45b0d835ccab6569238182608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e2465d5d711cedebe59cceb59cf896a"><td class="memItemLeft" align="right" valign="top"><a id="a2e2465d5d711cedebe59cceb59cf896a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEBUG_ROUTER_DUMP_ROUTER_TO_STRING</b></td></tr>
<tr class="separator:a2e2465d5d711cedebe59cceb59cf896a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a392831ecd0ad8a403b1dc0e837d161"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a7a392831ecd0ad8a403b1dc0e837d161">NODE_DESC_BUF_LEN</a>&#160;&#160;&#160;(<a class="el" href="or_8h.html#a8e619cd29da4289b84f936357bcb9c2c">MAX_VERBOSE_NICKNAME_LEN</a>+4+<a class="el" href="address_8h.html#ac43ab33ae6719d7549644d40fe89bd5f">TOR_ADDR_BUF_LEN</a>)</td></tr>
<tr class="separator:a7a392831ecd0ad8a403b1dc0e837d161"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a54ab47db660fac7decf06081ba29f8dd"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd">format_node_description</a> (char *buf, const char *id_digest, int is_named, const char *nickname, const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *addr, uint32_t addr32h)</td></tr>
<tr class="separator:a54ab47db660fac7decf06081ba29f8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01343bdaa55370c9b0663208d4e1e67c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a01343bdaa55370c9b0663208d4e1e67c">routerinfo_err_to_string</a> (int err)</td></tr>
<tr class="separator:a01343bdaa55370c9b0663208d4e1e67c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee06541f1d25bedac9166f4a08834c16"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aee06541f1d25bedac9166f4a08834c16">routerinfo_err_is_transient</a> (int err)</td></tr>
<tr class="separator:aee06541f1d25bedac9166f4a08834c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f3561f96c3a73512e97860624b9cc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a18f3561f96c3a73512e97860624b9cc1">get_onion_key</a> (void)</td></tr>
<tr class="separator:a18f3561f96c3a73512e97860624b9cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71d8f6e0ed3558284e43371894abb504"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a71d8f6e0ed3558284e43371894abb504">dup_onion_keys</a> (<a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> **key, <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> **last)</td></tr>
<tr class="separator:a71d8f6e0ed3558284e43371894abb504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b04ba161c869beb75a2a1d6f0d44f59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a9b04ba161c869beb75a2a1d6f0d44f59">expire_old_onion_keys</a> (void)</td></tr>
<tr class="separator:a9b04ba161c869beb75a2a1d6f0d44f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c647445efb73188e0ba32510afbee0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdi__digest256__map__t.html">di_digest256_map_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a4c647445efb73188e0ba32510afbee0d">construct_ntor_key_map</a> (void)</td></tr>
<tr class="separator:a4c647445efb73188e0ba32510afbee0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07026739772087089f5b5a27813e646b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a07026739772087089f5b5a27813e646b">ntor_key_map_free_</a> (<a class="el" href="structdi__digest256__map__t.html">di_digest256_map_t</a> *map)</td></tr>
<tr class="separator:a07026739772087089f5b5a27813e646b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875c79d86af54c7cd80c8e9844d8d347"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a875c79d86af54c7cd80c8e9844d8d347">get_onion_key_set_at</a> (void)</td></tr>
<tr class="separator:a875c79d86af54c7cd80c8e9844d8d347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad833b358871f8b821b26628c5457e134"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ad833b358871f8b821b26628c5457e134">set_server_identity_key</a> (<a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *k)</td></tr>
<tr class="separator:ad833b358871f8b821b26628c5457e134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb30f05264b37bff37fe8824b4d854b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a8fb30f05264b37bff37fe8824b4d854b">get_server_identity_key</a> (void)</td></tr>
<tr class="separator:a8fb30f05264b37bff37fe8824b4d854b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f63549a1af0b43512f4d65b8a02da85"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a9f63549a1af0b43512f4d65b8a02da85">server_identity_key_is_set</a> (void)</td></tr>
<tr class="separator:a9f63549a1af0b43512f4d65b8a02da85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680d1900f3bcbc97dd4ddf6efa5fb35b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a680d1900f3bcbc97dd4ddf6efa5fb35b">set_client_identity_key</a> (<a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *k)</td></tr>
<tr class="separator:a680d1900f3bcbc97dd4ddf6efa5fb35b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef981f743b968779701f12f26922d523"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aef981f743b968779701f12f26922d523">get_tlsclient_identity_key</a> (void)</td></tr>
<tr class="separator:aef981f743b968779701f12f26922d523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cee44ce5a0aca64e344cd6b326a3ac3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a9cee44ce5a0aca64e344cd6b326a3ac3">client_identity_key_is_set</a> (void)</td></tr>
<tr class="separator:a9cee44ce5a0aca64e344cd6b326a3ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3989f239a7c716e23e397c2dbecb4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a6b3989f239a7c716e23e397c2dbecb4b">MOCK_IMPL</a> (<a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *, get_my_v3_authority_cert,(void))</td></tr>
<tr class="separator:a6b3989f239a7c716e23e397c2dbecb4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d191ef7dc168a941819724e166791d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a23d191ef7dc168a941819724e166791d">get_my_v3_authority_signing_key</a> (void)</td></tr>
<tr class="separator:a23d191ef7dc168a941819724e166791d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3cf620c6ba1423c14c6cb57955e0408"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aa3cf620c6ba1423c14c6cb57955e0408">get_my_v3_legacy_cert</a> (void)</td></tr>
<tr class="separator:aa3cf620c6ba1423c14c6cb57955e0408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30add241c8c3a33066028cadf5a1bd99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a30add241c8c3a33066028cadf5a1bd99">get_my_v3_legacy_signing_key</a> (void)</td></tr>
<tr class="separator:a30add241c8c3a33066028cadf5a1bd99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9d6e2bf82d6ddfb3e47cd7d49b57ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#adf9d6e2bf82d6ddfb3e47cd7d49b57ec">rotate_onion_key</a> (void)</td></tr>
<tr class="separator:adf9d6e2bf82d6ddfb3e47cd7d49b57ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca8d566f45ef49fb6fd7358c235a420"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a7ca8d566f45ef49fb6fd7358c235a420">init_key_from_file</a> (const char *fname, int generate, int severity, int log_greeting)</td></tr>
<tr class="separator:a7ca8d566f45ef49fb6fd7358c235a420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccf29e1bf3d8e43591f66d2a5118a6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a1ccf29e1bf3d8e43591f66d2a5118a6b">v3_authority_check_key_expiry</a> (void)</td></tr>
<tr class="separator:a1ccf29e1bf3d8e43591f66d2a5118a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9dc576492cd81658d909e790c138904"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ab9dc576492cd81658d909e790c138904">get_onion_key_lifetime</a> (void)</td></tr>
<tr class="separator:ab9dc576492cd81658d909e790c138904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a01b088538e0c0a72535474724bcd9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a51a01b088538e0c0a72535474724bcd9">get_onion_key_grace_period</a> (void)</td></tr>
<tr class="separator:a51a01b088538e0c0a72535474724bcd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d28ab5fe06baaec0c4e7575a9502cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a67d28ab5fe06baaec0c4e7575a9502cc">router_initialize_tls_context</a> (void)</td></tr>
<tr class="separator:a67d28ab5fe06baaec0c4e7575a9502cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6be11a2e3d79f8639b03e0b96290102"><td class="memItemLeft" align="right" valign="top">STATIC int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#af6be11a2e3d79f8639b03e0b96290102">router_write_fingerprint</a> (int hashed)</td></tr>
<tr class="separator:af6be11a2e3d79f8639b03e0b96290102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8ab2a2e8cd833d3b68a384a3a46f60"><td class="memItemLeft" align="right" valign="top"><a id="a6e8ab2a2e8cd833d3b68a384a3a46f60"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>init_keys_client</b> (void)</td></tr>
<tr class="separator:a6e8ab2a2e8cd833d3b68a384a3a46f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a500b19001501e67b572ae39547800eb9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a500b19001501e67b572ae39547800eb9">init_keys</a> (void)</td></tr>
<tr class="separator:a500b19001501e67b572ae39547800eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac286979e97e7949ee0b887cde0f038a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ac286979e97e7949ee0b887cde0f038a1">router_reset_reachability</a> (void)</td></tr>
<tr class="separator:ac286979e97e7949ee0b887cde0f038a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b917b11fb2945b314286a6a567e34c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a8b917b11fb2945b314286a6a567e34c3">check_whether_orport_reachable</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a8b917b11fb2945b314286a6a567e34c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98317a030cb30700f60c8444d676087b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a98317a030cb30700f60c8444d676087b">check_whether_dirport_reachable</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a98317a030cb30700f60c8444d676087b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23297b12b098da9eac98126a587aa3b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ab23297b12b098da9eac98126a587aa3b">dir_server_mode</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:ab23297b12b098da9eac98126a587aa3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242f0a76713d7b28d940880fc3dd03ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a242f0a76713d7b28d940880fc3dd03ed">router_do_reachability_checks</a> (int test_or, int test_dir)</td></tr>
<tr class="separator:a242f0a76713d7b28d940880fc3dd03ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81d0eddf34d18d1da24a0f14e1c54c1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a81d0eddf34d18d1da24a0f14e1c54c1f">router_orport_found_reachable</a> (void)</td></tr>
<tr class="separator:a81d0eddf34d18d1da24a0f14e1c54c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0152c6014466eaafa2e666bb38ba16b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ab0152c6014466eaafa2e666bb38ba16b">router_dirport_found_reachable</a> (void)</td></tr>
<tr class="separator:ab0152c6014466eaafa2e666bb38ba16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95281001f99f50d14056c2b9fd51bc7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a95281001f99f50d14056c2b9fd51bc7b">router_perform_bandwidth_test</a> (int num_circs, time_t now)</td></tr>
<tr class="separator:a95281001f99f50d14056c2b9fd51bc7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b7d8b358c0cdb6359916151f1863e36"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a0b7d8b358c0cdb6359916151f1863e36">net_is_disabled</a> (void)</td></tr>
<tr class="separator:a0b7d8b358c0cdb6359916151f1863e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f26f7d8212be928f60b7daf0279f029"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a1f26f7d8212be928f60b7daf0279f029">net_is_completely_disabled</a> (void)</td></tr>
<tr class="separator:a1f26f7d8212be928f60b7daf0279f029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d62b1eeaa990670a04de8dfbb42ab8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f">authdir_mode</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a2d62b1eeaa990670a04de8dfbb42ab8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8522dfca1851365846ddef293a416656"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a8522dfca1851365846ddef293a416656">authdir_mode_handles_descs</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, int purpose)</td></tr>
<tr class="separator:a8522dfca1851365846ddef293a416656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea820da6141eaf03649558d4ec6d5872"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aea820da6141eaf03649558d4ec6d5872">authdir_mode_publishes_statuses</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:aea820da6141eaf03649558d4ec6d5872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a652eb5a350d7730a18c7de2605d435f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a652eb5a350d7730a18c7de2605d435f4">authdir_mode_tests_reachability</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a652eb5a350d7730a18c7de2605d435f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabab68011cc297e16ad83af25c521bf6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aabab68011cc297e16ad83af25c521bf6">authdir_mode_bridge</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:aabab68011cc297e16ad83af25c521bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa04d0b378d4bf9995ebbdc2c84d03561"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aa04d0b378d4bf9995ebbdc2c84d03561">MOCK_IMPL</a> (int, server_mode,(const <a class="el" href="structor__options__t.html">or_options_t</a> *options))</td></tr>
<tr class="separator:aa04d0b378d4bf9995ebbdc2c84d03561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6332bfb34c12a7b4a2c16aa8a3abdd7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a6332bfb34c12a7b4a2c16aa8a3abdd7b">MOCK_IMPL</a> (int, public_server_mode,(const <a class="el" href="structor__options__t.html">or_options_t</a> *options))</td></tr>
<tr class="separator:a6332bfb34c12a7b4a2c16aa8a3abdd7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa75de94186fffc8f373de610ae4cab3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#afa75de94186fffc8f373de610ae4cab3">should_refuse_unknown_exits</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:afa75de94186fffc8f373de610ae4cab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a724ccb2800a474e36ae4a808944446e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a724ccb2800a474e36ae4a808944446e8">MOCK_IMPL</a> (int, advertised_server_mode,(void))</td></tr>
<tr class="separator:a724ccb2800a474e36ae4a808944446e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa263ba55448946fedc8475b3d9b34b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aaa263ba55448946fedc8475b3d9b34b8">proxy_mode</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:aaa263ba55448946fedc8475b3d9b34b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a1aa020a168e42bfaa9edd016839d6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a0a1aa020a168e42bfaa9edd016839d6f">consider_publishable_server</a> (int force)</td></tr>
<tr class="separator:a0a1aa020a168e42bfaa9edd016839d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfae58f61a3329fd20f43c378bff0bb"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb">router_get_active_listener_port_by_type_af</a> (int listener_type, sa_family_t family)</td></tr>
<tr class="separator:a8bfae58f61a3329fd20f43c378bff0bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a228ad9efff13643397a5c02d7bec7"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7">router_get_advertised_or_port</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a74a228ad9efff13643397a5c02d7bec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19b606096c7f385bb3db639b1a1c15fe"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe">router_get_advertised_or_port_by_af</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, sa_family_t family)</td></tr>
<tr class="separator:a19b606096c7f385bb3db639b1a1c15fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc00fda5b227142768e650d169b3dd26"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#afc00fda5b227142768e650d169b3dd26">router_get_advertised_dir_port</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, uint16_t dirport)</td></tr>
<tr class="separator:afc00fda5b227142768e650d169b3dd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373fdf9e0631afcd0d4dfcde5dc4926b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a373fdf9e0631afcd0d4dfcde5dc4926b">router_upload_dir_desc_to_dirservers</a> (int force)</td></tr>
<tr class="separator:a373fdf9e0631afcd0d4dfcde5dc4926b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a003a3604c6a65b73394ca22117d0dff8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a003a3604c6a65b73394ca22117d0dff8">router_compare_to_my_exit_policy</a> (const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *addr, uint16_t port)</td></tr>
<tr class="separator:a003a3604c6a65b73394ca22117d0dff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad510701c8387a948e0694f40d866b2d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ad510701c8387a948e0694f40d866b2d4">MOCK_IMPL</a> (int, router_my_exit_policy_is_reject_star,(void))</td></tr>
<tr class="separator:ad510701c8387a948e0694f40d866b2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb0f38915a46f77352900604075d82f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#abeb0f38915a46f77352900604075d82f">router_digest_is_me</a> (const char *digest)</td></tr>
<tr class="separator:abeb0f38915a46f77352900604075d82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5d541e535def16f404e35382774642"><td class="memItemLeft" align="right" valign="top">const uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#aae5d541e535def16f404e35382774642">router_get_my_id_digest</a> (void)</td></tr>
<tr class="separator:aae5d541e535def16f404e35382774642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71a44765898910e5aaa50b3f9b50a17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ab71a44765898910e5aaa50b3f9b50a17">router_extrainfo_digest_is_me</a> (const char *digest)</td></tr>
<tr class="separator:ab71a44765898910e5aaa50b3f9b50a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcfdecf66a4aa5e6d09a702784c8197f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#adcfdecf66a4aa5e6d09a702784c8197f">router_is_me</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:adcfdecf66a4aa5e6d09a702784c8197f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad474de0d17eaff8d2d6ac9f83621d4fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ad474de0d17eaff8d2d6ac9f83621d4fc">MOCK_IMPL</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *, router_get_my_routerinfo,(void))</td></tr>
<tr class="separator:ad474de0d17eaff8d2d6ac9f83621d4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68f27a8a221a32372f4798fb66c58f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#af68f27a8a221a32372f4798fb66c58f3">MOCK_IMPL</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *, router_get_my_routerinfo_with_err,(int *err))</td></tr>
<tr class="separator:af68f27a8a221a32372f4798fb66c58f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c282d28d3993d673a0bedf91e5d776"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a41c282d28d3993d673a0bedf91e5d776">router_get_my_descriptor</a> (void)</td></tr>
<tr class="separator:a41c282d28d3993d673a0bedf91e5d776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c5482965fda685a86a170304d48532"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structextrainfo__t.html">extrainfo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a30c5482965fda685a86a170304d48532">router_get_my_extrainfo</a> (void)</td></tr>
<tr class="separator:a30c5482965fda685a86a170304d48532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba670606f8b38ce1d818a56438cf28b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a1ba670606f8b38ce1d818a56438cf28b">router_get_descriptor_gen_reason</a> (void)</td></tr>
<tr class="separator:a1ba670606f8b38ce1d818a56438cf28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2732ff3306e95d3579956be55f9cdc6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a2732ff3306e95d3579956be55f9cdc6d">MOCK_IMPL</a> (int, router_pick_published_address,(const <a class="el" href="structor__options__t.html">or_options_t</a> *options, uint32_t *addr, int cache_only))</td></tr>
<tr class="separator:a2732ff3306e95d3579956be55f9cdc6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb94b47f3c4ba2113830968ba8c780bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#acb94b47f3c4ba2113830968ba8c780bd">router_build_fresh_descriptor</a> (<a class="el" href="structrouterinfo__t.html">routerinfo_t</a> **r, <a class="el" href="structextrainfo__t.html">extrainfo_t</a> **e)</td></tr>
<tr class="separator:acb94b47f3c4ba2113830968ba8c780bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23927b27e54ab8752d8a379b5136b50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ac23927b27e54ab8752d8a379b5136b50">router_rebuild_descriptor</a> (int force)</td></tr>
<tr class="separator:ac23927b27e54ab8752d8a379b5136b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20dfba342b27eb97810f9141d5c14a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ad20dfba342b27eb97810f9141d5c14a1">mark_my_descriptor_dirty_if_too_old</a> (time_t now)</td></tr>
<tr class="separator:ad20dfba342b27eb97810f9141d5c14a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0970ca0d9c40eadbf984231328be76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#acf0970ca0d9c40eadbf984231328be76">mark_my_descriptor_dirty</a> (const char *reason)</td></tr>
<tr class="separator:acf0970ca0d9c40eadbf984231328be76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9b5c1a252539d60ae2cfaca3a06c4e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ab9b5c1a252539d60ae2cfaca3a06c4e7">check_descriptor_bandwidth_changed</a> (time_t now)</td></tr>
<tr class="separator:ab9b5c1a252539d60ae2cfaca3a06c4e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59446788bf67e78d0d930bcdc65f7717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a59446788bf67e78d0d930bcdc65f7717">check_descriptor_ipaddress_changed</a> (time_t now)</td></tr>
<tr class="separator:a59446788bf67e78d0d930bcdc65f7717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a099e515a8ff1bb99891a9e51c141bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a2a099e515a8ff1bb99891a9e51c141bb">router_new_address_suggestion</a> (const char *suggestion, const <a class="el" href="structdir__connection__t.html">dir_connection_t</a> *d_conn)</td></tr>
<tr class="separator:a2a099e515a8ff1bb99891a9e51c141bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8911501c12d293f7fe03a101f3563ba"><td class="memItemLeft" align="right" valign="top">STATIC void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#af8911501c12d293f7fe03a101f3563ba">get_platform_str</a> (char *platform, size_t len)</td></tr>
<tr class="separator:af8911501c12d293f7fe03a101f3563ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7a9d63b97fc7552ca356f93c9c6cc7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#abe7a9d63b97fc7552ca356f93c9c6cc7">router_dump_router_to_string</a> (<a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *ident_key, const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *tap_key, const <a class="el" href="structcurve25519__keypair__t.html">curve25519_keypair_t</a> *ntor_keypair, const <a class="el" href="structed25519__keypair__t.html">ed25519_keypair_t</a> *signing_keypair)</td></tr>
<tr class="separator:abe7a9d63b97fc7552ca356f93c9c6cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77dbc2a8d2709504efedfa13b140964"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#ac77dbc2a8d2709504efedfa13b140964">router_dump_exit_policy_to_string</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, int include_ipv4, int include_ipv6)</td></tr>
<tr class="separator:ac77dbc2a8d2709504efedfa13b140964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255c16f30d82dd9c6644eceb57f70df6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a255c16f30d82dd9c6644eceb57f70df6">router_get_prim_orport</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *ap_out)</td></tr>
<tr class="separator:a255c16f30d82dd9c6644eceb57f70df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8388a780f816e9d130244f604767d742"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a8388a780f816e9d130244f604767d742">router_has_addr</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *addr)</td></tr>
<tr class="separator:a8388a780f816e9d130244f604767d742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e30e57173e3437f4021ae000de6cca"><td class="memItemLeft" align="right" valign="top"><a id="a12e30e57173e3437f4021ae000de6cca"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>router_has_orport</b> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, const <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *orport)</td></tr>
<tr class="separator:a12e30e57173e3437f4021ae000de6cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c6925039da5abc3c264e5f00b72bdb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a42c6925039da5abc3c264e5f00b72bdb">extrainfo_dump_to_string</a> (char **s_out, <a class="el" href="structextrainfo__t.html">extrainfo_t</a> *extrainfo, <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *ident_key, const <a class="el" href="structed25519__keypair__t.html">ed25519_keypair_t</a> *signing_keypair)</td></tr>
<tr class="separator:a42c6925039da5abc3c264e5f00b72bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7836bf949d53e2d964b72447c513d324"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a7836bf949d53e2d964b72447c513d324">is_legal_nickname</a> (const char *s)</td></tr>
<tr class="separator:a7836bf949d53e2d964b72447c513d324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9256a0243b94ae50164d9d0df1df9042"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a9256a0243b94ae50164d9d0df1df9042">is_legal_nickname_or_hexdigest</a> (const char *s)</td></tr>
<tr class="separator:a9256a0243b94ae50164d9d0df1df9042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc033c75201ad04ae8327fcce6edbb4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#abc033c75201ad04ae8327fcce6edbb4c">is_legal_hexdigest</a> (const char *s)</td></tr>
<tr class="separator:abc033c75201ad04ae8327fcce6edbb4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d59ce576eb8716561e1bc6be6f88de1"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a4d59ce576eb8716561e1bc6be6f88de1">router_describe</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri)</td></tr>
<tr class="separator:a4d59ce576eb8716561e1bc6be6f88de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9123f7ab38acbdf103fcb38433311d42"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a9123f7ab38acbdf103fcb38433311d42">node_describe</a> (const <a class="el" href="structnode__t.html">node_t</a> *node)</td></tr>
<tr class="separator:a9123f7ab38acbdf103fcb38433311d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7a73bfdbc7db6767f9b07fe53e9874"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a7b7a73bfdbc7db6767f9b07fe53e9874">routerstatus_describe</a> (const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *rs)</td></tr>
<tr class="separator:a7b7a73bfdbc7db6767f9b07fe53e9874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76d2b00d031ef80969722b77807f2f0c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a76d2b00d031ef80969722b77807f2f0c">extend_info_describe</a> (const <a class="el" href="structextend__info__t.html">extend_info_t</a> *ei)</td></tr>
<tr class="separator:a76d2b00d031ef80969722b77807f2f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f3a022f2ddb8fb15047fb91522000eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a2f3a022f2ddb8fb15047fb91522000eb">router_get_verbose_nickname</a> (char *buf, const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:a2f3a022f2ddb8fb15047fb91522000eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c7520a0a933831876a6b41420540c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a09c7520a0a933831876a6b41420540c1">router_reset_warnings</a> (void)</td></tr>
<tr class="separator:a09c7520a0a933831876a6b41420540c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca20e44509fa800ecf49f25bef1cd52"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a9ca20e44509fa800ecf49f25bef1cd52">router_purpose_to_string</a> (uint8_t p)</td></tr>
<tr class="separator:a9ca20e44509fa800ecf49f25bef1cd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5822c27ea2e28fd0ff19da0dbc612611"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a5822c27ea2e28fd0ff19da0dbc612611">router_purpose_from_string</a> (const char *s)</td></tr>
<tr class="separator:a5822c27ea2e28fd0ff19da0dbc612611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a278cf107b4a9b636b105ec5581b2f427"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a278cf107b4a9b636b105ec5581b2f427">router_free_all</a> (void)</td></tr>
<tr class="separator:a278cf107b4a9b636b105ec5581b2f427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca65441213fb44d6dde8432c943a6c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="router_8c.html#a7ca65441213fb44d6dde8432c943a6c3">router_get_all_orports</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri)</td></tr>
<tr class="separator:a7ca65441213fb44d6dde8432c943a6c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Miscellaneous relay functionality, including RSA key maintenance, generating and uploading server descriptors, picking an address to advertise, and so on. </p>
<p>This module handles the job of deciding whether we are a Tor relay, and if so what kind. (Mostly through functions like server_mode() that inspect an <a class="el" href="structor__options__t.html">or_options_t</a>, but in some cases based on our own capabilities, such as when we are deciding whether to be a directory cache in router_has_bandwidth_to_be_dirserver().)</p>
<p>Also in this module are the functions to generate our own <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> and <a class="el" href="structextrainfo__t.html">extrainfo_t</a>, and to encode those to signed strings for upload to the directory authorities.</p>
<p>This module also handles key maintenance for RSA and Curve25519-ntor keys, and for our TLS context. (These functions should eventually move to <a class="el" href="routerkeys_8c.html" title="Functions and structures to handle generating and maintaining the set of keypairs necessary to be an ...">routerkeys.c</a> along with the code that handles Ed25519 keys now.) </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a0a832609389b143be8385fa39212d958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a832609389b143be8385fa39212d958">&#9670;&nbsp;</a></span>FAST_RETRY_DESCRIPTOR_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FAST_RETRY_DESCRIPTOR_INTERVAL&#160;&#160;&#160;(90*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If our router descriptor seems to be missing or unacceptable according to the authorities, regenerate and reupload it <em>this</em> often. </p>

</div>
</div>
<a id="a59cbdc9027536eba598d9f9f6f0abde1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59cbdc9027536eba598d9f9f6f0abde1">&#9670;&nbsp;</a></span>FORCE_REGENERATE_DESCRIPTOR_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORCE_REGENERATE_DESCRIPTOR_INTERVAL&#160;&#160;&#160;(18*60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If our router descriptor ever goes this long without being regenerated because something changed, we force an immediate regenerate-and-upload. </p>

</div>
</div>
<a id="a3c3d02e45b0d835ccab6569238182608"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c3d02e45b0d835ccab6569238182608">&#9670;&nbsp;</a></span>MAX_BANDWIDTH_CHANGE_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BANDWIDTH_CHANGE_FREQ&#160;&#160;&#160;(3*60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How frequently will we republish our descriptor because of large (factor of 2) shifts in estimated bandwidth? Note: We don't use this constant if our previous bandwidth estimate was exactly 0. </p>

</div>
</div>
<a id="a90d57890ad63643fa76208ba85c78126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90d57890ad63643fa76208ba85c78126">&#9670;&nbsp;</a></span>MIN_BW_TO_ADVERTISE_DIRSERVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_BW_TO_ADVERTISE_DIRSERVER&#160;&#160;&#160;51200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The lower threshold of remaining bandwidth required to advertise (or automatically provide) directory services </p>

</div>
</div>
<a id="a7a392831ecd0ad8a403b1dc0e837d161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a392831ecd0ad8a403b1dc0e837d161">&#9670;&nbsp;</a></span>NODE_DESC_BUF_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODE_DESC_BUF_LEN&#160;&#160;&#160;(<a class="el" href="or_8h.html#a8e619cd29da4289b84f936357bcb9c2c">MAX_VERBOSE_NICKNAME_LEN</a>+4+<a class="el" href="address_8h.html#ac43ab33ae6719d7549644d40fe89bd5f">TOR_ADDR_BUF_LEN</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Longest allowed output of format_node_description, plus 1 character for NUL. This allows space for: "$FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF~xxxxxxxxxxxxxxxxxxx at" " [ffff:ffff:ffff:ffff:ffff:ffff:255.255.255.255]" plus a terminating NUL. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2d62b1eeaa990670a04de8dfbb42ab8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d62b1eeaa990670a04de8dfbb42ab8f">&#9670;&nbsp;</a></span>authdir_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authdir_mode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we believe ourselves to be an authoritative directory server. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a2d62b1eeaa990670a04de8dfbb42ab8f_icgraph.png" border="0" usemap="#router_8c_a2d62b1eeaa990670a04de8dfbb42ab8f_icgraph" alt=""/></div>
<map name="router_8c_a2d62b1eeaa990670a04de8dfbb42ab8f_icgraph" id="router_8c_a2d62b1eeaa990670a04de8dfbb42ab8f_icgraph">
<area shape="rect" id="node2" href="main_8h.html#a4d28e76dd898a85ba3459928e3659954" title="tor_cleanup" alt="" coords="194,5,283,32"/>
<area shape="rect" id="node3" href="rephist_8h.html#ab26034f0ea8dbd53bbe580f88de3adb6" title="rep_history_clean" alt="" coords="177,56,301,83"/>
<area shape="rect" id="node5" href="router_8h.html#aea820da6141eaf03649558d4ec6d5872" title="authdir_mode_publishes\l_statuses" alt="" coords="373,133,536,174"/>
<area shape="rect" id="node7" href="router_8h.html#a652eb5a350d7730a18c7de2605d435f4" title="authdir_mode_tests\l_reachability" alt="" coords="171,158,307,199"/>
<area shape="rect" id="node8" href="router_8h.html#aabab68011cc297e16ad83af25c521bf6" title="authdir_mode_bridge" alt="" coords="167,224,310,251"/>
<area shape="rect" id="node12" href="routerlist_8h.html#a6c38eadb28cf4532a7623c5aa1885cec" title="router_digest_is_trusted\l_dir_type" alt="" coords="158,275,319,317"/>
<area shape="rect" id="node13" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="153,341,324,382"/>
<area shape="rect" id="node4" href="rephist_8h.html#a86f2c4294a880006745284556ecbf7a6" title="rep_hist_dump_stats" alt="" coords="383,56,526,83"/>
<area shape="rect" id="node6" href="dirserv_8h.html#a6c7009f040e0a812c40a6ae0fa6efd79" title="list_server_status_v1" alt="" coords="587,140,733,167"/>
<area shape="rect" id="node9" href="dirserv_8h.html#aac91a65fca7d877c033a594a96203ad7" title="dirserv_test_reachability" alt="" coords="373,212,536,239"/>
<area shape="rect" id="node10" href="networkstatus_8h.html#a522e50eabe88fdafcc39b375b6e4cced" title="networkstatus_getinfo\l_by_purpose" alt="" coords="379,263,530,305"/>
<area shape="rect" id="node11" href="networkstatus_8h.html#ada1c2d5fcccff6ee4e7aff6a497ec2cf" title="networkstatus_dump\l_bridge_status_to_file" alt="" coords="585,263,735,305"/>
<area shape="rect" id="node14" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="372,341,537,382"/>
<area shape="rect" id="node15" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="587,341,733,382"/>
<area shape="rect" id="node16" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="783,341,911,382"/>
</map>
</div>

</div>
</div>
<a id="aabab68011cc297e16ad83af25c521bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabab68011cc297e16ad83af25c521bf6">&#9670;&nbsp;</a></span>authdir_mode_bridge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authdir_mode_bridge </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we believe ourselves to be a bridge authoritative directory server. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aabab68011cc297e16ad83af25c521bf6_cgraph.png" border="0" usemap="#router_8c_aabab68011cc297e16ad83af25c521bf6_cgraph" alt=""/></div>
<map name="router_8c_aabab68011cc297e16ad83af25c521bf6_cgraph" id="router_8c_aabab68011cc297e16ad83af25c521bf6_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="196,5,296,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aabab68011cc297e16ad83af25c521bf6_icgraph.png" border="0" usemap="#router_8c_aabab68011cc297e16ad83af25c521bf6_icgraph" alt=""/></div>
<map name="router_8c_aabab68011cc297e16ad83af25c521bf6_icgraph" id="router_8c_aabab68011cc297e16ad83af25c521bf6_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#aac91a65fca7d877c033a594a96203ad7" title="dirserv_test_reachability" alt="" coords="196,5,359,32"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#a522e50eabe88fdafcc39b375b6e4cced" title="networkstatus_getinfo\l_by_purpose" alt="" coords="202,57,353,98"/>
<area shape="rect" id="node5" href="router_8h.html#aea820da6141eaf03649558d4ec6d5872" title="authdir_mode_publishes\l_statuses" alt="" coords="196,122,359,163"/>
<area shape="rect" id="node4" href="networkstatus_8h.html#ada1c2d5fcccff6ee4e7aff6a497ec2cf" title="networkstatus_dump\l_bridge_status_to_file" alt="" coords="407,57,556,98"/>
<area shape="rect" id="node6" href="dirserv_8h.html#a6c7009f040e0a812c40a6ae0fa6efd79" title="list_server_status_v1" alt="" coords="408,129,555,156"/>
</map>
</div>

</div>
</div>
<a id="a8522dfca1851365846ddef293a416656"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8522dfca1851365846ddef293a416656">&#9670;&nbsp;</a></span>authdir_mode_handles_descs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authdir_mode_handles_descs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>purpose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are an authoritative directory server that is authoritative about receiving and serving descriptors of type <b>purpose</b> on its dirport. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a8522dfca1851365846ddef293a416656_icgraph.png" border="0" usemap="#router_8c_a8522dfca1851365846ddef293a416656_icgraph" alt=""/></div>
<map name="router_8c_a8522dfca1851365846ddef293a416656_icgraph" id="router_8c_a8522dfca1851365846ddef293a416656_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a0c97fbc43a4398a45feb2fafa3d42fc1" title="dirserv_should_launch\l_reachability_test" alt="" coords="209,5,360,47"/>
<area shape="rect" id="node3" href="routerlist_8h.html#ab1878aef0f1dd92c783d5477248b985d" title="router_add_to_routerlist" alt="" coords="205,71,364,98"/>
</map>
</div>

</div>
</div>
<a id="aea820da6141eaf03649558d4ec6d5872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea820da6141eaf03649558d4ec6d5872">&#9670;&nbsp;</a></span>authdir_mode_publishes_statuses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authdir_mode_publishes_statuses </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are an authoritative directory server that publishes its own network statuses. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aea820da6141eaf03649558d4ec6d5872_cgraph.png" border="0" usemap="#router_8c_aea820da6141eaf03649558d4ec6d5872_cgraph" alt=""/></div>
<map name="router_8c_aea820da6141eaf03649558d4ec6d5872_cgraph" id="router_8c_aea820da6141eaf03649558d4ec6d5872_cgraph">
<area shape="rect" id="node2" href="router_8c.html#aabab68011cc297e16ad83af25c521bf6" title="authdir_mode_bridge" alt="" coords="216,5,359,32"/>
<area shape="rect" id="node3" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="407,31,507,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aea820da6141eaf03649558d4ec6d5872_icgraph.png" border="0" usemap="#router_8c_aea820da6141eaf03649558d4ec6d5872_icgraph" alt=""/></div>
<map name="router_8c_aea820da6141eaf03649558d4ec6d5872_icgraph" id="router_8c_aea820da6141eaf03649558d4ec6d5872_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a6c7009f040e0a812c40a6ae0fa6efd79" title="list_server_status_v1" alt="" coords="216,13,363,39"/>
</map>
</div>

</div>
</div>
<a id="a652eb5a350d7730a18c7de2605d435f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a652eb5a350d7730a18c7de2605d435f4">&#9670;&nbsp;</a></span>authdir_mode_tests_reachability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authdir_mode_tests_reachability </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are an authoritative directory server that tests reachability of the descriptors it learns about. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a652eb5a350d7730a18c7de2605d435f4_cgraph.png" border="0" usemap="#router_8c_a652eb5a350d7730a18c7de2605d435f4_cgraph" alt=""/></div>
<map name="router_8c_a652eb5a350d7730a18c7de2605d435f4_cgraph" id="router_8c_a652eb5a350d7730a18c7de2605d435f4_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="189,13,289,39"/>
</map>
</div>

</div>
</div>
<a id="ab9b5c1a252539d60ae2cfaca3a06c4e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9b5c1a252539d60ae2cfaca3a06c4e7">&#9670;&nbsp;</a></span>check_descriptor_bandwidth_changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_descriptor_bandwidth_changed </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether bandwidth has changed a lot since the last time we announced bandwidth. If so, mark our descriptor dirty. </p>

</div>
</div>
<a id="a59446788bf67e78d0d930bcdc65f7717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59446788bf67e78d0d930bcdc65f7717">&#9670;&nbsp;</a></span>check_descriptor_ipaddress_changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_descriptor_ipaddress_changed </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether our own address as defined by the Address configuration has changed. This is for routers that get their address from a service like dyndns. If our address has changed, mark our descriptor dirty. </p>

</div>
</div>
<a id="a98317a030cb30700f60c8444d676087b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98317a030cb30700f60c8444d676087b">&#9670;&nbsp;</a></span>check_whether_dirport_reachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_whether_dirport_reachable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 0 if we need to do a DirPort reachability check, because:</p><ul>
<li>no reachability check has been done yet, or</li>
<li>we've initiated reachability checks, but none have succeeded. Return 1 if we don't need to do a DirPort reachability check, because:</li>
<li>we've seen a successful reachability check, or</li>
<li>there is no DirPort set, or</li>
<li>AssumeReachable is set, or</li>
<li>the network is disabled. </li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a98317a030cb30700f60c8444d676087b_icgraph.png" border="0" usemap="#router_8c_a98317a030cb30700f60c8444d676087b_icgraph" alt=""/></div>
<map name="router_8c_a98317a030cb30700f60c8444d676087b_icgraph" id="router_8c_a98317a030cb30700f60c8444d676087b_icgraph">
<area shape="rect" id="node2" href="rephist_8h.html#a890009e83c2e90292a435526b8111727" title="rep_hist_circbuilding\l_dormant" alt="" coords="207,27,347,68"/>
<area shape="rect" id="node3" href="dirserv_8h.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="395,27,541,68"/>
<area shape="rect" id="node4" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="1247,5,1375,47"/>
<area shape="rect" id="node5" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="808,34,1005,61"/>
<area shape="rect" id="node7" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="589,85,760,127"/>
<area shape="rect" id="node6" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="1053,35,1199,76"/>
<area shape="rect" id="node8" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="824,85,989,127"/>
</map>
</div>

</div>
</div>
<a id="a8b917b11fb2945b314286a6a567e34c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b917b11fb2945b314286a6a567e34c3">&#9670;&nbsp;</a></span>check_whether_orport_reachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_whether_orport_reachable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 0 if we need to do an ORPort reachability check, because:</p><ul>
<li>no reachability check has been done yet, or</li>
<li>we've initiated reachability checks, but none have succeeded. Return 1 if we don't need to do an ORPort reachability check, because:</li>
<li>we've seen a successful reachability check, or</li>
<li>AssumeReachable is set, or</li>
<li>the network is disabled. </li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a8b917b11fb2945b314286a6a567e34c3_icgraph.png" border="0" usemap="#router_8c_a8b917b11fb2945b314286a6a567e34c3_icgraph" alt=""/></div>
<map name="router_8c_a8b917b11fb2945b314286a6a567e34c3_icgraph" id="router_8c_a8b917b11fb2945b314286a6a567e34c3_icgraph">
<area shape="rect" id="node2" href="rephist_8h.html#a890009e83c2e90292a435526b8111727" title="rep_hist_circbuilding\l_dormant" alt="" coords="204,27,344,68"/>
<area shape="rect" id="node3" href="dirserv_8h.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="392,27,539,68"/>
<area shape="rect" id="node4" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="1244,5,1372,47"/>
<area shape="rect" id="node5" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="805,34,1003,61"/>
<area shape="rect" id="node7" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="587,85,757,127"/>
<area shape="rect" id="node6" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="1051,35,1196,76"/>
<area shape="rect" id="node8" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="821,85,987,127"/>
</map>
</div>

</div>
</div>
<a id="a9cee44ce5a0aca64e344cd6b326a3ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cee44ce5a0aca64e344cd6b326a3ac3">&#9670;&nbsp;</a></span>client_identity_key_is_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int client_identity_key_is_set </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff the client identity key has been set. </p>

</div>
</div>
<a id="a0a1aa020a168e42bfaa9edd016839d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a1aa020a168e42bfaa9edd016839d6f">&#9670;&nbsp;</a></span>consider_publishable_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void consider_publishable_server </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initiate server descriptor upload as reasonable (if server is publishable, etc). <b>force</b> is as for router_upload_dir_desc_to_dirservers.</p>
<p>We need to rebuild the descriptor if it's dirty even if we're not uploading, because our reachability testing <em>uses</em> our descriptor to determine what IP address and ports to test. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a0a1aa020a168e42bfaa9edd016839d6f_cgraph.png" border="0" usemap="#router_8c_a0a1aa020a168e42bfaa9edd016839d6f_cgraph" alt=""/></div>
<map name="router_8c_a0a1aa020a168e42bfaa9edd016839d6f_cgraph" id="router_8c_a0a1aa020a168e42bfaa9edd016839d6f_cgraph">
<area shape="rect" id="node2" href="router_8c.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="196,46,360,73"/>
<area shape="rect" id="node3" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="408,39,555,80"/>
<area shape="rect" id="node4" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="603,39,749,80"/>
<area shape="rect" id="node5" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="815,5,951,47"/>
<area shape="rect" id="node6" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="797,71,968,112"/>
</map>
</div>

</div>
</div>
<a id="a4c647445efb73188e0ba32510afbee0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c647445efb73188e0ba32510afbee0d">&#9670;&nbsp;</a></span>construct_ntor_key_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdi__digest256__map__t.html">di_digest256_map_t</a>* construct_ntor_key_map </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a map from KEYID (the key itself) to keypairs for use in the ntor handshake. Must only be called from the main thread. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a4c647445efb73188e0ba32510afbee0d_cgraph.png" border="0" usemap="#router_8c_a4c647445efb73188e0ba32510afbee0d_cgraph" alt=""/></div>
<map name="router_8c_a4c647445efb73188e0ba32510afbee0d_cgraph" id="router_8c_a4c647445efb73188e0ba32510afbee0d_cgraph">
<area shape="rect" id="node2" href="util_8c.html#a7c5079074e649dc0369225eca3073f7d" title="tor_mem_is_zero" alt="" coords="219,5,341,32"/>
<area shape="rect" id="node3" href="di__ops_8c.html#a0aaf282503417e5cc43bd18eb9cdd667" title="dimap_add_entry" alt="" coords="219,56,341,83"/>
<area shape="rect" id="node4" href="di__ops_8c.html#a032d26f93f592b1cf781c8f147b2e38e" title="dimap_search" alt="" coords="389,56,492,83"/>
<area shape="rect" id="node5" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="540,56,627,83"/>
</map>
</div>

</div>
</div>
<a id="ab23297b12b098da9eac98126a587aa3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab23297b12b098da9eac98126a587aa3b">&#9670;&nbsp;</a></span>dir_server_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dir_server_mode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if we are configured to accept either relay or directory requests from clients and we aren't at risk of exceeding our bandwidth limits, thus we should be a directory server. If not, return 0. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_ab23297b12b098da9eac98126a587aa3b_icgraph.png" border="0" usemap="#router_8c_ab23297b12b098da9eac98126a587aa3b_icgraph" alt=""/></div>
<map name="router_8c_ab23297b12b098da9eac98126a587aa3b_icgraph" id="router_8c_ab23297b12b098da9eac98126a587aa3b_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a0b84786e17352524036694baf1955167" title="directory_fetches_from\l_authorities" alt="" coords="185,74,339,115"/>
<area shape="rect" id="node7" href="dirserv_8h.html#a5a9cf7f465217dbc8142aaf11384abbf" title="directory_caches_unknown\l_auth_certs" alt="" coords="172,187,352,229"/>
<area shape="rect" id="node8" href="dirserv_8h.html#a57e2ff1ad2ea65abe9b969ad3d76a418" title="directory_caches_dir_info" alt="" coords="177,253,347,280"/>
<area shape="rect" id="node16" href="dirserv_8h.html#a7923860b3a8c27fa48c4dcec6ef6939f" title="directory_permits_begindir\l_requests" alt="" coords="175,305,349,346"/>
<area shape="rect" id="node3" href="directory_8c.html#a2dcb34e25124200a8694ef07275a50b2" title="MOCK_IMPL" alt="" coords="439,5,539,32"/>
<area shape="rect" id="node4" href="dirserv_8h.html#ab38d643312052d4bfdb7d49dcba344a6" title="directory_fetches_dir\l_info_early" alt="" coords="418,57,561,98"/>
<area shape="rect" id="node6" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="1307,166,1435,207"/>
<area shape="rect" id="node5" href="routerlist_8h.html#a33e8618001c42bd50575051362aaffa2" title="launch_descriptor_downloads" alt="" coords="627,64,820,91"/>
<area shape="rect" id="node9" href="dirserv_8h.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="416,217,563,258"/>
<area shape="rect" id="node14" href="microdesc_8h.html#ad9c983a76a2f31a6a843f4df9be7de1d" title="we_fetch_microdescriptors" alt="" coords="400,283,579,309"/>
<area shape="rect" id="node15" href="microdesc_8h.html#a2667d23ef05f514b5bf916791b4a6bbd" title="we_fetch_router_descriptors" alt="" coords="630,341,817,368"/>
<area shape="rect" id="node10" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="868,224,1065,251"/>
<area shape="rect" id="node12" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="638,275,809,317"/>
<area shape="rect" id="node11" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="1113,225,1259,266"/>
<area shape="rect" id="node13" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="884,275,1049,317"/>
</map>
</div>

</div>
</div>
<a id="a71d8f6e0ed3558284e43371894abb504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d8f6e0ed3558284e43371894abb504">&#9670;&nbsp;</a></span>dup_onion_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dup_onion_keys </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> **&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> **&#160;</td>
          <td class="paramname"><em>last</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store a full copy of the current onion key into *<b>key</b>, and a full copy of the most recent onion key into *<b>last</b>. Store NULL into a pointer if the corresponding key does not exist. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a71d8f6e0ed3558284e43371894abb504_cgraph.png" border="0" usemap="#router_8c_a71d8f6e0ed3558284e43371894abb504_cgraph" alt=""/></div>
<map name="router_8c_a71d8f6e0ed3558284e43371894abb504_cgraph" id="router_8c_a71d8f6e0ed3558284e43371894abb504_cgraph">
<area shape="rect" id="node2" href="compat__pthreads_8c.html#a8bfcc96866bdf76508915db8b252f746" title="tor_mutex_acquire" alt="" coords="174,5,303,32"/>
<area shape="rect" id="node3" href="crypto__rsa_8c.html#a7ef622a79ac33d4b2dcce1be0bd27e71" title="crypto_pk_copy_full" alt="" coords="169,56,308,83"/>
<area shape="rect" id="node4" href="compat__pthreads_8c.html#a3fc2298a8cb49803528daa6d35091372" title="tor_mutex_release" alt="" coords="174,107,303,133"/>
</map>
</div>

</div>
</div>
<a id="a9b04ba161c869beb75a2a1d6f0d44f59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b04ba161c869beb75a2a1d6f0d44f59">&#9670;&nbsp;</a></span>expire_old_onion_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expire_old_onion_keys </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Expire our old set of onion keys. This is done by setting last_curve25519_onion_key and lastonionkey to all zero's and NULL respectively.</p>
<p>This function does not perform any grace period checks for the old onion keys. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a9b04ba161c869beb75a2a1d6f0d44f59_cgraph.png" border="0" usemap="#router_8c_a9b04ba161c869beb75a2a1d6f0d44f59_cgraph" alt=""/></div>
<map name="router_8c_a9b04ba161c869beb75a2a1d6f0d44f59_cgraph" id="router_8c_a9b04ba161c869beb75a2a1d6f0d44f59_cgraph">
<area shape="rect" id="node2" href="compat__pthreads_8c.html#a8bfcc96866bdf76508915db8b252f746" title="tor_mutex_acquire" alt="" coords="208,5,337,32"/>
</map>
</div>

</div>
</div>
<a id="a76d2b00d031ef80969722b77807f2f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76d2b00d031ef80969722b77807f2f0c">&#9670;&nbsp;</a></span>extend_info_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* extend_info_describe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structextend__info__t.html">extend_info_t</a> *&#160;</td>
          <td class="paramname"><em>ei</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a human-readable description of the <a class="el" href="structextend__info__t.html">extend_info_t</a> <b>ei</b>.</p>
<p>This function is not thread-safe. Each call to this function invalidates previous values returned by this function. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a76d2b00d031ef80969722b77807f2f0c_cgraph.png" border="0" usemap="#router_8c_a76d2b00d031ef80969722b77807f2f0c_cgraph" alt=""/></div>
<map name="router_8c_a76d2b00d031ef80969722b77807f2f0c_cgraph" id="router_8c_a76d2b00d031ef80969722b77807f2f0c_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd" title="format_node_description" alt="" coords="199,56,363,83"/>
<area shape="rect" id="node3" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="411,5,524,32"/>
<area shape="rect" id="node4" href="address_8c.html#a2de0e7c83f59d6235f74e76147db6e29" title="tor_addr_to_str" alt="" coords="413,56,522,83"/>
<area shape="rect" id="node5" href="address_8c.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="419,107,516,133"/>
<area shape="rect" id="node6" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="572,107,659,133"/>
<area shape="rect" id="node7" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="707,107,801,133"/>
</map>
</div>

</div>
</div>
<a id="a42c6925039da5abc3c264e5f00b72bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42c6925039da5abc3c264e5f00b72bdb">&#9670;&nbsp;</a></span>extrainfo_dump_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int extrainfo_dump_to_string </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>s_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structextrainfo__t.html">extrainfo_t</a> *&#160;</td>
          <td class="paramname"><em>extrainfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>ident_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structed25519__keypair__t.html">ed25519_keypair_t</a> *&#160;</td>
          <td class="paramname"><em>signing_keypair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the contents of <b>extrainfo</b> and aggregated statistics to *<b>s_out</b>, signing them with <b>ident_key</b>. Return 0 on success, negative on failure. </p>

</div>
</div>
<a id="a54ab47db660fac7decf06081ba29f8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54ab47db660fac7decf06081ba29f8dd">&#9670;&nbsp;</a></span>format_node_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * format_node_description </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_named</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nickname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr32h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use <b>buf</b> (which must be at least NODE_DESC_BUF_LEN bytes long) to hold a human-readable description of a node with identity digest <b>id_digest</b>, named-status <b>is_named</b>, nickname <b>nickname</b>, and address <b>addr</b> or <b>addr32h</b>.</p>
<p>The <b>nickname</b> and <b>addr</b> fields are optional and may be set to NULL. The <b>addr32h</b> field is optional and may be set to 0.</p>
<p>Return a pointer to the front of <b>buf</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a54ab47db660fac7decf06081ba29f8dd_cgraph.png" border="0" usemap="#router_8c_a54ab47db660fac7decf06081ba29f8dd_cgraph" alt=""/></div>
<map name="router_8c_a54ab47db660fac7decf06081ba29f8dd_cgraph" id="router_8c_a54ab47db660fac7decf06081ba29f8dd_cgraph">
<area shape="rect" id="node2" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="217,5,331,32"/>
<area shape="rect" id="node3" href="address_8c.html#a2de0e7c83f59d6235f74e76147db6e29" title="tor_addr_to_str" alt="" coords="219,56,329,83"/>
<area shape="rect" id="node4" href="address_8c.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="225,107,323,133"/>
<area shape="rect" id="node5" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="379,107,465,133"/>
<area shape="rect" id="node6" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="513,107,608,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a54ab47db660fac7decf06081ba29f8dd_icgraph.png" border="0" usemap="#router_8c_a54ab47db660fac7decf06081ba29f8dd_icgraph" alt=""/></div>
<map name="router_8c_a54ab47db660fac7decf06081ba29f8dd_icgraph" id="router_8c_a54ab47db660fac7decf06081ba29f8dd_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a4d59ce576eb8716561e1bc6be6f88de1" title="router_describe" alt="" coords="235,13,346,39"/>
<area shape="rect" id="node4" href="router_8h.html#a9123f7ab38acbdf103fcb38433311d42" title="node_describe" alt="" coords="237,63,344,90"/>
<area shape="rect" id="node5" href="router_8h.html#ab375311f5454761bc6691091cdf50847" title="routerstatus_describe" alt="" coords="217,114,364,141"/>
<area shape="rect" id="node6" href="router_8h.html#a76d2b00d031ef80969722b77807f2f0c" title="extend_info_describe" alt="" coords="218,165,363,191"/>
<area shape="rect" id="node3" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="412,5,572,47"/>
</map>
</div>

</div>
</div>
<a id="a23d191ef7dc168a941819724e166791d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d191ef7dc168a941819724e166791d">&#9670;&nbsp;</a></span>get_my_v3_authority_signing_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a>* get_my_v3_authority_signing_key </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the v3 signing key for this v3 (voting) authority, or NULL if we have no such key. </p>

</div>
</div>
<a id="aa3cf620c6ba1423c14c6cb57955e0408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cf620c6ba1423c14c6cb57955e0408">&#9670;&nbsp;</a></span>get_my_v3_legacy_cert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a>* get_my_v3_legacy_cert </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If we're an authority, and we're using a legacy authority identity key for emergency migration purposes, return the certificate associated with that key. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aa3cf620c6ba1423c14c6cb57955e0408_icgraph.png" border="0" usemap="#router_8c_aa3cf620c6ba1423c14c6cb57955e0408_icgraph" alt=""/></div>
<map name="router_8c_aa3cf620c6ba1423c14c6cb57955e0408_icgraph" id="router_8c_aa3cf620c6ba1423c14c6cb57955e0408_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#ab24c5c3729a4bf122f277447df1c5e8c" title="authority_cert_get\l_by_sk_digest" alt="" coords="213,5,340,47"/>
</map>
</div>

</div>
</div>
<a id="a30add241c8c3a33066028cadf5a1bd99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30add241c8c3a33066028cadf5a1bd99">&#9670;&nbsp;</a></span>get_my_v3_legacy_signing_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a>* get_my_v3_legacy_signing_key </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If we're an authority, and we're using a legacy authority identity key for emergency migration purposes, return that key. </p>

</div>
</div>
<a id="a18f3561f96c3a73512e97860624b9cc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18f3561f96c3a73512e97860624b9cc1">&#9670;&nbsp;</a></span>get_onion_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a>* get_onion_key </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current onion key. Requires that the onion key has been loaded or generated. </p>

</div>
</div>
<a id="a51a01b088538e0c0a72535474724bcd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51a01b088538e0c0a72535474724bcd9">&#9670;&nbsp;</a></span>get_onion_key_grace_period()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_onion_key_grace_period </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the grace period of an onion key in seconds. This value is defined by the network consesus parameter "onion-key-grace-period-days", but the value is converted to seconds. </p>

</div>
</div>
<a id="ab9dc576492cd81658d909e790c138904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9dc576492cd81658d909e790c138904">&#9670;&nbsp;</a></span>get_onion_key_lifetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_onion_key_lifetime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current lifetime of an onion key in seconds. This value is defined by the network consesus parameter "onion-key-rotation-days", but the value is converted to seconds. </p>

</div>
</div>
<a id="a875c79d86af54c7cd80c8e9844d8d347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875c79d86af54c7cd80c8e9844d8d347">&#9670;&nbsp;</a></span>get_onion_key_set_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t get_onion_key_set_at </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the time when the onion key was last set. This is either the time when the process launched, or the time of the most recent key rotation since the process launched. </p>

</div>
</div>
<a id="af8911501c12d293f7fe03a101f3563ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8911501c12d293f7fe03a101f3563ba">&#9670;&nbsp;</a></span>get_platform_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC void get_platform_str </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>platform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set <b>platform</b> (max length <b>len</b>) to a NUL-terminated short string describing the version of Tor and the operating system we're currently running on. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_af8911501c12d293f7fe03a101f3563ba_cgraph.png" border="0" usemap="#router_8c_af8911501c12d293f7fe03a101f3563ba_cgraph" alt=""/></div>
<map name="router_8c_af8911501c12d293f7fe03a101f3563ba_cgraph" id="router_8c_af8911501c12d293f7fe03a101f3563ba_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="189,5,275,32"/>
<area shape="rect" id="node4" href="config_8c.html#a229118cbc4221ec841824b17f7c82b06" title="get_short_version" alt="" coords="169,56,295,83"/>
<area shape="rect" id="node3" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="343,5,437,32"/>
<area shape="rect" id="node5" href="compat_8c.html#ade97970c1d8a691241adac739c4f9b12" title="tor_asprintf" alt="" coords="347,56,433,83"/>
<area shape="rect" id="node6" href="compat_8c.html#a5ef7a08e8b543c0d61f9ef1081d4c1ea" title="tor_vasprintf" alt="" coords="485,56,580,83"/>
</map>
</div>

</div>
</div>
<a id="a8fb30f05264b37bff37fe8824b4d854b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb30f05264b37bff37fe8824b4d854b">&#9670;&nbsp;</a></span>get_server_identity_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a>* get_server_identity_key </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current server identity key; requires that the key has been set, and that we are running as a Tor server. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a8fb30f05264b37bff37fe8824b4d854b_icgraph.png" border="0" usemap="#router_8c_a8fb30f05264b37bff37fe8824b4d854b_icgraph" alt=""/></div>
<map name="router_8c_a8fb30f05264b37bff37fe8824b4d854b_icgraph" id="router_8c_a8fb30f05264b37bff37fe8824b4d854b_icgraph">
<area shape="rect" id="node2" href="channel_8c.html#ae9d6f1fad148b483bdb8d2443dab0718" title="MOCK_IMPL" alt="" coords="213,5,313,32"/>
</map>
</div>

</div>
</div>
<a id="aef981f743b968779701f12f26922d523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef981f743b968779701f12f26922d523">&#9670;&nbsp;</a></span>get_tlsclient_identity_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a>* get_tlsclient_identity_key </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current client identity key for use on outgoing TLS connections; requires that the key has been set. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aef981f743b968779701f12f26922d523_icgraph.png" border="0" usemap="#router_8c_aef981f743b968779701f12f26922d523_icgraph" alt=""/></div>
<map name="router_8c_aef981f743b968779701f12f26922d523_icgraph" id="router_8c_aef981f743b968779701f12f26922d523_icgraph">
<area shape="rect" id="node2" href="channel_8c.html#ae9d6f1fad148b483bdb8d2443dab0718" title="MOCK_IMPL" alt="" coords="223,5,323,32"/>
</map>
</div>

</div>
</div>
<a id="a7ca8d566f45ef49fb6fd7358c235a420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca8d566f45ef49fb6fd7358c235a420">&#9670;&nbsp;</a></span>init_key_from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a>* init_key_from_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>generate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>log_greeting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to read an RSA key from <b>fname</b>. If <b>fname</b> doesn't exist and <b>generate</b> is true, create a new RSA key and save it in <b>fname</b>. Return the read/created key, or NULL on error. Log all errors at level <b>severity</b>. If <b>log_greeting</b> is non-zero and a new key was created, log_new_relay_greeting() is called. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a7ca8d566f45ef49fb6fd7358c235a420_cgraph.png" border="0" usemap="#router_8c_a7ca8d566f45ef49fb6fd7358c235a420_cgraph" alt=""/></div>
<map name="router_8c_a7ca8d566f45ef49fb6fd7358c235a420_cgraph" id="router_8c_a7ca8d566f45ef49fb6fd7358c235a420_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a048192107dfd3f8f22b9e599e45d0b34" title="tor_log" alt="" coords="188,5,249,32"/>
<area shape="rect" id="node3" href="util_8c.html#aae26b1614b89d2c4bbfe5a7c2dab7c76" title="file_status" alt="" coords="177,56,260,83"/>
</map>
</div>

</div>
</div>
<a id="a500b19001501e67b572ae39547800eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a500b19001501e67b572ae39547800eb9">&#9670;&nbsp;</a></span>init_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int init_keys </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize all OR private keys, and the TLS context, as necessary. On OPs, this only initializes the tls context. Return 0 on success, or -1 if Tor should die. </p>

</div>
</div>
<a id="abc033c75201ad04ae8327fcce6edbb4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc033c75201ad04ae8327fcce6edbb4c">&#9670;&nbsp;</a></span>is_legal_hexdigest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_legal_hexdigest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>s</b> is a valid hex-encoded identity-key digest. (That is, an optional $, followed by 40 hex characters, followed by either nothing, or = or ~ followed by a nickname, or a character other than =, ~, or a hex character.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_abc033c75201ad04ae8327fcce6edbb4c_cgraph.png" border="0" usemap="#router_8c_abc033c75201ad04ae8327fcce6edbb4c_cgraph" alt=""/></div>
<map name="router_8c_abc033c75201ad04ae8327fcce6edbb4c_cgraph" id="router_8c_abc033c75201ad04ae8327fcce6edbb4c_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a7836bf949d53e2d964b72447c513d324" title="is_legal_nickname" alt="" coords="183,5,312,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_abc033c75201ad04ae8327fcce6edbb4c_icgraph.png" border="0" usemap="#router_8c_abc033c75201ad04ae8327fcce6edbb4c_icgraph" alt=""/></div>
<map name="router_8c_abc033c75201ad04ae8327fcce6edbb4c_icgraph" id="router_8c_abc033c75201ad04ae8327fcce6edbb4c_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a9256a0243b94ae50164d9d0df1df9042" title="is_legal_nickname_or\l_hexdigest" alt="" coords="183,5,329,47"/>
<area shape="rect" id="node3" href="routerset_8c.html#a645fa8cb91eabbc3b84e42a65486caab" title="routerset_parse" alt="" coords="200,71,312,98"/>
<area shape="rect" id="node4" href="routerset_8c.html#a9cfdaa8f69e201198715aed8d9ea2883" title="routerset_union" alt="" coords="377,71,488,98"/>
</map>
</div>

</div>
</div>
<a id="a7836bf949d53e2d964b72447c513d324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7836bf949d53e2d964b72447c513d324">&#9670;&nbsp;</a></span>is_legal_nickname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_legal_nickname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>s</b> is a valid server nickname. (That is, a string containing between 1 and MAX_NICKNAME_LEN characters from LEGAL_NICKNAME_CHARACTERS.) </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a7836bf949d53e2d964b72447c513d324_icgraph.png" border="0" usemap="#router_8c_a7836bf949d53e2d964b72447c513d324_icgraph" alt=""/></div>
<map name="router_8c_a7836bf949d53e2d964b72447c513d324_icgraph" id="router_8c_a7836bf949d53e2d964b72447c513d324_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a9256a0243b94ae50164d9d0df1df9042" title="is_legal_nickname_or\l_hexdigest" alt="" coords="360,5,507,47"/>
<area shape="rect" id="node3" href="router_8h.html#abc033c75201ad04ae8327fcce6edbb4c" title="is_legal_hexdigest" alt="" coords="183,63,312,90"/>
<area shape="rect" id="node4" href="routerset_8c.html#a645fa8cb91eabbc3b84e42a65486caab" title="routerset_parse" alt="" coords="377,71,489,98"/>
<area shape="rect" id="node5" href="routerset_8c.html#a9cfdaa8f69e201198715aed8d9ea2883" title="routerset_union" alt="" coords="555,71,665,98"/>
</map>
</div>

</div>
</div>
<a id="a9256a0243b94ae50164d9d0df1df9042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9256a0243b94ae50164d9d0df1df9042">&#9670;&nbsp;</a></span>is_legal_nickname_or_hexdigest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_legal_nickname_or_hexdigest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>s</b> is a valid server nickname or hex-encoded identity-key digest. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a9256a0243b94ae50164d9d0df1df9042_cgraph.png" border="0" usemap="#router_8c_a9256a0243b94ae50164d9d0df1df9042_cgraph" alt=""/></div>
<map name="router_8c_a9256a0243b94ae50164d9d0df1df9042_cgraph" id="router_8c_a9256a0243b94ae50164d9d0df1df9042_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a7836bf949d53e2d964b72447c513d324" title="is_legal_nickname" alt="" coords="377,13,507,39"/>
<area shape="rect" id="node3" href="router_8c.html#abc033c75201ad04ae8327fcce6edbb4c" title="is_legal_hexdigest" alt="" coords="200,38,329,65"/>
</map>
</div>

</div>
</div>
<a id="acf0970ca0d9c40eadbf984231328be76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf0970ca0d9c40eadbf984231328be76">&#9670;&nbsp;</a></span>mark_my_descriptor_dirty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_my_descriptor_dirty </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call when the current descriptor is out of date. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_acf0970ca0d9c40eadbf984231328be76_icgraph.png" border="0" usemap="#router_8c_acf0970ca0d9c40eadbf984231328be76_icgraph" alt=""/></div>
<map name="router_8c_acf0970ca0d9c40eadbf984231328be76_icgraph" id="router_8c_acf0970ca0d9c40eadbf984231328be76_icgraph">
<area shape="rect" id="node2" href="router_8h.html#ad20dfba342b27eb97810f9141d5c14a1" title="mark_my_descriptor\l_dirty_if_too_old" alt="" coords="193,5,333,47"/>
</map>
</div>

</div>
</div>
<a id="ad20dfba342b27eb97810f9141d5c14a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad20dfba342b27eb97810f9141d5c14a1">&#9670;&nbsp;</a></span>mark_my_descriptor_dirty_if_too_old()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_my_descriptor_dirty_if_too_old </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark descriptor out of date if it's been "too long" since we last tried to upload one. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_ad20dfba342b27eb97810f9141d5c14a1_cgraph.png" border="0" usemap="#router_8c_ad20dfba342b27eb97810f9141d5c14a1_cgraph" alt=""/></div>
<map name="router_8c_ad20dfba342b27eb97810f9141d5c14a1_cgraph" id="router_8c_ad20dfba342b27eb97810f9141d5c14a1_cgraph">
<area shape="rect" id="node2" href="router_8c.html#acf0970ca0d9c40eadbf984231328be76" title="mark_my_descriptor\l_dirty" alt="" coords="193,5,333,47"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#aae8d735fe9d889755f96e927f9e9c967" title="networkstatus_vote\l_find_entry" alt="" coords="195,71,331,112"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#a041c69e1d5a274d07c162f9185605cd0" title="networkstatus_vote\l_find_mutable_entry" alt="" coords="381,71,520,112"/>
<area shape="rect" id="node5" href="container_8c.html#a6722b8c6ca501b524958b3cdac2bc70c" title="smartlist_bsearch" alt="" coords="609,49,735,75"/>
<area shape="rect" id="node7" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee" title="compare_digest_to_routerstatus\l_entry" alt="" coords="568,100,776,141"/>
<area shape="rect" id="node6" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119" title="smartlist_bsearch_idx" alt="" coords="824,49,973,75"/>
<area shape="rect" id="node8" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="849,107,948,134"/>
</map>
</div>

</div>
</div>
<a id="a6b3989f239a7c716e23e397c2dbecb4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b3989f239a7c716e23e397c2dbecb4b">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">get_my_v3_authority_cert&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the key certificate for this v3 (voting) authority, or NULL if we have no such certificate. </p>

</div>
</div>
<a id="aa04d0b378d4bf9995ebbdc2c84d03561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa04d0b378d4bf9995ebbdc2c84d03561">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">server_mode&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structor__options__t.html">or_options_t</a> *options)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are trying to be a server. </p>

</div>
</div>
<a id="a6332bfb34c12a7b4a2c16aa8a3abdd7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6332bfb34c12a7b4a2c16aa8a3abdd7b">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">public_server_mode&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structor__options__t.html">or_options_t</a> *options)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are trying to be a non-bridge server. </p>

</div>
</div>
<a id="a724ccb2800a474e36ae4a808944446e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a724ccb2800a474e36ae4a808944446e8">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">advertised_server_mode&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we have published our descriptor lately. </p>

</div>
</div>
<a id="ad510701c8387a948e0694f40d866b2d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad510701c8387a948e0694f40d866b2d4">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_my_exit_policy_is_reject_star&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff my exit policy is reject *:*. Return -1 if we don't have a descriptor </p>

</div>
</div>
<a id="ad474de0d17eaff8d2d6ac9f83621d4fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad474de0d17eaff8d2d6ac9f83621d4fc">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_get_my_routerinfo&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a routerinfo for this OR, rebuilding a fresh one if necessary. Return NULL on error, or if called on an OP. </p>

</div>
</div>
<a id="af68f27a8a221a32372f4798fb66c58f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af68f27a8a221a32372f4798fb66c58f3">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_get_my_routerinfo_with_err&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(int *err)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return routerinfo of this OR. Rebuild it from scratch if needed. Set <b>*err</b> to 0 on success or to appropriate TOR_ROUTERINFO_ERROR_* value on failure. </p>

</div>
</div>
<a id="a2732ff3306e95d3579956be55f9cdc6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2732ff3306e95d3579956be55f9cdc6d">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_pick_published_address&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structor__options__t.html">or_options_t</a> *options, uint32_t *addr, int cache_only)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Make a current best guess at our address, either because it's configured in torrc, or because we've learned it from dirserver headers. Place the answer in *<b>addr</b> and return 0 on success, else return -1 if we have no guess.</p>
<p>If <b>cache_only</b> is true, just return any cached answers, and don't try to get any new answers. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a2732ff3306e95d3579956be55f9cdc6d_cgraph.png" border="0" usemap="#router_8c_a2732ff3306e95d3579956be55f9cdc6d_cgraph" alt=""/></div>
<map name="router_8c_a2732ff3306e95d3579956be55f9cdc6d_cgraph" id="router_8c_a2732ff3306e95d3579956be55f9cdc6d_cgraph">
<area shape="rect" id="node2" href="config_8c.html#ad439dbd5a4cd03e8d817ac921a4173bc" title="get_last_resolved_addr" alt="" coords="153,5,309,32"/>
<area shape="rect" id="node3" href="config_8c.html#ab211028e24942a1bc1827afaae620d4a" title="resolve_my_address" alt="" coords="160,56,303,83"/>
</map>
</div>

</div>
</div>
<a id="a1f26f7d8212be928f60b7daf0279f029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f26f7d8212be928f60b7daf0279f029">&#9670;&nbsp;</a></span>net_is_completely_disabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_is_completely_disabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff our network is in some sense "completely disabled" either we're fully hibernating or the network is turned off with DisableNetwork. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a1f26f7d8212be928f60b7daf0279f029_icgraph.png" border="0" usemap="#router_8c_a1f26f7d8212be928f60b7daf0279f029_icgraph" alt=""/></div>
<map name="router_8c_a1f26f7d8212be928f60b7daf0279f029_icgraph" id="router_8c_a1f26f7d8212be928f60b7daf0279f029_icgraph">
<area shape="rect" id="node2" href="connection_8c.html#a2d38cc1df37b7254ce759c39b7c550b9" title="MOCK_IMPL" alt="" coords="236,5,336,32"/>
</map>
</div>

</div>
</div>
<a id="a0b7d8b358c0cdb6359916151f1863e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b7d8b358c0cdb6359916151f1863e36">&#9670;&nbsp;</a></span>net_is_disabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_is_disabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff our network is in some sense disabled or shutting down: either we're hibernating, entering hibernation, or the network is turned off with DisableNetwork. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a0b7d8b358c0cdb6359916151f1863e36_icgraph.png" border="0" usemap="#router_8c_a0b7d8b358c0cdb6359916151f1863e36_icgraph" alt=""/></div>
<map name="router_8c_a0b7d8b358c0cdb6359916151f1863e36_icgraph" id="router_8c_a0b7d8b358c0cdb6359916151f1863e36_icgraph">
<area shape="rect" id="node2" href="dns_8c.html#a54580f3c6a1aa8cb61ba34ea2d4086b2" title="MOCK_IMPL" alt="" coords="195,5,295,32"/>
<area shape="rect" id="node3" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="181,57,309,98"/>
<area shape="rect" id="node4" href="main_8h.html#aecdbc14b2fa5dcece5ca26ba80dc2876" title="rescan_periodic_events" alt="" coords="165,123,324,149"/>
</map>
</div>

</div>
</div>
<a id="a9123f7ab38acbdf103fcb38433311d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9123f7ab38acbdf103fcb38433311d42">&#9670;&nbsp;</a></span>node_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* node_describe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnode__t.html">node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a human-readable description of the <a class="el" href="structnode__t.html">node_t</a> <b>node</b>.</p>
<p>This function is not thread-safe. Each call to this function invalidates previous values returned by this function. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a9123f7ab38acbdf103fcb38433311d42_cgraph.png" border="0" usemap="#router_8c_a9123f7ab38acbdf103fcb38433311d42_cgraph" alt=""/></div>
<map name="router_8c_a9123f7ab38acbdf103fcb38433311d42_cgraph" id="router_8c_a9123f7ab38acbdf103fcb38433311d42_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd" title="format_node_description" alt="" coords="160,56,324,83"/>
<area shape="rect" id="node3" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="372,5,485,32"/>
<area shape="rect" id="node4" href="address_8c.html#a2de0e7c83f59d6235f74e76147db6e29" title="tor_addr_to_str" alt="" coords="374,56,483,83"/>
<area shape="rect" id="node5" href="address_8c.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="380,107,477,133"/>
<area shape="rect" id="node6" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="533,107,620,133"/>
<area shape="rect" id="node7" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="668,107,763,133"/>
</map>
</div>

</div>
</div>
<a id="a07026739772087089f5b5a27813e646b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07026739772087089f5b5a27813e646b">&#9670;&nbsp;</a></span>ntor_key_map_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ntor_key_map_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdi__digest256__map__t.html">di_digest256_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all storage from a keymap returned by construct_ntor_key_map. </p>

</div>
</div>
<a id="aaa263ba55448946fedc8475b3d9b34b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa263ba55448946fedc8475b3d9b34b8">&#9670;&nbsp;</a></span>proxy_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proxy_mode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are trying to proxy client connections. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_aaa263ba55448946fedc8475b3d9b34b8_icgraph.png" border="0" usemap="#router_8c_aaa263ba55448946fedc8475b3d9b34b8_icgraph" alt=""/></div>
<map name="router_8c_aaa263ba55448946fedc8475b3d9b34b8_icgraph" id="router_8c_aaa263ba55448946fedc8475b3d9b34b8_icgraph">
<area shape="rect" id="node2" href="circuituse_8h.html#a5474432e0dd7549eb766af37bebb37ed" title="circuit_expire_old\l_circs_as_needed" alt="" coords="147,5,273,47"/>
</map>
</div>

</div>
</div>
<a id="adf9d6e2bf82d6ddfb3e47cd7d49b57ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9d6e2bf82d6ddfb3e47cd7d49b57ec">&#9670;&nbsp;</a></span>rotate_onion_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rotate_onion_key </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replace the previous onion key with the current onion key, and generate a new previous onion key. Immediately after calling this function, the OR should:</p><ul>
<li>schedule all previous cpuworkers to shut down <em>after</em> processing pending work. (This will cause fresh cpuworkers to be generated.)</li>
<li>generate and upload a fresh routerinfo. </li>
</ul>

</div>
</div>
<a id="acb94b47f3c4ba2113830968ba8c780bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb94b47f3c4ba2113830968ba8c780bd">&#9670;&nbsp;</a></span>router_build_fresh_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_build_fresh_descriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> **&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structextrainfo__t.html">extrainfo_t</a> **&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build a fresh routerinfo, signed server descriptor, and extra-info document for this OR. Set r to the generated routerinfo, e to the generated extra-info document. Return 0 on success, -1 on temporary error. Failure to generate an extra-info document is not an error and is indicated by setting e to NULL. Caller is responsible for freeing generated documents if 0 is returned. </p>

</div>
</div>
<a id="a003a3604c6a65b73394ca22117d0dff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a003a3604c6a65b73394ca22117d0dff8">&#9670;&nbsp;</a></span>router_compare_to_my_exit_policy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_compare_to_my_exit_policy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OR only: Check whether my exit policy says to allow connection to conn. Return 0 if we accept; non-0 if we reject. </p>

</div>
</div>
<a id="a4d59ce576eb8716561e1bc6be6f88de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d59ce576eb8716561e1bc6be6f88de1">&#9670;&nbsp;</a></span>router_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* router_describe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>ri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a human-readable description of the <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> <b>ri</b>.</p>
<p>This function is not thread-safe. Each call to this function invalidates previous values returned by this function. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a4d59ce576eb8716561e1bc6be6f88de1_cgraph.png" border="0" usemap="#router_8c_a4d59ce576eb8716561e1bc6be6f88de1_cgraph" alt=""/></div>
<map name="router_8c_a4d59ce576eb8716561e1bc6be6f88de1_cgraph" id="router_8c_a4d59ce576eb8716561e1bc6be6f88de1_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd" title="format_node_description" alt="" coords="164,56,328,83"/>
<area shape="rect" id="node3" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="376,5,489,32"/>
<area shape="rect" id="node4" href="address_8c.html#a2de0e7c83f59d6235f74e76147db6e29" title="tor_addr_to_str" alt="" coords="378,56,487,83"/>
<area shape="rect" id="node5" href="address_8c.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="384,107,481,133"/>
<area shape="rect" id="node6" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="537,107,624,133"/>
<area shape="rect" id="node7" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="672,107,767,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a4d59ce576eb8716561e1bc6be6f88de1_icgraph.png" border="0" usemap="#router_8c_a4d59ce576eb8716561e1bc6be6f88de1_icgraph" alt=""/></div>
<map name="router_8c_a4d59ce576eb8716561e1bc6be6f88de1_icgraph" id="router_8c_a4d59ce576eb8716561e1bc6be6f88de1_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="164,5,324,47"/>
</map>
</div>

</div>
</div>
<a id="abeb0f38915a46f77352900604075d82f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb0f38915a46f77352900604075d82f">&#9670;&nbsp;</a></span>router_digest_is_me()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_digest_is_me </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff I'm a server and <b>digest</b> is equal to my server identity key digest. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_abeb0f38915a46f77352900604075d82f_cgraph.png" border="0" usemap="#router_8c_abeb0f38915a46f77352900604075d82f_cgraph" alt=""/></div>
<map name="router_8c_abeb0f38915a46f77352900604075d82f_cgraph" id="router_8c_abeb0f38915a46f77352900604075d82f_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="192,5,279,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_abeb0f38915a46f77352900604075d82f_icgraph.png" border="0" usemap="#router_8c_abeb0f38915a46f77352900604075d82f_icgraph" alt=""/></div>
<map name="router_8c_abeb0f38915a46f77352900604075d82f_icgraph" id="router_8c_abeb0f38915a46f77352900604075d82f_icgraph">
<area shape="rect" id="node2" href="connection__or_8c.html#a9fdf1e7144b7f497802d60f0f6a076fc" title="MOCK_IMPL" alt="" coords="223,5,323,32"/>
<area shape="rect" id="node3" href="directory_8h.html#a13483821c102fb862ab0d27091d7ffc7" title="directory_get_from\l_all_authorities" alt="" coords="207,57,338,98"/>
<area shape="rect" id="node4" href="nodelist_8h.html#a6849fb3c0f5d471d3d13f1502fc2ba8b" title="node_is_me" alt="" coords="227,123,319,149"/>
<area shape="rect" id="node5" href="router_8h.html#adcfdecf66a4aa5e6d09a702784c8197f" title="router_is_me" alt="" coords="224,173,321,200"/>
<area shape="rect" id="node9" href="routerlist_8h.html#a6c38eadb28cf4532a7623c5aa1885cec" title="router_digest_is_trusted\l_dir_type" alt="" coords="192,225,353,266"/>
<area shape="rect" id="node6" href="dirserv_8h.html#ad1772dc2a4a12cc0eb181d1f52c5a54a" title="dirserv_set_router\l_is_running" alt="" coords="419,137,546,178"/>
<area shape="rect" id="node8" href="dirserv_8h.html#aac91a65fca7d877c033a594a96203ad7" title="dirserv_test_reachability" alt="" coords="401,203,564,229"/>
<area shape="rect" id="node7" href="dirserv_8h.html#a6c7009f040e0a812c40a6ae0fa6efd79" title="list_server_status_v1" alt="" coords="612,144,759,171"/>
</map>
</div>

</div>
</div>
<a id="ab0152c6014466eaafa2e666bb38ba16b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0152c6014466eaafa2e666bb38ba16b">&#9670;&nbsp;</a></span>router_dirport_found_reachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_dirport_found_reachable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Annotate that we found our DirPort reachable. </p>

</div>
</div>
<a id="a242f0a76713d7b28d940880fc3dd03ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a242f0a76713d7b28d940880fc3dd03ed">&#9670;&nbsp;</a></span>router_do_reachability_checks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_do_reachability_checks </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>test_or</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>test_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Some time has passed, or we just got new directory information. See if we currently believe our ORPort or DirPort to be unreachable. If so, launch a new test for it.</p>
<p>For ORPort, we simply try making a circuit that ends at ourselves. Success is noticed in <a class="el" href="circuitbuild_8c.html#a79990c0f11c854f132e798f4425280ae">onionskin_answer()</a>.</p>
<p>For DirPort, we make a connection via Tor to our DirPort and ask for our own server descriptor. Success is noticed in connection_dir_client_reached_eof(). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a242f0a76713d7b28d940880fc3dd03ed_icgraph.png" border="0" usemap="#router_8c_a242f0a76713d7b28d940880fc3dd03ed_icgraph" alt=""/></div>
<map name="router_8c_a242f0a76713d7b28d940880fc3dd03ed_icgraph" id="router_8c_a242f0a76713d7b28d940880fc3dd03ed_icgraph">
<area shape="rect" id="node2" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="203,5,331,47"/>
</map>
</div>

</div>
</div>
<a id="ac77dbc2a8d2709504efedfa13b140964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77dbc2a8d2709504efedfa13b140964">&#9670;&nbsp;</a></span>router_dump_exit_policy_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* router_dump_exit_policy_to_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>include_ipv4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>include_ipv6</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OR only: Given <b>router</b>, produce a string with its exit policy. If <b>include_ipv4</b> is true, include IPv4 entries. If <b>include_ipv6</b> is true, include IPv6 entries. </p>

</div>
</div>
<a id="abe7a9d63b97fc7552ca356f93c9c6cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7a9d63b97fc7552ca356f93c9c6cc7">&#9670;&nbsp;</a></span>router_dump_router_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* router_dump_router_to_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>ident_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>tap_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcurve25519__keypair__t.html">curve25519_keypair_t</a> *&#160;</td>
          <td class="paramname"><em>ntor_keypair</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structed25519__keypair__t.html">ed25519_keypair_t</a> *&#160;</td>
          <td class="paramname"><em>signing_keypair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OR only: Given a routerinfo for this router, and an identity key to sign with, encode the routerinfo as a signed server descriptor and return a new string encoding the result, or NULL on failure. </p>

</div>
</div>
<a id="ab71a44765898910e5aaa50b3f9b50a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab71a44765898910e5aaa50b3f9b50a17">&#9670;&nbsp;</a></span>router_extrainfo_digest_is_me()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_extrainfo_digest_is_me </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff I'm a server and <b>digest</b> is equal to my identity digest. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_ab71a44765898910e5aaa50b3f9b50a17_cgraph.png" border="0" usemap="#router_8c_ab71a44765898910e5aaa50b3f9b50a17_cgraph" alt=""/></div>
<map name="router_8c_ab71a44765898910e5aaa50b3f9b50a17_cgraph" id="router_8c_ab71a44765898910e5aaa50b3f9b50a17_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a30c5482965fda685a86a170304d48532" title="router_get_my_extrainfo" alt="" coords="208,46,371,73"/>
<area shape="rect" id="node8" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="246,97,333,123"/>
<area shape="rect" id="node3" href="router_8c.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="419,46,583,73"/>
<area shape="rect" id="node4" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="631,39,777,80"/>
<area shape="rect" id="node5" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="825,39,972,80"/>
<area shape="rect" id="node6" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="1037,5,1173,47"/>
<area shape="rect" id="node7" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="1020,71,1191,112"/>
</map>
</div>

</div>
</div>
<a id="a278cf107b4a9b636b105ec5581b2f427"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a278cf107b4a9b636b105ec5581b2f427">&#9670;&nbsp;</a></span>router_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all static resources held in <a class="el" href="router_8c.html" title="Miscellaneous relay functionality, including RSA key maintenance, generating and uploading server des...">router.c</a> </p>

</div>
</div>
<a id="a8bfae58f61a3329fd20f43c378bff0bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bfae58f61a3329fd20f43c378bff0bb">&#9670;&nbsp;</a></span>router_get_active_listener_port_by_type_af()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t router_get_active_listener_port_by_type_af </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>listener_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sa_family_t&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the port of the first active listener of type <b>listener_type</b>. XXX not a very good interface. it's not reliable when there are multiple listeners. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a8bfae58f61a3329fd20f43c378bff0bb_icgraph.png" border="0" usemap="#router_8c_a8bfae58f61a3329fd20f43c378bff0bb_icgraph" alt=""/></div>
<map name="router_8c_a8bfae58f61a3329fd20f43c378bff0bb_icgraph" id="router_8c_a8bfae58f61a3329fd20f43c378bff0bb_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="224,27,371,69"/>
<area shape="rect" id="node3" href="connection_8h.html#a70eb2da60775cc0bda58682470a752b6" title="retry_all_listeners" alt="" coords="633,5,757,32"/>
<area shape="rect" id="node4" href="router_8h.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="419,57,565,98"/>
<area shape="rect" id="node5" href="config_8h.html#a371199c6500ed7bbdf40789df8310c92" title="get_list_of_ports_to\l_forward" alt="" coords="627,57,763,98"/>
<area shape="rect" id="node6" href="router_8h.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="613,123,777,149"/>
<area shape="rect" id="node7" href="router_8h.html#a0a1aa020a168e42bfaa9edd016839d6f" title="consider_publishable\l_server" alt="" coords="835,86,978,127"/>
<area shape="rect" id="node8" href="router_8h.html#a30c5482965fda685a86a170304d48532" title="router_get_my_extrainfo" alt="" coords="825,152,988,179"/>
<area shape="rect" id="node9" href="router_8h.html#ab71a44765898910e5aaa50b3f9b50a17" title="router_extrainfo_digest\l_is_me" alt="" coords="1036,115,1191,157"/>
<area shape="rect" id="node10" href="routerlist_8c.html#aa96fada5a8d19d0ea9158e0ff51ae320" title="MOCK_IMPL" alt="" coords="1063,181,1163,208"/>
</map>
</div>

</div>
</div>
<a id="afc00fda5b227142768e650d169b3dd26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc00fda5b227142768e650d169b3dd26">&#9670;&nbsp;</a></span>router_get_advertised_dir_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t router_get_advertised_dir_port </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dirport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the port that we should advertise as our DirPort; this is one of three possibilities: The one that is passed as <b>dirport</b> if the DirPort option is 0, or the one configured in the DirPort option, or the one we actually bound to if DirPort is "auto". </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_afc00fda5b227142768e650d169b3dd26_icgraph.png" border="0" usemap="#router_8c_afc00fda5b227142768e650d169b3dd26_icgraph" alt=""/></div>
<map name="router_8c_afc00fda5b227142768e650d169b3dd26_icgraph" id="router_8c_afc00fda5b227142768e650d169b3dd26_icgraph">
<area shape="rect" id="node2" href="config_8h.html#a371199c6500ed7bbdf40789df8310c92" title="get_list_of_ports_to\l_forward" alt="" coords="200,5,336,47"/>
<area shape="rect" id="node3" href="connection_8h.html#a70eb2da60775cc0bda58682470a752b6" title="retry_all_listeners" alt="" coords="206,71,330,98"/>
</map>
</div>

</div>
</div>
<a id="a74a228ad9efff13643397a5c02d7bec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a228ad9efff13643397a5c02d7bec7">&#9670;&nbsp;</a></span>router_get_advertised_or_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t router_get_advertised_or_port </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the port that we should advertise as our ORPort; this is either the one configured in the ORPort option, or the one we actually bound to if ORPort is "auto". </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a74a228ad9efff13643397a5c02d7bec7_cgraph.png" border="0" usemap="#router_8c_a74a228ad9efff13643397a5c02d7bec7_cgraph" alt=""/></div>
<map name="router_8c_a74a228ad9efff13643397a5c02d7bec7_cgraph" id="router_8c_a74a228ad9efff13643397a5c02d7bec7_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="200,39,347,80"/>
<area shape="rect" id="node3" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="412,5,548,47"/>
<area shape="rect" id="node4" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="395,71,565,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a74a228ad9efff13643397a5c02d7bec7_icgraph.png" border="0" usemap="#router_8c_a74a228ad9efff13643397a5c02d7bec7_icgraph" alt=""/></div>
<map name="router_8c_a74a228ad9efff13643397a5c02d7bec7_icgraph" id="router_8c_a74a228ad9efff13643397a5c02d7bec7_icgraph">
<area shape="rect" id="node2" href="config_8h.html#a371199c6500ed7bbdf40789df8310c92" title="get_list_of_ports_to\l_forward" alt="" coords="214,5,350,47"/>
<area shape="rect" id="node3" href="connection_8h.html#a70eb2da60775cc0bda58682470a752b6" title="retry_all_listeners" alt="" coords="220,71,344,98"/>
<area shape="rect" id="node4" href="router_8h.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="200,122,364,149"/>
<area shape="rect" id="node5" href="router_8h.html#a0a1aa020a168e42bfaa9edd016839d6f" title="consider_publishable\l_server" alt="" coords="422,85,565,127"/>
<area shape="rect" id="node6" href="router_8h.html#a30c5482965fda685a86a170304d48532" title="router_get_my_extrainfo" alt="" coords="412,151,575,178"/>
<area shape="rect" id="node7" href="router_8h.html#ab71a44765898910e5aaa50b3f9b50a17" title="router_extrainfo_digest\l_is_me" alt="" coords="623,115,777,156"/>
<area shape="rect" id="node8" href="routerlist_8c.html#aa96fada5a8d19d0ea9158e0ff51ae320" title="MOCK_IMPL" alt="" coords="650,181,750,207"/>
</map>
</div>

</div>
</div>
<a id="a19b606096c7f385bb3db639b1a1c15fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19b606096c7f385bb3db639b1a1c15fe">&#9670;&nbsp;</a></span>router_get_advertised_or_port_by_af()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t router_get_advertised_or_port_by_af </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sa_family_t&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As <a class="el" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7">router_get_advertised_or_port()</a>, but allows an address family argument. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a19b606096c7f385bb3db639b1a1c15fe_cgraph.png" border="0" usemap="#router_8c_a19b606096c7f385bb3db639b1a1c15fe_cgraph" alt=""/></div>
<map name="router_8c_a19b606096c7f385bb3db639b1a1c15fe_cgraph" id="router_8c_a19b606096c7f385bb3db639b1a1c15fe_cgraph">
<area shape="rect" id="node2" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="217,5,353,47"/>
<area shape="rect" id="node3" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="200,71,371,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a19b606096c7f385bb3db639b1a1c15fe_icgraph.png" border="0" usemap="#router_8c_a19b606096c7f385bb3db639b1a1c15fe_icgraph" alt=""/></div>
<map name="router_8c_a19b606096c7f385bb3db639b1a1c15fe_icgraph" id="router_8c_a19b606096c7f385bb3db639b1a1c15fe_icgraph">
<area shape="rect" id="node2" href="connection_8h.html#a70eb2da60775cc0bda58682470a752b6" title="retry_all_listeners" alt="" coords="415,5,539,32"/>
<area shape="rect" id="node3" href="router_8h.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="200,57,347,98"/>
<area shape="rect" id="node4" href="config_8h.html#a371199c6500ed7bbdf40789df8310c92" title="get_list_of_ports_to\l_forward" alt="" coords="409,57,545,98"/>
<area shape="rect" id="node5" href="router_8h.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="395,123,559,149"/>
<area shape="rect" id="node6" href="router_8h.html#a0a1aa020a168e42bfaa9edd016839d6f" title="consider_publishable\l_server" alt="" coords="617,86,759,127"/>
<area shape="rect" id="node7" href="router_8h.html#a30c5482965fda685a86a170304d48532" title="router_get_my_extrainfo" alt="" coords="607,152,769,179"/>
<area shape="rect" id="node8" href="router_8h.html#ab71a44765898910e5aaa50b3f9b50a17" title="router_extrainfo_digest\l_is_me" alt="" coords="817,115,972,157"/>
<area shape="rect" id="node9" href="routerlist_8c.html#aa96fada5a8d19d0ea9158e0ff51ae320" title="MOCK_IMPL" alt="" coords="845,181,945,208"/>
</map>
</div>

</div>
</div>
<a id="a7ca65441213fb44d6dde8432c943a6c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca65441213fb44d6dde8432c943a6c3">&#9670;&nbsp;</a></span>router_get_all_orports()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsmartlist__t.html">smartlist_t</a>* router_get_all_orports </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>ri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a smartlist of <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a>'s with all the OR ports of <b>ri</b>. Note that freeing of the items in the list as well as the smartlist itself is the callers responsibility. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a7ca65441213fb44d6dde8432c943a6c3_cgraph.png" border="0" usemap="#router_8c_a7ca65441213fb44d6dde8432c943a6c3_cgraph" alt=""/></div>
<map name="router_8c_a7ca65441213fb44d6dde8432c943a6c3_cgraph" id="router_8c_a7ca65441213fb44d6dde8432c943a6c3_cgraph">
<area shape="rect" id="node2" href="nodelist_8c.html#a551827c8c00ee79f3d3663d11b2b60a0" title="node_get_all_orports" alt="" coords="200,5,343,32"/>
</map>
</div>

</div>
</div>
<a id="a1ba670606f8b38ce1d818a56438cf28b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ba670606f8b38ce1d818a56438cf28b">&#9670;&nbsp;</a></span>router_get_descriptor_gen_reason()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* router_get_descriptor_gen_reason </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a human-readable string describing what triggered us to generate our current descriptor, or NULL if we don't know. </p>

</div>
</div>
<a id="a41c282d28d3993d673a0bedf91e5d776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c282d28d3993d673a0bedf91e5d776">&#9670;&nbsp;</a></span>router_get_my_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* router_get_my_descriptor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OR only: Return a signed server descriptor for this OR, rebuilding a fresh one if necessary. Return NULL on error. </p>

</div>
</div>
<a id="a30c5482965fda685a86a170304d48532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c5482965fda685a86a170304d48532">&#9670;&nbsp;</a></span>router_get_my_extrainfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structextrainfo__t.html">extrainfo_t</a>* router_get_my_extrainfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the extrainfo document for this OR, or NULL if we have none. Rebuilt it (and the server descriptor) if necessary. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a30c5482965fda685a86a170304d48532_cgraph.png" border="0" usemap="#router_8c_a30c5482965fda685a86a170304d48532_cgraph" alt=""/></div>
<map name="router_8c_a30c5482965fda685a86a170304d48532_cgraph" id="router_8c_a30c5482965fda685a86a170304d48532_cgraph">
<area shape="rect" id="node2" href="router_8c.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="216,46,380,73"/>
<area shape="rect" id="node3" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="428,39,575,80"/>
<area shape="rect" id="node4" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="623,39,769,80"/>
<area shape="rect" id="node5" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="835,5,971,47"/>
<area shape="rect" id="node6" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="817,71,988,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a30c5482965fda685a86a170304d48532_icgraph.png" border="0" usemap="#router_8c_a30c5482965fda685a86a170304d48532_icgraph" alt=""/></div>
<map name="router_8c_a30c5482965fda685a86a170304d48532_icgraph" id="router_8c_a30c5482965fda685a86a170304d48532_icgraph">
<area shape="rect" id="node2" href="router_8h.html#ab71a44765898910e5aaa50b3f9b50a17" title="router_extrainfo_digest\l_is_me" alt="" coords="216,5,371,47"/>
<area shape="rect" id="node3" href="routerlist_8c.html#aa96fada5a8d19d0ea9158e0ff51ae320" title="MOCK_IMPL" alt="" coords="243,71,343,98"/>
</map>
</div>

</div>
</div>
<a id="aae5d541e535def16f404e35382774642"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae5d541e535def16f404e35382774642">&#9670;&nbsp;</a></span>router_get_my_id_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t* router_get_my_id_digest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return my identity digest. </p>

</div>
</div>
<a id="a255c16f30d82dd9c6644eceb57f70df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255c16f30d82dd9c6644eceb57f70df6">&#9670;&nbsp;</a></span>router_get_prim_orport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_get_prim_orport </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *&#160;</td>
          <td class="paramname"><em>ap_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy the primary (IPv4) OR port (IP address and TCP port) for <b>router</b> into *<b>ap_out</b>. </p>

</div>
</div>
<a id="a2f3a022f2ddb8fb15047fb91522000eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f3a022f2ddb8fb15047fb91522000eb">&#9670;&nbsp;</a></span>router_get_verbose_nickname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_get_verbose_nickname </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set <b>buf</b> (which must have MAX_VERBOSE_NICKNAME_LEN+1 bytes) to the verbose representation of the identity of <b>router</b>. The format is: A dollar sign. The upper-case hexadecimal encoding of the SHA1 hash of router's identity. A "=" if the router is named (no longer implemented); a "~" if it is not. The router's nickname. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a2f3a022f2ddb8fb15047fb91522000eb_cgraph.png" border="0" usemap="#router_8c_a2f3a022f2ddb8fb15047fb91522000eb_cgraph" alt=""/></div>
<map name="router_8c_a2f3a022f2ddb8fb15047fb91522000eb_cgraph" id="router_8c_a2f3a022f2ddb8fb15047fb91522000eb_cgraph">
<area shape="rect" id="node2" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="187,13,300,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a2f3a022f2ddb8fb15047fb91522000eb_icgraph.png" border="0" usemap="#router_8c_a2f3a022f2ddb8fb15047fb91522000eb_icgraph" alt=""/></div>
<map name="router_8c_a2f3a022f2ddb8fb15047fb91522000eb_icgraph" id="router_8c_a2f3a022f2ddb8fb15047fb91522000eb_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a6c7009f040e0a812c40a6ae0fa6efd79" title="list_server_status_v1" alt="" coords="187,13,333,39"/>
</map>
</div>

</div>
</div>
<a id="a8388a780f816e9d130244f604767d742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8388a780f816e9d130244f604767d742">&#9670;&nbsp;</a></span>router_has_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_has_addr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if any of <b>router</b>'s addresses are <b>addr</b>. Otherwise return 0. </p>

</div>
</div>
<a id="a67d28ab5fe06baaec0c4e7575a9502cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d28ab5fe06baaec0c4e7575a9502cc">&#9670;&nbsp;</a></span>router_initialize_tls_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_initialize_tls_context </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set up Tor's TLS contexts, based on our configuration and keys. Return 0 on success, and -1 on failure. </p>

</div>
</div>
<a id="adcfdecf66a4aa5e6d09a702784c8197f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcfdecf66a4aa5e6d09a702784c8197f">&#9670;&nbsp;</a></span>router_is_me()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_is_me </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A wrapper around <a class="el" href="router_8c.html#abeb0f38915a46f77352900604075d82f">router_digest_is_me()</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_adcfdecf66a4aa5e6d09a702784c8197f_cgraph.png" border="0" usemap="#router_8c_adcfdecf66a4aa5e6d09a702784c8197f_cgraph" alt=""/></div>
<map name="router_8c_adcfdecf66a4aa5e6d09a702784c8197f_cgraph" id="router_8c_adcfdecf66a4aa5e6d09a702784c8197f_cgraph">
<area shape="rect" id="node2" href="router_8c.html#abeb0f38915a46f77352900604075d82f" title="router_digest_is_me" alt="" coords="151,5,289,32"/>
<area shape="rect" id="node3" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="337,5,424,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_adcfdecf66a4aa5e6d09a702784c8197f_icgraph.png" border="0" usemap="#router_8c_adcfdecf66a4aa5e6d09a702784c8197f_icgraph" alt=""/></div>
<map name="router_8c_adcfdecf66a4aa5e6d09a702784c8197f_icgraph" id="router_8c_adcfdecf66a4aa5e6d09a702784c8197f_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#ad1772dc2a4a12cc0eb181d1f52c5a54a" title="dirserv_set_router\l_is_running" alt="" coords="169,5,295,47"/>
<area shape="rect" id="node4" href="dirserv_8h.html#aac91a65fca7d877c033a594a96203ad7" title="dirserv_test_reachability" alt="" coords="151,71,313,98"/>
<area shape="rect" id="node3" href="dirserv_8h.html#a6c7009f040e0a812c40a6ae0fa6efd79" title="list_server_status_v1" alt="" coords="361,13,508,39"/>
</map>
</div>

</div>
</div>
<a id="a2a099e515a8ff1bb99891a9e51c141bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a099e515a8ff1bb99891a9e51c141bb">&#9670;&nbsp;</a></span>router_new_address_suggestion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_new_address_suggestion </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suggestion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdir__connection__t.html">dir_connection_t</a> *&#160;</td>
          <td class="paramname"><em>d_conn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A directory server <b>d_conn</b> told us our IP address is <b>suggestion</b>. If this address is different from the one we think we are now, and if our computer doesn't actually know its IP address, then switch. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a2a099e515a8ff1bb99891a9e51c141bb_cgraph.png" border="0" usemap="#router_8c_a2a099e515a8ff1bb99891a9e51c141bb_cgraph" alt=""/></div>
<map name="router_8c_a2a099e515a8ff1bb99891a9e51c141bb_cgraph" id="router_8c_a2a099e515a8ff1bb99891a9e51c141bb_cgraph">
<area shape="rect" id="node2" href="address_8c.html#a3cd537bd8104a89a5996793ee3f1d0dc" title="tor_addr_parse" alt="" coords="192,13,300,39"/>
</map>
</div>

</div>
</div>
<a id="a81d0eddf34d18d1da24a0f14e1c54c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81d0eddf34d18d1da24a0f14e1c54c1f">&#9670;&nbsp;</a></span>router_orport_found_reachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_orport_found_reachable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Annotate that we found our ORPort reachable. </p>

</div>
</div>
<a id="a95281001f99f50d14056c2b9fd51bc7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95281001f99f50d14056c2b9fd51bc7b">&#9670;&nbsp;</a></span>router_perform_bandwidth_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_perform_bandwidth_test </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_circs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We have enough testing circuits open. Send a bunch of "drop" cells down each of them, to exercise our bandwidth. </p>

</div>
</div>
<a id="a5822c27ea2e28fd0ff19da0dbc612611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5822c27ea2e28fd0ff19da0dbc612611">&#9670;&nbsp;</a></span>router_purpose_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t router_purpose_from_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a string, convert it to a router purpose. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a5822c27ea2e28fd0ff19da0dbc612611_icgraph.png" border="0" usemap="#router_8c_a5822c27ea2e28fd0ff19da0dbc612611_icgraph" alt=""/></div>
<map name="router_8c_a5822c27ea2e28fd0ff19da0dbc612611_icgraph" id="router_8c_a5822c27ea2e28fd0ff19da0dbc612611_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a522e50eabe88fdafcc39b375b6e4cced" title="networkstatus_getinfo\l_by_purpose" alt="" coords="195,5,345,47"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#ada1c2d5fcccff6ee4e7aff6a497ec2cf" title="networkstatus_dump\l_bridge_status_to_file" alt="" coords="393,5,543,47"/>
</map>
</div>

</div>
</div>
<a id="a9ca20e44509fa800ecf49f25bef1cd52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ca20e44509fa800ecf49f25bef1cd52">&#9670;&nbsp;</a></span>router_purpose_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* router_purpose_to_string </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a router purpose, convert it to a string. Don't call this on ROUTER_PURPOSE_UNKNOWN: The whole point of that value is that we don't know its string representation. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a9ca20e44509fa800ecf49f25bef1cd52_icgraph.png" border="0" usemap="#router_8c_a9ca20e44509fa800ecf49f25bef1cd52_icgraph" alt=""/></div>
<map name="router_8c_a9ca20e44509fa800ecf49f25bef1cd52_icgraph" id="router_8c_a9ca20e44509fa800ecf49f25bef1cd52_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a7b194ad6a42e8fb2ef4f3aa1cf135830" title="router_load_single\l_router" alt="" coords="219,5,345,47"/>
</map>
</div>

</div>
</div>
<a id="ac23927b27e54ab8752d8a379b5136b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac23927b27e54ab8752d8a379b5136b50">&#9670;&nbsp;</a></span>router_rebuild_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_rebuild_descriptor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If <b>force</b> is true, or our descriptor is out-of-date, rebuild a fresh routerinfo, signed server descriptor, and extra-info document for this OR. Return 0 on success, -1 on temporary error. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_ac23927b27e54ab8752d8a379b5136b50_cgraph.png" border="0" usemap="#router_8c_ac23927b27e54ab8752d8a379b5136b50_cgraph" alt=""/></div>
<map name="router_8c_ac23927b27e54ab8752d8a379b5136b50_cgraph" id="router_8c_ac23927b27e54ab8752d8a379b5136b50_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="217,39,364,80"/>
<area shape="rect" id="node3" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="412,39,559,80"/>
<area shape="rect" id="node4" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="624,5,760,47"/>
<area shape="rect" id="node5" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="607,71,777,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_ac23927b27e54ab8752d8a379b5136b50_icgraph.png" border="0" usemap="#router_8c_ac23927b27e54ab8752d8a379b5136b50_icgraph" alt=""/></div>
<map name="router_8c_ac23927b27e54ab8752d8a379b5136b50_icgraph" id="router_8c_ac23927b27e54ab8752d8a379b5136b50_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a0a1aa020a168e42bfaa9edd016839d6f" title="consider_publishable\l_server" alt="" coords="227,5,370,47"/>
<area shape="rect" id="node3" href="router_8h.html#a30c5482965fda685a86a170304d48532" title="router_get_my_extrainfo" alt="" coords="217,71,380,98"/>
<area shape="rect" id="node4" href="router_8h.html#ab71a44765898910e5aaa50b3f9b50a17" title="router_extrainfo_digest\l_is_me" alt="" coords="428,35,583,76"/>
<area shape="rect" id="node5" href="routerlist_8c.html#aa96fada5a8d19d0ea9158e0ff51ae320" title="MOCK_IMPL" alt="" coords="455,101,555,127"/>
</map>
</div>

</div>
</div>
<a id="ac286979e97e7949ee0b887cde0f038a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac286979e97e7949ee0b887cde0f038a1">&#9670;&nbsp;</a></span>router_reset_reachability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_reset_reachability </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Forget what we have learned about our reachability status. </p>

</div>
</div>
<a id="a09c7520a0a933831876a6b41420540c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c7520a0a933831876a6b41420540c1">&#9670;&nbsp;</a></span>router_reset_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_reset_warnings </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Forget that we have issued any router-related warnings, so that we'll warn again if we see the same errors. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a09c7520a0a933831876a6b41420540c1_cgraph.png" border="0" usemap="#router_8c_a09c7520a0a933831876a6b41420540c1_cgraph" alt=""/></div>
<map name="router_8c_a09c7520a0a933831876a6b41420540c1_cgraph" id="router_8c_a09c7520a0a933831876a6b41420540c1_cgraph">
<area shape="rect" id="node2" href="container_8c.html#ad24500d61ff1dbb6c845a8a70f6d2f14" title="smartlist_clear" alt="" coords="204,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="a373fdf9e0631afcd0d4dfcde5dc4926b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a373fdf9e0631afcd0d4dfcde5dc4926b">&#9670;&nbsp;</a></span>router_upload_dir_desc_to_dirservers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_upload_dir_desc_to_dirservers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OR only: If <b>force</b> is true, or we haven't uploaded this descriptor successfully yet, try to upload our signed descriptor to all the directory servers we know about. </p>

</div>
</div>
<a id="af6be11a2e3d79f8639b03e0b96290102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6be11a2e3d79f8639b03e0b96290102">&#9670;&nbsp;</a></span>router_write_fingerprint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC int router_write_fingerprint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hashed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute fingerprint (or hashed fingerprint if hashed is 1) and write it to 'fingerprint' (or 'hashed-fingerprint'). Return 0 on success, or -1 if Tor should die, </p>

</div>
</div>
<a id="aee06541f1d25bedac9166f4a08834c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee06541f1d25bedac9166f4a08834c16">&#9670;&nbsp;</a></span>routerinfo_err_is_transient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int routerinfo_err_is_transient </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true if we expect given error to be transient. Return false otherwise. </p>

</div>
</div>
<a id="a01343bdaa55370c9b0663208d4e1e67c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01343bdaa55370c9b0663208d4e1e67c">&#9670;&nbsp;</a></span>routerinfo_err_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* routerinfo_err_to_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a readonly string with human readable description of <b>err</b>. </p>

</div>
</div>
<a id="a7b7a73bfdbc7db6767f9b07fe53e9874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b7a73bfdbc7db6767f9b07fe53e9874">&#9670;&nbsp;</a></span>routerstatus_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* routerstatus_describe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>rs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a human-readable description of the <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> <b>rs</b>.</p>
<p>This function is not thread-safe. Each call to this function invalidates previous values returned by this function. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_a7b7a73bfdbc7db6767f9b07fe53e9874_cgraph.png" border="0" usemap="#router_8c_a7b7a73bfdbc7db6767f9b07fe53e9874_cgraph" alt=""/></div>
<map name="router_8c_a7b7a73bfdbc7db6767f9b07fe53e9874_cgraph" id="router_8c_a7b7a73bfdbc7db6767f9b07fe53e9874_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd" title="format_node_description" alt="" coords="200,56,364,83"/>
<area shape="rect" id="node3" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="412,5,525,32"/>
<area shape="rect" id="node4" href="address_8c.html#a2de0e7c83f59d6235f74e76147db6e29" title="tor_addr_to_str" alt="" coords="414,56,523,83"/>
<area shape="rect" id="node5" href="address_8c.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="420,107,517,133"/>
<area shape="rect" id="node6" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="573,107,660,133"/>
<area shape="rect" id="node7" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="708,107,803,133"/>
</map>
</div>

</div>
</div>
<a id="a9f63549a1af0b43512f4d65b8a02da85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f63549a1af0b43512f4d65b8a02da85">&#9670;&nbsp;</a></span>server_identity_key_is_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int server_identity_key_is_set </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we are a server and the server identity key has been set. </p>

</div>
</div>
<a id="a680d1900f3bcbc97dd4ddf6efa5fb35b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a680d1900f3bcbc97dd4ddf6efa5fb35b">&#9670;&nbsp;</a></span>set_client_identity_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_client_identity_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>k</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the current client identity key to <b>k</b>. </p>

</div>
</div>
<a id="ad833b358871f8b821b26628c5457e134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad833b358871f8b821b26628c5457e134">&#9670;&nbsp;</a></span>set_server_identity_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_server_identity_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>k</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the current server identity key to <b>k</b>. </p>

</div>
</div>
<a id="afa75de94186fffc8f373de610ae4cab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa75de94186fffc8f373de610ae4cab3">&#9670;&nbsp;</a></span>should_refuse_unknown_exits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int should_refuse_unknown_exits </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff the combination of options in <b>options</b> and parameters in the consensus mean that we don't want to allow exits from circuits we got from addresses not known to be servers. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="router_8c_afa75de94186fffc8f373de610ae4cab3_icgraph.png" border="0" usemap="#router_8c_afa75de94186fffc8f373de610ae4cab3_icgraph" alt=""/></div>
<map name="router_8c_afa75de94186fffc8f373de610ae4cab3_icgraph" id="router_8c_afa75de94186fffc8f373de610ae4cab3_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a0b84786e17352524036694baf1955167" title="directory_fetches_from\l_authorities" alt="" coords="224,86,379,127"/>
<area shape="rect" id="node7" href="dirserv_8h.html#a57e2ff1ad2ea65abe9b969ad3d76a418" title="directory_caches_dir_info" alt="" coords="216,253,387,280"/>
<area shape="rect" id="node3" href="directory_8c.html#a2dcb34e25124200a8694ef07275a50b2" title="MOCK_IMPL" alt="" coords="474,5,574,32"/>
<area shape="rect" id="node4" href="dirserv_8h.html#ab38d643312052d4bfdb7d49dcba344a6" title="directory_fetches_dir\l_info_early" alt="" coords="453,57,595,98"/>
<area shape="rect" id="node6" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="1341,166,1469,207"/>
<area shape="rect" id="node5" href="routerlist_8h.html#a33e8618001c42bd50575051362aaffa2" title="launch_descriptor_downloads" alt="" coords="661,64,855,91"/>
<area shape="rect" id="node8" href="dirserv_8h.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="451,217,597,258"/>
<area shape="rect" id="node13" href="microdesc_8h.html#ad9c983a76a2f31a6a843f4df9be7de1d" title="we_fetch_microdescriptors" alt="" coords="435,283,613,309"/>
<area shape="rect" id="node14" href="microdesc_8h.html#a2667d23ef05f514b5bf916791b4a6bbd" title="we_fetch_router_descriptors" alt="" coords="665,341,851,368"/>
<area shape="rect" id="node9" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="903,224,1100,251"/>
<area shape="rect" id="node11" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="673,275,843,317"/>
<area shape="rect" id="node10" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="1148,225,1293,266"/>
<area shape="rect" id="node12" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="919,275,1084,317"/>
</map>
</div>

</div>
</div>
<a id="a1ccf29e1bf3d8e43591f66d2a5118a6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ccf29e1bf3d8e43591f66d2a5118a6b">&#9670;&nbsp;</a></span>v3_authority_check_key_expiry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v3_authority_check_key_expiry </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If we're a v3 authority, check whether we have a certificate that's likely to expire soon. Warn if we do, but not too often. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
