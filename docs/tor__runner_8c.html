<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/tools/tor_runner.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_ae16e26238c56dba9bf11e1a8c674896.html">tools</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tor_runner.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Experimental module to emulate <a class="el" href="tor__runner_8c.html#a2d81be93022219b2f678b2849eb52cfd">tor_run_main()</a> API with fork+exec.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="tor__api_8h_source.html">tor_api.h</a>&quot;</code><br />
<code>#include &quot;tor_api_internal.h&quot;</code><br />
<code>#include &quot;orconfig.h&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tor_runner.c:</div>
<div class="dyncontent">
<div class="center"><img src="tor__runner_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2tools_2tor__runner_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2tools_2tor__runner_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2tools_2tor__runner_8c">
<area shape="rect" id="node2" href="tor__api_8h.html" title="Public C API for the Tor network service. " alt="" coords="5,109,77,136"/>
<area shape="rect" id="node3" href="tor__api__internal_8h_source.html" title="tor_api_internal.h" alt="" coords="102,109,223,136"/>
<area shape="rect" id="node4" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="247,109,326,136"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9d373a9b65ff25b2db84c07394e1c212"><td class="memItemLeft" align="right" valign="top"><a id="a9d373a9b65ff25b2db84c07394e1c212"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>__attribute__</b>(x)</td></tr>
<tr class="separator:a9d373a9b65ff25b2db84c07394e1c212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d140c4c5ded869ef39fd3bb5b96f7f9"><td class="memItemLeft" align="right" valign="top"><a id="a1d140c4c5ded869ef39fd3bb5b96f7f9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>real_calloc</b>&#160;&#160;&#160;calloc</td></tr>
<tr class="separator:a1d140c4c5ded869ef39fd3bb5b96f7f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2d81be93022219b2f678b2849eb52cfd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tor__runner_8c.html#a2d81be93022219b2f678b2849eb52cfd">tor_run_main</a> (const <a class="el" href="structtor__main__configuration__t.html">tor_main_configuration_t</a> *cfg)</td></tr>
<tr class="separator:a2d81be93022219b2f678b2849eb52cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Experimental module to emulate <a class="el" href="tor__runner_8c.html#a2d81be93022219b2f678b2849eb52cfd">tor_run_main()</a> API with fork+exec. </p>
<p>The functions here are meant to allow the application developer to use the <a class="el" href="tor__runner_8c.html#a2d81be93022219b2f678b2849eb52cfd">tor_run_main()</a> API without having to care whether Tor is running in-process or out-of-process. For in-process usage, the developer can link Tor as a library and call <a class="el" href="tor__runner_8c.html#a2d81be93022219b2f678b2849eb52cfd">tor_run_main()</a>; for out-of-process usage, the developer can link this library instead.</p>
<p>This interface is EXPERIMENTAL; please let us know if you would like to depend on it. We don't know yet whether it will be reliable in practice. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2d81be93022219b2f678b2849eb52cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d81be93022219b2f678b2849eb52cfd">&#9670;&nbsp;</a></span>tor_run_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_run_main </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtor__main__configuration__t.html">tor_main_configuration_t</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run the tor process, as if from the command line.</p>
<p>The command line arguments from <a class="el" href="tor__api_8h.html#a4e4d16991254ff6ede69bc5050796130">tor_main_configuration_set_command_line()</a> are taken as if they had been passed to <a class="el" href="tor__main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>
<p>This function will not return until Tor is done running. It returns zero on success, and nonzero on failure.</p>
<p>If you want to control when Tor exits, make sure to configure a control socket. The OwningControllerFD option may be helpful there.</p>
<p>BUG 23847: Sometimes, if you call tor_main a second time (after it has returned), Tor may crash or behave strangely. We have fixed all issues of this type that we could find, but more may remain.</p>
<p>LIMITATION: You cannot run more than one instance of Tor in the same process at the same time. Concurrent calls will cause undefined behavior. We do not currently have plans to change this.</p>
<p>LIMITATION: While we will try to fix any problems found here, you should be aware that Tor was originally written to run as its own process, and that the functionality of this file was added later. If you find any bugs or strange behavior, please report them, and we'll try to straighten them out. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tor__runner_8c_a2d81be93022219b2f678b2849eb52cfd_cgraph.png" border="0" usemap="#tor__runner_8c_a2d81be93022219b2f678b2849eb52cfd_cgraph" alt=""/></div>
<map name="tor__runner_8c_a2d81be93022219b2f678b2849eb52cfd_cgraph" id="tor__runner_8c_a2d81be93022219b2f678b2849eb52cfd_cgraph">
<area shape="rect" id="node2" href="backtrace_8c.html#a6d08b912f24793f23f1ab1dfbc7c423e" title="configure_backtrace\l_handler" alt="" coords="153,41,292,82"/>
<area shape="rect" id="node3" href="config_8c.html#a3113591cdd3555bd354860a3a0802222" title="get_version" alt="" coords="384,5,473,32"/>
<area shape="rect" id="node7" href="config_8c.html#a9badc2e4e664120fd99bbd63cd4af3c6" title="init_protocol_warning\l_severity_level" alt="" coords="151,251,295,293"/>
<area shape="rect" id="node10" href="util_8c.html#a866d4c80bbdc37a0279c2bd02f4b2bde" title="update_approx_time" alt="" coords="153,368,292,395"/>
<area shape="rect" id="node11" href="compat__pthreads_8c.html#ad7af2665dcebaab14be9e040eef67de0" title="tor_threads_init" alt="" coords="167,419,278,445"/>
<area shape="rect" id="node12" href="compress_8c.html#aa70790c077be4c170f9a6ee17baf93e3" title="tor_compress_init" alt="" coords="160,317,285,344"/>
<area shape="rect" id="node16" href="log_8c.html#a0bc134e471615f694edc26aef8bf961f" title="init_logging" alt="" coords="179,469,266,496"/>
<area shape="rect" id="node18" href="compat__time_8c.html#ac3081103a772136f197e2eda085ff26d" title="monotime_init" alt="" coords="171,520,274,547"/>
<area shape="rect" id="node19" href="main_8c.html#a5c761b9de5289922e4f75826f766355f" title="tor_init" alt="" coords="192,157,253,184"/>
<area shape="rect" id="node4" href="compat_8c.html#ade97970c1d8a691241adac739c4f9b12" title="tor_asprintf" alt="" coords="795,5,881,32"/>
<area shape="rect" id="node6" href="config_8c.html#a229118cbc4221ec841824b17f7c82b06" title="get_short_version" alt="" coords="567,31,693,57"/>
<area shape="rect" id="node5" href="compat_8c.html#a5ef7a08e8b543c0d61f9ef1081d4c1ea" title="tor_vasprintf" alt="" coords="979,5,1073,32"/>
<area shape="rect" id="node8" href="compat__threads_8c.html#a28fc1a1e6d143b15ab62ddfa810a7ffd" title="atomic_counter_init" alt="" coords="563,360,697,387"/>
<area shape="rect" id="node9" href="compat__pthreads_8c.html#a900a1a27db8f1815a4db66e98e67bac0" title="tor_mutex_init_nonrecursive" alt="" coords="745,360,931,387"/>
<area shape="rect" id="node13" href="compress__zlib_8c.html#a256ccf247e5c5cc84f2063f3a23f1eb5" title="tor_zlib_init" alt="" coords="385,360,473,387"/>
<area shape="rect" id="node14" href="compress__lzma_8c.html#aa959a50329a95dc76efe6d112b52e21d" title="tor_lzma_init" alt="" coords="381,411,477,437"/>
<area shape="rect" id="node15" href="compress__zstd_8c.html#a70bc7321f0ab96e8ac23ede28063dc22" title="tor_zstd_init" alt="" coords="382,461,475,488"/>
<area shape="rect" id="node17" href="compat__pthreads_8c.html#accea24c75779968942013afa3ae1c051" title="tor_mutex_init" alt="" coords="377,512,481,539"/>
<area shape="rect" id="node20" href="main_8c.html#add1f47335c5e96d25eb95c6308b3ea1e" title="init_connection_lists" alt="" coords="359,56,499,83"/>
<area shape="rect" id="node21" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="385,107,472,133"/>
<area shape="rect" id="node23" href="log_8c.html#a665d03a179fc9e07ac04fd65dccb6d47" title="log_set_application_name" alt="" coords="343,157,515,184"/>
<area shape="rect" id="node24" href="crypto_8c.html#a6bde73f49ce0082ba60bf6fa8abee655" title="crypto_early_init" alt="" coords="370,208,487,235"/>
<area shape="rect" id="node22" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="583,107,677,133"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
