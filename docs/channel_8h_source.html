<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/channel.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">channel.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="channel_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* * Copyright (c) 2012-2016, The Tor Project, Inc. */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/* See LICENSE for licensing information */</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#ifndef TOR_CHANNEL_H</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#define TOR_CHANNEL_H</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="or_8h.html">or.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="circuitmux_8h.html">circuitmux.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* Channel handler function pointer typedefs */</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">typedef</span> void (*channel_listener_fn_ptr)(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *, <a class="code" href="structchannel__s.html">channel_t</a> *);</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">typedef</span> void (*channel_cell_handler_fn_ptr)(<a class="code" href="structchannel__s.html">channel_t</a> *, <a class="code" href="structcell__t.html">cell_t</a> *);</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">typedef</span> void (*channel_var_cell_handler_fn_ptr)(<a class="code" href="structchannel__s.html">channel_t</a> *, <a class="code" href="structvar__cell__t.html">var_cell_t</a> *);</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">struct </span>cell_queue_entry_s;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;TOR_SIMPLEQ_HEAD(chan_cell_queue, cell_queue_entry_s);</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>chan_cell_queue chan_cell_queue_t;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="structchannel__s.html">   33</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structchannel__s.html">channel_s</a> {</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structchannel__s.html#a57f54349f4fd1cbbb52058812e146af2">   35</a></span>&#160;  uint32_t <a class="code" href="structchannel__s.html#a57f54349f4fd1cbbb52058812e146af2">magic</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">   38</a></span>&#160;  channel_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structchannel__s.html#a661af3a689c2e0aedb5a76e5a4d72acd">   43</a></span>&#160;  uint64_t <a class="code" href="structchannel__s.html#a661af3a689c2e0aedb5a76e5a4d72acd">global_identifier</a>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structchannel__s.html#a70c77a444470634d76636b3390dc3e1d">   46</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structchannel__s.html#a70c77a444470634d76636b3390dc3e1d">registered</a>:1;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structchannel__s.html#ac400edb28b990aa4312ce3b1dc9891fe">   49</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#ac400edb28b990aa4312ce3b1dc9891fe">has_been_open</a>:1;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    CHANNEL_NOT_CLOSING = 0,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    CHANNEL_CLOSE_REQUESTED,</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    CHANNEL_CLOSE_FROM_BELOW,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    CHANNEL_CLOSE_FOR_ERROR</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  } <a class="code" href="structchannel__s.html#a03c3fe00dacf2f794b21b2f04bc65151">reason_for_closing</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">     * The channel is not open, or it has a full output buffer but no queued</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">     * cells.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    SCHED_CHAN_IDLE = 0,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">     * The channel has space on its output buffer to write, but no queued</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">     * cells.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    SCHED_CHAN_WAITING_FOR_CELLS,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">     * The scheduler has queued cells but no output buffer space to write.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    SCHED_CHAN_WAITING_TO_WRITE,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">     * The scheduler has both queued cells and output buffer space, and is</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">     * eligible for the scheduler loop.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    SCHED_CHAN_PENDING</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  } <a class="code" href="structchannel__s.html#ae0472cb9b88e2c5d68b08b65af026215">scheduler_state</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structchannel__s.html#a0fe9f6dcc35ce51e4b2b2639a3b9769e">   84</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#a0fe9f6dcc35ce51e4b2b2639a3b9769e">sched_heap_idx</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structchannel__s.html#ac3010adaf03e1a400cc074f5ce9e20a4">   87</a></span>&#160;  time_t <a class="code" href="structchannel__s.html#ac3010adaf03e1a400cc074f5ce9e20a4">timestamp_created</a>; <span class="comment">/* Channel created */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  time_t timestamp_active; <span class="comment">/* Any activity */</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">/* Methods implemented by the lower layer */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structchannel__s.html#a040475c466b41ea77259ae6577015894">   93</a></span>&#160;  void (*<a class="code" href="structchannel__s.html#a040475c466b41ea77259ae6577015894">free_fn</a>)(<a class="code" href="structchannel__s.html">channel_t</a> *);</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="structchannel__s.html#a1443b6af96b12275aebd0e6407c175e5">   95</a></span>&#160;  void (*<a class="code" href="structchannel__s.html#a1443b6af96b12275aebd0e6407c175e5">close</a>)(<a class="code" href="structchannel__s.html">channel_t</a> *);</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="structchannel__s.html#ae20494f6537522d01e0e950c3653529e">   97</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> * (*describe_transport)(<a class="code" href="structchannel__s.html">channel_t</a> *);</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structchannel__s.html#a2ad8a92c4942bb917535fa0e804e822f">   99</a></span>&#160;  void (*<a class="code" href="structchannel__s.html#a2ad8a92c4942bb917535fa0e804e822f">dumpstats</a>)(<a class="code" href="structchannel__s.html">channel_t</a> *, int);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="structchannel__s.html#a9d2084af628e8b797cf3eb130723d971">  102</a></span>&#160;  channel_cell_handler_fn_ptr <a class="code" href="structchannel__s.html#a9d2084af628e8b797cf3eb130723d971">cell_handler</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  channel_var_cell_handler_fn_ptr var_cell_handler;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">/* Methods implemented by the lower layer */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="structchannel__s.html#a9120f276c3b16fd2bb4095c6cd5695c3">  111</a></span>&#160;  double (*<a class="code" href="structchannel__s.html#a9120f276c3b16fd2bb4095c6cd5695c3">get_overhead_estimate</a>)(<a class="code" href="structchannel__s.html">channel_t</a> *);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">   * Ask the underlying transport what the remote endpoint address is, in</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">   * a tor_addr_t.  This is optional and subclasses may leave this NULL.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">   * If they implement it, they should write the address out to the</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">   * provided tor_addr_t *, and return 1 if successful or 0 if no address</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">   * available.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  int (*get_remote_addr)(<a class="code" href="structchannel__s.html">channel_t</a> *, <a class="code" href="structtor__addr__t.html">tor_addr_t</a> *);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  int (*get_transport_name)(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <span class="keywordtype">char</span> **transport_out);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#define GRD_FLAG_ORIGINAL 1</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#define GRD_FLAG_ADDR_ONLY 2</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="structchannel__s.html#a394cb903b9b12e222d3e5160b9fcd15b">  130</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> * (*get_remote_descr)(<a class="code" href="structchannel__s.html">channel_t</a> *, int);</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="structchannel__s.html#afdef949f9c411bce0f6337e1152426c1">  132</a></span>&#160;  int (*<a class="code" href="structchannel__s.html#afdef949f9c411bce0f6337e1152426c1">has_queued_writes</a>)(channel_t *);</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="structchannel__s.html#adf3155a623ca3d85d81f20f122966042">  139</a></span>&#160;  int (*<a class="code" href="structchannel__s.html#adf3155a623ca3d85d81f20f122966042">is_canonical</a>)(channel_t *, int);</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="structchannel__s.html#a433498749aef02177e1ec1a6b13b7971">  141</a></span>&#160;  int (*<a class="code" href="structchannel__s.html#a433498749aef02177e1ec1a6b13b7971">matches_extend_info</a>)(channel_t *, <a class="code" href="structextend__info__t.html">extend_info_t</a> *);</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="structchannel__s.html#ab2ca128234a743b39750554dc2991095">  143</a></span>&#160;  int (*<a class="code" href="structchannel__s.html#ab2ca128234a743b39750554dc2991095">matches_target</a>)(channel_t *, <span class="keyword">const</span> <a class="code" href="structtor__addr__t.html">tor_addr_t</a> *);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">/* Ask the lower layer how many bytes it has queued but not yet sent */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  size_t (*num_bytes_queued)(channel_t *);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">/* Ask the lower layer how many cells can be written */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  int (*num_cells_writeable)(channel_t *);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">/* Write a cell to an open channel */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  int (*write_cell)(channel_t *, <a class="code" href="structcell__t.html">cell_t</a> *);</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structchannel__s.html#a6830539bd42e3ff7d349e154ca329c63">  151</a></span>&#160;  int (*<a class="code" href="structchannel__s.html#a6830539bd42e3ff7d349e154ca329c63">write_packed_cell</a>)(channel_t *, <a class="code" href="structpacked__cell__t.html">packed_cell_t</a> *);</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structchannel__s.html#ae7ceaafb4377e769e39b09aeb66feaa7">  153</a></span>&#160;  int (*<a class="code" href="structchannel__s.html#ae7ceaafb4377e769e39b09aeb66feaa7">write_var_cell</a>)(channel_t *, <a class="code" href="structvar__cell__t.html">var_cell_t</a> *);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structchannel__s.html#a55d09977f6fcf3c3be8dcc9625c14e60">  159</a></span>&#160;  <span class="keywordtype">char</span> <a class="code" href="structchannel__s.html#a55d09977f6fcf3c3be8dcc9625c14e60">identity_digest</a>[<a class="code" href="crypto_8h.html#a14aa0c95ad1775ec290dc69b1ada1f6b">DIGEST_LEN</a>];</div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="structchannel__s.html#aebf3fd229429c27d00bd36dea7157407">  161</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="structchannel__s.html#aebf3fd229429c27d00bd36dea7157407">nickname</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="structchannel__s.html#a2460f9a13547d667d801e872f4adfc91">TOR_LIST_ENTRY</a>(<a class="code" href="structchannel__s.html">channel_s</a>) next_with_same_id;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structchannel__s.html#a835bd5cab7aa5739bd80c5eb286b607e">  170</a></span>&#160;  chan_cell_queue_t <a class="code" href="structchannel__s.html#a835bd5cab7aa5739bd80c5eb286b607e">incoming_queue</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structchannel__s.html#ae5bcc4200a2e171bc0ca34021bcea184">  173</a></span>&#160;  chan_cell_queue_t <a class="code" href="structchannel__s.html#ae5bcc4200a2e171bc0ca34021bcea184">outgoing_queue</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structchannel__s.html#ae9447ed41f9c520e52203fce685b2c96">  176</a></span>&#160;  <a class="code" href="structcircuitmux__s.html">circuitmux_t</a> *<a class="code" href="structchannel__s.html#ae9447ed41f9c520e52203fce685b2c96">cmux</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="structchannel__s.html#a4b5c4efce97c3256128f3c28cca0fc0b">  184</a></span>&#160;  circ_id_type_bitfield_t <a class="code" href="structchannel__s.html#a4b5c4efce97c3256128f3c28cca0fc0b">circ_id_type</a>:2;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">/* DOCDOC */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordtype">unsigned</span> wide_circ_ids:1;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="structchannel__s.html#a3e1b319de2651ee84a0a6be47a744e6d">  189</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#a3e1b319de2651ee84a0a6be47a744e6d">num_n_circuits</a>, num_p_circuits;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structchannel__s.html#ad01252277e44ab7616d337f00bf38944">  198</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#ad01252277e44ab7616d337f00bf38944">is_bad_for_new_circs</a>:1;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="structchannel__s.html#acb16a6d3640395b7965c84ea6d8476ab">  203</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#acb16a6d3640395b7965c84ea6d8476ab">is_client</a>:1;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structchannel__s.html#a7bb5810f2bfcddfb6481c604facf6435">  206</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#a7bb5810f2bfcddfb6481c604facf6435">is_incoming</a>:1;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structchannel__s.html#a03a61380598e667183c70d1eb6b8e038">  213</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structchannel__s.html#a03a61380598e667183c70d1eb6b8e038">is_local</a>:1;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structchannel__s.html#af0214b3e5d7d9b9381e1ba44c9126fdb">  217</a></span>&#160;  <a class="code" href="structratelim__t.html">ratelim_t</a> <a class="code" href="structchannel__s.html#af0214b3e5d7d9b9381e1ba44c9126fdb">last_warned_circ_ids_exhausted</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="structchannel__s.html#a74942f40e8282dc1e70c7bc43bebc844">  220</a></span>&#160;  time_t <a class="code" href="structchannel__s.html#a74942f40e8282dc1e70c7bc43bebc844">timestamp_client</a>; <span class="comment">/* Client used this, according to relay.c */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  time_t timestamp_drained; <span class="comment">/* Output queue empty */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  time_t timestamp_recv; <span class="comment">/* Cell received from lower layer */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  time_t timestamp_xmit; <span class="comment">/* Cell sent to lower layer */</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structchannel__s.html#a34a1d991a589f663b212a41be90696d3">  228</a></span>&#160;  time_t <a class="code" href="structchannel__s.html#a34a1d991a589f663b212a41be90696d3">timestamp_last_had_circuits</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structchannel__s.html#a4d038ff41124a7bf0ee017cf5c2f7623">  233</a></span>&#160;  uint64_t <a class="code" href="structchannel__s.html#a4d038ff41124a7bf0ee017cf5c2f7623">dirreq_id</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="structchannel__s.html#a624ed4fee710467c245786850c424c66">  236</a></span>&#160;  uint64_t <a class="code" href="structchannel__s.html#a624ed4fee710467c245786850c424c66">n_cells_recved</a>, n_bytes_recved;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  uint64_t n_cells_xmitted, n_bytes_xmitted;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="structchannel__s.html#ac0e16f2e9fd263e80a8632053993f897">  240</a></span>&#160;  uint64_t <a class="code" href="structchannel__s.html#ac0e16f2e9fd263e80a8632053993f897">bytes_queued_for_xmit</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="structchannel__s.html#afc948cd8975c683a52a83afac4e7d0bd">  245</a></span>&#160;  uint64_t <a class="code" href="structchannel__s.html#afc948cd8975c683a52a83afac4e7d0bd">bytes_in_queue</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;};</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html">  248</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structchannel__listener__s.html">channel_listener_s</a> {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">/* Current channel listener state */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  channel_listener_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">/* Globally unique ID number for a channel over the lifetime of a Tor</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">   * process.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  uint64_t <a class="code" href="structchannel__s.html#a661af3a689c2e0aedb5a76e5a4d72acd">global_identifier</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#a70c77a444470634d76636b3390dc3e1d">  258</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structchannel__listener__s.html#a70c77a444470634d76636b3390dc3e1d">registered</a>:1;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    CHANNEL_LISTENER_NOT_CLOSING = 0,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    CHANNEL_LISTENER_CLOSE_REQUESTED,</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    CHANNEL_LISTENER_CLOSE_FROM_BELOW,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    CHANNEL_LISTENER_CLOSE_FOR_ERROR</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  } <a class="code" href="structchannel__s.html#a03c3fe00dacf2f794b21b2f04bc65151">reason_for_closing</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#ac3010adaf03e1a400cc074f5ce9e20a4">  270</a></span>&#160;  time_t <a class="code" href="structchannel__listener__s.html#ac3010adaf03e1a400cc074f5ce9e20a4">timestamp_created</a>; <span class="comment">/* Channel created */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  time_t timestamp_active; <span class="comment">/* Any activity */</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">/* Methods implemented by the lower layer */</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#a70c10d4a17567f00a9cfd6bb6f866b23">  276</a></span>&#160;  void (*<a class="code" href="structchannel__s.html#a040475c466b41ea77259ae6577015894">free_fn</a>)(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *);</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#af5e345b18c8778101933cfc00213dd08">  278</a></span>&#160;  void (*<a class="code" href="structchannel__s.html#a1443b6af96b12275aebd0e6407c175e5">close</a>)(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *);</div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#a991f46d070058dd2c79eb878266c3f24">  280</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> * (*describe_transport)(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *);</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#a655023404c8c5f6b5787fd6896a8e2a9">  282</a></span>&#160;  void (*<a class="code" href="structchannel__s.html#a2ad8a92c4942bb917535fa0e804e822f">dumpstats</a>)(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *, int);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#adee2db5ce2e612c634bd4d23d62acf59">  285</a></span>&#160;  channel_listener_fn_ptr listener;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#a94050fa36e904be9d171ef506f1f0ba7">  288</a></span>&#160;  <a class="code" href="structsmartlist__t.html">smartlist_t</a> *<a class="code" href="structchannel__listener__s.html#a94050fa36e904be9d171ef506f1f0ba7">incoming_list</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#aed3f6aa228fd4d1794c35473d785afba">  291</a></span>&#160;  time_t <a class="code" href="structchannel__listener__s.html#aed3f6aa228fd4d1794c35473d785afba">timestamp_accepted</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="structchannel__listener__s.html#abf553de813ce0da0eaae3e55f802899a">  294</a></span>&#160;  uint64_t <a class="code" href="structchannel__listener__s.html#abf553de813ce0da0eaae3e55f802899a">n_accepted</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;};</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">/* Channel state manipulations */</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keywordtype">int</span> channel_state_is_valid(channel_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a5bdf98e720a6acc2e476e681e91e4fde">channel_listener_state_is_valid</a>(channel_listener_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a727f5f4b03dca7d9b0ef71842709c055">channel_state_can_transition</a>(channel_state_t from, channel_state_t to);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a447edc0876c6c437ae72b5c49b8e038a">channel_listener_state_can_transition</a>(channel_listener_state_t from,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                          channel_listener_state_t to);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="channel_8h.html#ac5368fc8c3c7f7b0ce1020927961c92a">channel_state_to_string</a>(channel_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<a class="code" href="channel_8h.html#aee0cac4ba2733cffddc9ff59be701687">channel_listener_state_to_string</a>(channel_listener_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">/* Abstract channel operations */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#ac5c51ad12ff89e0f63cc386ccda8493f">channel_mark_for_close</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#ab7dce1c4def06886d0a3e8f2aeb9d136">channel_write_cell</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <a class="code" href="structcell__t.html">cell_t</a> *cell);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#aeea0a09319d794c0f301f62fa5237512">channel_write_packed_cell</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <a class="code" href="structpacked__cell__t.html">packed_cell_t</a> *cell);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#af328f72343802140f8e423a846721a6c">channel_write_var_cell</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <a class="code" href="structvar__cell__t.html">var_cell_t</a> *cell);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a4d328d0eebd17c646ec3a1ff4442d827">channel_listener_mark_for_close</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">/* Channel callback registrations */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">/* Listener callback */</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;channel_listener_fn_ptr</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<a class="code" href="channel_8h.html#ab1245962c49dfe3349cf00e0cacd7f15">channel_listener_get_listener_fn</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a7ed86da67099b40c8eea25752b2260da">channel_listener_set_listener_fn</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                      channel_listener_fn_ptr listener);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">/* Incoming cell callbacks */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;channel_cell_handler_fn_ptr <a class="code" href="channel_8h.html#a9f3b8c3a3d91967c63fea496d2fe1b2e">channel_get_cell_handler</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;channel_var_cell_handler_fn_ptr</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<a class="code" href="channel_8h.html#aee619f7637f1a10fec2da20ea004e998">channel_get_var_cell_handler</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a5c26cbf4843fb4609f3f0c1eee87498c">channel_set_cell_handlers</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                               channel_cell_handler_fn_ptr <a class="code" href="structchannel__s.html#a9d2084af628e8b797cf3eb130723d971">cell_handler</a>,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                               channel_var_cell_handler_fn_ptr</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                 var_cell_handler);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/* Clean up closed channels and channel listeners periodically; these are</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> * called from run_scheduled_events() in main.c.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a1d874b0dd28680dd7f9661e2490d9091">channel_run_cleanup</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a3e7838364ded7b78a661a1f3f2f1c266">channel_listener_run_cleanup</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/* Close all channels and deallocate everything */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#adb2d84e3ecc8f662ed2072a2104d0b6b">channel_free_all</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/* Dump some statistics in the log */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a1ef365ba78cdfea35f694be31bfd6e91">channel_dumpstats</a>(<span class="keywordtype">int</span> severity);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#ab0519ba6c6b14de83e886ed42095fe68">channel_listener_dumpstats</a>(<span class="keywordtype">int</span> severity);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/* Set the cmux policy on all active channels */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#ab581fe82a432b885561d00ab3ecceba6">channel_set_cmux_policy_everywhere</a>(<a class="code" href="structcircuitmux__policy__s.html">circuitmux_policy_t</a> *pol);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#ifdef TOR_CHANNEL_INTERNAL_</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#ifdef CHANNEL_PRIVATE_</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">/* Cell queue structure (here rather than channel.c for test suite use) */</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>cell_queue_entry_s cell_queue_entry_t;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="keyword">struct </span>cell_queue_entry_s {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  TOR_SIMPLEQ_ENTRY(cell_queue_entry_s) next;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    CELL_QUEUE_FIXED,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    CELL_QUEUE_VAR,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    CELL_QUEUE_PACKED</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  } type;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="structcell__t.html">cell_t</a> *cell;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    } fixed;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <a class="code" href="structvar__cell__t.html">var_cell_t</a> *var_cell;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    } var;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="structpacked__cell__t.html">packed_cell_t</a> *packed_cell;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    } packed;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  } u;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;};</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">/* Cell queue functions for benefit of test suite */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;STATIC <span class="keywordtype">int</span> <a class="code" href="channel_8c.html#a4f2355dcc6bc54b549bfbe8d6ae7f80e">chan_cell_queue_len</a>(<span class="keyword">const</span> chan_cell_queue_t *queue);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;STATIC <span class="keywordtype">void</span> <a class="code" href="channel_8c.html#ae06da2fa9517932c784776910a727575">cell_queue_entry_free</a>(cell_queue_entry_t *q, <span class="keywordtype">int</span> handed_off);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/* Channel operations for subclasses and internal use only */</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/* Initialize a newly allocated channel - do this first in subclass</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> * constructors.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#af394d37fffd7367c8c882834e6451a89">channel_init</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a4259678584b7e032533f1144a7412616">channel_init_listener</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">/* Channel registration/unregistration */</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a7becc4cc5e7dd116f44f86a1b826dc9a">channel_register</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a9bbc6210c258ddbc944e9f0d6d386b45">channel_unregister</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/* Channel listener registration/unregistration */</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a7fc659d90d9518f8f8bcf5a4d4f49acb">channel_listener_register</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a2d954d609b0decab6e56e2ab7e2444f6">channel_listener_unregister</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/* Close from below */</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a4e837dc6a0d539d5f38ed4b0977448f5">channel_close_from_lower_layer</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#aa5b91c363817271b75f1f75fa967e5e3">channel_close_for_error</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a41a07dcb3da5d642570a8ed069c27450">channel_closed</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#aa2d446886086cabc6998de0c9a2379ba">channel_listener_close_from_lower_layer</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a129ce2c9cfd17476509259c64c96ef9a">channel_listener_close_for_error</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#aaeadb08bb4e207f76f8bff0aa060e552">channel_listener_closed</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">/* Free a channel */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a3ac80d0068b62d8da9adddb13ff2a6cf">channel_free</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a5140f151872899d07a2f1cd451902d38">channel_listener_free</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">/* State/metadata setters */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#afae0c20f03e6a224c2d730ec96342097">channel_change_state</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, channel_state_t to_state);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#ac7370451f8b2f2b79a84f7f9b902de34">channel_clear_identity_digest</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#acd708a0b9e8474dd133f87a50d341f7b">channel_clear_remote_end</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a366226ae4d3bca86afd5eff78e61cc27">channel_mark_local</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a40184005ca97cc8b3e70ac3a82b9d1fa">channel_mark_incoming</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#ad513e8317c2960176b7a646bb675b2e9">channel_mark_outgoing</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a9a9d0a934832b0444951a374a78025cb">channel_mark_remote</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a1480a4744614272467a7a8f0d8fcfe10">channel_set_identity_digest</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structchannel__s.html#a55d09977f6fcf3c3be8dcc9625c14e60">identity_digest</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a4c0eafffa39adec24d12c71d73ff787e">channel_set_remote_end</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structchannel__s.html#a55d09977f6fcf3c3be8dcc9625c14e60">identity_digest</a>,</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structchannel__s.html#aebf3fd229429c27d00bd36dea7157407">nickname</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#ad0126606a15537e0647e81a9c2ca8b74">channel_listener_change_state</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                   channel_listener_state_t to_state);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">/* Timestamp updates */</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a63986ced82f0d5c58fd872e40ed46598">channel_timestamp_created</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a08dea4276de8427cb789cda94be8eea7">channel_timestamp_active</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#ae241ae9b959f87e8ef459072554b212c">channel_timestamp_drained</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a1cc7e87f9acbb2d5954540f997cf0b57">channel_timestamp_recv</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#abdbe03d1c68e1ebc7133e4195fbfca29">channel_timestamp_xmit</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a7c86ea4153b077173702319f0fa5b196">channel_listener_timestamp_created</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a7ccf1c1d0d34e84bb663fea0426051b5">channel_listener_timestamp_active</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#abc3b198fd2e78a28eda3228892847baa">channel_listener_timestamp_accepted</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/* Incoming channel handling */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a1a020ddaa5f55c078d4513c47128f263">channel_listener_process_incoming</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *listener);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a54f08cb6c0828f43f1253018f9fe3650">channel_listener_queue_incoming</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *listener,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                     <a class="code" href="structchannel__s.html">channel_t</a> *incoming);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/* Incoming cell handling */</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a4d779fa720c5cbfaf471beed3bb4a250">channel_process_cells</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#ad6b3fc1d914f5b70d578f9d6c28b7d08">channel_queue_cell</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <a class="code" href="structcell__t.html">cell_t</a> *cell);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#afd3f5f080d288757750e3a87197e0fe0">channel_queue_var_cell</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <a class="code" href="structvar__cell__t.html">var_cell_t</a> *var_cell);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/* Outgoing cell handling */</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a62262142bf0c29177541974c9145e891">channel_flush_cells</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">/* Request from lower layer for more cells if available */</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;MOCK_DECL(ssize_t, channel_flush_some_cells,</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;          (<a class="code" href="structchannel__s.html">channel_t</a> *chan, ssize_t num_cells));</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">/* Query if data available on this channel */</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8c.html#ae21ca65f57566e7d01246216b3a6927f">channel_more_to_flush</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/* Notify flushed outgoing for dirreq handling */</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#abc5a904f9dc44b21911ceed8d18fd218">channel_notify_flushed</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">/* Handle stuff we need to do on open like notifying circuits */</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8c.html#a4bb9524073333e156da271ca623a772d">channel_do_open_actions</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">#ifdef TOR_UNIT_TESTS</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keyword">extern</span> uint64_t estimated_total_queue_size;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">/* Helper functions to perform operations on channels */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a85e3e2de528821cdda969fba6de1e4f2">channel_send_destroy</a>(<a class="code" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> circ_id, <a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                         <span class="keywordtype">int</span> reason);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * Outside abstract interfaces that should eventually get turned into</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> * something transport/address format independent.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<a class="code" href="structchannel__s.html">channel_t</a> * <a class="code" href="channel_8h.html#a13b8cc7d1d3dbbdca20c863c3cb35273">channel_connect</a>(<span class="keyword">const</span> <a class="code" href="structtor__addr__t.html">tor_addr_t</a> *addr, uint16_t port,</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">char</span> *id_digest);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<a class="code" href="structchannel__s.html">channel_t</a> * <a class="code" href="channel_8h.html#a41ebc2554b7f8fd2b5c331bf7dc94ecc">channel_get_for_extend</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *digest,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="structtor__addr__t.html">tor_addr_t</a> *target_addr,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> **msg_out,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                   <span class="keywordtype">int</span> *launch_out);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">/* Ask which of two channels is better for circuit-extension purposes */</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#aa37fcbdaafeac83501c1699e61d8e128">channel_is_better</a>(time_t now,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                      <a class="code" href="structchannel__s.html">channel_t</a> *a, <a class="code" href="structchannel__s.html">channel_t</a> *b,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                      <span class="keywordtype">int</span> forgive_new_connections);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<a class="code" href="structchannel__s.html">channel_t</a> * <a class="code" href="channel_8h.html#a03ce362c180c51c5018668bae7bb4f24">channel_find_by_global_id</a>(uint64_t <a class="code" href="structchannel__s.html#a661af3a689c2e0aedb5a76e5a4d72acd">global_identifier</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<a class="code" href="structchannel__s.html">channel_t</a> * <a class="code" href="channel_8h.html#a0542e2ca72fe8da87de8ea2f711dd7dc">channel_find_by_remote_digest</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structchannel__s.html#a55d09977f6fcf3c3be8dcc9625c14e60">identity_digest</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<a class="code" href="structchannel__s.html">channel_t</a> * <a class="code" href="channel_8h.html#a53ee6566b1661b9e37181d8f83efdfbd">channel_next_with_digest</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"> * Helper macros to lookup state of given channel.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#define CHANNEL_IS_CLOSED(chan) (channel_is_in_state((chan), \</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">                                 CHANNEL_STATE_CLOSED))</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#define CHANNEL_IS_OPENING(chan) (channel_is_in_state((chan), \</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">                                  CHANNEL_STATE_OPENING))</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="preprocessor">#define CHANNEL_IS_OPEN(chan) (channel_is_in_state((chan), \</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">                               CHANNEL_STATE_OPEN))</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#define CHANNEL_IS_MAINT(chan) (channel_is_in_state((chan), \</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="preprocessor">                                CHANNEL_STATE_MAINT))</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#define CHANNEL_IS_CLOSING(chan) (channel_is_in_state((chan), \</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor">                                  CHANNEL_STATE_CLOSING))</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">#define CHANNEL_IS_ERROR(chan) (channel_is_in_state((chan), \</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="preprocessor">                                CHANNEL_STATE_ERROR))</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="preprocessor">#define CHANNEL_FINISHED(chan) (CHANNEL_IS_CLOSED(chan) || \</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">                                CHANNEL_IS_ERROR(chan))</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor">#define CHANNEL_CONDEMNED(chan) (CHANNEL_IS_CLOSING(chan) || \</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">                                 CHANNEL_FINISHED(chan))</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="preprocessor">#define CHANNEL_CAN_HANDLE_CELLS(chan) (CHANNEL_IS_OPENING(chan) || \</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">                                        CHANNEL_IS_OPEN(chan) || \</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="preprocessor">                                        CHANNEL_IS_MAINT(chan))</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;channel_is_in_state(<a class="code" href="structchannel__s.html">channel_t</a> *chan, channel_state_t <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">return</span> chan-&gt;<a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a> == <a class="code" href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">state</a>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"> * Metadata queries/updates</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="channel_8h.html#a185d59ac3e69ab26d2b71804cb882993">channel_describe_transport</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;MOCK_DECL(<span class="keywordtype">void</span>, channel_dump_statistics, (<a class="code" href="structchannel__s.html">channel_t</a> *chan, <span class="keywordtype">int</span> severity));</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#ae2704646dbc4d5113c2160fd9842f128">channel_dump_transport_statistics</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <span class="keywordtype">int</span> severity);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="channel_8h.html#a8608773117c50600ebe58ffc331b6b3e">channel_get_actual_remote_descr</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="channel_8h.html#a3c1c9c62855d488fa17eaa4c4dd3f6e5">channel_get_actual_remote_address</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;MOCK_DECL(<span class="keywordtype">int</span>, channel_get_addr_if_possible, (<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                              <a class="code" href="structtor__addr__t.html">tor_addr_t</a> *addr_out));</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="channel_8h.html#a5a9a5bd1e17411b06028d4839ad6e6df">channel_get_canonical_remote_descr</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a02db0f9ae91b50323bd345a224d9d1d8">channel_has_queued_writes</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a118d357c7f7accb2f220b000f33ea714">channel_is_bad_for_new_circs</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a93b61336ba7b19572a83d335a6aad65f">channel_mark_bad_for_new_circs</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a58978b931d8b11d4673287e59f8d54bc">channel_is_canonical</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a2175e5e47f323e17e518474e8210907f">channel_is_canonical_is_reliable</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a4970564e5ce0547254f76d09d942e0f1">channel_is_client</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#ab7950c59a4fefcd76e3e3b327d86114f">channel_is_local</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a94903f24f674c7a4dd95dd51e6b6b047">channel_is_incoming</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a150180857a5c09e9ab16095b6011fd06">channel_is_outgoing</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a3ad8f3da9b53f2a239196da6a822420a">channel_mark_client</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#a6cb4f4e8f649a753d3d22fb84653c05b">channel_matches_extend_info</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan, <a class="code" href="structextend__info__t.html">extend_info_t</a> *extend_info);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#ae9744cd45d925184288dc3751fc1d455">channel_matches_target_addr_for_extend</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="structtor__addr__t.html">tor_addr_t</a> *target);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="channel_8h.html#ae541683374c3002a6218c576c9775910">channel_num_circuits</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;MOCK_DECL(<span class="keywordtype">void</span>,channel_set_circid_type,(<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                        <a class="code" href="structcrypto__pk__t.html">crypto_pk_t</a> *identity_rcvd,</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                        <span class="keywordtype">int</span> consider_identity));</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a20cdde3933fc1ca5c83494d1fb0e684f">channel_timestamp_client</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#abf9310a1fa1a4d1cb1e3af383a98d902">channel_update_xmit_queue_size</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="channel_8h.html#a0104c379fab8d5cf7dc3eddf113dc44e">channel_listener_describe_transport</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a31e2ae335dbe5af256b18df4f3c1070e">channel_listener_dump_statistics</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l,</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                      <span class="keywordtype">int</span> severity);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="keywordtype">void</span> <a class="code" href="channel_8h.html#a8193e4c4351e724edc8ecaddd09f8e10">channel_listener_dump_transport_statistics</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l,</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                                <span class="keywordtype">int</span> severity);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">/* Flow control queries */</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;uint64_t channel_get_global_queue_estimate(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="keywordtype">int</span> channel_num_cells_writeable(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">/* Timestamp queries */</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;time_t <a class="code" href="channel_8h.html#aeff1eebb5bba0a9371c5679994d51329">channel_when_created</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;time_t <a class="code" href="channel_8h.html#a886fbc84390a27e4007562e2e3ddacb5">channel_when_last_active</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;time_t <a class="code" href="channel_8h.html#a7c7c9bb52317ac2f0189a286108bdc7e">channel_when_last_client</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;time_t <a class="code" href="channel_8h.html#a04116ec19eadb75b7315366655023791">channel_when_last_drained</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;time_t <a class="code" href="channel_8h.html#adcbc61adb34b9ce4351a0d5f68915e52">channel_when_last_recv</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;time_t <a class="code" href="channel_8h.html#a3ce5cc93d2f7a10ad18300c4049108ef">channel_when_last_xmit</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;time_t <a class="code" href="channel_8h.html#a0dbcc9a594a0c1794e26a40e7c9dd99b">channel_listener_when_created</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;time_t <a class="code" href="channel_8h.html#a2f1789dfc777235ab09dabb4977653b6">channel_listener_when_last_active</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;time_t <a class="code" href="channel_8h.html#a8926e55f5ad9503ad24c9c4e6f663df5">channel_listener_when_last_accepted</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/* Counter queries */</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;uint64_t <a class="code" href="channel_8h.html#ad7a626fd0d7ed9d4107ace44f7544224">channel_count_recved</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;uint64_t <a class="code" href="channel_8h.html#a633aef9ca1dea3cfa6dc0ed41edd725b">channel_count_xmitted</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;uint64_t <a class="code" href="channel_8h.html#a24b23c1e80a639fe9092437b9ddccadd">channel_listener_count_accepted</a>(<a class="code" href="structchannel__listener__s.html">channel_listener_t</a> *chan_l);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="keywordtype">int</span> <a class="code" href="channel_8h.html#aa036957ef1d90c086c403814da8de52f">packed_cell_is_destroy</a>(<a class="code" href="structchannel__s.html">channel_t</a> *chan,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                           <span class="keyword">const</span> <a class="code" href="structpacked__cell__t.html">packed_cell_t</a> *packed_cell,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                           <a class="code" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> *circid_out);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="ttc" id="structchannel__s_html_a835bd5cab7aa5739bd80c5eb286b607e"><div class="ttname"><a href="structchannel__s.html#a835bd5cab7aa5739bd80c5eb286b607e">channel_s::incoming_queue</a></div><div class="ttdeci">chan_cell_queue_t incoming_queue</div><div class="ttdef"><b>Definition:</b> channel.h:170</div></div>
<div class="ttc" id="structchannel__s_html_afdef949f9c411bce0f6337e1152426c1"><div class="ttname"><a href="structchannel__s.html#afdef949f9c411bce0f6337e1152426c1">channel_s::has_queued_writes</a></div><div class="ttdeci">int(* has_queued_writes)(channel_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:132</div></div>
<div class="ttc" id="channel_8c_html_a1cc7e87f9acbb2d5954540f997cf0b57"><div class="ttname"><a href="channel_8c.html#a1cc7e87f9acbb2d5954540f997cf0b57">channel_timestamp_recv</a></div><div class="ttdeci">void channel_timestamp_recv(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4268</div></div>
<div class="ttc" id="channel_8h_html_a447edc0876c6c437ae72b5c49b8e038a"><div class="ttname"><a href="channel_8h.html#a447edc0876c6c437ae72b5c49b8e038a">channel_listener_state_can_transition</a></div><div class="ttdeci">int channel_listener_state_can_transition(channel_listener_state_t from, channel_listener_state_t to)</div><div class="ttdef"><b>Definition:</b> channel.c:323</div></div>
<div class="ttc" id="structchannel__s_html_a4b5c4efce97c3256128f3c28cca0fc0b"><div class="ttname"><a href="structchannel__s.html#a4b5c4efce97c3256128f3c28cca0fc0b">channel_s::circ_id_type</a></div><div class="ttdeci">circ_id_type_bitfield_t circ_id_type</div><div class="ttdef"><b>Definition:</b> channel.h:184</div></div>
<div class="ttc" id="channel_8h_html_a04116ec19eadb75b7315366655023791"><div class="ttname"><a href="channel_8h.html#a04116ec19eadb75b7315366655023791">channel_when_last_drained</a></div><div class="ttdeci">time_t channel_when_last_drained(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4376</div></div>
<div class="ttc" id="structchannel__s_html_ac0e16f2e9fd263e80a8632053993f897"><div class="ttname"><a href="structchannel__s.html#ac0e16f2e9fd263e80a8632053993f897">channel_s::bytes_queued_for_xmit</a></div><div class="ttdeci">uint64_t bytes_queued_for_xmit</div><div class="ttdef"><b>Definition:</b> channel.h:240</div></div>
<div class="ttc" id="channel_8c_html_afae0c20f03e6a224c2d730ec96342097"><div class="ttname"><a href="channel_8c.html#afae0c20f03e6a224c2d730ec96342097">channel_change_state</a></div><div class="ttdeci">void channel_change_state(channel_t *chan, channel_state_t to_state)</div><div class="ttdef"><b>Definition:</b> channel.c:1965</div></div>
<div class="ttc" id="structchannel__s_html_ab2ca128234a743b39750554dc2991095"><div class="ttname"><a href="structchannel__s.html#ab2ca128234a743b39750554dc2991095">channel_s::matches_target</a></div><div class="ttdeci">int(* matches_target)(channel_t *, const tor_addr_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:143</div></div>
<div class="ttc" id="channel_8h_html_a0104c379fab8d5cf7dc3eddf113dc44e"><div class="ttname"><a href="channel_8h.html#a0104c379fab8d5cf7dc3eddf113dc44e">channel_listener_describe_transport</a></div><div class="ttdeci">const char * channel_listener_describe_transport(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:3453</div></div>
<div class="ttc" id="structchannel__s_html_a9d2084af628e8b797cf3eb130723d971"><div class="ttname"><a href="structchannel__s.html#a9d2084af628e8b797cf3eb130723d971">channel_s::cell_handler</a></div><div class="ttdeci">channel_cell_handler_fn_ptr cell_handler</div><div class="ttdef"><b>Definition:</b> channel.h:102</div></div>
<div class="ttc" id="channel_8h_html_a3ad8f3da9b53f2a239196da6a822420a"><div class="ttname"><a href="channel_8h.html#a3ad8f3da9b53f2a239196da6a822420a">channel_mark_client</a></div><div class="ttdeci">void channel_mark_client(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3937</div></div>
<div class="ttc" id="structchannel__s_html_ac400edb28b990aa4312ce3b1dc9891fe"><div class="ttname"><a href="structchannel__s.html#ac400edb28b990aa4312ce3b1dc9891fe">channel_s::has_been_open</a></div><div class="ttdeci">unsigned int has_been_open</div><div class="ttdef"><b>Definition:</b> channel.h:49</div></div>
<div class="ttc" id="channel_8c_html_a08dea4276de8427cb789cda94be8eea7"><div class="ttname"><a href="channel_8c.html#a08dea4276de8427cb789cda94be8eea7">channel_timestamp_active</a></div><div class="ttdeci">void channel_timestamp_active(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4182</div></div>
<div class="ttc" id="channel_8h_html_ab0519ba6c6b14de83e886ed42095fe68"><div class="ttname"><a href="channel_8h.html#ab0519ba6c6b14de83e886ed42095fe68">channel_listener_dumpstats</a></div><div class="ttdeci">void channel_listener_dumpstats(int severity)</div><div class="ttdef"><b>Definition:</b> channel.c:3022</div></div>
<div class="ttc" id="channel_8c_html_aa5b91c363817271b75f1f75fa967e5e3"><div class="ttname"><a href="channel_8c.html#aa5b91c363817271b75f1f75fa967e5e3">channel_close_for_error</a></div><div class="ttdeci">void channel_close_for_error(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1290</div></div>
<div class="ttc" id="channel_8c_html_a4d779fa720c5cbfaf471beed3bb4a250"><div class="ttname"><a href="channel_8c.html#a4d779fa720c5cbfaf471beed3bb4a250">channel_process_cells</a></div><div class="ttdeci">void channel_process_cells(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:2670</div></div>
<div class="ttc" id="channel_8h_html_ac5368fc8c3c7f7b0ce1020927961c92a"><div class="ttname"><a href="channel_8h.html#ac5368fc8c3c7f7b0ce1020927961c92a">channel_state_to_string</a></div><div class="ttdeci">const char * channel_state_to_string(channel_state_t state)</div><div class="ttdef"><b>Definition:</b> channel.c:356</div></div>
<div class="ttc" id="channel_8h_html_a94903f24f674c7a4dd95dd51e6b6b047"><div class="ttname"><a href="channel_8h.html#a94903f24f674c7a4dd95dd51e6b6b047">channel_is_incoming</a></div><div class="ttdeci">int channel_is_incoming(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3984</div></div>
<div class="ttc" id="structcell__t_html"><div class="ttname"><a href="structcell__t.html">cell_t</a></div><div class="ttdef"><b>Definition:</b> or.h:1068</div></div>
<div class="ttc" id="structtor__addr__t_html"><div class="ttname"><a href="structtor__addr__t.html">tor_addr_t</a></div><div class="ttdef"><b>Definition:</b> address.h:56</div></div>
<div class="ttc" id="channel_8c_html_a4c0eafffa39adec24d12c71d73ff787e"><div class="ttname"><a href="channel_8c.html#a4c0eafffa39adec24d12c71d73ff787e">channel_set_remote_end</a></div><div class="ttdeci">void channel_set_remote_end(channel_t *chan, const char *identity_digest, const char *nickname)</div><div class="ttdef"><b>Definition:</b> channel.c:1523</div></div>
<div class="ttc" id="channel_8h_html_a5c26cbf4843fb4609f3f0c1eee87498c"><div class="ttname"><a href="channel_8h.html#a5c26cbf4843fb4609f3f0c1eee87498c">channel_set_cell_handlers</a></div><div class="ttdeci">void channel_set_cell_handlers(channel_t *chan, channel_cell_handler_fn_ptr cell_handler, channel_var_cell_handler_fn_ptr var_cell_handler)</div><div class="ttdef"><b>Definition:</b> channel.c:1094</div></div>
<div class="ttc" id="channel_8h_html_a24b23c1e80a639fe9092437b9ddccadd"><div class="ttname"><a href="channel_8h.html#a24b23c1e80a639fe9092437b9ddccadd">channel_listener_count_accepted</a></div><div class="ttdeci">uint64_t channel_listener_count_accepted(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4412</div></div>
<div class="ttc" id="channel_8h_html_ab581fe82a432b885561d00ab3ecceba6"><div class="ttname"><a href="channel_8h.html#ab581fe82a432b885561d00ab3ecceba6">channel_set_cmux_policy_everywhere</a></div><div class="ttdeci">void channel_set_cmux_policy_everywhere(circuitmux_policy_t *pol)</div><div class="ttdef"><b>Definition:</b> channel.c:3051</div></div>
<div class="ttc" id="channel_8c_html_ae21ca65f57566e7d01246216b3a6927f"><div class="ttname"><a href="channel_8c.html#ae21ca65f57566e7d01246216b3a6927f">channel_more_to_flush</a></div><div class="ttdeci">int channel_more_to_flush(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:2462</div></div>
<div class="ttc" id="channel_8h_html_ae541683374c3002a6218c576c9775910"><div class="ttname"><a href="channel_8h.html#ae541683374c3002a6218c576c9775910">channel_num_circuits</a></div><div class="ttdeci">unsigned int channel_num_circuits(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4486</div></div>
<div class="ttc" id="channel_8h_html_a85e3e2de528821cdda969fba6de1e4f2"><div class="ttname"><a href="channel_8h.html#a85e3e2de528821cdda969fba6de1e4f2">channel_send_destroy</a></div><div class="ttdeci">int channel_send_destroy(circid_t circ_id, channel_t *chan, int reason)</div><div class="ttdef"><b>Definition:</b> channel.c:2936</div></div>
<div class="ttc" id="structchannel__s_html_a03a61380598e667183c70d1eb6b8e038"><div class="ttname"><a href="structchannel__s.html#a03a61380598e667183c70d1eb6b8e038">channel_s::is_local</a></div><div class="ttdeci">unsigned int is_local</div><div class="ttdef"><b>Definition:</b> channel.h:213</div></div>
<div class="ttc" id="channel_8h_html_a13b8cc7d1d3dbbdca20c863c3cb35273"><div class="ttname"><a href="channel_8h.html#a13b8cc7d1d3dbbdca20c863c3cb35273">channel_connect</a></div><div class="ttdeci">channel_t * channel_connect(const tor_addr_t *addr, uint16_t port, const char *id_digest)</div><div class="ttdef"><b>Definition:</b> channel.c:3256</div></div>
<div class="ttc" id="channel_8h_html_a3ce5cc93d2f7a10ad18300c4049108ef"><div class="ttname"><a href="channel_8h.html#a3ce5cc93d2f7a10ad18300c4049108ef">channel_when_last_xmit</a></div><div class="ttdeci">time_t channel_when_last_xmit(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4400</div></div>
<div class="ttc" id="structchannel__listener__s_html_a70c77a444470634d76636b3390dc3e1d"><div class="ttname"><a href="structchannel__listener__s.html#a70c77a444470634d76636b3390dc3e1d">channel_listener_s::registered</a></div><div class="ttdeci">unsigned char registered</div><div class="ttdef"><b>Definition:</b> channel.h:258</div></div>
<div class="ttc" id="channel_8h_html_a20cdde3933fc1ca5c83494d1fb0e684f"><div class="ttname"><a href="channel_8h.html#a20cdde3933fc1ca5c83494d1fb0e684f">channel_timestamp_client</a></div><div class="ttdeci">void channel_timestamp_client(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4232</div></div>
<div class="ttc" id="channel_8c_html_a7ccf1c1d0d34e84bb663fea0426051b5"><div class="ttname"><a href="channel_8c.html#a7ccf1c1d0d34e84bb663fea0426051b5">channel_listener_timestamp_active</a></div><div class="ttdeci">void channel_listener_timestamp_active(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4196</div></div>
<div class="ttc" id="channel_8h_html_a633aef9ca1dea3cfa6dc0ed41edd725b"><div class="ttname"><a href="channel_8h.html#a633aef9ca1dea3cfa6dc0ed41edd725b">channel_count_xmitted</a></div><div class="ttdeci">uint64_t channel_count_xmitted(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4436</div></div>
<div class="ttc" id="structchannel__s_html_a70c77a444470634d76636b3390dc3e1d"><div class="ttname"><a href="structchannel__s.html#a70c77a444470634d76636b3390dc3e1d">channel_s::registered</a></div><div class="ttdeci">unsigned char registered</div><div class="ttdef"><b>Definition:</b> channel.h:46</div></div>
<div class="ttc" id="channel_8c_html_a4e837dc6a0d539d5f38ed4b0977448f5"><div class="ttname"><a href="channel_8c.html#a4e837dc6a0d539d5f38ed4b0977448f5">channel_close_from_lower_layer</a></div><div class="ttdeci">void channel_close_from_lower_layer(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1231</div></div>
<div class="ttc" id="channel_8h_html_ae2704646dbc4d5113c2160fd9842f128"><div class="ttname"><a href="channel_8h.html#ae2704646dbc4d5113c2160fd9842f128">channel_dump_transport_statistics</a></div><div class="ttdeci">void channel_dump_transport_statistics(channel_t *chan, int severity)</div><div class="ttdef"><b>Definition:</b> channel.c:3766</div></div>
<div class="ttc" id="structpacked__cell__t_html"><div class="ttname"><a href="structpacked__cell__t.html">packed_cell_t</a></div><div class="ttdef"><b>Definition:</b> or.h:1095</div></div>
<div class="ttc" id="channel_8c_html_a1480a4744614272467a7a8f0d8fcfe10"><div class="ttname"><a href="channel_8c.html#a1480a4744614272467a7a8f0d8fcfe10">channel_set_identity_digest</a></div><div class="ttdeci">void channel_set_identity_digest(channel_t *chan, const char *identity_digest)</div><div class="ttdef"><b>Definition:</b> channel.c:1438</div></div>
<div class="ttc" id="structchannel__s_html_a57f54349f4fd1cbbb52058812e146af2"><div class="ttname"><a href="structchannel__s.html#a57f54349f4fd1cbbb52058812e146af2">channel_s::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdef"><b>Definition:</b> channel.h:35</div></div>
<div class="ttc" id="channel_8c_html_aa2d446886086cabc6998de0c9a2379ba"><div class="ttname"><a href="channel_8c.html#aa2d446886086cabc6998de0c9a2379ba">channel_listener_close_from_lower_layer</a></div><div class="ttdeci">void channel_listener_close_from_lower_layer(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:1260</div></div>
<div class="ttc" id="channel_8c_html_afd3f5f080d288757750e3a87197e0fe0"><div class="ttname"><a href="channel_8c.html#afd3f5f080d288757750e3a87197e0fe0">channel_queue_var_cell</a></div><div class="ttdeci">void channel_queue_var_cell(channel_t *chan, var_cell_t *var_cell)</div><div class="ttdef"><b>Definition:</b> channel.c:2808</div></div>
<div class="ttc" id="channel_8h_html_ae9744cd45d925184288dc3751fc1d455"><div class="ttname"><a href="channel_8h.html#ae9744cd45d925184288dc3751fc1d455">channel_matches_target_addr_for_extend</a></div><div class="ttdeci">int channel_matches_target_addr_for_extend(channel_t *chan, const tor_addr_t *target)</div><div class="ttdef"><b>Definition:</b> channel.c:4468</div></div>
<div class="ttc" id="channel_8h_html_ad7a626fd0d7ed9d4107ace44f7544224"><div class="ttname"><a href="channel_8h.html#ad7a626fd0d7ed9d4107ace44f7544224">channel_count_recved</a></div><div class="ttdeci">uint64_t channel_count_recved(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4424</div></div>
<div class="ttc" id="structsmartlist__t_html"><div class="ttname"><a href="structsmartlist__t.html">smartlist_t</a></div><div class="ttdef"><b>Definition:</b> container.h:18</div></div>
<div class="ttc" id="structchannel__s_html_a34a1d991a589f663b212a41be90696d3"><div class="ttname"><a href="structchannel__s.html#a34a1d991a589f663b212a41be90696d3">channel_s::timestamp_last_had_circuits</a></div><div class="ttdeci">time_t timestamp_last_had_circuits</div><div class="ttdef"><b>Definition:</b> channel.h:228</div></div>
<div class="ttc" id="structchannel__s_html_a433498749aef02177e1ec1a6b13b7971"><div class="ttname"><a href="structchannel__s.html#a433498749aef02177e1ec1a6b13b7971">channel_s::matches_extend_info</a></div><div class="ttdeci">int(* matches_extend_info)(channel_t *, extend_info_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:141</div></div>
<div class="ttc" id="channel_8h_html_a7c7c9bb52317ac2f0189a286108bdc7e"><div class="ttname"><a href="channel_8h.html#a7c7c9bb52317ac2f0189a286108bdc7e">channel_when_last_client</a></div><div class="ttdeci">time_t channel_when_last_client(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4364</div></div>
<div class="ttc" id="channel_8c_html_a7c86ea4153b077173702319f0fa5b196"><div class="ttname"><a href="channel_8c.html#a7c86ea4153b077173702319f0fa5b196">channel_listener_timestamp_created</a></div><div class="ttdeci">void channel_listener_timestamp_created(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4161</div></div>
<div class="ttc" id="structchannel__s_html_a2460f9a13547d667d801e872f4adfc91"><div class="ttname"><a href="structchannel__s.html#a2460f9a13547d667d801e872f4adfc91">channel_s::TOR_LIST_ENTRY</a></div><div class="ttdeci">TOR_LIST_ENTRY(channel_s) next_with_same_id</div></div>
<div class="ttc" id="channel_8h_html_aa036957ef1d90c086c403814da8de52f"><div class="ttname"><a href="channel_8h.html#aa036957ef1d90c086c403814da8de52f">packed_cell_is_destroy</a></div><div class="ttdeci">int packed_cell_is_destroy(channel_t *chan, const packed_cell_t *packed_cell, circid_t *circid_out)</div><div class="ttdef"><b>Definition:</b> channel.c:2871</div></div>
<div class="ttc" id="channel_8c_html_ad6b3fc1d914f5b70d578f9d6c28b7d08"><div class="ttname"><a href="channel_8c.html#ad6b3fc1d914f5b70d578f9d6c28b7d08">channel_queue_cell</a></div><div class="ttdeci">void channel_queue_cell(channel_t *chan, cell_t *cell)</div><div class="ttdef"><b>Definition:</b> channel.c:2742</div></div>
<div class="ttc" id="channel_8h_html_aeea0a09319d794c0f301f62fa5237512"><div class="ttname"><a href="channel_8h.html#aeea0a09319d794c0f301f62fa5237512">channel_write_packed_cell</a></div><div class="ttdeci">void channel_write_packed_cell(channel_t *chan, packed_cell_t *cell)</div><div class="ttdef"><b>Definition:</b> channel.c:1888</div></div>
<div class="ttc" id="crypto_8h_html_a14aa0c95ad1775ec290dc69b1ada1f6b"><div class="ttname"><a href="crypto_8h.html#a14aa0c95ad1775ec290dc69b1ada1f6b">DIGEST_LEN</a></div><div class="ttdeci">#define DIGEST_LEN</div><div class="ttdef"><b>Definition:</b> crypto.h:56</div></div>
<div class="ttc" id="structchannel__s_html_a6830539bd42e3ff7d349e154ca329c63"><div class="ttname"><a href="structchannel__s.html#a6830539bd42e3ff7d349e154ca329c63">channel_s::write_packed_cell</a></div><div class="ttdeci">int(* write_packed_cell)(channel_t *, packed_cell_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:151</div></div>
<div class="ttc" id="channel_8h_html_adcbc61adb34b9ce4351a0d5f68915e52"><div class="ttname"><a href="channel_8h.html#adcbc61adb34b9ce4351a0d5f68915e52">channel_when_last_recv</a></div><div class="ttdeci">time_t channel_when_last_recv(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4388</div></div>
<div class="ttc" id="structchannel__s_html_a55d09977f6fcf3c3be8dcc9625c14e60"><div class="ttname"><a href="structchannel__s.html#a55d09977f6fcf3c3be8dcc9625c14e60">channel_s::identity_digest</a></div><div class="ttdeci">char identity_digest[DIGEST_LEN]</div><div class="ttdef"><b>Definition:</b> channel.h:159</div></div>
<div class="ttc" id="channel_8h_html_a4d328d0eebd17c646ec3a1ff4442d827"><div class="ttname"><a href="channel_8h.html#a4d328d0eebd17c646ec3a1ff4442d827">channel_listener_mark_for_close</a></div><div class="ttdeci">void channel_listener_mark_for_close(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:1190</div></div>
<div class="ttc" id="channel_8h_html_a0542e2ca72fe8da87de8ea2f711dd7dc"><div class="ttname"><a href="channel_8h.html#a0542e2ca72fe8da87de8ea2f711dd7dc">channel_find_by_remote_digest</a></div><div class="ttdeci">channel_t * channel_find_by_remote_digest(const char *identity_digest)</div><div class="ttdef"><b>Definition:</b> channel.c:745</div></div>
<div class="ttc" id="channel_8h_html_aee619f7637f1a10fec2da20ea004e998"><div class="ttname"><a href="channel_8h.html#aee619f7637f1a10fec2da20ea004e998">channel_get_var_cell_handler</a></div><div class="ttdeci">channel_var_cell_handler_fn_ptr channel_get_var_cell_handler(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1075</div></div>
<div class="ttc" id="structchannel__s_html_a4d038ff41124a7bf0ee017cf5c2f7623"><div class="ttname"><a href="structchannel__s.html#a4d038ff41124a7bf0ee017cf5c2f7623">channel_s::dirreq_id</a></div><div class="ttdeci">uint64_t dirreq_id</div><div class="ttdef"><b>Definition:</b> channel.h:233</div></div>
<div class="ttc" id="channel_8h_html_aa37fcbdaafeac83501c1699e61d8e128"><div class="ttname"><a href="channel_8h.html#aa37fcbdaafeac83501c1699e61d8e128">channel_is_better</a></div><div class="ttdeci">int channel_is_better(time_t now, channel_t *a, channel_t *b, int forgive_new_connections)</div><div class="ttdef"><b>Definition:</b> channel.c:3274</div></div>
<div class="ttc" id="channel_8h_html_a0dbcc9a594a0c1794e26a40e7c9dd99b"><div class="ttname"><a href="channel_8h.html#a0dbcc9a594a0c1794e26a40e7c9dd99b">channel_listener_when_created</a></div><div class="ttdeci">time_t channel_listener_when_created(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4316</div></div>
<div class="ttc" id="channel_8c_html_a5140f151872899d07a2f1cd451902d38"><div class="ttname"><a href="channel_8c.html#a5140f151872899d07a2f1cd451902d38">channel_listener_free</a></div><div class="ttdeci">void channel_listener_free(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:891</div></div>
<div class="ttc" id="channel_8h_html_a3c1c9c62855d488fa17eaa4c4dd3f6e5"><div class="ttname"><a href="channel_8h.html#a3c1c9c62855d488fa17eaa4c4dd3f6e5">channel_get_actual_remote_address</a></div><div class="ttdeci">const char * channel_get_actual_remote_address(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3815</div></div>
<div class="ttc" id="structcircuitmux__policy__s_html"><div class="ttname"><a href="structcircuitmux__policy__s.html">circuitmux_policy_s</a></div><div class="ttdef"><b>Definition:</b> circuitmux.h:19</div></div>
<div class="ttc" id="structchannel__s_html_a0fe9f6dcc35ce51e4b2b2639a3b9769e"><div class="ttname"><a href="structchannel__s.html#a0fe9f6dcc35ce51e4b2b2639a3b9769e">channel_s::sched_heap_idx</a></div><div class="ttdeci">int sched_heap_idx</div><div class="ttdef"><b>Definition:</b> channel.h:84</div></div>
<div class="ttc" id="channel_8h_html_ab7950c59a4fefcd76e3e3b327d86114f"><div class="ttname"><a href="channel_8h.html#ab7950c59a4fefcd76e3e3b327d86114f">channel_is_local</a></div><div class="ttdeci">int channel_is_local(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4017</div></div>
<div class="ttc" id="channel_8h_html_a3e7838364ded7b78a661a1f3f2f1c266"><div class="ttname"><a href="channel_8h.html#a3e7838364ded7b78a661a1f3f2f1c266">channel_listener_run_cleanup</a></div><div class="ttdeci">void channel_listener_run_cleanup(void)</div><div class="ttdef"><b>Definition:</b> channel.c:3097</div></div>
<div class="ttc" id="channel_8h_html_ac5c51ad12ff89e0f63cc386ccda8493f"><div class="ttname"><a href="channel_8h.html#ac5c51ad12ff89e0f63cc386ccda8493f">channel_mark_for_close</a></div><div class="ttdeci">void channel_mark_for_close(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1150</div></div>
<div class="ttc" id="channel_8h_html_a8926e55f5ad9503ad24c9c4e6f663df5"><div class="ttname"><a href="channel_8h.html#a8926e55f5ad9503ad24c9c4e6f663df5">channel_listener_when_last_accepted</a></div><div class="ttdeci">time_t channel_listener_when_last_accepted(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4352</div></div>
<div class="ttc" id="channel_8h_html_a31e2ae335dbe5af256b18df4f3c1070e"><div class="ttname"><a href="channel_8h.html#a31e2ae335dbe5af256b18df4f3c1070e">channel_listener_dump_statistics</a></div><div class="ttdeci">void channel_listener_dump_statistics(channel_listener_t *chan_l, int severity)</div><div class="ttdef"><b>Definition:</b> channel.c:3699</div></div>
<div class="ttc" id="channel_8c_html_a40184005ca97cc8b3e70ac3a82b9d1fa"><div class="ttname"><a href="channel_8c.html#a40184005ca97cc8b3e70ac3a82b9d1fa">channel_mark_incoming</a></div><div class="ttdeci">void channel_mark_incoming(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3999</div></div>
<div class="ttc" id="structchannel__s_html_aebf3fd229429c27d00bd36dea7157407"><div class="ttname"><a href="structchannel__s.html#aebf3fd229429c27d00bd36dea7157407">channel_s::nickname</a></div><div class="ttdeci">char * nickname</div><div class="ttdef"><b>Definition:</b> channel.h:161</div></div>
<div class="ttc" id="channel_8h_html_ab7dce1c4def06886d0a3e8f2aeb9d136"><div class="ttname"><a href="channel_8h.html#ab7dce1c4def06886d0a3e8f2aeb9d136">channel_write_cell</a></div><div class="ttdeci">void channel_write_cell(channel_t *chan, cell_t *cell)</div><div class="ttdef"><b>Definition:</b> channel.c:1851</div></div>
<div class="ttc" id="structchannel__s_html_af0214b3e5d7d9b9381e1ba44c9126fdb"><div class="ttname"><a href="structchannel__s.html#af0214b3e5d7d9b9381e1ba44c9126fdb">channel_s::last_warned_circ_ids_exhausted</a></div><div class="ttdeci">ratelim_t last_warned_circ_ids_exhausted</div><div class="ttdef"><b>Definition:</b> channel.h:217</div></div>
<div class="ttc" id="channel_8h_html_a150180857a5c09e9ab16095b6011fd06"><div class="ttname"><a href="channel_8h.html#a150180857a5c09e9ab16095b6011fd06">channel_is_outgoing</a></div><div class="ttdeci">int channel_is_outgoing(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4066</div></div>
<div class="ttc" id="channel_8h_html_a93b61336ba7b19572a83d335a6aad65f"><div class="ttname"><a href="channel_8h.html#a93b61336ba7b19572a83d335a6aad65f">channel_mark_bad_for_new_circs</a></div><div class="ttdeci">void channel_mark_bad_for_new_circs(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3907</div></div>
<div class="ttc" id="channel_8h_html_a58978b931d8b11d4673287e59f8d54bc"><div class="ttname"><a href="channel_8h.html#a58978b931d8b11d4673287e59f8d54bc">channel_is_canonical</a></div><div class="ttdeci">int channel_is_canonical(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3952</div></div>
<div class="ttc" id="channel_8c_html_a62262142bf0c29177541974c9145e891"><div class="ttname"><a href="channel_8c.html#a62262142bf0c29177541974c9145e891">channel_flush_cells</a></div><div class="ttdeci">void channel_flush_cells(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:2449</div></div>
<div class="ttc" id="channel_8h_html_a41ebc2554b7f8fd2b5c331bf7dc94ecc"><div class="ttname"><a href="channel_8h.html#a41ebc2554b7f8fd2b5c331bf7dc94ecc">channel_get_for_extend</a></div><div class="ttdeci">channel_t * channel_get_for_extend(const char *digest, const tor_addr_t *target_addr, const char **msg_out, int *launch_out)</div><div class="ttdef"><b>Definition:</b> channel.c:3332</div></div>
<div class="ttc" id="structchannel__s_html_ae9447ed41f9c520e52203fce685b2c96"><div class="ttname"><a href="structchannel__s.html#ae9447ed41f9c520e52203fce685b2c96">channel_s::cmux</a></div><div class="ttdeci">circuitmux_t * cmux</div><div class="ttdef"><b>Definition:</b> channel.h:176</div></div>
<div class="ttc" id="structchannel__s_html_ad01252277e44ab7616d337f00bf38944"><div class="ttname"><a href="structchannel__s.html#ad01252277e44ab7616d337f00bf38944">channel_s::is_bad_for_new_circs</a></div><div class="ttdeci">unsigned int is_bad_for_new_circs</div><div class="ttdef"><b>Definition:</b> channel.h:198</div></div>
<div class="ttc" id="channel_8h_html_a2f1789dfc777235ab09dabb4977653b6"><div class="ttname"><a href="channel_8h.html#a2f1789dfc777235ab09dabb4977653b6">channel_listener_when_last_active</a></div><div class="ttdeci">time_t channel_listener_when_last_active(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4340</div></div>
<div class="ttc" id="channel_8h_html_a03ce362c180c51c5018668bae7bb4f24"><div class="ttname"><a href="channel_8h.html#a03ce362c180c51c5018668bae7bb4f24">channel_find_by_global_id</a></div><div class="ttdeci">channel_t * channel_find_by_global_id(uint64_t global_identifier)</div><div class="ttdef"><b>Definition:</b> channel.c:720</div></div>
<div class="ttc" id="channel_8c_html_a54f08cb6c0828f43f1253018f9fe3650"><div class="ttname"><a href="channel_8c.html#a54f08cb6c0828f43f1253018f9fe3650">channel_listener_queue_incoming</a></div><div class="ttdeci">void channel_listener_queue_incoming(channel_listener_t *listener, channel_t *incoming)</div><div class="ttdef"><b>Definition:</b> channel.c:2615</div></div>
<div class="ttc" id="or_8h_html"><div class="ttname"><a href="or_8h.html">or.h</a></div><div class="ttdoc">Master header file for Tor-specific functionality. </div></div>
<div class="ttc" id="structchannel__s_html_a048ef335f38e8c7342a0578599dd7c70"><div class="ttname"><a href="structchannel__s.html#a048ef335f38e8c7342a0578599dd7c70">channel_s::state</a></div><div class="ttdeci">channel_state_t state</div><div class="ttdef"><b>Definition:</b> channel.h:38</div></div>
<div class="ttc" id="channel_8h_html_a886fbc84390a27e4007562e2e3ddacb5"><div class="ttname"><a href="channel_8h.html#a886fbc84390a27e4007562e2e3ddacb5">channel_when_last_active</a></div><div class="ttdeci">time_t channel_when_last_active(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4328</div></div>
<div class="ttc" id="channel_8h_html_aee0cac4ba2733cffddc9ff59be701687"><div class="ttname"><a href="channel_8h.html#aee0cac4ba2733cffddc9ff59be701687">channel_listener_state_to_string</a></div><div class="ttdeci">const char * channel_listener_state_to_string(channel_listener_state_t state)</div><div class="ttdef"><b>Definition:</b> channel.c:392</div></div>
<div class="ttc" id="structchannel__s_html_a9120f276c3b16fd2bb4095c6cd5695c3"><div class="ttname"><a href="structchannel__s.html#a9120f276c3b16fd2bb4095c6cd5695c3">channel_s::get_overhead_estimate</a></div><div class="ttdeci">double(* get_overhead_estimate)(channel_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:111</div></div>
<div class="ttc" id="structchannel__s_html_acb16a6d3640395b7965c84ea6d8476ab"><div class="ttname"><a href="structchannel__s.html#acb16a6d3640395b7965c84ea6d8476ab">channel_s::is_client</a></div><div class="ttdeci">unsigned int is_client</div><div class="ttdef"><b>Definition:</b> channel.h:203</div></div>
<div class="ttc" id="channel_8c_html_a9a9d0a934832b0444951a374a78025cb"><div class="ttname"><a href="channel_8c.html#a9a9d0a934832b0444951a374a78025cb">channel_mark_remote</a></div><div class="ttdeci">void channel_mark_remote(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4050</div></div>
<div class="ttc" id="structchannel__s_html_ae7ceaafb4377e769e39b09aeb66feaa7"><div class="ttname"><a href="structchannel__s.html#ae7ceaafb4377e769e39b09aeb66feaa7">channel_s::write_var_cell</a></div><div class="ttdeci">int(* write_var_cell)(channel_t *, var_cell_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:153</div></div>
<div class="ttc" id="channel_8c_html_ad0126606a15537e0647e81a9c2ca8b74"><div class="ttname"><a href="channel_8c.html#ad0126606a15537e0647e81a9c2ca8b74">channel_listener_change_state</a></div><div class="ttdeci">void channel_listener_change_state(channel_listener_t *chan_l, channel_listener_state_t to_state)</div><div class="ttdef"><b>Definition:</b> channel.c:2111</div></div>
<div class="ttc" id="channel_8h_html_af328f72343802140f8e423a846721a6c"><div class="ttname"><a href="channel_8h.html#af328f72343802140f8e423a846721a6c">channel_write_var_cell</a></div><div class="ttdeci">void channel_write_var_cell(channel_t *chan, var_cell_t *cell)</div><div class="ttdef"><b>Definition:</b> channel.c:1927</div></div>
<div class="ttc" id="structchannel__s_html_ae5bcc4200a2e171bc0ca34021bcea184"><div class="ttname"><a href="structchannel__s.html#ae5bcc4200a2e171bc0ca34021bcea184">channel_s::outgoing_queue</a></div><div class="ttdeci">chan_cell_queue_t outgoing_queue</div><div class="ttdef"><b>Definition:</b> channel.h:173</div></div>
<div class="ttc" id="channel_8h_html_aeff1eebb5bba0a9371c5679994d51329"><div class="ttname"><a href="channel_8h.html#aeff1eebb5bba0a9371c5679994d51329">channel_when_created</a></div><div class="ttdeci">time_t channel_when_created(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4304</div></div>
<div class="ttc" id="structchannel__s_html_afc948cd8975c683a52a83afac4e7d0bd"><div class="ttname"><a href="structchannel__s.html#afc948cd8975c683a52a83afac4e7d0bd">channel_s::bytes_in_queue</a></div><div class="ttdeci">uint64_t bytes_in_queue</div><div class="ttdef"><b>Definition:</b> channel.h:245</div></div>
<div class="ttc" id="channel_8c_html_abc3b198fd2e78a28eda3228892847baa"><div class="ttname"><a href="channel_8c.html#abc3b198fd2e78a28eda3228892847baa">channel_listener_timestamp_accepted</a></div><div class="ttdeci">void channel_listener_timestamp_accepted(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:4214</div></div>
<div class="ttc" id="channel_8h_html_a118d357c7f7accb2f220b000f33ea714"><div class="ttname"><a href="channel_8h.html#a118d357c7f7accb2f220b000f33ea714">channel_is_bad_for_new_circs</a></div><div class="ttdeci">int channel_is_bad_for_new_circs(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3893</div></div>
<div class="ttc" id="structchannel__s_html_adf3155a623ca3d85d81f20f122966042"><div class="ttname"><a href="structchannel__s.html#adf3155a623ca3d85d81f20f122966042">channel_s::is_canonical</a></div><div class="ttdeci">int(* is_canonical)(channel_t *, int)</div><div class="ttdef"><b>Definition:</b> channel.h:139</div></div>
<div class="ttc" id="structchannel__s_html_a661af3a689c2e0aedb5a76e5a4d72acd"><div class="ttname"><a href="structchannel__s.html#a661af3a689c2e0aedb5a76e5a4d72acd">channel_s::global_identifier</a></div><div class="ttdeci">uint64_t global_identifier</div><div class="ttdef"><b>Definition:</b> channel.h:43</div></div>
<div class="ttc" id="channel_8h_html_a185d59ac3e69ab26d2b71804cb882993"><div class="ttname"><a href="channel_8h.html#a185d59ac3e69ab26d2b71804cb882993">channel_describe_transport</a></div><div class="ttdeci">const char * channel_describe_transport(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3437</div></div>
<div class="ttc" id="channel_8c_html_ac7370451f8b2f2b79a84f7f9b902de34"><div class="ttname"><a href="channel_8c.html#ac7370451f8b2f2b79a84f7f9b902de34">channel_clear_identity_digest</a></div><div class="ttdeci">void channel_clear_identity_digest(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1408</div></div>
<div class="ttc" id="channel_8c_html_a1a020ddaa5f55c078d4513c47128f263"><div class="ttname"><a href="channel_8c.html#a1a020ddaa5f55c078d4513c47128f263">channel_listener_process_incoming</a></div><div class="ttdeci">void channel_listener_process_incoming(channel_listener_t *listener)</div><div class="ttdef"><b>Definition:</b> channel.c:2503</div></div>
<div class="ttc" id="channel_8c_html_acd708a0b9e8474dd133f87a50d341f7b"><div class="ttname"><a href="channel_8c.html#acd708a0b9e8474dd133f87a50d341f7b">channel_clear_remote_end</a></div><div class="ttdeci">void channel_clear_remote_end(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1492</div></div>
<div class="ttc" id="channel_8c_html_a4bb9524073333e156da271ca623a772d"><div class="ttname"><a href="channel_8c.html#a4bb9524073333e156da271ca623a772d">channel_do_open_actions</a></div><div class="ttdeci">void channel_do_open_actions(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:2556</div></div>
<div class="ttc" id="channel_8c_html_a4259678584b7e032533f1144a7412616"><div class="ttname"><a href="channel_8c.html#a4259678584b7e032533f1144a7412616">channel_init_listener</a></div><div class="ttdeci">void channel_init_listener(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:824</div></div>
<div class="ttc" id="channel_8c_html_abc5a904f9dc44b21911ceed8d18fd218"><div class="ttname"><a href="channel_8c.html#abc5a904f9dc44b21911ceed8d18fd218">channel_notify_flushed</a></div><div class="ttdeci">void channel_notify_flushed(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:2485</div></div>
<div class="ttc" id="structchannel__s_html_a2ad8a92c4942bb917535fa0e804e822f"><div class="ttname"><a href="structchannel__s.html#a2ad8a92c4942bb917535fa0e804e822f">channel_s::dumpstats</a></div><div class="ttdeci">void(* dumpstats)(channel_t *, int)</div><div class="ttdef"><b>Definition:</b> channel.h:99</div></div>
<div class="ttc" id="channel_8c_html_a7becc4cc5e7dd116f44f86a1b826dc9a"><div class="ttname"><a href="channel_8c.html#a7becc4cc5e7dd116f44f86a1b826dc9a">channel_register</a></div><div class="ttdeci">void channel_register(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:429</div></div>
<div class="ttc" id="channel_8c_html_a366226ae4d3bca86afd5eff78e61cc27"><div class="ttname"><a href="channel_8c.html#a366226ae4d3bca86afd5eff78e61cc27">channel_mark_local</a></div><div class="ttdeci">void channel_mark_local(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4033</div></div>
<div class="ttc" id="structchannel__s_html_ae0472cb9b88e2c5d68b08b65af026215"><div class="ttname"><a href="structchannel__s.html#ae0472cb9b88e2c5d68b08b65af026215">channel_s::scheduler_state</a></div><div class="ttdeci">enum channel_s::@7 scheduler_state</div></div>
<div class="ttc" id="channel_8h_html_a6cb4f4e8f649a753d3d22fb84653c05b"><div class="ttname"><a href="channel_8h.html#a6cb4f4e8f649a753d3d22fb84653c05b">channel_matches_extend_info</a></div><div class="ttdeci">int channel_matches_extend_info(channel_t *chan, extend_info_t *extend_info)</div><div class="ttdef"><b>Definition:</b> channel.c:4451</div></div>
<div class="ttc" id="structchannel__s_html_a624ed4fee710467c245786850c424c66"><div class="ttname"><a href="structchannel__s.html#a624ed4fee710467c245786850c424c66">channel_s::n_cells_recved</a></div><div class="ttdeci">uint64_t n_cells_recved</div><div class="ttdef"><b>Definition:</b> channel.h:236</div></div>
<div class="ttc" id="structchannel__listener__s_html"><div class="ttname"><a href="structchannel__listener__s.html">channel_listener_s</a></div><div class="ttdef"><b>Definition:</b> channel.h:248</div></div>
<div class="ttc" id="structvar__cell__t_html"><div class="ttname"><a href="structvar__cell__t.html">var_cell_t</a></div><div class="ttdef"><b>Definition:</b> or.h:1076</div></div>
<div class="ttc" id="channel_8h_html_a5bdf98e720a6acc2e476e681e91e4fde"><div class="ttname"><a href="channel_8h.html#a5bdf98e720a6acc2e476e681e91e4fde">channel_listener_state_is_valid</a></div><div class="ttdeci">int channel_listener_state_is_valid(channel_listener_state_t state)</div><div class="ttdef"><b>Definition:</b> channel.c:248</div></div>
<div class="ttc" id="channel_8c_html_ae06da2fa9517932c784776910a727575"><div class="ttname"><a href="channel_8c.html#ae06da2fa9517932c784776910a727575">cell_queue_entry_free</a></div><div class="ttdeci">STATIC void cell_queue_entry_free(cell_queue_entry_t *q, int handed_off)</div><div class="ttdef"><b>Definition:</b> channel.c:1601</div></div>
<div class="ttc" id="structchannel__listener__s_html_abf553de813ce0da0eaae3e55f802899a"><div class="ttname"><a href="structchannel__listener__s.html#abf553de813ce0da0eaae3e55f802899a">channel_listener_s::n_accepted</a></div><div class="ttdeci">uint64_t n_accepted</div><div class="ttdef"><b>Definition:</b> channel.h:294</div></div>
<div class="ttc" id="channel_8c_html_af394d37fffd7367c8c882834e6451a89"><div class="ttname"><a href="channel_8c.html#af394d37fffd7367c8c882834e6451a89">channel_init</a></div><div class="ttdeci">void channel_init(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:785</div></div>
<div class="ttc" id="channel_8c_html_ad513e8317c2960176b7a646bb675b2e9"><div class="ttname"><a href="channel_8c.html#ad513e8317c2960176b7a646bb675b2e9">channel_mark_outgoing</a></div><div class="ttdeci">void channel_mark_outgoing(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4081</div></div>
<div class="ttc" id="structchannel__listener__s_html_aed3f6aa228fd4d1794c35473d785afba"><div class="ttname"><a href="structchannel__listener__s.html#aed3f6aa228fd4d1794c35473d785afba">channel_listener_s::timestamp_accepted</a></div><div class="ttdeci">time_t timestamp_accepted</div><div class="ttdef"><b>Definition:</b> channel.h:291</div></div>
<div class="ttc" id="circuitmux_8h_html"><div class="ttname"><a href="circuitmux_8h.html">circuitmux.h</a></div><div class="ttdoc">Header file for circuitmux.c. </div></div>
<div class="ttc" id="channel_8h_html_a8193e4c4351e724edc8ecaddd09f8e10"><div class="ttname"><a href="channel_8h.html#a8193e4c4351e724edc8ecaddd09f8e10">channel_listener_dump_transport_statistics</a></div><div class="ttdeci">void channel_listener_dump_transport_statistics(channel_listener_t *chan_l, int severity)</div><div class="ttdef"><b>Definition:</b> channel.c:3780</div></div>
<div class="ttc" id="channel_8h_html_a7ed86da67099b40c8eea25752b2260da"><div class="ttname"><a href="channel_8h.html#a7ed86da67099b40c8eea25752b2260da">channel_listener_set_listener_fn</a></div><div class="ttdeci">void channel_listener_set_listener_fn(channel_listener_t *chan, channel_listener_fn_ptr listener)</div><div class="ttdef"><b>Definition:</b> channel.c:1033</div></div>
<div class="ttc" id="structchannel__s_html_a74942f40e8282dc1e70c7bc43bebc844"><div class="ttname"><a href="structchannel__s.html#a74942f40e8282dc1e70c7bc43bebc844">channel_s::timestamp_client</a></div><div class="ttdeci">time_t timestamp_client</div><div class="ttdef"><b>Definition:</b> channel.h:220</div></div>
<div class="ttc" id="structratelim__t_html"><div class="ttname"><a href="structratelim__t.html">ratelim_t</a></div><div class="ttdef"><b>Definition:</b> util.h:297</div></div>
<div class="ttc" id="channel_8c_html_a2d954d609b0decab6e56e2ab7e2444f6"><div class="ttname"><a href="channel_8c.html#a2d954d609b0decab6e56e2ab7e2444f6">channel_listener_unregister</a></div><div class="ttdeci">void channel_listener_unregister(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:564</div></div>
<div class="ttc" id="channel_8h_html_abf9310a1fa1a4d1cb1e3af383a98d902"><div class="ttname"><a href="channel_8h.html#abf9310a1fa1a4d1cb1e3af383a98d902">channel_update_xmit_queue_size</a></div><div class="ttdeci">void channel_update_xmit_queue_size(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4542</div></div>
<div class="ttc" id="or_8h_html_a6607d3e1cd2b5deca02212435116a2ac"><div class="ttname"><a href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a></div><div class="ttdeci">uint32_t circid_t</div><div class="ttdef"><b>Definition:</b> or.h:921</div></div>
<div class="ttc" id="channel_8h_html_a9f3b8c3a3d91967c63fea496d2fe1b2e"><div class="ttname"><a href="channel_8h.html#a9f3b8c3a3d91967c63fea496d2fe1b2e">channel_get_cell_handler</a></div><div class="ttdeci">channel_cell_handler_fn_ptr channel_get_cell_handler(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1057</div></div>
<div class="ttc" id="channel_8h_html_a1ef365ba78cdfea35f694be31bfd6e91"><div class="ttname"><a href="channel_8h.html#a1ef365ba78cdfea35f694be31bfd6e91">channel_dumpstats</a></div><div class="ttdeci">void channel_dumpstats(int severity)</div><div class="ttdef"><b>Definition:</b> channel.c:2977</div></div>
<div class="ttc" id="structcrypto__pk__t_html"><div class="ttname"><a href="structcrypto__pk__t.html">crypto_pk_t</a></div><div class="ttdef"><b>Definition:</b> crypto.c:120</div></div>
<div class="ttc" id="structchannel__listener__s_html_a94050fa36e904be9d171ef506f1f0ba7"><div class="ttname"><a href="structchannel__listener__s.html#a94050fa36e904be9d171ef506f1f0ba7">channel_listener_s::incoming_list</a></div><div class="ttdeci">smartlist_t * incoming_list</div><div class="ttdef"><b>Definition:</b> channel.h:288</div></div>
<div class="ttc" id="channel_8h_html_a8608773117c50600ebe58ffc331b6b3e"><div class="ttname"><a href="channel_8h.html#a8608773117c50600ebe58ffc331b6b3e">channel_get_actual_remote_descr</a></div><div class="ttdeci">const char * channel_get_actual_remote_descr(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3799</div></div>
<div class="ttc" id="channel_8h_html_adb2d84e3ecc8f662ed2072a2104d0b6b"><div class="ttname"><a href="channel_8h.html#adb2d84e3ecc8f662ed2072a2104d0b6b">channel_free_all</a></div><div class="ttdeci">void channel_free_all(void)</div><div class="ttdef"><b>Definition:</b> channel.c:3187</div></div>
<div class="ttc" id="channel_8c_html_ae241ae9b959f87e8ef459072554b212c"><div class="ttname"><a href="channel_8c.html#ae241ae9b959f87e8ef459072554b212c">channel_timestamp_drained</a></div><div class="ttdeci">void channel_timestamp_drained(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4249</div></div>
<div class="ttc" id="channel_8c_html_a129ce2c9cfd17476509259c64c96ef9a"><div class="ttname"><a href="channel_8c.html#a129ce2c9cfd17476509259c64c96ef9a">channel_listener_close_for_error</a></div><div class="ttdeci">void channel_listener_close_for_error(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:1319</div></div>
<div class="ttc" id="structchannel__s_html_ac3010adaf03e1a400cc074f5ce9e20a4"><div class="ttname"><a href="structchannel__s.html#ac3010adaf03e1a400cc074f5ce9e20a4">channel_s::timestamp_created</a></div><div class="ttdeci">time_t timestamp_created</div><div class="ttdef"><b>Definition:</b> channel.h:87</div></div>
<div class="ttc" id="structchannel__s_html_a1443b6af96b12275aebd0e6407c175e5"><div class="ttname"><a href="structchannel__s.html#a1443b6af96b12275aebd0e6407c175e5">channel_s::close</a></div><div class="ttdeci">void(* close)(channel_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:95</div></div>
<div class="ttc" id="channel_8h_html_a2175e5e47f323e17e518474e8210907f"><div class="ttname"><a href="channel_8h.html#a2175e5e47f323e17e518474e8210907f">channel_is_canonical_is_reliable</a></div><div class="ttdeci">int channel_is_canonical_is_reliable(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3968</div></div>
<div class="ttc" id="channel_8h_html_a02db0f9ae91b50323bd345a224d9d1d8"><div class="ttname"><a href="channel_8h.html#a02db0f9ae91b50323bd345a224d9d1d8">channel_has_queued_writes</a></div><div class="ttdeci">int channel_has_queued_writes(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3868</div></div>
<div class="ttc" id="structcircuitmux__s_html"><div class="ttname"><a href="structcircuitmux__s.html">circuitmux_s</a></div><div class="ttdef"><b>Definition:</b> circuitmux.c:105</div></div>
<div class="ttc" id="structchannel__listener__s_html_ac3010adaf03e1a400cc074f5ce9e20a4"><div class="ttname"><a href="structchannel__listener__s.html#ac3010adaf03e1a400cc074f5ce9e20a4">channel_listener_s::timestamp_created</a></div><div class="ttdeci">time_t timestamp_created</div><div class="ttdef"><b>Definition:</b> channel.h:270</div></div>
<div class="ttc" id="channel_8h_html_a4970564e5ce0547254f76d09d942e0f1"><div class="ttname"><a href="channel_8h.html#a4970564e5ce0547254f76d09d942e0f1">channel_is_client</a></div><div class="ttdeci">int channel_is_client(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3923</div></div>
<div class="ttc" id="channel_8h_html_a727f5f4b03dca7d9b0ef71842709c055"><div class="ttname"><a href="channel_8h.html#a727f5f4b03dca7d9b0ef71842709c055">channel_state_can_transition</a></div><div class="ttdeci">int channel_state_can_transition(channel_state_t from, channel_state_t to)</div><div class="ttdef"><b>Definition:</b> channel.c:276</div></div>
<div class="ttc" id="channel_8c_html_a9bbc6210c258ddbc944e9f0d6d386b45"><div class="ttname"><a href="channel_8c.html#a9bbc6210c258ddbc944e9f0d6d386b45">channel_unregister</a></div><div class="ttdeci">void channel_unregister(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:484</div></div>
<div class="ttc" id="channel_8c_html_a63986ced82f0d5c58fd872e40ed46598"><div class="ttname"><a href="channel_8c.html#a63986ced82f0d5c58fd872e40ed46598">channel_timestamp_created</a></div><div class="ttdeci">void channel_timestamp_created(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4144</div></div>
<div class="ttc" id="channel_8c_html_abdbe03d1c68e1ebc7133e4195fbfca29"><div class="ttname"><a href="channel_8c.html#abdbe03d1c68e1ebc7133e4195fbfca29">channel_timestamp_xmit</a></div><div class="ttdeci">void channel_timestamp_xmit(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:4285</div></div>
<div class="ttc" id="channel_8h_html_a53ee6566b1661b9e37181d8f83efdfbd"><div class="ttname"><a href="channel_8h.html#a53ee6566b1661b9e37181d8f83efdfbd">channel_next_with_digest</a></div><div class="ttdeci">channel_t * channel_next_with_digest(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:769</div></div>
<div class="ttc" id="channel_8h_html_a1d874b0dd28680dd7f9661e2490d9091"><div class="ttname"><a href="channel_8h.html#a1d874b0dd28680dd7f9661e2490d9091">channel_run_cleanup</a></div><div class="ttdeci">void channel_run_cleanup(void)</div><div class="ttdef"><b>Definition:</b> channel.c:3070</div></div>
<div class="ttc" id="channel_8h_html_a5a9a5bd1e17411b06028d4839ad6e6df"><div class="ttname"><a href="channel_8h.html#a5a9a5bd1e17411b06028d4839ad6e6df">channel_get_canonical_remote_descr</a></div><div class="ttdeci">const char * channel_get_canonical_remote_descr(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:3832</div></div>
<div class="ttc" id="channel_8h_html_ab1245962c49dfe3349cf00e0cacd7f15"><div class="ttname"><a href="channel_8h.html#ab1245962c49dfe3349cf00e0cacd7f15">channel_listener_get_listener_fn</a></div><div class="ttdeci">channel_listener_fn_ptr channel_listener_get_listener_fn(channel_listener_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1015</div></div>
<div class="ttc" id="structchannel__s_html"><div class="ttname"><a href="structchannel__s.html">channel_s</a></div><div class="ttdef"><b>Definition:</b> channel.h:33</div></div>
<div class="ttc" id="structextend__info__t_html"><div class="ttname"><a href="structextend__info__t.html">extend_info_t</a></div><div class="ttdef"><b>Definition:</b> or.h:2654</div></div>
<div class="ttc" id="channel_8c_html_aaeadb08bb4e207f76f8bff0aa060e552"><div class="ttname"><a href="channel_8c.html#aaeadb08bb4e207f76f8bff0aa060e552">channel_listener_closed</a></div><div class="ttdeci">void channel_listener_closed(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:1382</div></div>
<div class="ttc" id="channel_8c_html_a4f2355dcc6bc54b549bfbe8d6ae7f80e"><div class="ttname"><a href="channel_8c.html#a4f2355dcc6bc54b549bfbe8d6ae7f80e">chan_cell_queue_len</a></div><div class="ttdeci">STATIC int chan_cell_queue_len(const chan_cell_queue_t *queue)</div><div class="ttdef"><b>Definition:</b> channel.c:3465</div></div>
<div class="ttc" id="structchannel__s_html_a7bb5810f2bfcddfb6481c604facf6435"><div class="ttname"><a href="structchannel__s.html#a7bb5810f2bfcddfb6481c604facf6435">channel_s::is_incoming</a></div><div class="ttdeci">unsigned int is_incoming</div><div class="ttdef"><b>Definition:</b> channel.h:206</div></div>
<div class="ttc" id="channel_8c_html_a41a07dcb3da5d642570a8ed069c27450"><div class="ttname"><a href="channel_8c.html#a41a07dcb3da5d642570a8ed069c27450">channel_closed</a></div><div class="ttdeci">void channel_closed(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:1349</div></div>
<div class="ttc" id="channel_8c_html_a3ac80d0068b62d8da9adddb13ff2a6cf"><div class="ttname"><a href="channel_8c.html#a3ac80d0068b62d8da9adddb13ff2a6cf">channel_free</a></div><div class="ttdeci">void channel_free(channel_t *chan)</div><div class="ttdef"><b>Definition:</b> channel.c:841</div></div>
<div class="ttc" id="structchannel__s_html_a03c3fe00dacf2f794b21b2f04bc65151"><div class="ttname"><a href="structchannel__s.html#a03c3fe00dacf2f794b21b2f04bc65151">channel_s::reason_for_closing</a></div><div class="ttdeci">enum channel_s::@6 reason_for_closing</div></div>
<div class="ttc" id="structchannel__s_html_a3e1b319de2651ee84a0a6be47a744e6d"><div class="ttname"><a href="structchannel__s.html#a3e1b319de2651ee84a0a6be47a744e6d">channel_s::num_n_circuits</a></div><div class="ttdeci">unsigned int num_n_circuits</div><div class="ttdef"><b>Definition:</b> channel.h:189</div></div>
<div class="ttc" id="structchannel__s_html_a040475c466b41ea77259ae6577015894"><div class="ttname"><a href="structchannel__s.html#a040475c466b41ea77259ae6577015894">channel_s::free_fn</a></div><div class="ttdeci">void(* free_fn)(channel_t *)</div><div class="ttdef"><b>Definition:</b> channel.h:93</div></div>
<div class="ttc" id="channel_8c_html_a7fc659d90d9518f8f8bcf5a4d4f49acb"><div class="ttname"><a href="channel_8c.html#a7fc659d90d9518f8f8bcf5a4d4f49acb">channel_listener_register</a></div><div class="ttdeci">void channel_listener_register(channel_listener_t *chan_l)</div><div class="ttdef"><b>Definition:</b> channel.c:522</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
