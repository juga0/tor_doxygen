<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/hs_config.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_95039623eb1ebeaf46c028778b39de98.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hs_config.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implement hidden service configuration subsystem.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hs__common_8h_source.html">hs_common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hs__config_8h_source.html">hs_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hs__service_8h_source.html">hs_service.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rendservice_8h_source.html">rendservice.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hs_config.c:</div>
<div class="dyncontent">
<div class="center"><img src="hs__config_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2hs__config_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2hs__config_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2hs__config_8c">
<area shape="rect" id="node2" href="hs__common_8h.html" title="Header file containing common data for the whole HS subsytem. " alt="" coords="913,333,1017,360"/>
<area shape="rect" id="node43" href="hs__config_8h.html" title="Header file containing configuration ABI/API for the HS subsytem. " alt="" coords="1051,184,1141,211"/>
<area shape="rect" id="node44" href="hs__service_8h.html" title="Header file containing service data for the HS subsytem. " alt="" coords="677,184,773,211"/>
<area shape="rect" id="node50" href="rendservice_8h.html" title="Header file for rendservice.c. " alt="" coords="866,109,966,136"/>
<area shape="rect" id="node3" href="or_8h.html" title="Master header file for Tor&#45;specific functionality. " alt="" coords="1262,408,1306,435"/>
<area shape="rect" id="node39" href="ed25519__cert_8h_source.html" title="ed25519_cert.h" alt="" coords="478,408,589,435"/>
<area shape="rect" id="node4" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="1471,1169,1550,1196"/>
<area shape="rect" id="node5" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="553,1095,615,1121"/>
<area shape="rect" id="node7" href="crypto_8h.html" title="Headers for crypto.c. " alt="" coords="1240,557,1309,584"/>
<area shape="rect" id="node18" href="container_8h_source.html" title="container.h" alt="" coords="1617,781,1703,808"/>
<area shape="rect" id="node20" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="1779,781,1845,808"/>
<area shape="rect" id="node22" href="crypto__format_8h_source.html" title="crypto_format.h" alt="" coords="981,483,1094,509"/>
<area shape="rect" id="node23" href="crypto__ed25519_8h_source.html" title="crypto_ed25519.h" alt="" coords="191,557,316,584"/>
<area shape="rect" id="node24" href="crypto__curve25519_8h_source.html" title="crypto_curve25519.h" alt="" coords="494,632,637,659"/>
<area shape="rect" id="node27" href="tortls_8h.html" title="Headers for tortls.c. " alt="" coords="1435,557,1498,584"/>
<area shape="rect" id="node29" href="compress_8h.html" title="Headers for compress.c. " alt="" coords="1473,483,1564,509"/>
<area shape="rect" id="node30" href="address_8h.html" title="Headers for address.h. " alt="" coords="2073,707,2151,733"/>
<area shape="rect" id="node31" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="2123,1020,2251,1047"/>
<area shape="rect" id="node32" href="ht_8h_source.html" title="ht.h" alt="" coords="1589,483,1633,509"/>
<area shape="rect" id="node33" href="confline_8h_source.html" title="confline.h" alt="" coords="1817,557,1895,584"/>
<area shape="rect" id="node34" href="replaycache_8h.html" title="Header file for replaycache.c. " alt="" coords="650,483,753,509"/>
<area shape="rect" id="node35" href="tor__queue_8h_source.html" title="tor_queue.h" alt="" coords="1657,483,1748,509"/>
<area shape="rect" id="node36" href="token__bucket_8h_source.html" title="token_bucket.h" alt="" coords="774,1020,885,1047"/>
<area shape="rect" id="node37" href="util__format_8h_source.html" title="util_format.h" alt="" coords="451,1020,546,1047"/>
<area shape="rect" id="node38" href="hs__circuitmap_8h.html" title="Header file for hs_circuitmap.c. " alt="" coords="1772,483,1887,509"/>
<area shape="rect" id="node9" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="1512,1095,1611,1121"/>
<area shape="rect" id="node10" href="compat_8h_source.html" title="compat.h" alt="" coords="1666,1020,1742,1047"/>
<area shape="rect" id="node12" href="util_8h.html" title="Headers for util.c. " alt="" coords="1043,863,1093,890"/>
<area shape="rect" id="node16" href="crypto__rsa_8h.html" title="Headers for crypto_rsa.c. " alt="" coords="1417,632,1511,659"/>
<area shape="rect" id="node21" href="keccak-tiny_8h_source.html" title="keccak&#45;tiny/keccak\l&#45;tiny.h" alt="" coords="401,856,535,897"/>
<area shape="rect" id="node13" href="di__ops_8h.html" title="Headers for di_ops.c. " alt="" coords="909,1020,979,1047"/>
<area shape="rect" id="node15" href="util__bug_8h.html" title="Macros to manage assertions, fatal and non&#45;fatal. " alt="" coords="1309,945,1387,972"/>
<area shape="rect" id="node17" href="crypto__digest_8h.html" title="Headers for crypto_digest.c. " alt="" coords="763,707,874,733"/>
<area shape="rect" id="node19" href="siphash_8h_source.html" title="siphash.h" alt="" coords="1621,863,1699,890"/>
<area shape="rect" id="node25" href="crypto__openssl__mgt_8h_source.html" title="crypto_openssl_mgt.h" alt="" coords="985,707,1135,733"/>
<area shape="rect" id="node28" href="compat__openssl_8h.html" title="compatibility definitions for working with different openssl forks " alt="" coords="1109,632,1237,659"/>
<area shape="rect" id="node41" href="trunnel_8h_source.html" title="trunnel.h" alt="" coords="357,483,429,509"/>
<area shape="rect" id="node45" href="hs__descriptor_8h.html" title="Header file for hs_descriptor.c. " alt="" coords="778,333,889,360"/>
<area shape="rect" id="node47" href="hs__ident_8h.html" title="Header file containing circuit and connection identifier data for the whole HS subsytem. " alt="" coords="644,259,727,285"/>
<area shape="rect" id="node48" href="hs__intropoint_8h.html" title="Header file for hs_intropoint.c. " alt="" coords="60,333,167,360"/>
<area shape="rect" id="node49" href="cell__establish__intro_8h_source.html" title="hs/cell_establish_intro.h" alt="" coords="291,408,453,435"/>
<area shape="rect" id="node46" href="torcert_8h_source.html" title="torcert.h" alt="" coords="94,408,165,435"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a44e60c7c1110931ebc15aefe858b4e6f"><td class="memItemLeft" align="right" valign="top"><a id="a44e60c7c1110931ebc15aefe858b4e6f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>hs_config_service_all</b> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, int validate_only)</td></tr>
<tr class="separator:a44e60c7c1110931ebc15aefe858b4e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implement hidden service configuration subsystem. </p>
<p>This file has basically one main entry point: hs_config_service_all(). It takes the torrc options and configure hidden service from it. In validate mode, nothing is added to the global service list or keys are not generated nor loaded.</p>
<p>A service is configured in two steps. It is first created using the tor options and then put in a staging list. It will stay there until hs_service_load_all_keys() is called. That function is responsible to load/generate the keys for the service in the staging list and if successful, transfert the service to the main global service list where at that point it is ready to be used.</p>
<p>Configuration functions are per-version and there is a main generic one for every option that is common to all version (config_generic_service). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
