<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/dns_structs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">dns_structs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Structures used in <a class="el" href="dns_8c.html" title="Implements a local cache for DNS results for Tor servers. This is implemented as a wrapper around Ada...">dns.c</a>. Exposed to <a class="el" href="dns_8c.html" title="Implements a local cache for DNS results for Tor servers. This is implemented as a wrapper around Ada...">dns.c</a>, and to the unit tests that declare DNS_PRIVATE.  
<a href="#details">More...</a></p>

<p><a href="dns__structs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpending__connection__t.html">pending_connection_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcached__resolve__t.html">cached_resolve_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5ac59057e25118e8321aedd3226756b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a5ac59057e25118e8321aedd3226756b3">MAX_ADDRESSLEN</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a5ac59057e25118e8321aedd3226756b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c3a68fd1f448e646dc64d39f18330f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a70c3a68fd1f448e646dc64d39f18330f">CACHED_RESOLVE_MAGIC</a>&#160;&#160;&#160;0x1234F00D</td></tr>
<tr class="separator:a70c3a68fd1f448e646dc64d39f18330f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c7dbbe97722fc743e5fb95993b6c32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a23c7dbbe97722fc743e5fb95993b6c32">CACHE_STATE_PENDING</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a23c7dbbe97722fc743e5fb95993b6c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63d528ef3ff52b63e3d759d334b8fb4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#ab63d528ef3ff52b63e3d759d334b8fb4">CACHE_STATE_DONE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ab63d528ef3ff52b63e3d759d334b8fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84317e82df5cad3a326524dbb47ffdc8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a84317e82df5cad3a326524dbb47ffdc8">CACHE_STATE_CACHED</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a84317e82df5cad3a326524dbb47ffdc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">status values for a single DNS request.</div></td></tr>
<tr class="memitem:aa5d9ae9adc1096ccbefe275bf3b6e49d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#aa5d9ae9adc1096ccbefe275bf3b6e49d">RES_STATUS_INFLIGHT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa5d9ae9adc1096ccbefe275bf3b6e49d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5972795c94e2a120453e7c700d29c4fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a5972795c94e2a120453e7c700d29c4fe">RES_STATUS_DONE_OK</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a5972795c94e2a120453e7c700d29c4fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8513f6101d8b128fc5bd41389d4ed866"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a8513f6101d8b128fc5bd41389d4ed866">RES_STATUS_DONE_ERR</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a8513f6101d8b128fc5bd41389d4ed866"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af5a34360cabd8e5d27aa54a554750a36"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structpending__connection__t.html">pending_connection_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#af5a34360cabd8e5d27aa54a554750a36">pending_connection_t</a></td></tr>
<tr class="separator:af5a34360cabd8e5d27aa54a554750a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8090b5c06d6c284885ba156950184672"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__structs_8h.html#a8090b5c06d6c284885ba156950184672">cached_resolve_t</a></td></tr>
<tr class="separator:a8090b5c06d6c284885ba156950184672"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Structures used in <a class="el" href="dns_8c.html" title="Implements a local cache for DNS results for Tor servers. This is implemented as a wrapper around Ada...">dns.c</a>. Exposed to <a class="el" href="dns_8c.html" title="Implements a local cache for DNS results for Tor servers. This is implemented as a wrapper around Ada...">dns.c</a>, and to the unit tests that declare DNS_PRIVATE. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a84317e82df5cad3a326524dbb47ffdc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84317e82df5cad3a326524dbb47ffdc8">&#9670;&nbsp;</a></span>CACHE_STATE_CACHED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CACHE_STATE_CACHED&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We are caching an answer for this address. This should have no pending connections, and should appear in the hash table. </p>

</div>
</div>
<a id="ab63d528ef3ff52b63e3d759d334b8fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab63d528ef3ff52b63e3d759d334b8fb4">&#9670;&nbsp;</a></span>CACHE_STATE_DONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CACHE_STATE_DONE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This used to be a pending <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a>, and we got an answer for it. Now we're waiting for this <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a> to expire. This should have no pending connections, and should not appear in the hash table. </p>

</div>
</div>
<a id="a23c7dbbe97722fc743e5fb95993b6c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c7dbbe97722fc743e5fb95993b6c32">&#9670;&nbsp;</a></span>CACHE_STATE_PENDING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CACHE_STATE_PENDING&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We are waiting for the resolver system to tell us an answer here. When we get one, or when we time out, the state of this <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a> will become "DONE" and we'll possibly add a CACHED entry. This <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a> will be in the hash table so that we will know not to launch more requests for this addr, but rather to add more connections to the pending list for the addr. </p>

</div>
</div>
<a id="a70c3a68fd1f448e646dc64d39f18330f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70c3a68fd1f448e646dc64d39f18330f">&#9670;&nbsp;</a></span>CACHED_RESOLVE_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CACHED_RESOLVE_MAGIC&#160;&#160;&#160;0x1234F00D</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value of 'magic' field for <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a>. Used to try to catch bad pointers and memory stomping. </p>

</div>
</div>
<a id="a5ac59057e25118e8321aedd3226756b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ac59057e25118e8321aedd3226756b3">&#9670;&nbsp;</a></span>MAX_ADDRESSLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ADDRESSLEN&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Longest hostname we're willing to resolve. </p>

</div>
</div>
<a id="a8513f6101d8b128fc5bd41389d4ed866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8513f6101d8b128fc5bd41389d4ed866">&#9670;&nbsp;</a></span>RES_STATUS_DONE_ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_STATUS_DONE_ERR&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The DNS request finished and gave an error </p>

</div>
</div>
<a id="a5972795c94e2a120453e7c700d29c4fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5972795c94e2a120453e7c700d29c4fe">&#9670;&nbsp;</a></span>RES_STATUS_DONE_OK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_STATUS_DONE_OK&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The DNS request finished and gave an answer </p>

</div>
</div>
<a id="aa5d9ae9adc1096ccbefe275bf3b6e49d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5d9ae9adc1096ccbefe275bf3b6e49d">&#9670;&nbsp;</a></span>RES_STATUS_INFLIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_STATUS_INFLIGHT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The DNS request is in progress. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a8090b5c06d6c284885ba156950184672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8090b5c06d6c284885ba156950184672">&#9670;&nbsp;</a></span>cached_resolve_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a>  <a class="el" href="structcached__resolve__t.html">cached_resolve_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A DNS request: possibly completed, possibly pending; cached_resolve structs are stored at the OR side in a hash table, and as a linked list from oldest to newest. </p>

</div>
</div>
<a id="af5a34360cabd8e5d27aa54a554750a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a34360cabd8e5d27aa54a554750a36">&#9670;&nbsp;</a></span>pending_connection_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structpending__connection__t.html">pending_connection_t</a>  <a class="el" href="structpending__connection__t.html">pending_connection_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Linked list of connections waiting for a DNS answer. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
