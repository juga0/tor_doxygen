<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/networkstatus.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">networkstatus.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions and structures for handling networkstatus documents as a client or as a directory cache.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="or_8h_source.html">or.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bridges_8h_source.html">bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="channel_8h_source.html">channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitmux_8h_source.html">circuitmux.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitmux__ewma_8h_source.html">circuitmux_ewma.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitstats_8h_source.html">circuitstats.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection_8h_source.html">connection.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection__or_8h_source.html">connection_or.h</a>&quot;</code><br />
<code>#include &quot;consdiffmgr.h&quot;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__rand_8h_source.html">crypto_rand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__util_8h_source.html">crypto_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="directory_8h_source.html">directory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dirserv_8h_source.html">dirserv.h</a>&quot;</code><br />
<code>#include &quot;dos.h&quot;</code><br />
<code>#include &quot;<a class="el" href="entrynodes_8h_source.html">entrynodes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hibernate_8h_source.html">hibernate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="microdesc_8h_source.html">microdesc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="networkstatus_8h_source.html">networkstatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nodelist_8h_source.html">nodelist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="protover_8h_source.html">protover.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="relay_8h_source.html">relay.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="router_8h_source.html">router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="routerlist_8h_source.html">routerlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="routerparse_8h_source.html">routerparse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="scheduler_8h_source.html">scheduler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="transports_8h_source.html">transports.h</a>&quot;</code><br />
<code>#include &quot;torcert.h&quot;</code><br />
<code>#include &quot;channelpadding.h&quot;</code><br />
<code>#include &quot;<a class="el" href="voting__schedule_8h_source.html">voting_schedule.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dirvote_8h_source.html">dirauth/dirvote.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mode_8h_source.html">dirauth/mode.h</a>&quot;</code><br />
<code>#include &quot;dirauth/shared_random.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for networkstatus.c:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2networkstatus_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2networkstatus_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2networkstatus_8c">
<area shape="rect" id="node2" href="or_8h.html" title="Master header file for Tor&#45;specific functionality. " alt="" coords="835,333,879,360"/>
<area shape="rect" id="node17" href="bridges_8h.html" title="Header file for circuitbuild.c. " alt="" coords="1193,109,1268,136"/>
<area shape="rect" id="node18" href="channel_8h.html" title="Header file for channel.c. " alt="" coords="766,184,845,211"/>
<area shape="rect" id="node19" href="circuitmux_8h.html" title="Header file for circuitmux.c. " alt="" coords="549,259,643,285"/>
<area shape="rect" id="node20" href="circuitmux__ewma_8h.html" title="Header file for circuitmux_ewma.c. " alt="" coords="505,184,639,211"/>
<area shape="rect" id="node21" href="circuitstats_8h.html" title="Header file for circuitstats.c. " alt="" coords="1293,109,1390,136"/>
<area shape="rect" id="node22" href="config_8h.html" title="Header file for config.c. " alt="" coords="1414,109,1482,136"/>
<area shape="rect" id="node23" href="connection_8h.html" title="Header file for connection.c. " alt="" coords="1507,109,1603,136"/>
<area shape="rect" id="node24" href="connection__or_8h.html" title="Header file for connection_or.c. " alt="" coords="1627,109,1741,136"/>
<area shape="rect" id="node25" href="consdiffmgr_8h_source.html" title="consdiffmgr.h" alt="" coords="1765,109,1867,136"/>
<area shape="rect" id="node26" href="control_8h.html" title="Header file for control.c. " alt="" coords="1891,109,1963,136"/>
<area shape="rect" id="node27" href="crypto__rand_8h.html" title="Common functions for using (pseudo&#45;)random number generators. " alt="" coords="5,333,107,360"/>
<area shape="rect" id="node28" href="crypto__util_8h.html" title="Common functions for cryptographic routines. " alt="" coords="229,184,323,211"/>
<area shape="rect" id="node29" href="directory_8h.html" title="Header file for directory.c. " alt="" coords="1987,109,2069,136"/>
<area shape="rect" id="node30" href="dirserv_8h.html" title="Header file for dirserv.c. " alt="" coords="2093,109,2165,136"/>
<area shape="rect" id="node31" href="dos_8h_source.html" title="dos.h" alt="" coords="2190,109,2245,136"/>
<area shape="rect" id="node32" href="entrynodes_8h.html" title="Header file for circuitbuild.c. " alt="" coords="2269,109,2366,136"/>
<area shape="rect" id="node33" href="hibernate_8h.html" title="Header file for hibernate.c. " alt="" coords="2390,109,2477,136"/>
<area shape="rect" id="node34" href="main_8h.html" title="Header file for main.c. " alt="" coords="2501,109,2563,136"/>
<area shape="rect" id="node35" href="microdesc_8h.html" title="Header file for microdesc.c. " alt="" coords="2587,109,2680,136"/>
<area shape="rect" id="node36" href="networkstatus_8h.html" title="Header file for networkstatus.c. " alt="" coords="2704,109,2819,136"/>
<area shape="rect" id="node37" href="nodelist_8h.html" title="Header file for nodelist.c. " alt="" coords="2843,109,2922,136"/>
<area shape="rect" id="node38" href="protover_8h.html" title="Headers and type declarations for protover.c. " alt="" coords="1293,259,1373,285"/>
<area shape="rect" id="node39" href="relay_8h.html" title="Header file for relay.c. " alt="" coords="2947,109,3008,136"/>
<area shape="rect" id="node40" href="router_8h.html" title="Header file for router.c. " alt="" coords="3032,109,3099,136"/>
<area shape="rect" id="node41" href="routerlist_8h.html" title="Header file for routerlist.c. " alt="" coords="3123,109,3205,136"/>
<area shape="rect" id="node42" href="routerparse_8h.html" title="Header file for routerparse.c. " alt="" coords="3229,109,3328,136"/>
<area shape="rect" id="node43" href="scheduler_8h.html" title="Header file for scheduler*.c. " alt="" coords="843,109,933,136"/>
<area shape="rect" id="node44" href="transports_8h.html" title="Headers for transports.c. " alt="" coords="3352,109,3443,136"/>
<area shape="rect" id="node45" href="torcert_8h_source.html" title="torcert.h" alt="" coords="3467,109,3538,136"/>
<area shape="rect" id="node46" href="channelpadding_8h_source.html" title="channelpadding.h" alt="" coords="3563,109,3685,136"/>
<area shape="rect" id="node47" href="voting__schedule_8h.html" title="Header file for voting_schedule.c. " alt="" coords="667,259,794,285"/>
<area shape="rect" id="node48" href="dirvote_8h.html" title="Header file for dirvote.c. " alt="" coords="3709,109,3824,136"/>
<area shape="rect" id="node49" href="mode_8h.html" title="Standalone header file for directory authority mode. " alt="" coords="3849,109,3957,136"/>
<area shape="rect" id="node50" href="shared__random_8h_source.html" title="dirauth/shared_random.h" alt="" coords="920,184,1085,211"/>
<area shape="rect" id="node3" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="955,557,1034,584"/>
<area shape="rect" id="node4" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="762,483,825,509"/>
<area shape="rect" id="node5" href="crypto_8h.html" title="Headers for crypto.c. " alt="" coords="939,408,1008,435"/>
<area shape="rect" id="node6" href="crypto__format_8h_source.html" title="crypto_format.h" alt="" coords="801,408,914,435"/>
<area shape="rect" id="node7" href="tortls_8h.html" title="Headers for tortls.c. " alt="" coords="1237,408,1299,435"/>
<area shape="rect" id="node8" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="182,408,247,435"/>
<area shape="rect" id="node9" href="container_8h_source.html" title="container.h" alt="" coords="1333,483,1419,509"/>
<area shape="rect" id="node10" href="compress_8h.html" title="Headers for compress.c. " alt="" coords="272,408,363,435"/>
<area shape="rect" id="node11" href="address_8h.html" title="Headers for address.h. " alt="" coords="1134,408,1213,435"/>
<area shape="rect" id="node12" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="931,483,1059,509"/>
<area shape="rect" id="node13" href="ht_8h_source.html" title="ht.h" alt="" coords="387,408,431,435"/>
<area shape="rect" id="node14" href="confline_8h_source.html" title="confline.h" alt="" coords="1375,408,1454,435"/>
<area shape="rect" id="node15" href="replaycache_8h.html" title="Header file for replaycache.c. " alt="" coords="455,408,558,435"/>
<area shape="rect" id="node16" href="crypto__curve25519_8h_source.html" title="crypto_curve25519.h" alt="" coords="582,408,725,435"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structconsensus__waiting__for__certs__t.html">consensus_waiting_for_certs_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af23403bf5257b9c21bdfc7cbac83c4ca"><td class="memItemLeft" align="right" valign="top"><a id="af23403bf5257b9c21bdfc7cbac83c4ca"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NETWORKSTATUS_PRIVATE</b></td></tr>
<tr class="separator:af23403bf5257b9c21bdfc7cbac83c4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcfbe247a950123ed0ed97aae0ce9369"><td class="memItemLeft" align="right" valign="top"><a id="afcfbe247a950123ed0ed97aae0ce9369"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_CONSENSUS_BOOTSTRAP_SCHEDULES</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:afcfbe247a950123ed0ed97aae0ce9369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2080dfbfc9a79a9bd3de6500cddcdc33"><td class="memItemLeft" align="right" valign="top"><a id="a2080dfbfc9a79a9bd3de6500cddcdc33"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONSENSUS_BOOTSTRAP_SOURCE_AUTHORITY</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a2080dfbfc9a79a9bd3de6500cddcdc33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3923223166ca29b7997cd67e9fab7dd6"><td class="memItemLeft" align="right" valign="top"><a id="a3923223166ca29b7997cd67e9fab7dd6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONSENSUS_BOOTSTRAP_SOURCE_ANY_DIRSERVER</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a3923223166ca29b7997cd67e9fab7dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f3e9f88023ba03364d4dcf2d4bd5e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aa6f3e9f88023ba03364d4dcf2d4bd5e9">NETWORKSTATUS_ALLOW_SKEW</a>&#160;&#160;&#160;(24*60*60)</td></tr>
<tr class="separator:aa6f3e9f88023ba03364d4dcf2d4bd5e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231fc0186609b4de75f937fc04acf4f2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a231fc0186609b4de75f937fc04acf4f2">AUTHORITY_NS_CACHE_INTERVAL</a>&#160;&#160;&#160;(10*60)</td></tr>
<tr class="separator:a231fc0186609b4de75f937fc04acf4f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684e2bb523b7227d2cdd3be9332d675c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a684e2bb523b7227d2cdd3be9332d675c">NONAUTHORITY_NS_CACHE_INTERVAL</a>&#160;&#160;&#160;(60*60)</td></tr>
<tr class="separator:a684e2bb523b7227d2cdd3be9332d675c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdbacd90265736ed611622051b4108d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#acdbacd90265736ed611622051b4108d6">DELAY_WHILE_FETCHING_CERTS</a>&#160;&#160;&#160;(20*60)</td></tr>
<tr class="separator:acdbacd90265736ed611622051b4108d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c243aca864ed34603b168e75aa7f6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ac2c243aca864ed34603b168e75aa7f6c">MIN_DELAY_FOR_FETCH_CERT_STATUS_FAILURE</a>&#160;&#160;&#160;(1*60)</td></tr>
<tr class="separator:ac2c243aca864ed34603b168e75aa7f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefeff78ed2ff011bc37b1a992b2d9348"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aefeff78ed2ff011bc37b1a992b2d9348">CONSENSUS_MIN_SECONDS_BEFORE_CACHING</a>&#160;&#160;&#160;120</td></tr>
<tr class="separator:aefeff78ed2ff011bc37b1a992b2d9348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f3055f07e74d649f060f45b1766501"><td class="memItemLeft" align="right" valign="top"><a id="ab8f3055f07e74d649f060f45b1766501"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>REASONABLY_LIVE_TIME</b>&#160;&#160;&#160;(24*60*60)</td></tr>
<tr class="separator:ab8f3055f07e74d649f060f45b1766501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39457b5403dd8c25991309e245fc362"><td class="memItemLeft" align="right" valign="top"><a id="ad39457b5403dd8c25991309e245fc362"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EARLY_CONSENSUS_NOTICE_SKEW</b>&#160;&#160;&#160;60</td></tr>
<tr class="separator:ad39457b5403dd8c25991309e245fc362"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a073e6fd700aaa478c04d0f752b7d4585"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structconsensus__waiting__for__certs__t.html">consensus_waiting_for_certs_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a073e6fd700aaa478c04d0f752b7d4585">consensus_waiting_for_certs_t</a></td></tr>
<tr class="separator:a073e6fd700aaa478c04d0f752b7d4585"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad970a8be0b1c191044f84bd686747e88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ad970a8be0b1c191044f84bd686747e88">networkstatus_reset_warnings</a> (void)</td></tr>
<tr class="separator:ad970a8be0b1c191044f84bd686747e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad86492baf32bd150a1848f70cc234977"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ad86492baf32bd150a1848f70cc234977">networkstatus_reset_download_failures</a> (void)</td></tr>
<tr class="separator:ad86492baf32bd150a1848f70cc234977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1e7e6cb46e4a70d63a54a42ba7d2ff"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#abf1e7e6cb46e4a70d63a54a42ba7d2ff">networkstatus_read_cached_consensus</a> (const char *flavorname)</td></tr>
<tr class="separator:abf1e7e6cb46e4a70d63a54a42ba7d2ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6fd62492d7f4cfafd9ec042e995bfef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aa6fd62492d7f4cfafd9ec042e995bfef">router_reload_consensus_networkstatus</a> (void)</td></tr>
<tr class="separator:aa6fd62492d7f4cfafd9ec042e995bfef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a1026b178124f6fedaf54066cca12a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a9a1026b178124f6fedaf54066cca12a0">vote_routerstatus_free_</a> (<a class="el" href="structvote__routerstatus__t.html">vote_routerstatus_t</a> *rs)</td></tr>
<tr class="separator:a9a1026b178124f6fedaf54066cca12a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a88dc1dcc532507c069e007620677d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#af7a88dc1dcc532507c069e007620677d">routerstatus_free_</a> (<a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *rs)</td></tr>
<tr class="separator:af7a88dc1dcc532507c069e007620677d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515529f6d2dbe7d504d291801ae5939b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a515529f6d2dbe7d504d291801ae5939b">document_signature_free_</a> (<a class="el" href="structdocument__signature__t.html">document_signature_t</a> *sig)</td></tr>
<tr class="separator:a515529f6d2dbe7d504d291801ae5939b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f84b0c46db64ef2af6a8f2d5f9c25c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdocument__signature__t.html">document_signature_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aa1f84b0c46db64ef2af6a8f2d5f9c25c">document_signature_dup</a> (const <a class="el" href="structdocument__signature__t.html">document_signature_t</a> *sig)</td></tr>
<tr class="separator:aa1f84b0c46db64ef2af6a8f2d5f9c25c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac431574021ec26d0de3d84b9bd0b3f38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ac431574021ec26d0de3d84b9bd0b3f38">networkstatus_vote_free_</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns)</td></tr>
<tr class="separator:ac431574021ec26d0de3d84b9bd0b3f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b27ffbed3cfefd3cdefa2deda029f7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnetworkstatus__voter__info__t.html">networkstatus_voter_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a4b27ffbed3cfefd3cdefa2deda029f7a">networkstatus_get_voter_by_id</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *vote, const char *identity)</td></tr>
<tr class="separator:a4b27ffbed3cfefd3cdefa2deda029f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c593a6979ddceeed0f80cc5e114488"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdocument__signature__t.html">document_signature_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ab8c593a6979ddceeed0f80cc5e114488">networkstatus_get_voter_sig_by_alg</a> (const <a class="el" href="structnetworkstatus__voter__info__t.html">networkstatus_voter_info_t</a> *voter, digest_algorithm_t alg)</td></tr>
<tr class="separator:ab8c593a6979ddceeed0f80cc5e114488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1695f89ba4a7206eab6d15d1e508c654"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a1695f89ba4a7206eab6d15d1e508c654">networkstatus_check_document_signature</a> (const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus, <a class="el" href="structdocument__signature__t.html">document_signature_t</a> *sig, const <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *cert)</td></tr>
<tr class="separator:a1695f89ba4a7206eab6d15d1e508c654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bead3d790b19f3f5894a521526a3531"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a7bead3d790b19f3f5894a521526a3531">networkstatus_check_consensus_signature</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus, int warn)</td></tr>
<tr class="separator:a7bead3d790b19f3f5894a521526a3531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a998a1af9202b3a8eec2327819b84bcee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee">compare_digest_to_routerstatus_entry</a> (const void *_key, const void **_member)</td></tr>
<tr class="separator:a998a1af9202b3a8eec2327819b84bcee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a208b46da9e333aa2712950089d0a2f54"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a208b46da9e333aa2712950089d0a2f54">compare_digest_to_vote_routerstatus_entry</a> (const void *_key, const void **_member)</td></tr>
<tr class="separator:a208b46da9e333aa2712950089d0a2f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041c69e1d5a274d07c162f9185605cd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a041c69e1d5a274d07c162f9185605cd0">networkstatus_vote_find_mutable_entry</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, const char *digest)</td></tr>
<tr class="separator:a041c69e1d5a274d07c162f9185605cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae8d735fe9d889755f96e927f9e9c967"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aae8d735fe9d889755f96e927f9e9c967">networkstatus_vote_find_entry</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, const char *digest)</td></tr>
<tr class="separator:aae8d735fe9d889755f96e927f9e9c967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d3edab11be460ebb5dc5de0f07c7874"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a4d3edab11be460ebb5dc5de0f07c7874">networkstatus_vote_find_entry_idx</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, const char *digest, int *found_out)</td></tr>
<tr class="separator:a4d3edab11be460ebb5dc5de0f07c7874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ed5d43bba3e19a8173887daad52e8c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a3ed5d43bba3e19a8173887daad52e8c4">MOCK_IMPL</a> (<a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *, router_get_mutable_consensus_status_by_descriptor_digest,(<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus, const char *digest))</td></tr>
<tr class="separator:a3ed5d43bba3e19a8173887daad52e8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae26b18ffeeda912deab35abe7bfe31da"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ae26b18ffeeda912deab35abe7bfe31da">router_get_consensus_status_by_descriptor_digest</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus, const char *digest)</td></tr>
<tr class="separator:ae26b18ffeeda912deab35abe7bfe31da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c4353fd23b988455002d1b79a067ef1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a1c4353fd23b988455002d1b79a067ef1">MOCK_IMPL</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *, router_get_descriptor_digests,(void))</td></tr>
<tr class="separator:a1c4353fd23b988455002d1b79a067ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146d8ba5f79b366f4cb922f8c351de6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a146d8ba5f79b366f4cb922f8c351de6d">MOCK_IMPL</a> (<a class="el" href="structdownload__status__t.html">download_status_t</a> *, router_get_dl_status_by_descriptor_digest,(const char *d))</td></tr>
<tr class="separator:a146d8ba5f79b366f4cb922f8c351de6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb917388a503fd5c8e727d7a6bd675f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#abeb917388a503fd5c8e727d7a6bd675f">router_get_mutable_consensus_status_by_id</a> (const char *digest)</td></tr>
<tr class="separator:abeb917388a503fd5c8e727d7a6bd675f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a810a06fe9e7c7bd3a1c5c5ee8cc13b52"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a810a06fe9e7c7bd3a1c5c5ee8cc13b52">router_get_consensus_status_by_id</a> (const char *digest)</td></tr>
<tr class="separator:a810a06fe9e7c7bd3a1c5c5ee8cc13b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d20f569e83b9acf580732e6369285c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a32d20f569e83b9acf580732e6369285c">we_want_to_fetch_flavor</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, int flavor)</td></tr>
<tr class="separator:a32d20f569e83b9acf580732e6369285c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae571a0f2e98aee6bb9b6a0df669b6c25"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ae571a0f2e98aee6bb9b6a0df669b6c25">we_want_to_fetch_unknown_auth_certs</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:ae571a0f2e98aee6bb9b6a0df669b6c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85567c13446bbbae84ce4199b3b2134"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#af85567c13446bbbae84ce4199b3b2134">networkstatus_consensus_download_failed</a> (int status_code, const char *flavname)</td></tr>
<tr class="separator:af85567c13446bbbae84ce4199b3b2134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b06eef1d3ad0356efd75d050cb857d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ad5b06eef1d3ad0356efd75d050cb857d">update_consensus_networkstatus_fetch_time</a> (time_t now)</td></tr>
<tr class="separator:ad5b06eef1d3ad0356efd75d050cb857d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa278011afd1917ef43cc44fac287f7bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf">should_delay_dir_fetches</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, const char **msg_out)</td></tr>
<tr class="separator:aa278011afd1917ef43cc44fac287f7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1283a3574ff7fb0ceb2f4b80af9bdbf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a1283a3574ff7fb0ceb2f4b80af9bdbf6">update_networkstatus_downloads</a> (time_t now)</td></tr>
<tr class="separator:a1283a3574ff7fb0ceb2f4b80af9bdbf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5e0a37016a04c309a791ae15ecc86a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#aac5e0a37016a04c309a791ae15ecc86a">update_certificate_downloads</a> (time_t now)</td></tr>
<tr class="separator:aac5e0a37016a04c309a791ae15ecc86a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af728d99cfd15f4902ee7471ce45a2dd7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#af728d99cfd15f4902ee7471ce45a2dd7">consensus_is_waiting_for_certs</a> (void)</td></tr>
<tr class="separator:af728d99cfd15f4902ee7471ce45a2dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143dce26439efa3d1df249c94e747695"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a143dce26439efa3d1df249c94e747695">MOCK_IMPL</a> (<a class="el" href="structdownload__status__t.html">download_status_t</a> *, networkstatus_get_dl_status_by_flavor,(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor))</td></tr>
<tr class="separator:a143dce26439efa3d1df249c94e747695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7d1590a3a3c123a5c995a93826719e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a4c7d1590a3a3c123a5c995a93826719e">MOCK_IMPL</a> (<a class="el" href="structdownload__status__t.html">download_status_t</a> *, networkstatus_get_dl_status_by_flavor_bootstrap,(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor))</td></tr>
<tr class="separator:a4c7d1590a3a3c123a5c995a93826719e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04f8418c065c1a7d5bc097575ed0c586"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a04f8418c065c1a7d5bc097575ed0c586">MOCK_IMPL</a> (<a class="el" href="structdownload__status__t.html">download_status_t</a> *, networkstatus_get_dl_status_by_flavor_running,(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor))</td></tr>
<tr class="separator:a04f8418c065c1a7d5bc097575ed0c586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75042c47433be1984f6711eae8ee0f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ae75042c47433be1984f6711eae8ee0f8">MOCK_IMPL</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *, networkstatus_get_latest_consensus,(void))</td></tr>
<tr class="separator:ae75042c47433be1984f6711eae8ee0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec01308d58e1b89c0ed66849967dd7f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#abec01308d58e1b89c0ed66849967dd7f">MOCK_IMPL</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *, networkstatus_get_latest_consensus_by_flavor,(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> f))</td></tr>
<tr class="separator:abec01308d58e1b89c0ed66849967dd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87fadf53d87fbd3d0cdcc7e2cccaf6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ad87fadf53d87fbd3d0cdcc7e2cccaf6f">MOCK_IMPL</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *, networkstatus_get_live_consensus,(time_t now))</td></tr>
<tr class="separator:ad87fadf53d87fbd3d0cdcc7e2cccaf6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97698b7c730bb880670662020a79ece0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a97698b7c730bb880670662020a79ece0">networkstatus_is_live</a> (const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, time_t now)</td></tr>
<tr class="separator:a97698b7c730bb880670662020a79ece0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d356f4ab27d29e60c8f5114974fda96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a2d356f4ab27d29e60c8f5114974fda96">networkstatus_consensus_reasonably_live</a> (const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus, time_t now)</td></tr>
<tr class="separator:a2d356f4ab27d29e60c8f5114974fda96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89a28d47b1bbf648c55caf48c618ef87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a89a28d47b1bbf648c55caf48c618ef87">networkstatus_valid_until_is_reasonably_live</a> (time_t valid_until, time_t now)</td></tr>
<tr class="separator:a89a28d47b1bbf648c55caf48c618ef87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44accdf47b7f9f40b25c45daf2c31475"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a44accdf47b7f9f40b25c45daf2c31475">networkstatus_get_reasonably_live_consensus</a> (time_t now, int flavor)</td></tr>
<tr class="separator:a44accdf47b7f9f40b25c45daf2c31475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d89145cb4ce8b8ccd79da09bfc3ce8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a5d89145cb4ce8b8ccd79da09bfc3ce8c">MOCK_IMPL</a> (int, networkstatus_consensus_is_bootstrapping,(time_t now))</td></tr>
<tr class="separator:a5d89145cb4ce8b8ccd79da09bfc3ce8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13394a9a2c5c03dfeb622fb8e461a9e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a13394a9a2c5c03dfeb622fb8e461a9e1">networkstatus_consensus_can_use_multiple_directories</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a13394a9a2c5c03dfeb622fb8e461a9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64da0d8c6b964ff29de2d72f084e94a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a64da0d8c6b964ff29de2d72f084e94a4">MOCK_IMPL</a> (int, networkstatus_consensus_can_use_extra_fallbacks,(const <a class="el" href="structor__options__t.html">or_options_t</a> *options))</td></tr>
<tr class="separator:a64da0d8c6b964ff29de2d72f084e94a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c88d2757b7b3430cca3430235a1281"><td class="memItemLeft" align="right" valign="top"><a id="a40c88d2757b7b3430cca3430235a1281"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>networkstatus_consensus_is_already_downloading</b> (const char *resource)</td></tr>
<tr class="separator:a40c88d2757b7b3430cca3430235a1281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4498324bf2e66e25b94b06a3ad8b0781"><td class="memItemLeft" align="right" valign="top"><a id="a4498324bf2e66e25b94b06a3ad8b0781"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>networkstatus_consensus_has_ipv6</b> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options)</td></tr>
<tr class="separator:a4498324bf2e66e25b94b06a3ad8b0781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf088a4674cdc3bc743134525e9a481a"><td class="memItemLeft" align="right" valign="top">STATIC void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#abf088a4674cdc3bc743134525e9a481a">warn_early_consensus</a> (const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *c, const char *flavor, time_t now)</td></tr>
<tr class="separator:abf088a4674cdc3bc743134525e9a481a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc8e47c7dbfc9cb7dbabab161bd6764"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a2bc8e47c7dbfc9cb7dbabab161bd6764">networkstatus_set_current_consensus</a> (const char *consensus, const char *flavor, unsigned flags, const char *source_dir)</td></tr>
<tr class="separator:a2bc8e47c7dbfc9cb7dbabab161bd6764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d51fc24064bd6b1e7f3d148bddba693"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a6d51fc24064bd6b1e7f3d148bddba693">networkstatus_note_certs_arrived</a> (const char *source_dir)</td></tr>
<tr class="separator:a6d51fc24064bd6b1e7f3d148bddba693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d10602167e09e05f4d5aefc744141b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a17d10602167e09e05f4d5aefc744141b">routers_update_all_from_networkstatus</a> (time_t now, int dir_version)</td></tr>
<tr class="separator:a17d10602167e09e05f4d5aefc744141b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcfacad25b94db6f21e0df2f7897a3cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#afcfacad25b94db6f21e0df2f7897a3cf">routers_update_status_from_consensus_networkstatus</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *routers, int reset_failures)</td></tr>
<tr class="separator:afcfacad25b94db6f21e0df2f7897a3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28083077a140f44e651523c894509005"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a28083077a140f44e651523c894509005">signed_descs_update_status_from_consensus_networkstatus</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *descs)</td></tr>
<tr class="separator:a28083077a140f44e651523c894509005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b2840d2a72326847e2e68152402dcf"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a07b2840d2a72326847e2e68152402dcf">networkstatus_getinfo_helper_single</a> (const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *rs)</td></tr>
<tr class="separator:a07b2840d2a72326847e2e68152402dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522e50eabe88fdafcc39b375b6e4cced"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a522e50eabe88fdafcc39b375b6e4cced">networkstatus_getinfo_by_purpose</a> (const char *purpose_string, time_t now)</td></tr>
<tr class="separator:a522e50eabe88fdafcc39b375b6e4cced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1c2d5fcccff6ee4e7aff6a497ec2cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ada1c2d5fcccff6ee4e7aff6a497ec2cf">networkstatus_dump_bridge_status_to_file</a> (time_t now)</td></tr>
<tr class="separator:ada1c2d5fcccff6ee4e7aff6a497ec2cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464a81c454373f53474dc8ddf5370813"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a464a81c454373f53474dc8ddf5370813">MOCK_IMPL</a> (int32_t, networkstatus_get_param,(const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, const char *param_name, int32_t default_val, int32_t min_val, int32_t max_val))</td></tr>
<tr class="separator:a464a81c454373f53474dc8ddf5370813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad61a285a56c1cf64f591666ffd42de"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a3ad61a285a56c1cf64f591666ffd42de">networkstatus_get_overridable_param</a> (const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, int32_t torrc_value, const char *param_name, int32_t default_val, int32_t min_val, int32_t max_val)</td></tr>
<tr class="separator:a3ad61a285a56c1cf64f591666ffd42de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda0b094982877af4c11b127167acb9e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#afda0b094982877af4c11b127167acb9e">networkstatus_get_weight_scale_param</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns)</td></tr>
<tr class="separator:afda0b094982877af4c11b127167acb9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77165f72d7e9e6e99fce27ee87a063a9"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a77165f72d7e9e6e99fce27ee87a063a9">networkstatus_get_bw_weight</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, const char *weight_name, int32_t default_val)</td></tr>
<tr class="separator:a77165f72d7e9e6e99fce27ee87a063a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31e12c0cdd4c1a17f3ddcdab8cdcf86f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a31e12c0cdd4c1a17f3ddcdab8cdcf86f">networkstatus_get_flavor_name</a> (<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flav)</td></tr>
<tr class="separator:a31e12c0cdd4c1a17f3ddcdab8cdcf86f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a072f4231b410ee50501327f71d527e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a1a072f4231b410ee50501327f71d527e">networkstatus_parse_flavor_name</a> (const char *flavname)</td></tr>
<tr class="separator:a1a072f4231b410ee50501327f71d527e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4393859fc27824306d0e6b183c863466"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a4393859fc27824306d0e6b183c863466">client_would_use_router</a> (const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *rs, time_t now)</td></tr>
<tr class="separator:a4393859fc27824306d0e6b183c863466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13617630ff7e7bd566e374e6610a8045"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a13617630ff7e7bd566e374e6610a8045">getinfo_helper_networkstatus</a> (<a class="el" href="structcontrol__connection__t.html">control_connection_t</a> *conn, const char *question, char **answer, const char **errmsg)</td></tr>
<tr class="separator:a13617630ff7e7bd566e374e6610a8045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab67c1b78647e8e4babfbeee6ec9c767c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#ab67c1b78647e8e4babfbeee6ec9c767c">ns_detached_signatures_free_</a> (<a class="el" href="structns__detached__signatures__t.html">ns_detached_signatures_t</a> *s)</td></tr>
<tr class="separator:ab67c1b78647e8e4babfbeee6ec9c767c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5903397efb4437a9f991843962369b72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a5903397efb4437a9f991843962369b72">networkstatus_free_all</a> (void)</td></tr>
<tr class="separator:a5903397efb4437a9f991843962369b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a538db4424c625a74c8d0ebad0f456d62"><td class="memItemLeft" align="right" valign="top">STATIC <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a538db4424c625a74c8d0ebad0f456d62">current_ns_consensus</a> = NULL</td></tr>
<tr class="separator:a538db4424c625a74c8d0ebad0f456d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1784adab1ca6e17ebbace63ef676f5"><td class="memItemLeft" align="right" valign="top">STATIC <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="networkstatus_8c.html#a1b1784adab1ca6e17ebbace63ef676f5">current_md_consensus</a> = NULL</td></tr>
<tr class="separator:a1b1784adab1ca6e17ebbace63ef676f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions and structures for handling networkstatus documents as a client or as a directory cache. </p>
<p>A consensus networkstatus object is created by the directory authorities. It authenticates a set of network parameters&ndash;most importantly, the list of all the relays in the network. This list of relays is represented as an array of <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> objects.</p>
<p>There are currently two flavors of consensus. With the older "NS" flavor, each relay is associated with a digest of its router descriptor. Tor instances that use this consensus keep the list of router descriptors as <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> objects stored and managed in <a class="el" href="routerlist_8c.html" title="Code to maintain and access the global list of routerinfos for known servers. ">routerlist.c</a>. With the newer "microdesc" flavor, each relay is associated with a digest of the microdescriptor that the authorities made for it. These are stored and managed in <a class="el" href="microdesc_8c.html" title="Implements microdescriptors  an abbreviated description of less-frequently-changing router informat...">microdesc.c</a>. Information about the router is divided between the the networkstatus and the microdescriptor according to the general rule that microdescriptors should hold information that changes much less frequently than the information in the networkstatus.</p>
<p>Modern clients use microdescriptor networkstatuses. Directory caches need to keep both kinds of networkstatus document, so they can serve them.</p>
<p>This module manages fetching, holding, storing, updating, and validating networkstatus objects. The download-and-validate process is slightly complicated by the fact that the keys you need to validate a consensus are stored in the authority certificates, which you might not have yet when you download the consensus. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a231fc0186609b4de75f937fc04acf4f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231fc0186609b4de75f937fc04acf4f2">&#9670;&nbsp;</a></span>AUTHORITY_NS_CACHE_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AUTHORITY_NS_CACHE_INTERVAL&#160;&#160;&#160;(10*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How frequently do directory authorities re-download fresh networkstatus documents? </p>

</div>
</div>
<a id="aefeff78ed2ff011bc37b1a992b2d9348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefeff78ed2ff011bc37b1a992b2d9348">&#9670;&nbsp;</a></span>CONSENSUS_MIN_SECONDS_BEFORE_CACHING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONSENSUS_MIN_SECONDS_BEFORE_CACHING&#160;&#160;&#160;120</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How long do we (as a cache) wait after a consensus becomes non-fresh before trying to fetch another? </p>

</div>
</div>
<a id="acdbacd90265736ed611622051b4108d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdbacd90265736ed611622051b4108d6">&#9670;&nbsp;</a></span>DELAY_WHILE_FETCHING_CERTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DELAY_WHILE_FETCHING_CERTS&#160;&#160;&#160;(20*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How long will we hang onto a possibly live consensus for which we're fetching certs before we check whether there is a better one? </p>

</div>
</div>
<a id="ac2c243aca864ed34603b168e75aa7f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c243aca864ed34603b168e75aa7f6c">&#9670;&nbsp;</a></span>MIN_DELAY_FOR_FETCH_CERT_STATUS_FAILURE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_DELAY_FOR_FETCH_CERT_STATUS_FAILURE&#160;&#160;&#160;(1*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>What is the minimum time we need to have waited fetching certs, before we increment the consensus download schedule on failure? </p>

</div>
</div>
<a id="aa6f3e9f88023ba03364d4dcf2d4bd5e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f3e9f88023ba03364d4dcf2d4bd5e9">&#9670;&nbsp;</a></span>NETWORKSTATUS_ALLOW_SKEW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NETWORKSTATUS_ALLOW_SKEW&#160;&#160;&#160;(24*60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How far in the future do we allow a network-status to get before removing it? (seconds) </p>

</div>
</div>
<a id="a684e2bb523b7227d2cdd3be9332d675c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a684e2bb523b7227d2cdd3be9332d675c">&#9670;&nbsp;</a></span>NONAUTHORITY_NS_CACHE_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NONAUTHORITY_NS_CACHE_INTERVAL&#160;&#160;&#160;(60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How frequently do non-authority directory caches re-download fresh networkstatus documents? </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a073e6fd700aaa478c04d0f752b7d4585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a073e6fd700aaa478c04d0f752b7d4585">&#9670;&nbsp;</a></span>consensus_waiting_for_certs_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structconsensus__waiting__for__certs__t.html">consensus_waiting_for_certs_t</a>  <a class="el" href="structconsensus__waiting__for__certs__t.html">consensus_waiting_for_certs_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A v3 consensus networkstatus that we've received, but which we don't have enough certificates to be happy about. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4393859fc27824306d0e6b183c863466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4393859fc27824306d0e6b183c863466">&#9670;&nbsp;</a></span>client_would_use_router()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int client_would_use_router </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 0 if this routerstatus is obsolete, too new, isn't running, or otherwise not a descriptor that we would make any use of even if we had it. Else return 1. </p>

</div>
</div>
<a id="a998a1af9202b3a8eec2327819b84bcee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a998a1af9202b3a8eec2327819b84bcee">&#9670;&nbsp;</a></span>compare_digest_to_routerstatus_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compare_digest_to_routerstatus_entry </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&#160;</td>
          <td class="paramname"><em>_member</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper for bsearching a list of <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> pointers: compare a digest in the key to the identity digest of a <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_cgraph.png" border="0" usemap="#networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_cgraph" alt=""/></div>
<map name="networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_cgraph" id="networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="261,13,360,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_icgraph.png" border="0" usemap="#networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_icgraph" alt=""/></div>
<map name="networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_icgraph" id="networkstatus_8c_a998a1af9202b3a8eec2327819b84bcee_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a041c69e1d5a274d07c162f9185605cd0" title="networkstatus_vote\l_find_mutable_entry" alt="" coords="279,5,417,47"/>
<area shape="rect" id="node5" href="networkstatus_8h.html#a4d3edab11be460ebb5dc5de0f07c7874" title="networkstatus_vote\l_find_entry_idx" alt="" coords="280,71,416,112"/>
<area shape="rect" id="node6" href="networkstatus_8h.html#abeb917388a503fd5c8e727d7a6bd675f" title="router_get_mutable\l_consensus_status_by_id" alt="" coords="261,136,435,177"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#aae8d735fe9d889755f96e927f9e9c967" title="networkstatus_vote\l_find_entry" alt="" coords="490,5,626,47"/>
<area shape="rect" id="node4" href="router_8h.html#ad20dfba342b27eb97810f9141d5c14a1" title="mark_my_descriptor\l_dirty_if_too_old" alt="" coords="684,5,824,47"/>
<area shape="rect" id="node7" href="networkstatus_8h.html#a810a06fe9e7c7bd3a1c5c5ee8cc13b52" title="router_get_consensus\l_status_by_id" alt="" coords="483,136,633,177"/>
<area shape="rect" id="node8" href="connection__or_8h.html#a8573b49df7ffc3ad6df0faa6e7a12f10" title="connection_or_digest\l_is_known_relay" alt="" coords="681,136,827,177"/>
</map>
</div>

</div>
</div>
<a id="a208b46da9e333aa2712950089d0a2f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a208b46da9e333aa2712950089d0a2f54">&#9670;&nbsp;</a></span>compare_digest_to_vote_routerstatus_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compare_digest_to_vote_routerstatus_entry </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&#160;</td>
          <td class="paramname"><em>_member</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper for bsearching a list of <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> pointers: compare a digest in the key to the identity digest of a <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_cgraph.png" border="0" usemap="#networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_cgraph" alt=""/></div>
<map name="networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_cgraph" id="networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="217,13,316,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_icgraph.png" border="0" usemap="#networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_icgraph" alt=""/></div>
<map name="networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_icgraph" id="networkstatus_8c_a208b46da9e333aa2712950089d0a2f54_icgraph">
<area shape="rect" id="node2" href="dirserv_8c.html#a9afa21451734581b626a94cb615375af" title="measured_bw_line_apply" alt="" coords="217,13,385,39"/>
</map>
</div>

</div>
</div>
<a id="af728d99cfd15f4902ee7471ce45a2dd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af728d99cfd15f4902ee7471ce45a2dd7">&#9670;&nbsp;</a></span>consensus_is_waiting_for_certs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int consensus_is_waiting_for_certs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if we have a consensus but we don't have enough certificates to start using it yet. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_af728d99cfd15f4902ee7471ce45a2dd7_icgraph.png" border="0" usemap="#networkstatus_8c_af728d99cfd15f4902ee7471ce45a2dd7_icgraph" alt=""/></div>
<map name="networkstatus_8c_af728d99cfd15f4902ee7471ce45a2dd7_icgraph" id="networkstatus_8c_af728d99cfd15f4902ee7471ce45a2dd7_icgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a5d89145cb4ce8b8ccd79da09bfc3ce8c" title="MOCK_IMPL" alt="" coords="204,13,304,39"/>
</map>
</div>

</div>
</div>
<a id="aa1f84b0c46db64ef2af6a8f2d5f9c25c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f84b0c46db64ef2af6a8f2d5f9c25c">&#9670;&nbsp;</a></span>document_signature_dup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdocument__signature__t.html">document_signature_t</a>* document_signature_dup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdocument__signature__t.html">document_signature_t</a> *&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a newly allocated copy of <b>sig</b> </p>

</div>
</div>
<a id="a515529f6d2dbe7d504d291801ae5939b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515529f6d2dbe7d504d291801ae5939b">&#9670;&nbsp;</a></span>document_signature_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void document_signature_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdocument__signature__t.html">document_signature_t</a> *&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held in <b>sig</b> </p>

</div>
</div>
<a id="a13617630ff7e7bd566e374e6610a8045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13617630ff7e7bd566e374e6610a8045">&#9670;&nbsp;</a></span>getinfo_helper_networkstatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getinfo_helper_networkstatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontrol__connection__t.html">control_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>question</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>errmsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If <b>question</b> is a string beginning with "ns/" in a format the control interface expects for a GETINFO question, set *<b>answer</b> to a newly-allocated string containing networkstatus lines for the appropriate ORs. Return 0 on success, -1 on unrecognized question format. </p>

</div>
</div>
<a id="a3ed5d43bba3e19a8173887daad52e8c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ed5d43bba3e19a8173887daad52e8c4">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[1/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_get_mutable_consensus_status_by_descriptor_digest&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">( <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus, const char *digest)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As router_get_consensus_status_by_descriptor_digest, but does not return a const pointer. </p>

</div>
</div>
<a id="a1c4353fd23b988455002d1b79a067ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c4353fd23b988455002d1b79a067ef1">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[2/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_get_descriptor_digests&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a smartlist of all router descriptor digests in the current consensus </p>

</div>
</div>
<a id="a146d8ba5f79b366f4cb922f8c351de6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146d8ba5f79b366f4cb922f8c351de6d">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[3/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdownload__status__t.html">download_status_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_get_dl_status_by_descriptor_digest&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *d)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given the digest of a router descriptor, return its current download status, or NULL if the digest is unrecognized. </p>

</div>
</div>
<a id="a143dce26439efa3d1df249c94e747695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143dce26439efa3d1df249c94e747695">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[4/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdownload__status__t.html">download_status_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_dl_status_by_flavor&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look up the currently active (depending on bootstrap status) download status for this consensus flavor and return a pointer to it. </p>

</div>
</div>
<a id="a4c7d1590a3a3c123a5c995a93826719e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7d1590a3a3c123a5c995a93826719e">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[5/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdownload__status__t.html">download_status_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_dl_status_by_flavor_bootstrap&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look up the bootstrap download status for this consensus flavor and return a pointer to it. </p>

</div>
</div>
<a id="a04f8418c065c1a7d5bc097575ed0c586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04f8418c065c1a7d5bc097575ed0c586">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[6/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdownload__status__t.html">download_status_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_dl_status_by_flavor_running&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look up the running (non-bootstrap) download status for this consensus flavor and return a pointer to it. </p>

</div>
</div>
<a id="ae75042c47433be1984f6711eae8ee0f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75042c47433be1984f6711eae8ee0f8">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[7/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_latest_consensus&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the most recent consensus that we have downloaded, or NULL if we don't have one. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ae75042c47433be1984f6711eae8ee0f8_cgraph.png" border="0" usemap="#networkstatus_8c_ae75042c47433be1984f6711eae8ee0f8_cgraph" alt=""/></div>
<map name="networkstatus_8c_ae75042c47433be1984f6711eae8ee0f8_cgraph" id="networkstatus_8c_ae75042c47433be1984f6711eae8ee0f8_cgraph">
<area shape="rect" id="node2" href="microdesc_8c.html#adeff3a88aa40b67ab6407bda5c941910" title="we_use_microdescriptors\l_for_circuits" alt="" coords="153,5,324,47"/>
</map>
</div>

</div>
</div>
<a id="abec01308d58e1b89c0ed66849967dd7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec01308d58e1b89c0ed66849967dd7f">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[8/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_latest_consensus_by_flavor&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> f)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the latest consensus we have whose flavor matches <b>f</b>, or NULL if we don't have one. </p>

</div>
</div>
<a id="ad87fadf53d87fbd3d0cdcc7e2cccaf6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87fadf53d87fbd3d0cdcc7e2cccaf6f">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[9/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_live_consensus&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(time_t now)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the most recent consensus that we have downloaded, or NULL if it is no longer live. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ad87fadf53d87fbd3d0cdcc7e2cccaf6f_cgraph.png" border="0" usemap="#networkstatus_8c_ad87fadf53d87fbd3d0cdcc7e2cccaf6f_cgraph" alt=""/></div>
<map name="networkstatus_8c_ad87fadf53d87fbd3d0cdcc7e2cccaf6f_cgraph" id="networkstatus_8c_ad87fadf53d87fbd3d0cdcc7e2cccaf6f_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a97698b7c730bb880670662020a79ece0" title="networkstatus_is_live" alt="" coords="153,5,301,32"/>
</map>
</div>

</div>
</div>
<a id="a5d89145cb4ce8b8ccd79da09bfc3ce8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d89145cb4ce8b8ccd79da09bfc3ce8c">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[10/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_consensus_is_bootstrapping&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(time_t now)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if we need to download a consensus during tor's bootstrap phase. If we have no consensus, or our consensus is unusably old, return 1. As soon as we have received a consensus, return 0, even if we don't have enough certificates to validate it. If a fallback directory gives us a consensus we can never get certs for, check_consensus_waiting_for_certs() will wait 20 minutes before failing the cert downloads. After that, a new consensus will be fetched from a randomly chosen fallback. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a5d89145cb4ce8b8ccd79da09bfc3ce8c_cgraph.png" border="0" usemap="#networkstatus_8c_a5d89145cb4ce8b8ccd79da09bfc3ce8c_cgraph" alt=""/></div>
<map name="networkstatus_8c_a5d89145cb4ce8b8ccd79da09bfc3ce8c_cgraph" id="networkstatus_8c_a5d89145cb4ce8b8ccd79da09bfc3ce8c_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a44accdf47b7f9f40b25c45daf2c31475" title="networkstatus_get_reasonably\l_live_consensus" alt="" coords="153,5,352,47"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#af728d99cfd15f4902ee7471ce45a2dd7" title="consensus_is_waiting\l_for_certs" alt="" coords="177,71,328,112"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#a2d356f4ab27d29e60c8f5114974fda96" title="networkstatus_consensus\l_reasonably_live" alt="" coords="400,5,575,47"/>
</map>
</div>

</div>
</div>
<a id="a64da0d8c6b964ff29de2d72f084e94a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64da0d8c6b964ff29de2d72f084e94a4">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[11/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_consensus_can_use_extra_fallbacks&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structor__options__t.html">or_options_t</a> *options)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if we can use fallback directory mirrors for a consensus download. If we have fallbacks and don't want to fetch from the authorities, we can use them. </p>

</div>
</div>
<a id="a464a81c454373f53474dc8ddf5370813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464a81c454373f53474dc8ddf5370813">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[12/12]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">networkstatus_get_param&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *ns, const char *param_name, int32_t default_val, int32_t min_val, int32_t max_val)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the value of a integer parameter from the networkstatus <b>ns</b> whose name is <b>param_name</b>. If <b>ns</b> is NULL, try loading the latest consensus ourselves. Return <b>default_val</b> if no latest consensus, or if it has no parameter called <b>param_name</b>. Make sure the value parsed from the consensus is at least <b>min_val</b> and at most <b>max_val</b> and raise/cap the parsed value if necessary. </p>

</div>
</div>
<a id="a7bead3d790b19f3f5894a521526a3531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bead3d790b19f3f5894a521526a3531">&#9670;&nbsp;</a></span>networkstatus_check_consensus_signature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_check_consensus_signature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>consensus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>warn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a v3 networkstatus consensus in <b>consensus</b>, check every as-yet-unchecked signature on <b>consensus</b>. Return 1 if there is a signature from every recognized authority on it, 0 if there are enough good signatures from recognized authorities on it, -1 if we might get enough good signatures by fetching missing certificates, and -2 otherwise. Log messages at INFO or WARN: if <b>warn</b> is over 1, warn about every problem; if warn is at least 1, warn only if we can't get enough signatures; if warn is negative, log nothing at all. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_cgraph.png" border="0" usemap="#networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_cgraph" alt=""/></div>
<map name="networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_cgraph" id="networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a40b0857598d14d49c8082667c70bc023" title="get_n_authorities" alt="" coords="205,13,327,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_icgraph.png" border="0" usemap="#networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_icgraph" alt=""/></div>
<map name="networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_icgraph" id="networkstatus_8c_a7bead3d790b19f3f5894a521526a3531_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a6d51fc24064bd6b1e7f3d148bddba693" title="networkstatus_note\l_certs_arrived" alt="" coords="205,5,341,47"/>
</map>
</div>

</div>
</div>
<a id="a1695f89ba4a7206eab6d15d1e508c654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1695f89ba4a7206eab6d15d1e508c654">&#9670;&nbsp;</a></span>networkstatus_check_document_signature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_check_document_signature </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>consensus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdocument__signature__t.html">document_signature_t</a> *&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td>
          <td class="paramname"><em>cert</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether the signature <b>sig</b> is correctly signed with the signing key in <b>cert</b>. Return -1 if <b>cert</b> doesn't match the signing key; otherwise set the good_signature or bad_signature flag on <b>voter</b>, and return 0. </p>

</div>
</div>
<a id="a13394a9a2c5c03dfeb622fb8e461a9e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13394a9a2c5c03dfeb622fb8e461a9e1">&#9670;&nbsp;</a></span>networkstatus_consensus_can_use_multiple_directories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_consensus_can_use_multiple_directories </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if we can use multiple directories for a consensus download. Only clients (including bridge relays, which act like clients) benefit from multiple simultaneous consensus downloads. </p>

</div>
</div>
<a id="af85567c13446bbbae84ce4199b3b2134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85567c13446bbbae84ce4199b3b2134">&#9670;&nbsp;</a></span>networkstatus_consensus_download_failed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_consensus_download_failed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>flavname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when an attempt to download a consensus fails: note that the failure occurred, and possibly retry. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_cgraph.png" border="0" usemap="#networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_cgraph" alt=""/></div>
<map name="networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_cgraph" id="networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a1a072f4231b410ee50501327f71d527e" title="networkstatus_parse\l_flavor_name" alt="" coords="228,5,371,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_icgraph.png" border="0" usemap="#networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_icgraph" alt=""/></div>
<map name="networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_icgraph" id="networkstatus_8c_af85567c13446bbbae84ce4199b3b2134_icgraph">
<area shape="rect" id="node2" href="directory_8c.html#a4af7e7ade522a1f118e7770955ff50ea" title="handle_response_fetch\l_consensus" alt="" coords="228,5,384,47"/>
</map>
</div>

</div>
</div>
<a id="a2d356f4ab27d29e60c8f5114974fda96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d356f4ab27d29e60c8f5114974fda96">&#9670;&nbsp;</a></span>networkstatus_consensus_reasonably_live()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_consensus_reasonably_live </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>consensus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if <b>consensus</b> is valid or expired recently enough that we can still use it.</p>
<p>Return 1 if the consensus is reasonably live, or 0 if it is too old. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a2d356f4ab27d29e60c8f5114974fda96_icgraph.png" border="0" usemap="#networkstatus_8c_a2d356f4ab27d29e60c8f5114974fda96_icgraph" alt=""/></div>
<map name="networkstatus_8c_a2d356f4ab27d29e60c8f5114974fda96_icgraph" id="networkstatus_8c_a2d356f4ab27d29e60c8f5114974fda96_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a44accdf47b7f9f40b25c45daf2c31475" title="networkstatus_get_reasonably\l_live_consensus" alt="" coords="228,166,427,207"/>
<area shape="rect" id="node3" href="microdesc_8h.html#af6dd60dcd4d473a6b0c9fce9f0f3c1c3" title="microdesc_cache_clean" alt="" coords="492,5,655,32"/>
<area shape="rect" id="node4" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="475,56,672,83"/>
<area shape="rect" id="node7" href="microdesc_8h.html#ad388d518c6750dce831b4d375e0efe5c" title="update_microdescs_from\l_networkstatus" alt="" coords="489,107,657,149"/>
<area shape="rect" id="node8" href="networkstatus_8c.html#a5d89145cb4ce8b8ccd79da09bfc3ce8c" title="MOCK_IMPL" alt="" coords="523,173,623,200"/>
<area shape="rect" id="node9" href="networkstatus_8h.html#a17d10602167e09e05f4d5aefc744141b" title="routers_update_all\l_from_networkstatus" alt="" coords="501,225,645,266"/>
<area shape="rect" id="node10" href="nodelist_8h.html#ae883dd13e0b2365df6ce859e79de0bdf" title="count_loading_descriptors\l_progress" alt="" coords="487,290,660,331"/>
<area shape="rect" id="node11" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="491,355,656,397"/>
<area shape="rect" id="node5" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="720,202,865,243"/>
<area shape="rect" id="node6" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="913,202,1041,243"/>
</map>
</div>

</div>
</div>
<a id="ada1c2d5fcccff6ee4e7aff6a497ec2cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1c2d5fcccff6ee4e7aff6a497ec2cf">&#9670;&nbsp;</a></span>networkstatus_dump_bridge_status_to_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_dump_bridge_status_to_file </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write out router status entries for all our bridge descriptors. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ada1c2d5fcccff6ee4e7aff6a497ec2cf_cgraph.png" border="0" usemap="#networkstatus_8c_ada1c2d5fcccff6ee4e7aff6a497ec2cf_cgraph" alt=""/></div>
<map name="networkstatus_8c_ada1c2d5fcccff6ee4e7aff6a497ec2cf_cgraph" id="networkstatus_8c_ada1c2d5fcccff6ee4e7aff6a497ec2cf_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a522e50eabe88fdafcc39b375b6e4cced" title="networkstatus_getinfo\l_by_purpose" alt="" coords="203,57,353,98"/>
<area shape="rect" id="node3" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1" title="router_get_routerlist" alt="" coords="404,5,541,32"/>
<area shape="rect" id="node4" href="router_8c.html#a5822c27ea2e28fd0ff19da0dbc612611" title="router_purpose_from\l_string" alt="" coords="402,57,543,98"/>
<area shape="rect" id="node5" href="router_8c.html#aabab68011cc297e16ad83af25c521bf6" title="authdir_mode_bridge" alt="" coords="401,123,544,149"/>
<area shape="rect" id="node6" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="592,123,692,149"/>
</map>
</div>

</div>
</div>
<a id="a5903397efb4437a9f991843962369b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5903397efb4437a9f991843962369b72">&#9670;&nbsp;</a></span>networkstatus_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held locally in this module. </p>

</div>
</div>
<a id="a77165f72d7e9e6e99fce27ee87a063a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77165f72d7e9e6e99fce27ee87a063a9">&#9670;&nbsp;</a></span>networkstatus_get_bw_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t networkstatus_get_bw_weight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>weight_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>default_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the value of a integer bw weight parameter from the networkstatus <b>ns</b> whose name is <b>weight_name</b>. If <b>ns</b> is NULL, try loading the latest consensus ourselves. Return <b>default_val</b> if no latest consensus, or if it has no parameter called <b>weight_name</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_cgraph.png" border="0" usemap="#networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_cgraph" alt=""/></div>
<map name="networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_cgraph" id="networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#afda0b094982877af4c11b127167acb9e" title="networkstatus_get_weight\l_scale_param" alt="" coords="207,5,381,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_icgraph.png" border="0" usemap="#networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_icgraph" alt=""/></div>
<map name="networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_icgraph" id="networkstatus_8c_a77165f72d7e9e6e99fce27ee87a063a9_icgraph">
<area shape="rect" id="node2" href="routerparse_8h.html#aadb249c6c48887d46e7fc9d396f26c21" title="networkstatus_verify\l_bw_weights" alt="" coords="207,5,349,47"/>
</map>
</div>

</div>
</div>
<a id="a31e12c0cdd4c1a17f3ddcdab8cdcf86f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31e12c0cdd4c1a17f3ddcdab8cdcf86f">&#9670;&nbsp;</a></span>networkstatus_get_flavor_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* networkstatus_get_flavor_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a>&#160;</td>
          <td class="paramname"><em>flav</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the name of the consensus flavor <b>flav</b> as used to identify the flavor in directory documents. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a31e12c0cdd4c1a17f3ddcdab8cdcf86f_icgraph.png" border="0" usemap="#networkstatus_8c_a31e12c0cdd4c1a17f3ddcdab8cdcf86f_icgraph" alt=""/></div>
<map name="networkstatus_8c_a31e12c0cdd4c1a17f3ddcdab8cdcf86f_icgraph" id="networkstatus_8c_a31e12c0cdd4c1a17f3ddcdab8cdcf86f_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a6d51fc24064bd6b1e7f3d148bddba693" title="networkstatus_note\l_certs_arrived" alt="" coords="260,5,396,47"/>
</map>
</div>

</div>
</div>
<a id="a3ad61a285a56c1cf64f591666ffd42de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad61a285a56c1cf64f591666ffd42de">&#9670;&nbsp;</a></span>networkstatus_get_overridable_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t networkstatus_get_overridable_param </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>torrc_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>param_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>default_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>min_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>max_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As networkstatus_get_param(), but check torrc_value before checking the consensus. If torrc_value is in-range, then return it instead of the value from the consensus. </p>

</div>
</div>
<a id="a44accdf47b7f9f40b25c45daf2c31475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44accdf47b7f9f40b25c45daf2c31475">&#9670;&nbsp;</a></span>networkstatus_get_reasonably_live_consensus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a>* networkstatus_get_reasonably_live_consensus </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flavor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As networkstatus_get_live_consensus(), but is way more tolerant of expired consensuses. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_cgraph.png" border="0" usemap="#networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_cgraph" alt=""/></div>
<map name="networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_cgraph" id="networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a2d356f4ab27d29e60c8f5114974fda96" title="networkstatus_consensus\l_reasonably_live" alt="" coords="252,5,427,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_icgraph.png" border="0" usemap="#networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_icgraph" alt=""/></div>
<map name="networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_icgraph" id="networkstatus_8c_a44accdf47b7f9f40b25c45daf2c31475_icgraph">
<area shape="rect" id="node2" href="microdesc_8h.html#af6dd60dcd4d473a6b0c9fce9f0f3c1c3" title="microdesc_cache_clean" alt="" coords="269,5,432,32"/>
<area shape="rect" id="node3" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="252,56,449,83"/>
<area shape="rect" id="node6" href="microdesc_8h.html#ad388d518c6750dce831b4d375e0efe5c" title="update_microdescs_from\l_networkstatus" alt="" coords="267,107,435,149"/>
<area shape="rect" id="node7" href="networkstatus_8c.html#a5d89145cb4ce8b8ccd79da09bfc3ce8c" title="MOCK_IMPL" alt="" coords="301,173,401,200"/>
<area shape="rect" id="node8" href="networkstatus_8h.html#a17d10602167e09e05f4d5aefc744141b" title="routers_update_all\l_from_networkstatus" alt="" coords="279,225,423,266"/>
<area shape="rect" id="node9" href="nodelist_8h.html#ae883dd13e0b2365df6ce859e79de0bdf" title="count_loading_descriptors\l_progress" alt="" coords="264,290,437,331"/>
<area shape="rect" id="node10" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="268,355,433,397"/>
<area shape="rect" id="node4" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="497,202,643,243"/>
<area shape="rect" id="node5" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="691,202,819,243"/>
</map>
</div>

</div>
</div>
<a id="a4b27ffbed3cfefd3cdefa2deda029f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b27ffbed3cfefd3cdefa2deda029f7a">&#9670;&nbsp;</a></span>networkstatus_get_voter_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnetworkstatus__voter__info__t.html">networkstatus_voter_info_t</a>* networkstatus_get_voter_by_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>vote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>identity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the voter info from <b>vote</b> for the voter whose identity digest is <b>identity</b>, or NULL if no such voter is associated with <b>vote</b>. </p>

</div>
</div>
<a id="ab8c593a6979ddceeed0f80cc5e114488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c593a6979ddceeed0f80cc5e114488">&#9670;&nbsp;</a></span>networkstatus_get_voter_sig_by_alg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdocument__signature__t.html">document_signature_t</a>* networkstatus_get_voter_sig_by_alg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__voter__info__t.html">networkstatus_voter_info_t</a> *&#160;</td>
          <td class="paramname"><em>voter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">digest_algorithm_t&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the signature made by <b>voter</b> using the algorithm <b>alg</b>, or NULL if none is found. </p>

</div>
</div>
<a id="afda0b094982877af4c11b127167acb9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afda0b094982877af4c11b127167acb9e">&#9670;&nbsp;</a></span>networkstatus_get_weight_scale_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_get_weight_scale_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the consensus parameter that governs the fixed-point precision of our network balancing 'bandwidth-weights' (which are themselves integer consensus values). We divide them by this value and ensure they never exceed this value. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_afda0b094982877af4c11b127167acb9e_icgraph.png" border="0" usemap="#networkstatus_8c_afda0b094982877af4c11b127167acb9e_icgraph" alt=""/></div>
<map name="networkstatus_8c_afda0b094982877af4c11b127167acb9e_icgraph" id="networkstatus_8c_afda0b094982877af4c11b127167acb9e_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#ad2a338c07af7ab37504729f7c1404b55" title="networkstatus_get_bw\l_weight" alt="" coords="228,5,381,47"/>
<area shape="rect" id="node3" href="routerparse_8h.html#aadb249c6c48887d46e7fc9d396f26c21" title="networkstatus_verify\l_bw_weights" alt="" coords="429,35,572,76"/>
</map>
</div>

</div>
</div>
<a id="a522e50eabe88fdafcc39b375b6e4cced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a522e50eabe88fdafcc39b375b6e4cced">&#9670;&nbsp;</a></span>networkstatus_getinfo_by_purpose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* networkstatus_getinfo_by_purpose </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>purpose_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Alloc and return a string describing routerstatuses for the most recent info of each router we know about that is of purpose <b>purpose_string</b>. Return NULL if unrecognized purpose.</p>
<p>Right now this function is oriented toward listing bridges (you shouldn't use this for general-purpose routers, since those should be listed from the consensus, not from the routers list). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_cgraph.png" border="0" usemap="#networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_cgraph" alt=""/></div>
<map name="networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_cgraph" id="networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1" title="router_get_routerlist" alt="" coords="207,5,344,32"/>
<area shape="rect" id="node3" href="router_8c.html#a5822c27ea2e28fd0ff19da0dbc612611" title="router_purpose_from\l_string" alt="" coords="205,57,346,98"/>
<area shape="rect" id="node4" href="router_8c.html#aabab68011cc297e16ad83af25c521bf6" title="authdir_mode_bridge" alt="" coords="204,123,347,149"/>
<area shape="rect" id="node5" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="395,123,495,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_icgraph.png" border="0" usemap="#networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_icgraph" alt=""/></div>
<map name="networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_icgraph" id="networkstatus_8c_a522e50eabe88fdafcc39b375b6e4cced_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#ada1c2d5fcccff6ee4e7aff6a497ec2cf" title="networkstatus_dump\l_bridge_status_to_file" alt="" coords="204,5,353,47"/>
</map>
</div>

</div>
</div>
<a id="a07b2840d2a72326847e2e68152402dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b2840d2a72326847e2e68152402dcf">&#9670;&nbsp;</a></span>networkstatus_getinfo_helper_single()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* networkstatus_getinfo_helper_single </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>rs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate networkstatus lines for a single <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> object, and return the result in a newly allocated string. Used only by controller interface (for now.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a07b2840d2a72326847e2e68152402dcf_cgraph.png" border="0" usemap="#networkstatus_8c_a07b2840d2a72326847e2e68152402dcf_cgraph" alt=""/></div>
<map name="networkstatus_8c_a07b2840d2a72326847e2e68152402dcf_cgraph" id="networkstatus_8c_a07b2840d2a72326847e2e68152402dcf_cgraph">
<area shape="rect" id="node2" href="dirserv_8c.html#a462a8ae7270a4bea92c8d6269e7489db" title="routerstatus_format\l_entry" alt="" coords="204,5,339,47"/>
</map>
</div>

</div>
</div>
<a id="a97698b7c730bb880670662020a79ece0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97698b7c730bb880670662020a79ece0">&#9670;&nbsp;</a></span>networkstatus_is_live()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_is_live </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a consensus in <b>ns</b>, return true iff currently live and unexpired. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a97698b7c730bb880670662020a79ece0_icgraph.png" border="0" usemap="#networkstatus_8c_a97698b7c730bb880670662020a79ece0_icgraph" alt=""/></div>
<map name="networkstatus_8c_a97698b7c730bb880670662020a79ece0_icgraph" id="networkstatus_8c_a97698b7c730bb880670662020a79ece0_icgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#ad87fadf53d87fbd3d0cdcc7e2cccaf6f" title="MOCK_IMPL" alt="" coords="201,5,301,32"/>
</map>
</div>

</div>
</div>
<a id="a6d51fc24064bd6b1e7f3d148bddba693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d51fc24064bd6b1e7f3d148bddba693">&#9670;&nbsp;</a></span>networkstatus_note_certs_arrived()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_note_certs_arrived </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when we have gotten more certificates: see whether we can now verify a pending consensus.</p>
<p>If source_dir is non-NULL, it's the identity digest for a directory that we've just successfully retrieved certificates from, so try it first to fetch any missing certificates. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a6d51fc24064bd6b1e7f3d148bddba693_cgraph.png" border="0" usemap="#networkstatus_8c_a6d51fc24064bd6b1e7f3d148bddba693_cgraph" alt=""/></div>
<map name="networkstatus_8c_a6d51fc24064bd6b1e7f3d148bddba693_cgraph" id="networkstatus_8c_a6d51fc24064bd6b1e7f3d148bddba693_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a31e12c0cdd4c1a17f3ddcdab8cdcf86f" title="networkstatus_get_flavor_name" alt="" coords="189,5,396,32"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#a7bead3d790b19f3f5894a521526a3531" title="networkstatus_check\l_consensus_signature" alt="" coords="217,57,369,98"/>
<area shape="rect" id="node5" href="networkstatus_8c.html#a2bc8e47c7dbfc9cb7dbabab161bd6764" title="networkstatus_set_current\l_consensus" alt="" coords="205,122,381,163"/>
<area shape="rect" id="node4" href="routerlist_8c.html#a40b0857598d14d49c8082667c70bc023" title="get_n_authorities" alt="" coords="455,64,576,91"/>
<area shape="rect" id="node6" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="469,121,562,148"/>
<area shape="rect" id="node7" href="networkstatus_8c.html#a1a072f4231b410ee50501327f71d527e" title="networkstatus_parse\l_flavor_name" alt="" coords="444,173,587,214"/>
</map>
</div>

</div>
</div>
<a id="a1a072f4231b410ee50501327f71d527e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a072f4231b410ee50501327f71d527e">&#9670;&nbsp;</a></span>networkstatus_parse_flavor_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_parse_flavor_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>flavname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the consensus_flavor_t value for the flavor called <b>flavname</b>, or -1 if the flavor is not recognized. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a1a072f4231b410ee50501327f71d527e_icgraph.png" border="0" usemap="#networkstatus_8c_a1a072f4231b410ee50501327f71d527e_icgraph" alt=""/></div>
<map name="networkstatus_8c_a1a072f4231b410ee50501327f71d527e_icgraph" id="networkstatus_8c_a1a072f4231b410ee50501327f71d527e_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#abf1e7e6cb46e4a70d63a54a42ba7d2ff" title="networkstatus_read\l_cached_consensus" alt="" coords="213,5,355,47"/>
<area shape="rect" id="node4" href="networkstatus_8h.html#af85567c13446bbbae84ce4199b3b2134" title="networkstatus_consensus\l_download_failed" alt="" coords="197,71,371,112"/>
<area shape="rect" id="node5" href="networkstatus_8h.html#a2bc8e47c7dbfc9cb7dbabab161bd6764" title="networkstatus_set_current\l_consensus" alt="" coords="196,136,372,177"/>
<area shape="rect" id="node3" href="directory_8c.html#a4af7e7ade522a1f118e7770955ff50ea" title="handle_response_fetch\l_consensus" alt="" coords="420,39,576,80"/>
<area shape="rect" id="node6" href="networkstatus_8h.html#a6d51fc24064bd6b1e7f3d148bddba693" title="networkstatus_note\l_certs_arrived" alt="" coords="430,136,566,177"/>
</map>
</div>

</div>
</div>
<a id="abf1e7e6cb46e4a70d63a54a42ba7d2ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf1e7e6cb46e4a70d63a54a42ba7d2ff">&#9670;&nbsp;</a></span>networkstatus_read_cached_consensus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* networkstatus_read_cached_consensus </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>flavorname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a new string containing the current cached consensus of flavor <b>flavorname</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_cgraph.png" border="0" usemap="#networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_cgraph" alt=""/></div>
<map name="networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_cgraph" id="networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a1a072f4231b410ee50501327f71d527e" title="networkstatus_parse\l_flavor_name" alt="" coords="195,5,337,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_icgraph.png" border="0" usemap="#networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_icgraph" alt=""/></div>
<map name="networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_icgraph" id="networkstatus_8c_abf1e7e6cb46e4a70d63a54a42ba7d2ff_icgraph">
<area shape="rect" id="node2" href="directory_8c.html#a4af7e7ade522a1f118e7770955ff50ea" title="handle_response_fetch\l_consensus" alt="" coords="195,5,351,47"/>
</map>
</div>

</div>
</div>
<a id="ad86492baf32bd150a1848f70cc234977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad86492baf32bd150a1848f70cc234977">&#9670;&nbsp;</a></span>networkstatus_reset_download_failures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_reset_download_failures </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the descriptor download failure count on all networkstatus docs, so that we can retry any long-failed documents immediately. </p>

</div>
</div>
<a id="ad970a8be0b1c191044f84bd686747e88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad970a8be0b1c191044f84bd686747e88">&#9670;&nbsp;</a></span>networkstatus_reset_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_reset_warnings </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Forget that we've warned about anything networkstatus-related, so we will give fresh warnings if the same behavior happens again. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ad970a8be0b1c191044f84bd686747e88_icgraph.png" border="0" usemap="#networkstatus_8c_ad970a8be0b1c191044f84bd686747e88_icgraph" alt=""/></div>
<map name="networkstatus_8c_ad970a8be0b1c191044f84bd686747e88_icgraph" id="networkstatus_8c_ad970a8be0b1c191044f84bd686747e88_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#ad5591c87fbad96a88fa4d0145431ef87" title="routerlist_reset_warnings" alt="" coords="193,13,360,39"/>
</map>
</div>

</div>
</div>
<a id="a2bc8e47c7dbfc9cb7dbabab161bd6764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bc8e47c7dbfc9cb7dbabab161bd6764">&#9670;&nbsp;</a></span>networkstatus_set_current_consensus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_set_current_consensus </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>consensus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>flavor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to replace the current cached v3 networkstatus with the one in <b>consensus</b>. If we don't have enough certificates to validate it, store it in consensus_waiting_for_certs and launch a certificate fetch.</p>
<p>If flags &amp; NSSET_FROM_CACHE, this networkstatus has come from the disk cache. If flags &amp; NSSET_WAS_WAITING_FOR_CERTS, this networkstatus was already received, but we were waiting for certificates on it. If flags &amp; NSSET_DONT_DOWNLOAD_CERTS, do not launch certificate downloads as needed. If flags &amp; NSSET_ACCEPT_OBSOLETE, then we should be willing to take this consensus, even if it comes from many days in the past.</p>
<p>If source_dir is non-NULL, it's the identity digest for a directory that we've just successfully retrieved a consensus or certificates from, so try it first to fetch any missing certificates.</p>
<p>Return 0 on success, &lt;0 on failure. On failure, caller should increment the failure count as appropriate.</p>
<p>We return -1 for mild failures that don't need to be reported to the user, and -2 for more serious problems. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_cgraph.png" border="0" usemap="#networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_cgraph" alt=""/></div>
<map name="networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_cgraph" id="networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_cgraph">
<area shape="rect" id="node2" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="254,5,347,32"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#a1a072f4231b410ee50501327f71d527e" title="networkstatus_parse\l_flavor_name" alt="" coords="229,57,372,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_icgraph.png" border="0" usemap="#networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_icgraph" alt=""/></div>
<map name="networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_icgraph" id="networkstatus_8c_a2bc8e47c7dbfc9cb7dbabab161bd6764_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a6d51fc24064bd6b1e7f3d148bddba693" title="networkstatus_note\l_certs_arrived" alt="" coords="229,5,365,47"/>
</map>
</div>

</div>
</div>
<a id="a89a28d47b1bbf648c55caf48c618ef87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89a28d47b1bbf648c55caf48c618ef87">&#9670;&nbsp;</a></span>networkstatus_valid_until_is_reasonably_live()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_valid_until_is_reasonably_live </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>valid_until</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As networkstatus_consensus_reasonably_live, but takes a valid_until time rather than an entire consensus. </p>

</div>
</div>
<a id="aae8d735fe9d889755f96e927f9e9c967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8d735fe9d889755f96e927f9e9c967">&#9670;&nbsp;</a></span>networkstatus_vote_find_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* networkstatus_vote_find_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the entry in <b>ns</b> for the identity digest <b>digest</b>, or NULL if none was found. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_cgraph.png" border="0" usemap="#networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_cgraph" alt=""/></div>
<map name="networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_cgraph" id="networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a041c69e1d5a274d07c162f9185605cd0" title="networkstatus_vote\l_find_mutable_entry" alt="" coords="189,27,328,69"/>
<area shape="rect" id="node3" href="container_8c.html#a6722b8c6ca501b524958b3cdac2bc70c" title="smartlist_bsearch" alt="" coords="417,5,543,32"/>
<area shape="rect" id="node5" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee" title="compare_digest_to_routerstatus\l_entry" alt="" coords="376,57,584,98"/>
<area shape="rect" id="node4" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119" title="smartlist_bsearch_idx" alt="" coords="632,5,781,32"/>
<area shape="rect" id="node6" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="657,64,756,91"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_icgraph.png" border="0" usemap="#networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_icgraph" alt=""/></div>
<map name="networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_icgraph" id="networkstatus_8c_aae8d735fe9d889755f96e927f9e9c967_icgraph">
<area shape="rect" id="node2" href="router_8h.html#ad20dfba342b27eb97810f9141d5c14a1" title="mark_my_descriptor\l_dirty_if_too_old" alt="" coords="189,5,329,47"/>
</map>
</div>

</div>
</div>
<a id="a4d3edab11be460ebb5dc5de0f07c7874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d3edab11be460ebb5dc5de0f07c7874">&#9670;&nbsp;</a></span>networkstatus_vote_find_entry_idx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_vote_find_entry_idx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>found_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Search the routerstatuses in <b>ns</b> for one whose identity digest is <b>digest</b>. Return value and set *<b>found_out</b> as for <a class="el" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119">smartlist_bsearch_idx()</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a4d3edab11be460ebb5dc5de0f07c7874_cgraph.png" border="0" usemap="#networkstatus_8c_a4d3edab11be460ebb5dc5de0f07c7874_cgraph" alt=""/></div>
<map name="networkstatus_8c_a4d3edab11be460ebb5dc5de0f07c7874_cgraph" id="networkstatus_8c_a4d3edab11be460ebb5dc5de0f07c7874_cgraph">
<area shape="rect" id="node2" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119" title="smartlist_bsearch_idx" alt="" coords="219,5,368,32"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee" title="compare_digest_to_routerstatus\l_entry" alt="" coords="189,57,397,98"/>
<area shape="rect" id="node4" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="445,64,544,91"/>
</map>
</div>

</div>
</div>
<a id="a041c69e1d5a274d07c162f9185605cd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a041c69e1d5a274d07c162f9185605cd0">&#9670;&nbsp;</a></span>networkstatus_vote_find_mutable_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* networkstatus_vote_find_mutable_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As networkstatus_find_entry, but do not return a const pointer </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_cgraph.png" border="0" usemap="#networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_cgraph" alt=""/></div>
<map name="networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_cgraph" id="networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_cgraph">
<area shape="rect" id="node2" href="container_8c.html#a6722b8c6ca501b524958b3cdac2bc70c" title="smartlist_bsearch" alt="" coords="233,5,359,32"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee" title="compare_digest_to_routerstatus\l_entry" alt="" coords="192,57,400,98"/>
<area shape="rect" id="node3" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119" title="smartlist_bsearch_idx" alt="" coords="448,5,597,32"/>
<area shape="rect" id="node5" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="473,64,572,91"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_icgraph.png" border="0" usemap="#networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_icgraph" alt=""/></div>
<map name="networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_icgraph" id="networkstatus_8c_a041c69e1d5a274d07c162f9185605cd0_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#aae8d735fe9d889755f96e927f9e9c967" title="networkstatus_vote\l_find_entry" alt="" coords="192,5,328,47"/>
<area shape="rect" id="node3" href="router_8h.html#ad20dfba342b27eb97810f9141d5c14a1" title="mark_my_descriptor\l_dirty_if_too_old" alt="" coords="376,5,516,47"/>
</map>
</div>

</div>
</div>
<a id="ac431574021ec26d0de3d84b9bd0b3f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac431574021ec26d0de3d84b9bd0b3f38">&#9670;&nbsp;</a></span>networkstatus_vote_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkstatus_vote_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held in <b>ns</b>. </p>

</div>
</div>
<a id="ab67c1b78647e8e4babfbeee6ec9c767c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab67c1b78647e8e4babfbeee6ec9c767c">&#9670;&nbsp;</a></span>ns_detached_signatures_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ns_detached_signatures_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structns__detached__signatures__t.html">ns_detached_signatures_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all storage held in <b>s</b>. </p>

</div>
</div>
<a id="ae26b18ffeeda912deab35abe7bfe31da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae26b18ffeeda912deab35abe7bfe31da">&#9670;&nbsp;</a></span>router_get_consensus_status_by_descriptor_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_get_consensus_status_by_descriptor_digest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>consensus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the consensus view of the status of the router whose current <em>descriptor</em> digest in <b>consensus</b> is <b>digest</b>, or NULL if no such router is known. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ae26b18ffeeda912deab35abe7bfe31da_icgraph.png" border="0" usemap="#networkstatus_8c_ae26b18ffeeda912deab35abe7bfe31da_icgraph" alt=""/></div>
<map name="networkstatus_8c_ae26b18ffeeda912deab35abe7bfe31da_icgraph" id="networkstatus_8c_ae26b18ffeeda912deab35abe7bfe31da_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a28083077a140f44e651523c894509005" title="signed_descs_update\l_status_from_consensus\l_networkstatus" alt="" coords="204,5,372,61"/>
</map>
</div>

</div>
</div>
<a id="a810a06fe9e7c7bd3a1c5c5ee8cc13b52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a810a06fe9e7c7bd3a1c5c5ee8cc13b52">&#9670;&nbsp;</a></span>router_get_consensus_status_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_get_consensus_status_by_id </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the consensus view of the status of the router whose identity digest is <b>digest</b>, or NULL if we don't know about any such router. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_cgraph.png" border="0" usemap="#networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_cgraph" alt=""/></div>
<map name="networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_cgraph" id="networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#abeb917388a503fd5c8e727d7a6bd675f" title="router_get_mutable\l_consensus_status_by_id" alt="" coords="204,27,377,69"/>
<area shape="rect" id="node3" href="container_8c.html#a6722b8c6ca501b524958b3cdac2bc70c" title="smartlist_bsearch" alt="" coords="467,5,592,32"/>
<area shape="rect" id="node5" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee" title="compare_digest_to_routerstatus\l_entry" alt="" coords="425,57,633,98"/>
<area shape="rect" id="node4" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119" title="smartlist_bsearch_idx" alt="" coords="681,5,831,32"/>
<area shape="rect" id="node6" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="707,64,805,91"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_icgraph.png" border="0" usemap="#networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_icgraph" alt=""/></div>
<map name="networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_icgraph" id="networkstatus_8c_a810a06fe9e7c7bd3a1c5c5ee8cc13b52_icgraph">
<area shape="rect" id="node2" href="connection__or_8h.html#a8573b49df7ffc3ad6df0faa6e7a12f10" title="connection_or_digest\l_is_known_relay" alt="" coords="204,5,349,47"/>
</map>
</div>

</div>
</div>
<a id="abeb917388a503fd5c8e727d7a6bd675f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb917388a503fd5c8e727d7a6bd675f">&#9670;&nbsp;</a></span>router_get_mutable_consensus_status_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_get_mutable_consensus_status_by_id </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As router_get_consensus_status_by_id, but do not return a const pointer </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_cgraph.png" border="0" usemap="#networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_cgraph" alt=""/></div>
<map name="networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_cgraph" id="networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_cgraph">
<area shape="rect" id="node2" href="container_8c.html#a6722b8c6ca501b524958b3cdac2bc70c" title="smartlist_bsearch" alt="" coords="268,5,393,32"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#a998a1af9202b3a8eec2327819b84bcee" title="compare_digest_to_routerstatus\l_entry" alt="" coords="227,57,435,98"/>
<area shape="rect" id="node3" href="container_8c.html#af0f195f396d7f97e7f2f2367453da119" title="smartlist_bsearch_idx" alt="" coords="483,5,632,32"/>
<area shape="rect" id="node5" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="508,64,607,91"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_icgraph.png" border="0" usemap="#networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_icgraph" alt=""/></div>
<map name="networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_icgraph" id="networkstatus_8c_abeb917388a503fd5c8e727d7a6bd675f_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a810a06fe9e7c7bd3a1c5c5ee8cc13b52" title="router_get_consensus\l_status_by_id" alt="" coords="227,5,377,47"/>
<area shape="rect" id="node3" href="connection__or_8h.html#a8573b49df7ffc3ad6df0faa6e7a12f10" title="connection_or_digest\l_is_known_relay" alt="" coords="425,5,571,47"/>
</map>
</div>

</div>
</div>
<a id="aa6fd62492d7f4cfafd9ec042e995bfef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6fd62492d7f4cfafd9ec042e995bfef">&#9670;&nbsp;</a></span>router_reload_consensus_networkstatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_reload_consensus_networkstatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read every cached v3 consensus networkstatus from the disk. </p>

</div>
</div>
<a id="a17d10602167e09e05f4d5aefc744141b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d10602167e09e05f4d5aefc744141b">&#9670;&nbsp;</a></span>routers_update_all_from_networkstatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routers_update_all_from_networkstatus </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dir_version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the network-status list has changed since the last time we called this function, update the status of every routerinfo from the network-status list. If <b>dir_version</b> is 2, it's a v2 networkstatus that changed. If <b>dir_version</b> is 3, it's a v3 consensus that changed. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a17d10602167e09e05f4d5aefc744141b_cgraph.png" border="0" usemap="#networkstatus_8c_a17d10602167e09e05f4d5aefc744141b_cgraph" alt=""/></div>
<map name="networkstatus_8c_a17d10602167e09e05f4d5aefc744141b_cgraph" id="networkstatus_8c_a17d10602167e09e05f4d5aefc744141b_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1" title="router_get_routerlist" alt="" coords="228,5,365,32"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#a44accdf47b7f9f40b25c45daf2c31475" title="networkstatus_get_reasonably\l_live_consensus" alt="" coords="197,57,396,98"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#a2d356f4ab27d29e60c8f5114974fda96" title="networkstatus_consensus\l_reasonably_live" alt="" coords="444,57,619,98"/>
</map>
</div>

</div>
</div>
<a id="afcfacad25b94db6f21e0df2f7897a3cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcfacad25b94db6f21e0df2f7897a3cf">&#9670;&nbsp;</a></span>routers_update_status_from_consensus_networkstatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routers_update_status_from_consensus_networkstatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>routers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reset_failures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a list <b>routers</b> of <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *, update each status field according to our current consensus networkstatus. May re-order <b>routers</b>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_afcfacad25b94db6f21e0df2f7897a3cf_icgraph.png" border="0" usemap="#networkstatus_8c_afcfacad25b94db6f21e0df2f7897a3cf_icgraph" alt=""/></div>
<map name="networkstatus_8c_afcfacad25b94db6f21e0df2f7897a3cf_icgraph" id="networkstatus_8c_afcfacad25b94db6f21e0df2f7897a3cf_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#ae08c5697c58be20a7bb11b34ca9aba5e" title="router_load_routers\l_from_string" alt="" coords="268,5,401,47"/>
</map>
</div>

</div>
</div>
<a id="af7a88dc1dcc532507c069e007620677d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a88dc1dcc532507c069e007620677d">&#9670;&nbsp;</a></span>routerstatus_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerstatus_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>rs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held by the routerstatus object <b>rs</b>. </p>

</div>
</div>
<a id="aa278011afd1917ef43cc44fac287f7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa278011afd1917ef43cc44fac287f7bf">&#9670;&nbsp;</a></span>should_delay_dir_fetches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int should_delay_dir_fetches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if there's a reason we shouldn't try any directory fetches yet (e.g. we demand bridges and none are yet known). Else return 0.</p>
<p>If we return 1 and <b>msg_out</b> is provided, set <b>msg_out</b> to an explanation of why directory fetches are delayed. (If we return 0, we set msg_out to NULL.) </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_aa278011afd1917ef43cc44fac287f7bf_icgraph.png" border="0" usemap="#networkstatus_8c_aa278011afd1917ef43cc44fac287f7bf_icgraph" alt=""/></div>
<map name="networkstatus_8c_aa278011afd1917ef43cc44fac287f7bf_icgraph" id="networkstatus_8c_aa278011afd1917ef43cc44fac287f7bf_icgraph">
<area shape="rect" id="node2" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="223,5,420,32"/>
<area shape="rect" id="node3" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="489,137,634,178"/>
<area shape="rect" id="node5" href="networkstatus_8h.html#a1283a3574ff7fb0ceb2f4b80af9bdbf6" title="update_networkstatus\l_downloads" alt="" coords="246,107,397,149"/>
<area shape="rect" id="node6" href="nodelist_8c.html#a487da95d8f7026bb714950516ac5fb95" title="MOCK_IMPL" alt="" coords="271,173,371,200"/>
<area shape="rect" id="node7" href="routerlist_8h.html#a91f37bda7b9149b1da0f1abfff66ab23" title="authority_certs_fetch\l_missing" alt="" coords="249,290,393,331"/>
<area shape="rect" id="node9" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="239,225,404,266"/>
<area shape="rect" id="node10" href="routerlist_8h.html#ab576efc7049ed4eca6fa56e9f0544844" title="update_extrainfo_downloads" alt="" coords="468,356,655,383"/>
<area shape="rect" id="node4" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="703,243,831,285"/>
<area shape="rect" id="node8" href="networkstatus_8h.html#aac5e0a37016a04c309a791ae15ecc86a" title="update_certificate\l_downloads" alt="" coords="499,290,624,331"/>
</map>
</div>

</div>
</div>
<a id="a28083077a140f44e651523c894509005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28083077a140f44e651523c894509005">&#9670;&nbsp;</a></span>signed_descs_update_status_from_consensus_networkstatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signed_descs_update_status_from_consensus_networkstatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>descs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a list of <a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a>, update their fields (mainly, when they were last listed) from the most recent consensus. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a28083077a140f44e651523c894509005_cgraph.png" border="0" usemap="#networkstatus_8c_a28083077a140f44e651523c894509005_cgraph" alt=""/></div>
<map name="networkstatus_8c_a28083077a140f44e651523c894509005_cgraph" id="networkstatus_8c_a28083077a140f44e651523c894509005_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#ae26b18ffeeda912deab35abe7bfe31da" title="router_get_consensus\l_status_by_descriptor\l_digest" alt="" coords="221,5,372,61"/>
</map>
</div>

</div>
</div>
<a id="aac5e0a37016a04c309a791ae15ecc86a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5e0a37016a04c309a791ae15ecc86a">&#9670;&nbsp;</a></span>update_certificate_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_certificate_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch requests as appropriate for missing directory authority certificates. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_aac5e0a37016a04c309a791ae15ecc86a_cgraph.png" border="0" usemap="#networkstatus_8c_aac5e0a37016a04c309a791ae15ecc86a_cgraph" alt=""/></div>
<map name="networkstatus_8c_aac5e0a37016a04c309a791ae15ecc86a_cgraph" id="networkstatus_8c_aac5e0a37016a04c309a791ae15ecc86a_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a91f37bda7b9149b1da0f1abfff66ab23" title="authority_certs_fetch\l_missing" alt="" coords="179,35,323,76"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#ae571a0f2e98aee6bb9b6a0df669b6c25" title="we_want_to_fetch_unknown\l_auth_certs" alt="" coords="371,5,557,47"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf" title="should_delay_dir_fetches" alt="" coords="379,71,549,98"/>
</map>
</div>

</div>
</div>
<a id="ad5b06eef1d3ad0356efd75d050cb857d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b06eef1d3ad0356efd75d050cb857d">&#9670;&nbsp;</a></span>update_consensus_networkstatus_fetch_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_consensus_networkstatus_fetch_time </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update the time at which we'll consider replacing the current consensus of flavor 'flavor' </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ad5b06eef1d3ad0356efd75d050cb857d_cgraph.png" border="0" usemap="#networkstatus_8c_ad5b06eef1d3ad0356efd75d050cb857d_cgraph" alt=""/></div>
<map name="networkstatus_8c_ad5b06eef1d3ad0356efd75d050cb857d_cgraph" id="networkstatus_8c_ad5b06eef1d3ad0356efd75d050cb857d_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#a32d20f569e83b9acf580732e6369285c" title="we_want_to_fetch_flavor" alt="" coords="273,13,440,39"/>
</map>
</div>

</div>
</div>
<a id="a1283a3574ff7fb0ceb2f4b80af9bdbf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1283a3574ff7fb0ceb2f4b80af9bdbf6">&#9670;&nbsp;</a></span>update_networkstatus_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_networkstatus_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch requests for networkstatus documents as appropriate. This is called when we retry all the connections on a SIGHUP and periodically by a Periodic event which checks whether we want to download any networkstatus documents. </p>
<p>Launch a consensus download request, we will wait for the consensus to download and when it completes we will launch a certificate download request. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a1283a3574ff7fb0ceb2f4b80af9bdbf6_cgraph.png" border="0" usemap="#networkstatus_8c_a1283a3574ff7fb0ceb2f4b80af9bdbf6_cgraph" alt=""/></div>
<map name="networkstatus_8c_a1283a3574ff7fb0ceb2f4b80af9bdbf6_cgraph" id="networkstatus_8c_a1283a3574ff7fb0ceb2f4b80af9bdbf6_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf" title="should_delay_dir_fetches" alt="" coords="204,13,373,39"/>
</map>
</div>

</div>
</div>
<a id="a9a1026b178124f6fedaf54066cca12a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a1026b178124f6fedaf54066cca12a0">&#9670;&nbsp;</a></span>vote_routerstatus_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vote_routerstatus_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvote__routerstatus__t.html">vote_routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>rs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held by the vote_routerstatus object <b>rs</b>. </p>

</div>
</div>
<a id="abf088a4674cdc3bc743134525e9a481a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf088a4674cdc3bc743134525e9a481a">&#9670;&nbsp;</a></span>warn_early_consensus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC void warn_early_consensus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>flavor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether we received a consensus that appears to be coming from the future. Because we implicitly trust the directory authorities' idea of the current time, we produce a warning if we get an early consensus.</p>
<p>If we got a consensus that is time stamped far in the past, that could simply have come from a stale cache. Possible ways to get a consensus from the future can include:</p>
<ul>
<li>enough directory authorities have wrong clocks</li>
<li>directory authorities collude to produce misleading time stamps</li>
<li>our own clock is wrong (this is by far the most likely)</li>
</ul>
<p>We neglect highly improbable scenarios that involve actual time travel. </p>
<p>If a consensus appears more than this many seconds before it could possibly be a sufficiently-signed consensus, declare that our clock is skewed. </p>

</div>
</div>
<a id="a32d20f569e83b9acf580732e6369285c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d20f569e83b9acf580732e6369285c">&#9670;&nbsp;</a></span>we_want_to_fetch_flavor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int we_want_to_fetch_flavor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flavor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff, given the options listed in <b>options</b>, <b>flavor</b> is the flavor of a consensus networkstatus that we would like to fetch.</p>
<p>For certificate fetches, use we_want_to_fetch_unknown_auth_certs, and for serving fetched documents, use directory_caches_dir_info. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_a32d20f569e83b9acf580732e6369285c_icgraph.png" border="0" usemap="#networkstatus_8c_a32d20f569e83b9acf580732e6369285c_icgraph" alt=""/></div>
<map name="networkstatus_8c_a32d20f569e83b9acf580732e6369285c_icgraph" id="networkstatus_8c_a32d20f569e83b9acf580732e6369285c_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#ad5b06eef1d3ad0356efd75d050cb857d" title="update_consensus_networkstatus\l_fetch_time" alt="" coords="220,5,440,47"/>
</map>
</div>

</div>
</div>
<a id="ae571a0f2e98aee6bb9b6a0df669b6c25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae571a0f2e98aee6bb9b6a0df669b6c25">&#9670;&nbsp;</a></span>we_want_to_fetch_unknown_auth_certs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int we_want_to_fetch_unknown_auth_certs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff, given the options listed in <b>options</b>, we would like to fetch and store unknown authority certificates.</p>
<p>For consensus and descriptor fetches, use we_want_to_fetch_flavor, and for serving fetched certificates, use directory_caches_unknown_auth_certs. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="networkstatus_8c_ae571a0f2e98aee6bb9b6a0df669b6c25_icgraph.png" border="0" usemap="#networkstatus_8c_ae571a0f2e98aee6bb9b6a0df669b6c25_icgraph" alt=""/></div>
<map name="networkstatus_8c_ae571a0f2e98aee6bb9b6a0df669b6c25_icgraph" id="networkstatus_8c_ae571a0f2e98aee6bb9b6a0df669b6c25_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a91f37bda7b9149b1da0f1abfff66ab23" title="authority_certs_fetch\l_missing" alt="" coords="240,5,384,47"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#aac5e0a37016a04c309a791ae15ecc86a" title="update_certificate\l_downloads" alt="" coords="432,5,557,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1b1784adab1ca6e17ebbace63ef676f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b1784adab1ca6e17ebbace63ef676f5">&#9670;&nbsp;</a></span>current_md_consensus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a>* current_md_consensus = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Most recently received and validated v3 "microdesc"-flavored consensus network status. </p>

</div>
</div>
<a id="a538db4424c625a74c8d0ebad0f456d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a538db4424c625a74c8d0ebad0f456d62">&#9670;&nbsp;</a></span>current_ns_consensus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a>* current_ns_consensus = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Most recently received and validated v3 "ns"-flavored consensus network status. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
