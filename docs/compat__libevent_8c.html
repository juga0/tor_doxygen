<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/common/compat_libevent.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_b7e1585941a202f53e5249c42015d573.html">common</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">compat_libevent.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrappers and utility functions for Libevent.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;orconfig.h&quot;</code><br />
<code>#include &quot;compat.h&quot;</code><br />
<code>#include &quot;compat_libevent.h&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__rand_8h_source.html">crypto_rand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="torlog_8h_source.html">torlog.h</a>&quot;</code><br />
<code>#include &lt;event2/event.h&gt;</code><br />
<code>#include &lt;event2/thread.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for compat_libevent.c:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat__libevent_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat__libevent_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat__libevent_8c">
<area shape="rect" id="node2" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="278,557,357,584"/>
<area shape="rect" id="node3" href="compat_8h_source.html" title="compat.h" alt="" coords="428,333,504,360"/>
<area shape="rect" id="node12" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="951,408,1079,435"/>
<area shape="rect" id="node13" href="crypto__rand_8h.html" title="Common functions for using (pseudo&#45;)random number generators. " alt="" coords="171,109,272,136"/>
<area shape="rect" id="node14" href="util_8h.html" title="Headers for util.c. " alt="" coords="196,184,247,211"/>
<area shape="rect" id="node18" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="932,259,997,285"/>
<area shape="rect" id="node4" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="46,483,109,509"/>
<area shape="rect" id="node6" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="788,483,887,509"/>
<area shape="rect" id="node8" href="compat__time_8h.html" title="Functions and types for monotonic times. " alt="" coords="264,483,372,509"/>
<area shape="rect" id="node11" href="compat__threads_8h_source.html" title="compat_threads.h" alt="" coords="416,408,542,435"/>
<area shape="rect" id="node15" href="di__ops_8h.html" title="Headers for di_ops.c. " alt="" coords="32,408,102,435"/>
<area shape="rect" id="node17" href="util__bug_8h.html" title="Macros to manage assertions, fatal and non&#45;fatal. " alt="" coords="374,259,453,285"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a056aed1f0504286225a5fac6a1b8b45d"><td class="memItemLeft" align="right" valign="top">STATIC void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a056aed1f0504286225a5fac6a1b8b45d">libevent_logging_callback</a> (int severity, const char *msg)</td></tr>
<tr class="separator:a056aed1f0504286225a5fac6a1b8b45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae33ad985a5c0c676460dfca4d1e1c27d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#ae33ad985a5c0c676460dfca4d1e1c27d">configure_libevent_logging</a> (void)</td></tr>
<tr class="separator:ae33ad985a5c0c676460dfca4d1e1c27d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a151e308d2194cb78aac538904cfbd9b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a151e308d2194cb78aac538904cfbd9b1">suppress_libevent_log_msg</a> (const char *msg)</td></tr>
<tr class="separator:a151e308d2194cb78aac538904cfbd9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e45d95c94c09c11c7c70c644f131400"><td class="memItemLeft" align="right" valign="top"><a id="a3e45d95c94c09c11c7c70c644f131400"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>tor_event_free_</b> (struct event *ev)</td></tr>
<tr class="separator:a3e45d95c94c09c11c7c70c644f131400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9930d309f7a71fd2e1232fe337ddf0fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a9930d309f7a71fd2e1232fe337ddf0fb">tor_libevent_initialize</a> (<a class="el" href="structtor__libevent__cfg.html">tor_libevent_cfg</a> *torcfg)</td></tr>
<tr class="separator:a9930d309f7a71fd2e1232fe337ddf0fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2a232f2ecba8e301650074f525b250"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#afb2a232f2ecba8e301650074f525b250">MOCK_IMPL</a> (struct event_base *, tor_libevent_get_base,(void))</td></tr>
<tr class="separator:afb2a232f2ecba8e301650074f525b250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bf30c7a1ff1583094105081de66b286"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a6bf30c7a1ff1583094105081de66b286">tor_libevent_get_method</a> (void)</td></tr>
<tr class="separator:a6bf30c7a1ff1583094105081de66b286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526fab83c5cd0a8826262f565c459a87"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a526fab83c5cd0a8826262f565c459a87">tor_libevent_get_version_str</a> (void)</td></tr>
<tr class="separator:a526fab83c5cd0a8826262f565c459a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e3b7f7cbd294ce132d40b27791e5dc"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a93e3b7f7cbd294ce132d40b27791e5dc">tor_libevent_get_header_version_str</a> (void)</td></tr>
<tr class="separator:a93e3b7f7cbd294ce132d40b27791e5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dfc062052ad839b4bd0f4ea874e4028"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a6dfc062052ad839b4bd0f4ea874e4028">periodic_timer_new</a> (struct event_base *base, const struct <a class="el" href="structtimeval.html">timeval</a> *tv, void(*cb)(<a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *timer, void *data), void *data)</td></tr>
<tr class="separator:a6dfc062052ad839b4bd0f4ea874e4028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a56742c18be2c4872a176de4cd5b462"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a6a56742c18be2c4872a176de4cd5b462">periodic_timer_launch</a> (<a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *timer, const struct <a class="el" href="structtimeval.html">timeval</a> *tv)</td></tr>
<tr class="separator:a6a56742c18be2c4872a176de4cd5b462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af458486bb051dab617ffe003891be904"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#af458486bb051dab617ffe003891be904">periodic_timer_disable</a> (<a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *timer)</td></tr>
<tr class="separator:af458486bb051dab617ffe003891be904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf7237f1adc789dc9e87ccdf44ccae3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#abdf7237f1adc789dc9e87ccdf44ccae3">periodic_timer_free_</a> (<a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *timer)</td></tr>
<tr class="separator:abdf7237f1adc789dc9e87ccdf44ccae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7900ec8114afee85be2cc2b20d3abb79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a7900ec8114afee85be2cc2b20d3abb79">mainloop_event_new</a> (void(*cb)(<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *, void *), void *userdata)</td></tr>
<tr class="separator:a7900ec8114afee85be2cc2b20d3abb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cd5019864755687d5e6c473f7483366"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a5cd5019864755687d5e6c473f7483366">mainloop_event_postloop_new</a> (void(*cb)(<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *, void *), void *userdata)</td></tr>
<tr class="separator:a5cd5019864755687d5e6c473f7483366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af815b0dd39abfb6b6ddbf5266175b479"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#af815b0dd39abfb6b6ddbf5266175b479">mainloop_event_activate</a> (<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *event)</td></tr>
<tr class="separator:af815b0dd39abfb6b6ddbf5266175b479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c2d032ec9ba12a786f6d7d09221a9e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#ab8c2d032ec9ba12a786f6d7d09221a9e">mainloop_event_schedule</a> (<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *event, const struct <a class="el" href="structtimeval.html">timeval</a> *tv)</td></tr>
<tr class="separator:ab8c2d032ec9ba12a786f6d7d09221a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d260fbd85e064d42e3b7c14942ee73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a67d260fbd85e064d42e3b7c14942ee73">mainloop_event_cancel</a> (<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *event)</td></tr>
<tr class="separator:a67d260fbd85e064d42e3b7c14942ee73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83755967b1a8e5b82282c5a9c1703e4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a83755967b1a8e5b82282c5a9c1703e4c">mainloop_event_free_</a> (<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *event)</td></tr>
<tr class="separator:a83755967b1a8e5b82282c5a9c1703e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0a9ac2bda2f0b3571198e8b5fd07a8"><td class="memItemLeft" align="right" valign="top"><a id="a5b0a9ac2bda2f0b3571198e8b5fd07a8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tor_init_libevent_rng</b> (void)</td></tr>
<tr class="separator:a5b0a9ac2bda2f0b3571198e8b5fd07a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96d3d0384ed6952c0d106e3a5a41f28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#ab96d3d0384ed6952c0d106e3a5a41f28">tor_libevent_free_all</a> (void)</td></tr>
<tr class="separator:ab96d3d0384ed6952c0d106e3a5a41f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8be16d3ebc22fc53c7b579a5a4222704"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a8be16d3ebc22fc53c7b579a5a4222704">tor_libevent_run_event_loop</a> (struct event_base *base, int once)</td></tr>
<tr class="separator:a8be16d3ebc22fc53c7b579a5a4222704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9995bbcc6d366dde8763a2be4e19ed00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a9995bbcc6d366dde8763a2be4e19ed00">tor_libevent_exit_loop_after_delay</a> (struct event_base *base, const struct <a class="el" href="structtimeval.html">timeval</a> *delay)</td></tr>
<tr class="separator:a9995bbcc6d366dde8763a2be4e19ed00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e263506d4ac5e96c8956d725759432f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__libevent_8c.html#a6e263506d4ac5e96c8956d725759432f">tor_libevent_exit_loop_after_callback</a> (struct event_base *base)</td></tr>
<tr class="separator:a6e263506d4ac5e96c8956d725759432f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrappers and utility functions for Libevent. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae33ad985a5c0c676460dfca4d1e1c27d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae33ad985a5c0c676460dfca4d1e1c27d">&#9670;&nbsp;</a></span>configure_libevent_logging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configure_libevent_logging </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set hook to intercept log messages from libevent. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_ae33ad985a5c0c676460dfca4d1e1c27d_cgraph.png" border="0" usemap="#compat__libevent_8c_ae33ad985a5c0c676460dfca4d1e1c27d_cgraph" alt=""/></div>
<map name="compat__libevent_8c_ae33ad985a5c0c676460dfca4d1e1c27d_cgraph" id="compat__libevent_8c_ae33ad985a5c0c676460dfca4d1e1c27d_cgraph">
<area shape="rect" id="node2" href="compat__libevent_8c.html#a056aed1f0504286225a5fac6a1b8b45d" title="libevent_logging_callback" alt="" coords="180,13,351,39"/>
</map>
</div>

</div>
</div>
<a id="a056aed1f0504286225a5fac6a1b8b45d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a056aed1f0504286225a5fac6a1b8b45d">&#9670;&nbsp;</a></span>libevent_logging_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC void libevent_logging_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback function passed to event_set_log() so we can intercept log messages from libevent. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_a056aed1f0504286225a5fac6a1b8b45d_icgraph.png" border="0" usemap="#compat__libevent_8c_a056aed1f0504286225a5fac6a1b8b45d_icgraph" alt=""/></div>
<map name="compat__libevent_8c_a056aed1f0504286225a5fac6a1b8b45d_icgraph" id="compat__libevent_8c_a056aed1f0504286225a5fac6a1b8b45d_icgraph">
<area shape="rect" id="node2" href="compat__libevent_8c.html#ae33ad985a5c0c676460dfca4d1e1c27d" title="configure_libevent\l_logging" alt="" coords="224,5,351,47"/>
</map>
</div>

</div>
</div>
<a id="af815b0dd39abfb6b6ddbf5266175b479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af815b0dd39abfb6b6ddbf5266175b479">&#9670;&nbsp;</a></span>mainloop_event_activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_event_activate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Schedule <b>event</b> to run in the main loop, immediately. If it is not scheduled, it will run anyway. If it is already scheduled to run later, it will run now instead. This function will have no effect if the event is already scheduled to run.</p>
<p>This function may only be called from the main thread. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_af815b0dd39abfb6b6ddbf5266175b479_icgraph.png" border="0" usemap="#compat__libevent_8c_af815b0dd39abfb6b6ddbf5266175b479_icgraph" alt=""/></div>
<map name="compat__libevent_8c_af815b0dd39abfb6b6ddbf5266175b479_icgraph" id="compat__libevent_8c_af815b0dd39abfb6b6ddbf5266175b479_icgraph">
<area shape="rect" id="node2" href="control_8h.html#ade2557c81242d73d93750e0c68218a7c" title="control_event_logmsg\l_pending" alt="" coords="240,5,389,47"/>
<area shape="rect" id="node3" href="main_8h.html#ae90f277f5b30758b5ec08c7334a3d41a" title="mainloop_schedule_postloop\l_cleanup" alt="" coords="220,71,409,112"/>
<area shape="rect" id="node5" href="scheduler_8c.html#a199c3d59509d475c2ed08776bcdc9a8a" title="scheduler_ev_active" alt="" coords="244,137,385,163"/>
<area shape="rect" id="node4" href="main_8h.html#a5a32ff7bb266432116efdc333987a0e4" title="add_connection_to_closeable_list" alt="" coords="457,78,675,105"/>
</map>
</div>

</div>
</div>
<a id="a67d260fbd85e064d42e3b7c14942ee73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d260fbd85e064d42e3b7c14942ee73">&#9670;&nbsp;</a></span>mainloop_event_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_event_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel <b>event</b> if it is currently active or pending. (Do nothing if the event is not currently active or pending.) </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_a67d260fbd85e064d42e3b7c14942ee73_icgraph.png" border="0" usemap="#compat__libevent_8c_a67d260fbd85e064d42e3b7c14942ee73_icgraph" alt=""/></div>
<map name="compat__libevent_8c_a67d260fbd85e064d42e3b7c14942ee73_icgraph" id="compat__libevent_8c_a67d260fbd85e064d42e3b7c14942ee73_icgraph">
<area shape="rect" id="node2" href="periodic_8c.html#a055fb96fcc90357978ca4c12f7c17fd4" title="periodic_event_disable" alt="" coords="212,5,367,32"/>
</map>
</div>

</div>
</div>
<a id="a83755967b1a8e5b82282c5a9c1703e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83755967b1a8e5b82282c5a9c1703e4c">&#9670;&nbsp;</a></span>mainloop_event_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainloop_event_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel <b>event</b> and release all storage associated with it. </p>

</div>
</div>
<a id="a7900ec8114afee85be2cc2b20d3abb79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7900ec8114afee85be2cc2b20d3abb79">&#9670;&nbsp;</a></span>mainloop_event_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a>* mainloop_event_new </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *, void *)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and return a new <a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> to run the function <b>cb</b>.</p>
<p>When run, the callback function will be passed the <a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> and <b>userdata</b> as its arguments. The <b>userdata</b> pointer must remain valid for as long as the <a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> event exists: it is your responsibility to free it.</p>
<p>The event is not scheduled by default: Use <a class="el" href="compat__libevent_8c.html#af815b0dd39abfb6b6ddbf5266175b479">mainloop_event_activate()</a> or <a class="el" href="compat__libevent_8c.html#ab8c2d032ec9ba12a786f6d7d09221a9e">mainloop_event_schedule()</a> to make it run. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_a7900ec8114afee85be2cc2b20d3abb79_icgraph.png" border="0" usemap="#compat__libevent_8c_a7900ec8114afee85be2cc2b20d3abb79_icgraph" alt=""/></div>
<map name="compat__libevent_8c_a7900ec8114afee85be2cc2b20d3abb79_icgraph" id="compat__libevent_8c_a7900ec8114afee85be2cc2b20d3abb79_icgraph">
<area shape="rect" id="node2" href="main_8h.html#a59464f1df72e2aa554da128126909730" title="directory_all_unreachable" alt="" coords="197,5,367,32"/>
</map>
</div>

</div>
</div>
<a id="a5cd5019864755687d5e6c473f7483366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd5019864755687d5e6c473f7483366">&#9670;&nbsp;</a></span>mainloop_event_postloop_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a>* mainloop_event_postloop_new </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *, void *)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As <a class="el" href="compat__libevent_8c.html#a7900ec8114afee85be2cc2b20d3abb79">mainloop_event_new()</a>, but create a post-loop event.</p>
<p>A post-loop event behaves like any ordinary event, but any events that <em>it</em> activates cannot run until Libevent has checked for other events at least once. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_a5cd5019864755687d5e6c473f7483366_icgraph.png" border="0" usemap="#compat__libevent_8c_a5cd5019864755687d5e6c473f7483366_icgraph" alt=""/></div>
<map name="compat__libevent_8c_a5cd5019864755687d5e6c473f7483366_icgraph" id="compat__libevent_8c_a5cd5019864755687d5e6c473f7483366_icgraph">
<area shape="rect" id="node2" href="main_8c.html#ac14ea279fb1aac55027fc5f87826f23c" title="initialize_mainloop\l_events" alt="" coords="253,5,381,47"/>
<area shape="rect" id="node3" href="main_8h.html#a842d938cd262fb19c7c4d6177ccaa6fb" title="do_main_loop" alt="" coords="429,13,532,39"/>
</map>
</div>

</div>
</div>
<a id="ab8c2d032ec9ba12a786f6d7d09221a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c2d032ec9ba12a786f6d7d09221a9e">&#9670;&nbsp;</a></span>mainloop_event_schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mainloop_event_schedule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmainloop__event__t.html">mainloop_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeval.html">timeval</a> *&#160;</td>
          <td class="paramname"><em>tv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Schedule <b>event</b> to run in the main loop, after a delay of <b>tv</b>.</p>
<p>If the event is scheduled for a different time, cancel it and run after this delay instead. If the event is currently pending to run <em>now, has no effect.</em></p>
<p><em>Do not call this function with <b>tv</b> == NULL &ndash; use <a class="el" href="compat__libevent_8c.html#af815b0dd39abfb6b6ddbf5266175b479">mainloop_event_activate()</a> instead.</em></p>
<p><em>This function may only be called from the main thread. </em></p>

</div>
</div>
<a id="afb2a232f2ecba8e301650074f525b250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2a232f2ecba8e301650074f525b250">&#9670;&nbsp;</a></span>MOCK_IMPL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">struct event_base *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_libevent_get_base&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current Libevent event base that we're set up to use. </p>

</div>
</div>
<a id="af458486bb051dab617ffe003891be904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af458486bb051dab617ffe003891be904">&#9670;&nbsp;</a></span>periodic_timer_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void periodic_timer_disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable the provided <b>timer</b>, but do not free it.</p>
<p>You can reenable the same timer later with periodic_timer_launch.</p>
<p>If the timer is already disabled, this function does nothing. </p>

</div>
</div>
<a id="abdf7237f1adc789dc9e87ccdf44ccae3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf7237f1adc789dc9e87ccdf44ccae3">&#9670;&nbsp;</a></span>periodic_timer_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void periodic_timer_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop and free a periodic timer </p>

</div>
</div>
<a id="a6a56742c18be2c4872a176de4cd5b462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a56742c18be2c4872a176de4cd5b462">&#9670;&nbsp;</a></span>periodic_timer_launch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void periodic_timer_launch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeval.html">timeval</a> *&#160;</td>
          <td class="paramname"><em>tv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch the timer <b>timer</b> to run at <b>tv</b> from now, and every <b>tv</b> thereafter.</p>
<p>If the timer is already enabled, this function does nothing. </p>

</div>
</div>
<a id="a6dfc062052ad839b4bd0f4ea874e4028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dfc062052ad839b4bd0f4ea874e4028">&#9670;&nbsp;</a></span>periodic_timer_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a>* periodic_timer_new </td>
          <td>(</td>
          <td class="paramtype">struct event_base *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeval.html">timeval</a> *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="structperiodic__timer__t.html">periodic_timer_t</a> *timer, void *data)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and schedule a new timer that will run every <b>tv</b> in the event loop of <b>base</b>. When the timer fires, it will run the timer in <b>cb</b> with the user-supplied data in <b>data</b>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_a6dfc062052ad839b4bd0f4ea874e4028_icgraph.png" border="0" usemap="#compat__libevent_8c_a6dfc062052ad839b4bd0f4ea874e4028_icgraph" alt=""/></div>
<map name="compat__libevent_8c_a6dfc062052ad839b4bd0f4ea874e4028_icgraph" id="compat__libevent_8c_a6dfc062052ad839b4bd0f4ea874e4028_icgraph">
<area shape="rect" id="node2" href="main_8h.html#aa282b01934a6c82ad6d2c27cf5140a85" title="reschedule_per_second\l_timer" alt="" coords="188,5,347,47"/>
</map>
</div>

</div>
</div>
<a id="a151e308d2194cb78aac538904cfbd9b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a151e308d2194cb78aac538904cfbd9b1">&#9670;&nbsp;</a></span>suppress_libevent_log_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void suppress_libevent_log_msg </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ignore any libevent log message that contains <b>msg</b>. </p>

</div>
</div>
<a id="a6e263506d4ac5e96c8956d725759432f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e263506d4ac5e96c8956d725759432f">&#9670;&nbsp;</a></span>tor_libevent_exit_loop_after_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_libevent_exit_loop_after_callback </td>
          <td>(</td>
          <td class="paramtype">struct event_base *&#160;</td>
          <td class="paramname"><em>base</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tell the event loop to exit after running whichever callback is currently active. </p>

</div>
</div>
<a id="a9995bbcc6d366dde8763a2be4e19ed00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9995bbcc6d366dde8763a2be4e19ed00">&#9670;&nbsp;</a></span>tor_libevent_exit_loop_after_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_libevent_exit_loop_after_delay </td>
          <td>(</td>
          <td class="paramtype">struct event_base *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeval.html">timeval</a> *&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tell the event loop to exit after <b>delay</b>. If <b>delay</b> is NULL, instead exit after we're done running the currently active events. </p>

</div>
</div>
<a id="ab96d3d0384ed6952c0d106e3a5a41f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab96d3d0384ed6952c0d106e3a5a41f28">&#9670;&nbsp;</a></span>tor_libevent_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_libevent_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Un-initialize libevent in preparation for an exit </p>

</div>
</div>
<a id="a93e3b7f7cbd294ce132d40b27791e5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e3b7f7cbd294ce132d40b27791e5dc">&#9670;&nbsp;</a></span>tor_libevent_get_header_version_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* tor_libevent_get_header_version_str </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a string representation of the version of Libevent that was used at compilation time. </p>

</div>
</div>
<a id="a6bf30c7a1ff1583094105081de66b286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bf30c7a1ff1583094105081de66b286">&#9670;&nbsp;</a></span>tor_libevent_get_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* tor_libevent_get_method </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the name of the Libevent backend we're using. </p>

</div>
</div>
<a id="a526fab83c5cd0a8826262f565c459a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526fab83c5cd0a8826262f565c459a87">&#9670;&nbsp;</a></span>tor_libevent_get_version_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* tor_libevent_get_version_str </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a string representation of the version of the currently running version of Libevent. </p>

</div>
</div>
<a id="a9930d309f7a71fd2e1232fe337ddf0fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9930d309f7a71fd2e1232fe337ddf0fb">&#9670;&nbsp;</a></span>tor_libevent_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_libevent_initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__libevent__cfg.html">tor_libevent_cfg</a> *&#160;</td>
          <td class="paramname"><em>torcfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the Libevent library and set up the event base. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__libevent_8c_a9930d309f7a71fd2e1232fe337ddf0fb_icgraph.png" border="0" usemap="#compat__libevent_8c_a9930d309f7a71fd2e1232fe337ddf0fb_icgraph" alt=""/></div>
<map name="compat__libevent_8c_a9930d309f7a71fd2e1232fe337ddf0fb_icgraph" id="compat__libevent_8c_a9930d309f7a71fd2e1232fe337ddf0fb_icgraph">
<area shape="rect" id="node2" href="test_8h.html#a334e47899bf2c19bf8a5ce0f226ab399" title="get_fname_rnd" alt="" coords="196,5,304,32"/>
</map>
</div>

</div>
</div>
<a id="a8be16d3ebc22fc53c7b579a5a4222704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8be16d3ebc22fc53c7b579a5a4222704">&#9670;&nbsp;</a></span>tor_libevent_run_event_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_libevent_run_event_loop </td>
          <td>(</td>
          <td class="paramtype">struct event_base *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>once</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run the event loop for the provided event_base, handling events until something stops it. If <b>once</b> is set, then just poll-and-run once, then exit. Return 0 on success, -1 if an error occurred, or 1 if we exited because no events were pending or active.</p>
<p>This isn't reentrant or multithreaded. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
