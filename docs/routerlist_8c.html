<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/routerlist.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">routerlist.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Code to maintain and access the global list of routerinfos for known servers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="or_8h_source.html">or.h</a>&quot;</code><br />
<code>#include &quot;backtrace.h&quot;</code><br />
<code>#include &quot;crypto_ed25519.h&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitstats_8h_source.html">circuitstats.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection_8h_source.html">connection.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="directory_8h_source.html">directory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dirserv_8h_source.html">dirserv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dirvote_8h_source.html">dirvote.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="entrynodes_8h_source.html">entrynodes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fp__pair_8h_source.html">fp_pair.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="geoip_8h_source.html">geoip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hibernate_8h_source.html">hibernate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="microdesc_8h_source.html">microdesc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="networkstatus_8h_source.html">networkstatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nodelist_8h_source.html">nodelist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="policies_8h_source.html">policies.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="reasons_8h_source.html">reasons.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rendcommon_8h_source.html">rendcommon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rendservice_8h_source.html">rendservice.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rephist_8h_source.html">rephist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="router_8h_source.html">router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="routerlist_8h_source.html">routerlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="routerparse_8h_source.html">routerparse.h</a>&quot;</code><br />
<code>#include &quot;routerset.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sandbox_8h_source.html">sandbox.h</a>&quot;</code><br />
<code>#include &quot;torcert.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for routerlist.c:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2routerlist_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2routerlist_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2routerlist_8c">
<area shape="rect" id="node2" href="or_8h.html" title="Master header file for Tor&#45;specific functionality. " alt="" coords="814,184,858,211"/>
<area shape="rect" id="node10" href="crypto__ed25519_8h_source.html" title="crypto_ed25519.h" alt="" coords="1324,333,1449,360"/>
<area shape="rect" id="node22" href="backtrace_8h_source.html" title="backtrace.h" alt="" coords="1813,483,1904,509"/>
<area shape="rect" id="node23" href="circuitstats_8h.html" title="Header file for circuitstats.c. " alt="" coords="2150,109,2247,136"/>
<area shape="rect" id="node24" href="config_8h.html" title="Header file for config.c. " alt="" coords="1345,184,1413,211"/>
<area shape="rect" id="node25" href="connection_8h.html" title="Header file for connection.c. " alt="" coords="1437,184,1533,211"/>
<area shape="rect" id="node27" href="control_8h.html" title="Header file for control.c. " alt="" coords="2272,109,2344,136"/>
<area shape="rect" id="node28" href="directory_8h.html" title="Header file for directory.c. " alt="" coords="2368,109,2451,136"/>
<area shape="rect" id="node29" href="dirserv_8h.html" title="Header file for dirserv.c. " alt="" coords="1557,184,1629,211"/>
<area shape="rect" id="node30" href="dirvote_8h.html" title="Header file for dirvote.c. " alt="" coords="1724,333,1796,360"/>
<area shape="rect" id="node31" href="entrynodes_8h.html" title="Header file for circuitbuild.c. " alt="" coords="2475,109,2573,136"/>
<area shape="rect" id="node32" href="fp__pair_8h.html" title="Header file for fp_pair.c. " alt="" coords="2597,109,2669,136"/>
<area shape="rect" id="node33" href="geoip_8h.html" title="Header file for geoip.c. " alt="" coords="1696,109,1760,136"/>
<area shape="rect" id="node35" href="hibernate_8h.html" title="Header file for hibernate.c. " alt="" coords="1835,184,1922,211"/>
<area shape="rect" id="node36" href="main_8h.html" title="Header file for main.c. " alt="" coords="2693,109,2755,136"/>
<area shape="rect" id="node37" href="microdesc_8h.html" title="Header file for microdesc.c. " alt="" coords="2779,109,2872,136"/>
<area shape="rect" id="node38" href="networkstatus_8h.html" title="Header file for networkstatus.c. " alt="" coords="1859,259,1973,285"/>
<area shape="rect" id="node39" href="nodelist_8h.html" title="Header file for nodelist.c. " alt="" coords="2897,109,2975,136"/>
<area shape="rect" id="node40" href="policies_8h.html" title="Header file for policies.c. " alt="" coords="3000,109,3077,136"/>
<area shape="rect" id="node41" href="reasons_8h.html" title="Header file for reasons.c. " alt="" coords="3102,109,3181,136"/>
<area shape="rect" id="node42" href="rendcommon_8h.html" title="Header file for rendcommon.c. " alt="" coords="3205,109,3313,136"/>
<area shape="rect" id="node43" href="rendservice_8h.html" title="Header file for rendservice.c. " alt="" coords="1017,109,1117,136"/>
<area shape="rect" id="node44" href="rephist_8h.html" title="Header file for rephist.c. " alt="" coords="3337,109,3409,136"/>
<area shape="rect" id="node45" href="router_8h.html" title="Header file for router.c. " alt="" coords="1949,333,2016,360"/>
<area shape="rect" id="node46" href="routerlist_8h.html" title="Header file for routerlist.c. " alt="" coords="1989,408,2072,435"/>
<area shape="rect" id="node47" href="routerparse_8h.html" title="Header file for routerparse.c. " alt="" coords="3433,109,3532,136"/>
<area shape="rect" id="node48" href="routerset_8h_source.html" title="routerset.h" alt="" coords="3557,109,3641,136"/>
<area shape="rect" id="node49" href="sandbox_8h.html" title="Header file for sandbox.c. " alt="" coords="5,408,88,435"/>
<area shape="rect" id="node50" href="torcert_8h_source.html" title="torcert.h" alt="" coords="1250,184,1321,211"/>
<area shape="rect" id="node3" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="527,557,606,584"/>
<area shape="rect" id="node4" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="766,483,829,509"/>
<area shape="rect" id="node5" href="crypto_8h.html" title="Headers for crypto.c. " alt="" coords="719,333,788,360"/>
<area shape="rect" id="node9" href="crypto__format_8h_source.html" title="crypto_format.h" alt="" coords="1087,259,1201,285"/>
<area shape="rect" id="node11" href="crypto__curve25519_8h_source.html" title="crypto_curve25519.h" alt="" coords="1103,408,1246,435"/>
<area shape="rect" id="node12" href="tortls_8h.html" title="Headers for tortls.c. " alt="" coords="846,259,909,285"/>
<area shape="rect" id="node13" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="914,333,979,360"/>
<area shape="rect" id="node14" href="container_8h_source.html" title="container.h" alt="" coords="265,408,351,435"/>
<area shape="rect" id="node15" href="torgzip_8h.html" title="Headers for torgzip.h. " alt="" coords="1276,259,1348,285"/>
<area shape="rect" id="node16" href="address_8h.html" title="Headers for address.h. " alt="" coords="374,333,453,360"/>
<area shape="rect" id="node17" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="112,408,240,435"/>
<area shape="rect" id="node18" href="ht_8h_source.html" title="ht.h" alt="" coords="203,259,247,285"/>
<area shape="rect" id="node19" href="replaycache_8h.html" title="Header file for replaycache.c. " alt="" coords="502,259,605,285"/>
<area shape="rect" id="node20" href="tor__queue_8h_source.html" title="tor_queue.h" alt="" coords="629,259,720,285"/>
<area shape="rect" id="node21" href="util__format_8h_source.html" title="util_format.h" alt="" coords="985,408,1079,435"/>
<area shape="rect" id="node7" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="1412,483,1511,509"/>
<area shape="rect" id="node8" href="compat_8h_source.html" title="compat.h" alt="" coords="731,408,807,435"/>
<area shape="rect" id="node26" href="buffers_8h.html" title="Header file for buffers.c. " alt="" coords="1525,333,1598,360"/>
<area shape="rect" id="node34" href="dos_8h_source.html" title="dos.h" alt="" coords="1654,184,1709,211"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcert__list__t.html">cert_list_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structduration__idx__t.html">duration_idx_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae7f2b78c0022233900612f2fbbbdb6b7"><td class="memItemLeft" align="right" valign="top"><a id="ae7f2b78c0022233900612f2fbbbdb6b7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ROUTERLIST_PRIVATE</b></td></tr>
<tr class="separator:ae7f2b78c0022233900612f2fbbbdb6b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271c4eb7f810016393162f8612592985"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>SDMAP_FOREACH</b>(map,  keyvar,  valvar)</td></tr>
<tr class="separator:a271c4eb7f810016393162f8612592985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b7dfbd548980132e1ee734e1257ecc6"><td class="memItemLeft" align="right" valign="top"><a id="a1b7dfbd548980132e1ee734e1257ecc6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RIMAP_FOREACH</b>(map,  keyvar,  valvar)&#160;&#160;&#160;DIGESTMAP_FOREACH(rimap_to_digestmap(map), keyvar, <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *, valvar)</td></tr>
<tr class="separator:a1b7dfbd548980132e1ee734e1257ecc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d43ed376d3700c065032c6e1a8b42b3"><td class="memItemLeft" align="right" valign="top"><a id="a7d43ed376d3700c065032c6e1a8b42b3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EIMAP_FOREACH</b>(map,  keyvar,  valvar)&#160;&#160;&#160;DIGESTMAP_FOREACH(eimap_to_digestmap(map), keyvar, <a class="el" href="structextrainfo__t.html">extrainfo_t</a> *, valvar)</td></tr>
<tr class="separator:a7d43ed376d3700c065032c6e1a8b42b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b2fa0f44d769352c2fc2782851e78c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>DSMAP_FOREACH</b>(map,  keyvar,  valvar)</td></tr>
<tr class="separator:a3b2fa0f44d769352c2fc2782851e78c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a388c5f4d2cedd30bf3d2d5846a380e22"><td class="memItemLeft" align="right" valign="top"><a id="a388c5f4d2cedd30bf3d2d5846a380e22"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEAD_CERT_LIFETIME</b>&#160;&#160;&#160;(2*24*60*60)</td></tr>
<tr class="separator:a388c5f4d2cedd30bf3d2d5846a380e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69384620a10d5bb94d7aa54665e098ca"><td class="memItemLeft" align="right" valign="top"><a id="a69384620a10d5bb94d7aa54665e098ca"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SUPERSEDED_CERT_LIFETIME</b>&#160;&#160;&#160;(2*24*60*60)</td></tr>
<tr class="separator:a69384620a10d5bb94d7aa54665e098ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c935a44264e796f3a1b985ce7abe6d"><td class="memItemLeft" align="right" valign="top"><a id="a39c935a44264e796f3a1b985ce7abe6d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_AUTH_CERT_DL_FAILURES_TO_BUG_USER</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a39c935a44264e796f3a1b985ce7abe6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aae8ef109a9fa6c3e50163da84eca4b"><td class="memItemLeft" align="right" valign="top"><a id="a9aae8ef109a9fa6c3e50163da84eca4b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RRS_FORCE</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a9aae8ef109a9fa6c3e50163da84eca4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b680445ae6d27d8cc6c7f9c4034306b"><td class="memItemLeft" align="right" valign="top"><a id="a5b680445ae6d27d8cc6c7f9c4034306b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RRS_DONT_REMOVE_OLD</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a5b680445ae6d27d8cc6c7f9c4034306b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52275480ed54b6dc0aaca430753040a"><td class="memItemLeft" align="right" valign="top"><a id="ab52275480ed54b6dc0aaca430753040a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LOG_FALSE_POSITIVES_DURING_BOOTSTRAP</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ab52275480ed54b6dc0aaca430753040a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501f03dd9c0a7f729bf1943980dd779a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a501f03dd9c0a7f729bf1943980dd779a">DIR_503_TIMEOUT</a>&#160;&#160;&#160;(60*60)</td></tr>
<tr class="separator:a501f03dd9c0a7f729bf1943980dd779a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0ac4078d0a98c632a076c991ceec11"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>RETRY_ALTERNATE_IP_VERSION</b>(retry_label)</td></tr>
<tr class="separator:aef0ac4078d0a98c632a076c991ceec11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf798d9341519768066d7a2e12ac810"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>RETRY_WITHOUT_EXCLUDE</b>(retry_label)</td></tr>
<tr class="separator:accf798d9341519768066d7a2e12ac810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2faac946022d00a1c03e7500035e554e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a2faac946022d00a1c03e7500035e554e">DEFAULT_MAX_BELIEVABLE_BANDWIDTH</a>&#160;&#160;&#160;10000000 /* 10 MB/sec */</td></tr>
<tr class="separator:a2faac946022d00a1c03e7500035e554e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65d6dd564991e2c75984d3bfffa8489"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ac65d6dd564991e2c75984d3bfffa8489">BRIDGE_MIN_BELIEVABLE_BANDWIDTH</a>&#160;&#160;&#160;20000  /* 20 kB/sec */</td></tr>
<tr class="separator:ac65d6dd564991e2c75984d3bfffa8489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1220158fda76857c9fb7977fe461f307"><td class="memItemLeft" align="right" valign="top"><a id="a1220158fda76857c9fb7977fe461f307"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BRIDGE_MAX_BELIEVABLE_BANDWIDTH</b>&#160;&#160;&#160;100000 /* 100 kB/sec */</td></tr>
<tr class="separator:a1220158fda76857c9fb7977fe461f307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a8527a200e24496496ad324fcf84282"><td class="memItemLeft" align="right" valign="top"><a id="a1a8527a200e24496496ad324fcf84282"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>should_cache_old_descriptors</b>()&#160;&#160;&#160;<a class="el" href="dirserv_8h.html#a57e2ff1ad2ea65abe9b969ad3d76a418">directory_caches_dir_info</a>(get_options())</td></tr>
<tr class="separator:a1a8527a200e24496496ad324fcf84282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93c736ae3e827d624f69cbbf789f089"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ac93c736ae3e827d624f69cbbf789f089">MIN_DL_PER_REQUEST</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:ac93c736ae3e827d624f69cbbf789f089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a6ae3768b20ddc475d15462d7f2066"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa1a6ae3768b20ddc475d15462d7f2066">MIN_REQUESTS</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:aa1a6ae3768b20ddc475d15462d7f2066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956d00f098afe798d8d96c486bcbe119"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a956d00f098afe798d8d96c486bcbe119">MAX_DL_TO_DELAY</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a956d00f098afe798d8d96c486bcbe119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa11ff5a6796fda379d75a47283fbc6c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa11ff5a6796fda379d75a47283fbc6c4">DUMMY_DOWNLOAD_INTERVAL</a>&#160;&#160;&#160;(20*60)</td></tr>
<tr class="separator:aa11ff5a6796fda379d75a47283fbc6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6db042b937e7cb28cd3c73546b60aff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#af6db042b937e7cb28cd3c73546b60aff">ROUTER_MAX_COSMETIC_TIME_DIFFERENCE</a>&#160;&#160;&#160;(2*60*60)</td></tr>
<tr class="separator:af6db042b937e7cb28cd3c73546b60aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf45d1ee2d8a2e7049d2496e5cbac0df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#acf45d1ee2d8a2e7049d2496e5cbac0df">ROUTER_ALLOW_UPTIME_DRIFT</a>&#160;&#160;&#160;(6*60*60)</td></tr>
<tr class="separator:acf45d1ee2d8a2e7049d2496e5cbac0df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2a56d0e1f5b9107f55998470c78fcfea"><td class="memItemLeft" align="right" valign="top"><a id="a2a56d0e1f5b9107f55998470c78fcfea"></a>
typedef struct <a class="el" href="structcert__list__t.html">cert_list_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>cert_list_t</b></td></tr>
<tr class="separator:a2a56d0e1f5b9107f55998470c78fcfea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a40b0857598d14d49c8082667c70bc023"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a40b0857598d14d49c8082667c70bc023">get_n_authorities</a> (<a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type)</td></tr>
<tr class="separator:a40b0857598d14d49c8082667c70bc023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc402873af8a53772da45a4031b570b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#abc402873af8a53772da45a4031b570b4">MOCK_IMPL</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *, list_authority_ids_with_downloads,(void))</td></tr>
<tr class="separator:abc402873af8a53772da45a4031b570b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9086bb58ff626a397ab9e9f2f44d524d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a9086bb58ff626a397ab9e9f2f44d524d">MOCK_IMPL</a> (<a class="el" href="structdownload__status__t.html">download_status_t</a> *, id_only_download_status_for_authority_id,(const char *digest))</td></tr>
<tr class="separator:a9086bb58ff626a397ab9e9f2f44d524d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd5530b08ba4f684ec0bf3583257ba26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#afd5530b08ba4f684ec0bf3583257ba26">MOCK_IMPL</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *, list_sk_digests_for_authority_id,(const char *digest))</td></tr>
<tr class="separator:afd5530b08ba4f684ec0bf3583257ba26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94772fdbbbfc2973662cb5f08acc6ec6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a94772fdbbbfc2973662cb5f08acc6ec6">MOCK_IMPL</a> (<a class="el" href="structdownload__status__t.html">download_status_t</a> *, download_status_for_authority_id_and_sk,(const char *id_digest, const char *sk_digest))</td></tr>
<tr class="separator:a94772fdbbbfc2973662cb5f08acc6ec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c116d81fb2aed5dde4a9c8590af12c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a88c116d81fb2aed5dde4a9c8590af12c">trusted_dirs_reload_certs</a> (void)</td></tr>
<tr class="separator:a88c116d81fb2aed5dde4a9c8590af12c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6e87e7775e3d61a3a0f2cb14f78ea1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a0a6e87e7775e3d61a3a0f2cb14f78ea1">trusted_dirs_load_certs_from_string</a> (const char *contents, int source, int flush, const char *source_dir)</td></tr>
<tr class="separator:a0a6e87e7775e3d61a3a0f2cb14f78ea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb91993a221f80d7896395babb122f0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#acb91993a221f80d7896395babb122f0a">trusted_dirs_flush_certs_to_disk</a> (void)</td></tr>
<tr class="separator:acb91993a221f80d7896395babb122f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a339be9cf9f2920c65e6e938e3de8b3b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a339be9cf9f2920c65e6e938e3de8b3b8">authority_cert_get_newest_by_id</a> (const char *id_digest)</td></tr>
<tr class="separator:a339be9cf9f2920c65e6e938e3de8b3b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24c5c3729a4bf122f277447df1c5e8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ab24c5c3729a4bf122f277447df1c5e8c">authority_cert_get_by_sk_digest</a> (const char *sk_digest)</td></tr>
<tr class="separator:ab24c5c3729a4bf122f277447df1c5e8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58983e59cd226450674e7a11edc59dad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a58983e59cd226450674e7a11edc59dad">authority_cert_get_by_digests</a> (const char *id_digest, const char *sk_digest)</td></tr>
<tr class="separator:a58983e59cd226450674e7a11edc59dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f963147c4e0b848b35c2bb5af493163"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a4f963147c4e0b848b35c2bb5af493163">authority_cert_get_all</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *certs_out)</td></tr>
<tr class="separator:a4f963147c4e0b848b35c2bb5af493163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0642e00994970234101190ca32fbf091"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a0642e00994970234101190ca32fbf091">authority_cert_dl_failed</a> (const char *id_digest, const char *signing_key_digest, int status)</td></tr>
<tr class="separator:a0642e00994970234101190ca32fbf091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1414b47a61105dd75d01ba4966c511fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a1414b47a61105dd75d01ba4966c511fc">authority_cert_is_blacklisted</a> (const <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *cert)</td></tr>
<tr class="separator:a1414b47a61105dd75d01ba4966c511fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0674d915ac20d064542496c8a8c2c26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#af0674d915ac20d064542496c8a8c2c26">authority_cert_dl_looks_uncertain</a> (const char *id_digest)</td></tr>
<tr class="separator:af0674d915ac20d064542496c8a8c2c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f37bda7b9149b1da0f1abfff66ab23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a91f37bda7b9149b1da0f1abfff66ab23">authority_certs_fetch_missing</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *status, time_t now, const char *dir_hint)</td></tr>
<tr class="separator:a91f37bda7b9149b1da0f1abfff66ab23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f14dd56cbe0cc04a9b096db95a4270"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a86f14dd56cbe0cc04a9b096db95a4270">router_reload_router_list</a> (void)</td></tr>
<tr class="separator:a86f14dd56cbe0cc04a9b096db95a4270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b36f7b87463dc114065ea058660ac4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa9b36f7b87463dc114065ea058660ac4">router_get_trusted_dir_servers</a> (void)</td></tr>
<tr class="separator:aa9b36f7b87463dc114065ea058660ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77fd0cf1c757036e723484cefe319bcb"><td class="memItemLeft" align="right" valign="top"><a id="a77fd0cf1c757036e723484cefe319bcb"></a>
const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>router_get_fallback_dir_servers</b> (void)</td></tr>
<tr class="separator:a77fd0cf1c757036e723484cefe319bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace83aa582c6836e9a172a8cafa1d4047"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ace83aa582c6836e9a172a8cafa1d4047">router_pick_directory_server</a> (<a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type, int flags)</td></tr>
<tr class="separator:ace83aa582c6836e9a172a8cafa1d4047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5132d81b2730264e3a284d9d438ee420"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdir__server__t.html">dir_server_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a5132d81b2730264e3a284d9d438ee420">router_get_trusteddirserver_by_digest</a> (const char *digest)</td></tr>
<tr class="separator:a5132d81b2730264e3a284d9d438ee420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2e70d04e8e04e2958f64f243e76987"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdir__server__t.html">dir_server_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aaa2e70d04e8e04e2958f64f243e76987">router_get_fallback_dirserver_by_digest</a> (const char *digest)</td></tr>
<tr class="separator:aaa2e70d04e8e04e2958f64f243e76987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f6ecb349cc9b484a19c1a0397dc1ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa0f6ecb349cc9b484a19c1a0397dc1ed">router_digest_is_fallback_dir</a> (const char *digest)</td></tr>
<tr class="separator:aa0f6ecb349cc9b484a19c1a0397dc1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d42576fb24610f05517f0e92fca275"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a32d42576fb24610f05517f0e92fca275">MOCK_IMPL</a> (<a class="el" href="structdir__server__t.html">dir_server_t</a> *, trusteddirserver_get_by_v3_auth_digest,(const char *digest))</td></tr>
<tr class="separator:a32d42576fb24610f05517f0e92fca275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96c8d565baf8a82010f5adfacb99060"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ad96c8d565baf8a82010f5adfacb99060">router_pick_trusteddirserver</a> (<a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type, int flags)</td></tr>
<tr class="separator:ad96c8d565baf8a82010f5adfacb99060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58ed11d2f6808617760386221246b842"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a58ed11d2f6808617760386221246b842">router_pick_fallback_dirserver</a> (<a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type, int flags)</td></tr>
<tr class="separator:a58ed11d2f6808617760386221246b842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a33880ae82be75c59357c77d11135e9"><td class="memItemLeft" align="right" valign="top"><a id="a8a33880ae82be75c59357c77d11135e9"></a>
STATIC int&#160;</td><td class="memItemRight" valign="bottom"><b>router_is_already_dir_fetching</b> (const <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *ap, int serverdesc, int microdesc)</td></tr>
<tr class="separator:a8a33880ae82be75c59357c77d11135e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d096377c2e75d905fbfb84a9b99d1c7"><td class="memItemLeft" align="right" valign="top"><a id="a6d096377c2e75d905fbfb84a9b99d1c7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>router_skip_or_reachability</b> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, int try_ip_pref)</td></tr>
<tr class="separator:a6d096377c2e75d905fbfb84a9b99d1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e64366c95e82de40cac88b7a39ae17"><td class="memItemLeft" align="right" valign="top">STATIC const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ab3e64366c95e82de40cac88b7a39ae17">router_pick_directory_server_impl</a> (<a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type, int flags, int *n_busy_out)</td></tr>
<tr class="separator:ab3e64366c95e82de40cac88b7a39ae17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b25dd842df15283a342bb77cf5935a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a9b25dd842df15283a342bb77cf5935a8">routers_have_same_or_addrs</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *r1, const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *r2)</td></tr>
<tr class="separator:a9b25dd842df15283a342bb77cf5935a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fab5ecf53641fa3ee384520aaa22e41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a4fab5ecf53641fa3ee384520aaa22e41">router_reset_status_download_failures</a> (void)</td></tr>
<tr class="separator:a4fab5ecf53641fa3ee384520aaa22e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba23320c5a1abde91478e430c7bd42bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aba23320c5a1abde91478e430c7bd42bd">router_add_running_nodes_to_smartlist</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *sl, int allow_invalid, int need_uptime, int need_capacity, int need_guard, int need_desc, int pref_addr, int direct_conn)</td></tr>
<tr class="separator:aba23320c5a1abde91478e430c7bd42bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc5cd667e54af0c810a0930e70e27348"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#afc5cd667e54af0c810a0930e70e27348">routerlist_find_my_routerinfo</a> (void)</td></tr>
<tr class="separator:afc5cd667e54af0c810a0930e70e27348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529cee5c17927c3dd0bbab47b5530ced"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a529cee5c17927c3dd0bbab47b5530ced">router_get_advertised_bandwidth</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:a529cee5c17927c3dd0bbab47b5530ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fa9db0634a1b718251a999c4972b21"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ad6fa9db0634a1b718251a999c4972b21">router_get_advertised_bandwidth_capped</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:ad6fa9db0634a1b718251a999c4972b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17ec1d95171be8c87bb5dcc4ac341ba"><td class="memItemLeft" align="right" valign="top">STATIC void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa17ec1d95171be8c87bb5dcc4ac341ba">scale_array_elements_to_u64</a> (uint64_t *entries_out, const double *entries_in, int n_entries, uint64_t *total_out)</td></tr>
<tr class="separator:aa17ec1d95171be8c87bb5dcc4ac341ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b22797a2be55707af8334b747d51047"><td class="memItemLeft" align="right" valign="top">STATIC int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8b22797a2be55707af8334b747d51047">choose_array_element_by_weight</a> (const uint64_t *entries, int n_entries)</td></tr>
<tr class="separator:a8b22797a2be55707af8334b747d51047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5a2d791ec14d51bceebd0201d884a5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8c5a2d791ec14d51bceebd0201d884a5">frac_nodes_with_descriptors</a> (const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *sl, <a class="el" href="or_8h.html#afec7ed946efd497dc5d098510c5a2d87">bandwidth_weight_rule_t</a> rule)</td></tr>
<tr class="separator:a8c5a2d791ec14d51bceebd0201d884a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf1c16d2f07649504a2f0cb790312337"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structnode__t.html">node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aaf1c16d2f07649504a2f0cb790312337">node_sl_choose_by_bandwidth</a> (const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *sl, <a class="el" href="or_8h.html#afec7ed946efd497dc5d098510c5a2d87">bandwidth_weight_rule_t</a> rule)</td></tr>
<tr class="separator:aaf1c16d2f07649504a2f0cb790312337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147ff0bee802b71e9c9e3bed69255f85"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structnode__t.html">node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a147ff0bee802b71e9c9e3bed69255f85">router_choose_random_node</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *excludedsmartlist, routerset_t *excludedset, <a class="el" href="or_8h.html#a274fd236a2f0fc116815f9077f5ca82c">router_crn_flags_t</a> flags)</td></tr>
<tr class="separator:a147ff0bee802b71e9c9e3bed69255f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589e19badbee6e0257d94d03dcc40ba7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a589e19badbee6e0257d94d03dcc40ba7">hex_digest_nickname_decode</a> (const char *hexdigest, char *digest_out, char *nickname_qualifier_char_out, char *nickname_out)</td></tr>
<tr class="separator:a589e19badbee6e0257d94d03dcc40ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0f7cc93c54df7858c6a6fd3f0eb443"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#afd0f7cc93c54df7858c6a6fd3f0eb443">hex_digest_nickname_matches</a> (const char *hexdigest, const char *identity_digest, const char *nickname, int is_named)</td></tr>
<tr class="separator:afd0f7cc93c54df7858c6a6fd3f0eb443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b764a3362e4c3245d5e430925e380f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8b764a3362e4c3245d5e430925e380f1">router_is_named</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:a8b764a3362e4c3245d5e430925e380f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c38eadb28cf4532a7623c5aa1885cec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a6c38eadb28cf4532a7623c5aa1885cec">router_digest_is_trusted_dir_type</a> (const char *digest, <a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type)</td></tr>
<tr class="separator:a6c38eadb28cf4532a7623c5aa1885cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0240e623457d6c4622dd3d9dad2a652f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a0240e623457d6c4622dd3d9dad2a652f">router_addr_is_trusted_dir</a> (uint32_t addr)</td></tr>
<tr class="separator:a0240e623457d6c4622dd3d9dad2a652f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a940b9f42b7b36f3fc3721aa2536d7cdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a940b9f42b7b36f3fc3721aa2536d7cdf">hexdigest_to_digest</a> (const char *hexdigest, char *digest)</td></tr>
<tr class="separator:a940b9f42b7b36f3fc3721aa2536d7cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848eea1698b3361538f190f55f2cc0e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a848eea1698b3361538f190f55f2cc0e6">router_get_mutable_by_digest</a> (const char *digest)</td></tr>
<tr class="separator:a848eea1698b3361538f190f55f2cc0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eb1861cedcb477a2e455b6c02eb56d8"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a9eb1861cedcb477a2e455b6c02eb56d8">router_get_by_id_digest</a> (const char *digest)</td></tr>
<tr class="separator:a9eb1861cedcb477a2e455b6c02eb56d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab0f360909c4cc3732e5f9541cf595bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aab0f360909c4cc3732e5f9541cf595bb">router_get_by_descriptor_digest</a> (const char *digest)</td></tr>
<tr class="separator:aab0f360909c4cc3732e5f9541cf595bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a332003a83b251551e2b084e7f1672d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a2a332003a83b251551e2b084e7f1672d">MOCK_IMPL</a> (<a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *, router_get_by_extrainfo_digest,(const char *digest))</td></tr>
<tr class="separator:a2a332003a83b251551e2b084e7f1672d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49c0521b1d8a01f75abf4438992fd08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ab49c0521b1d8a01f75abf4438992fd08">extrainfo_get_by_descriptor_digest</a> (const char *digest)</td></tr>
<tr class="separator:ab49c0521b1d8a01f75abf4438992fd08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4d8bdd829c8eab4c9060c014fb59af8"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#af4d8bdd829c8eab4c9060c014fb59af8">signed_descriptor_get_body</a> (const <a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *desc)</td></tr>
<tr class="separator:af4d8bdd829c8eab4c9060c014fb59af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7aee947ee003a2d2367678bdbbb0aa9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa7aee947ee003a2d2367678bdbbb0aa9">signed_descriptor_get_annotations</a> (const <a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *desc)</td></tr>
<tr class="separator:aa7aee947ee003a2d2367678bdbbb0aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9181bbed0ee6ff8088a7c53fc8c446f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrouterlist__t.html">routerlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1">router_get_routerlist</a> (void)</td></tr>
<tr class="separator:a9181bbed0ee6ff8088a7c53fc8c446f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2db10502386ef035c89377d2968c7e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#af2db10502386ef035c89377d2968c7e0">routerinfo_free</a> (<a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:af2db10502386ef035c89377d2968c7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36bbf9bf41105f61c8f1f5b6ffc3b12b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a36bbf9bf41105f61c8f1f5b6ffc3b12b">extrainfo_free</a> (<a class="el" href="structextrainfo__t.html">extrainfo_t</a> *extrainfo)</td></tr>
<tr class="separator:a36bbf9bf41105f61c8f1f5b6ffc3b12b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9228e04209739ed11f23f364b74bfde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ab9228e04209739ed11f23f364b74bfde">routerlist_free</a> (<a class="el" href="structrouterlist__t.html">routerlist_t</a> *rl)</td></tr>
<tr class="separator:ab9228e04209739ed11f23f364b74bfde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5062bf36695d11df627a5d3cda2954fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a5062bf36695d11df627a5d3cda2954fe">dump_routerlist_mem_usage</a> (int severity)</td></tr>
<tr class="separator:a5062bf36695d11df627a5d3cda2954fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96fada5a8d19d0ea9158e0ff51ae320"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aa96fada5a8d19d0ea9158e0ff51ae320">MOCK_IMPL</a> (STATIC <a class="el" href="or_8h.html#a7c96814e647f1b5b99e501ea5763842f">was_router_added_t</a>, extrainfo_insert,(<a class="el" href="structrouterlist__t.html">routerlist_t</a> *rl, <a class="el" href="structextrainfo__t.html">extrainfo_t</a> *ei, int warn_if_incompatible))</td></tr>
<tr class="separator:aa96fada5a8d19d0ea9158e0ff51ae320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c328828cd94c3bb84044c9003f8c78f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8c328828cd94c3bb84044c9003f8c78f">routerlist_remove</a> (<a class="el" href="structrouterlist__t.html">routerlist_t</a> *rl, <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri, int make_old, time_t now)</td></tr>
<tr class="separator:a8c328828cd94c3bb84044c9003f8c78f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a087a998f551e9fff456d9e4ce662668e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a087a998f551e9fff456d9e4ce662668e">routerlist_free_all</a> (void)</td></tr>
<tr class="separator:a087a998f551e9fff456d9e4ce662668e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5591c87fbad96a88fa4d0145431ef87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ad5591c87fbad96a88fa4d0145431ef87">routerlist_reset_warnings</a> (void)</td></tr>
<tr class="separator:ad5591c87fbad96a88fa4d0145431ef87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a264fc4b4441c88e689a8428be321d318"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a264fc4b4441c88e689a8428be321d318">MOCK_IMPL</a> (int, router_descriptor_is_older_than,(const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, int seconds))</td></tr>
<tr class="separator:a264fc4b4441c88e689a8428be321d318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1878aef0f1dd92c783d5477248b985d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="or_8h.html#a7c96814e647f1b5b99e501ea5763842f">was_router_added_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ab1878aef0f1dd92c783d5477248b985d">router_add_to_routerlist</a> (<a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, const char **msg, int from_cache, int from_fetch)</td></tr>
<tr class="separator:ab1878aef0f1dd92c783d5477248b985d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d657f054dd82fbaf519c02deb5ec51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="or_8h.html#a7c96814e647f1b5b99e501ea5763842f">was_router_added_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a91d657f054dd82fbaf519c02deb5ec51">router_add_extrainfo_to_routerlist</a> (<a class="el" href="structextrainfo__t.html">extrainfo_t</a> *ei, const char **msg, int from_cache, int from_fetch)</td></tr>
<tr class="separator:a91d657f054dd82fbaf519c02deb5ec51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad504742ed3340ecce532e798d3304c82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ad504742ed3340ecce532e798d3304c82">routerlist_remove_old_routers</a> (void)</td></tr>
<tr class="separator:ad504742ed3340ecce532e798d3304c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e00a6f0df9aace49976da496902957"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ad0e00a6f0df9aace49976da496902957">routerlist_descriptors_added</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *sl, int from_cache)</td></tr>
<tr class="separator:ad0e00a6f0df9aace49976da496902957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b194ad6a42e8fb2ef4f3aa1cf135830"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a7b194ad6a42e8fb2ef4f3aa1cf135830">router_load_single_router</a> (const char *s, uint8_t purpose, int cache, const char **msg)</td></tr>
<tr class="separator:a7b194ad6a42e8fb2ef4f3aa1cf135830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08c5697c58be20a7bb11b34ca9aba5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ae08c5697c58be20a7bb11b34ca9aba5e">router_load_routers_from_string</a> (const char *s, const char *eos, <a class="el" href="or_8h.html#a010ba601a8385178d2aa25beb04b4d9c">saved_location_t</a> saved_location, <a class="el" href="structsmartlist__t.html">smartlist_t</a> *requested_fingerprints, int descriptor_digests, const char *prepend_annotations)</td></tr>
<tr class="separator:ae08c5697c58be20a7bb11b34ca9aba5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373b610cd5f3f54650e6e7d47ae70263"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a373b610cd5f3f54650e6e7d47ae70263">router_load_extrainfo_from_string</a> (const char *s, const char *eos, <a class="el" href="or_8h.html#a010ba601a8385178d2aa25beb04b4d9c">saved_location_t</a> saved_location, <a class="el" href="structsmartlist__t.html">smartlist_t</a> *requested_fingerprints, int descriptor_digests)</td></tr>
<tr class="separator:a373b610cd5f3f54650e6e7d47ae70263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7f2c6bcc3135272bc6aa66ec09cd76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#afe7f2c6bcc3135272bc6aa66ec09cd76">update_all_descriptor_downloads</a> (time_t now)</td></tr>
<tr class="separator:afe7f2c6bcc3135272bc6aa66ec09cd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52db265aafa57b000917a06850363fcd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a52db265aafa57b000917a06850363fcd">routerlist_retry_directory_downloads</a> (time_t now)</td></tr>
<tr class="separator:a52db265aafa57b000917a06850363fcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb0d178232a933f8fea51a845f41265"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a1cb0d178232a933f8fea51a845f41265">router_exit_policy_rejects_all</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:a1cb0d178232a933f8fea51a845f41265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a800ff3c4749f4b968b8ac5d97c91b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdir__server__t.html">dir_server_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a72a800ff3c4749f4b968b8ac5d97c91b">trusted_dir_server_new</a> (const char *nickname, const char *address, uint16_t dir_port, uint16_t or_port, const <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *ipv6_addrport, const char *digest, const char *v3_auth_digest, <a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a> type, double weight)</td></tr>
<tr class="separator:a72a800ff3c4749f4b968b8ac5d97c91b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3d74c73f42fb7ed7acc16a1cacfffa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdir__server__t.html">dir_server_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a0b3d74c73f42fb7ed7acc16a1cacfffa">fallback_dir_server_new</a> (const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *addr, uint16_t dir_port, uint16_t or_port, const <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *addrport_ipv6, const char *id_digest, double weight)</td></tr>
<tr class="separator:a0b3d74c73f42fb7ed7acc16a1cacfffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd4c9992a1cf27e95e2829ae40c7b79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a9bd4c9992a1cf27e95e2829ae40c7b79">dir_server_add</a> (<a class="el" href="structdir__server__t.html">dir_server_t</a> *ent)</td></tr>
<tr class="separator:a9bd4c9992a1cf27e95e2829ae40c7b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb77cd705f2c621023fff9a114c01bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a2bb77cd705f2c621023fff9a114c01bf">authority_cert_free</a> (<a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *cert)</td></tr>
<tr class="separator:a2bb77cd705f2c621023fff9a114c01bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ffeae0d92b2c4eec18c14453732f726"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a6ffeae0d92b2c4eec18c14453732f726">clear_dir_servers</a> (void)</td></tr>
<tr class="separator:a6ffeae0d92b2c4eec18c14453732f726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e2aa4caae99a8eba67490a4d920794"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a19e2aa4caae99a8eba67490a4d920794">list_pending_microdesc_downloads</a> (digest256map_t *result)</td></tr>
<tr class="separator:a19e2aa4caae99a8eba67490a4d920794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e148d5a858adaad0b50f4c869aba05a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a5e148d5a858adaad0b50f4c869aba05a">MOCK_IMPL</a> (STATIC void, initiate_descriptor_downloads,(const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *source, int purpose, <a class="el" href="structsmartlist__t.html">smartlist_t</a> *digests, int lo, int hi, int pds_flags))</td></tr>
<tr class="separator:a5e148d5a858adaad0b50f4c869aba05a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e8618001c42bd50575051362aaffa2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a33e8618001c42bd50575051362aaffa2">launch_descriptor_downloads</a> (int purpose, <a class="el" href="structsmartlist__t.html">smartlist_t</a> *downloadable, const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *source, time_t now)</td></tr>
<tr class="separator:a33e8618001c42bd50575051362aaffa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7cfda729e27cf26089db2112d21965"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a1a7cfda729e27cf26089db2112d21965">update_consensus_router_descriptor_downloads</a> (time_t now, int is_vote, <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus)</td></tr>
<tr class="separator:a1a7cfda729e27cf26089db2112d21965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b67f737b9ea614297414b26eb3b784c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8b67f737b9ea614297414b26eb3b784c">update_router_descriptor_downloads</a> (time_t now)</td></tr>
<tr class="separator:a8b67f737b9ea614297414b26eb3b784c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab576efc7049ed4eca6fa56e9f0544844"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ab576efc7049ed4eca6fa56e9f0544844">update_extrainfo_downloads</a> (time_t now)</td></tr>
<tr class="separator:ab576efc7049ed4eca6fa56e9f0544844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3015689729ebc1c085666a99b80a10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#adc3015689729ebc1c085666a99b80a10">router_reset_descriptor_download_failures</a> (void)</td></tr>
<tr class="separator:adc3015689729ebc1c085666a99b80a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41971537948013e1684f04ae286affd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#ac41971537948013e1684f04ae286affd">router_differences_are_cosmetic</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *r1, const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *r2)</td></tr>
<tr class="separator:ac41971537948013e1684f04ae286affd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bcaa5e4b76efe015823a0e6e0e8f876"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8bcaa5e4b76efe015823a0e6e0e8f876">routerinfo_incompatible_with_extrainfo</a> (const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *identity_pkey, <a class="el" href="structextrainfo__t.html">extrainfo_t</a> *ei, <a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *sd, const char **msg)</td></tr>
<tr class="separator:a8bcaa5e4b76efe015823a0e6e0e8f876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c56af06f2149721783f0b8341b86e6"><td class="memItemLeft" align="right" valign="top"><a id="a51c56af06f2149721783f0b8341b86e6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>routerinfo_has_curve25519_onion_key</b> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri)</td></tr>
<tr class="separator:a51c56af06f2149721783f0b8341b86e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8d20c95697ff96a02445e5de118a57"><td class="memItemLeft" align="right" valign="top"><a id="a6c8d20c95697ff96a02445e5de118a57"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>routerstatus_version_supports_extend2_cells</b> (const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *rs, int allow_unknown_versions)</td></tr>
<tr class="separator:a6c8d20c95697ff96a02445e5de118a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bbb04e1dbdbbde5ad2089aac715d9cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a6bbb04e1dbdbbde5ad2089aac715d9cf">routerlist_assert_ok</a> (const <a class="el" href="structrouterlist__t.html">routerlist_t</a> *rl)</td></tr>
<tr class="separator:a6bbb04e1dbdbbde5ad2089aac715d9cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd620fb5cbc29f6895ae016c0240d9a6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#afd620fb5cbc29f6895ae016c0240d9a6">esc_router_info</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router)</td></tr>
<tr class="separator:afd620fb5cbc29f6895ae016c0240d9a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf38df620524abf6789bd31196b07697"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#aaf38df620524abf6789bd31196b07697">routers_sort_by_identity</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *routers)</td></tr>
<tr class="separator:aaf38df620524abf6789bd31196b07697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8989395a52cfb9cb553c9eebf44395eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="routerlist_8c.html#a8989395a52cfb9cb553c9eebf44395eb">refresh_all_country_info</a> (void)</td></tr>
<tr class="separator:a8989395a52cfb9cb553c9eebf44395eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Code to maintain and access the global list of routerinfos for known servers. </p>
<p>A "routerinfo_t" object represents a single self-signed router descriptor, as generated by a Tor relay in order to tell the rest of the world about its keys, address, and capabilities. An "extrainfo_t" object represents an adjunct "extra-info" object, certified by a corresponding router descriptor, reporting more information about the relay that nearly all users will not need.</p>
<p>Most users will not use router descriptors for most relays. Instead, they use the information in microdescriptors and in the consensus networkstatus.</p>
<p>Right now, <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> objects are used in these ways: </p><ul>
<li>
By clients, in order to learn about bridge keys and capabilities. (Bridges aren't listed in the consensus networkstatus, so they can't have microdescriptors.) </li>
<li>
By relays, since relays want more information about other relays than they can learn from microdescriptors. (TODO: Is this still true?) </li>
<li>
By authorities, which receive them and use them to generate the consensus and the microdescriptors. </li>
<li>
By all directory caches, which download them in case somebody else wants them. </li>
</ul>
<p>Routerinfos are mostly created by parsing them from a string, in <a class="el" href="routerparse_8c.html" title="Code to parse and validate router descriptors, consenus directories, and similar objects. ">routerparse.c</a>. We store them to disk on receiving them, and periodically discard the ones we don't need. On restarting, we re-read them from disk. (This also applies to extrainfo documents, if we are configured to fetch them.)</p>
<p>In order to keep our list of routerinfos up-to-date, we periodically check whether there are any listed in the latest consensus (or in the votes from other authorities, if we are an authority) that we don't have. (This also applies to extrainfo documents, if we are configured to fetch them.)</p>
<p>Almost nothing in Tor should use a <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> to refer directly to a relay; instead, almost everything should use <a class="el" href="structnode__t.html">node_t</a> (implemented in <a class="el" href="nodelist_8c.html" title="Structures and functions for tracking what we know about the routers on the Tor network, and correlating information from networkstatus, routerinfo, and microdescs. ">nodelist.c</a>), which provides a common interface to <a class="el" href="structrouterinfo__t.html">routerinfo_t</a>, <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>, and microdescriptor_t.</p>
<p><br />
</p>
<p>This module also has some of the functions used for choosing random nodes according to different rules and weights. Historically, they were all in this module. Now, they are spread across this module, <a class="el" href="nodelist_8c.html" title="Structures and functions for tracking what we know about the routers on the Tor network, and correlating information from networkstatus, routerinfo, and microdescs. ">nodelist.c</a>, and <a class="el" href="networkstatus_8c.html" title="Functions and structures for handling network status documents as a client or cache. ">networkstatus.c</a>. (TODO: Fix that.)</p>
<p><br />
</p>
<p>(For historical reasons) this module also contains code for handling the list of fallback directories, the list of directory authorities, and the list of authority certificates.</p>
<p>For the directory authorities, we have a list containing the public identity key, and contact points, for each authority. The authorities receive descriptors from relays, and publish consensuses, descriptors, and microdescriptors. This list is pre-configured.</p>
<p>Fallback directories are well-known, stable, but untrusted directory caches that clients which have not yet bootstrapped can use to get their first networkstatus consensus, in order to find out where the Tor network really is. This list is pre-configured in fallback_dirs.inc. Every authority also serves as a fallback.</p>
<p>Both fallback directories and directory authorities are are represented by a <a class="el" href="structdir__server__t.html">dir_server_t</a>.</p>
<p>Authority certificates are signed with authority identity keys; they are used to authenticate shorter-term authority signing keys. We fetch them when we find a consensus or a vote that has been signed with a signing key we don't recognize. We cache them on disk and load them on startup. Authority operators generate them with the "tor-gencert" utility.</p>
<p>TODO: Authority certificates should be a separate module.</p>
<p>TODO: <a class="el" href="structdir__server__t.html">dir_server_t</a> stuff should be in a separate module. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac65d6dd564991e2c75984d3bfffa8489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac65d6dd564991e2c75984d3bfffa8489">&#9670;&nbsp;</a></span>BRIDGE_MIN_BELIEVABLE_BANDWIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BRIDGE_MIN_BELIEVABLE_BANDWIDTH&#160;&#160;&#160;20000  /* 20 kB/sec */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When weighting bridges, enforce these values as lower and upper bound for believable bandwidth, because there is no way for us to verify a bridge's bandwidth currently. </p>

</div>
</div>
<a id="a2faac946022d00a1c03e7500035e554e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2faac946022d00a1c03e7500035e554e">&#9670;&nbsp;</a></span>DEFAULT_MAX_BELIEVABLE_BANDWIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MAX_BELIEVABLE_BANDWIDTH&#160;&#160;&#160;10000000 /* 10 MB/sec */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do not weight any declared bandwidth more than this much when picking routers by bandwidth. </p>

</div>
</div>
<a id="a501f03dd9c0a7f729bf1943980dd779a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501f03dd9c0a7f729bf1943980dd779a">&#9670;&nbsp;</a></span>DIR_503_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_503_TIMEOUT&#160;&#160;&#160;(60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How long do we avoid using a directory server after it's given us a 503? </p>

</div>
</div>
<a id="a3b2fa0f44d769352c2fc2782851e78c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b2fa0f44d769352c2fc2782851e78c9">&#9670;&nbsp;</a></span>DSMAP_FOREACH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DSMAP_FOREACH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">map, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">keyvar, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">valvar&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">DIGESTMAP_FOREACH(dsmap_to_digestmap(map), keyvar, <a class="code" href="structdownload__status__t.html">download_status_t</a> *, \</div><div class="line">                    valvar)</div><div class="ttc" id="structdownload__status__t_html"><div class="ttname"><a href="structdownload__status__t.html">download_status_t</a></div><div class="ttdef"><b>Definition:</b> or.h:1969</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa11ff5a6796fda379d75a47283fbc6c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa11ff5a6796fda379d75a47283fbc6c4">&#9670;&nbsp;</a></span>DUMMY_DOWNLOAD_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUMMY_DOWNLOAD_INTERVAL&#160;&#160;&#160;(20*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How often should we launch a server/authority request to be sure of getting a guess for our IP? </p>

</div>
</div>
<a id="a956d00f098afe798d8d96c486bcbe119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a956d00f098afe798d8d96c486bcbe119">&#9670;&nbsp;</a></span>MAX_DL_TO_DELAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_DL_TO_DELAY&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If we want fewer than this many descriptors, wait until we want more, or until TestingClientMaxIntervalWithoutRequest has passed. </p>

</div>
</div>
<a id="ac93c736ae3e827d624f69cbbf789f089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac93c736ae3e827d624f69cbbf789f089">&#9670;&nbsp;</a></span>MIN_DL_PER_REQUEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_DL_PER_REQUEST&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Don't split our requests so finely that we are requesting fewer than this number per server. </p>

</div>
</div>
<a id="aa1a6ae3768b20ddc475d15462d7f2066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1a6ae3768b20ddc475d15462d7f2066">&#9670;&nbsp;</a></span>MIN_REQUESTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_REQUESTS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>To prevent a single screwy cache from confusing us by selective reply, try to split our requests into at least this many requests. </p>

</div>
</div>
<a id="aef0ac4078d0a98c632a076c991ceec11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef0ac4078d0a98c632a076c991ceec11">&#9670;&nbsp;</a></span>RETRY_ALTERNATE_IP_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RETRY_ALTERNATE_IP_VERSION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">retry_label</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">STMT_BEGIN                                                                  \</div><div class="line">    if (result == NULL &amp;&amp; try_ip_pref &amp;&amp; options-&gt;ClientUseIPv4               \</div><div class="line">        &amp;&amp; <a class="code" href="policies_8c.html#a031a54e604699e45044acfd94930585e">fascist_firewall_use_ipv6</a>(options) &amp;&amp; !server_mode(options)        \</div><div class="line">        &amp;&amp; !n_busy) {                                                         \</div><div class="line">      n_excluded = 0;                                                         \</div><div class="line">      n_busy = 0;                                                             \</div><div class="line">      try_ip_pref = 0;                                                        \</div><div class="line">      goto retry_label;                                                       \</div><div class="line">    }                                                                         \</div><div class="line">  STMT_END                                                                    \</div><div class="ttc" id="policies_8c_html_a031a54e604699e45044acfd94930585e"><div class="ttname"><a href="policies_8c.html#a031a54e604699e45044acfd94930585e">fascist_firewall_use_ipv6</a></div><div class="ttdeci">int fascist_firewall_use_ipv6(const or_options_t *options)</div><div class="ttdef"><b>Definition:</b> policies.c:426</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="accf798d9341519768066d7a2e12ac810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accf798d9341519768066d7a2e12ac810">&#9670;&nbsp;</a></span>RETRY_WITHOUT_EXCLUDE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RETRY_WITHOUT_EXCLUDE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">retry_label</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">STMT_BEGIN                                                                  \</div><div class="line">    if (result == NULL &amp;&amp; try_excluding &amp;&amp; !options-&gt;StrictNodes              \</div><div class="line">        &amp;&amp; n_excluded &amp;&amp; !n_busy) {                                           \</div><div class="line">      try_excluding = 0;                                                      \</div><div class="line">      n_excluded = 0;                                                         \</div><div class="line">      n_busy = 0;                                                             \</div><div class="line">      try_ip_pref = 1;                                                        \</div><div class="line">      goto retry_label;                                                       \</div><div class="line">    }                                                                         \</div><div class="line">  STMT_END</div></div><!-- fragment -->
</div>
</div>
<a id="acf45d1ee2d8a2e7049d2496e5cbac0df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf45d1ee2d8a2e7049d2496e5cbac0df">&#9670;&nbsp;</a></span>ROUTER_ALLOW_UPTIME_DRIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_ALLOW_UPTIME_DRIFT&#160;&#160;&#160;(6*60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We allow uptime to vary from how much it ought to be by this much. </p>

</div>
</div>
<a id="af6db042b937e7cb28cd3c73546b60aff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6db042b937e7cb28cd3c73546b60aff">&#9670;&nbsp;</a></span>ROUTER_MAX_COSMETIC_TIME_DIFFERENCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_MAX_COSMETIC_TIME_DIFFERENCE&#160;&#160;&#160;(2*60*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Any changes in a router descriptor's publication time larger than this are automatically non-cosmetic. </p>

</div>
</div>
<a id="a271c4eb7f810016393162f8612592985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a271c4eb7f810016393162f8612592985">&#9670;&nbsp;</a></span>SDMAP_FOREACH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDMAP_FOREACH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">map, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">keyvar, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">valvar&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">DIGESTMAP_FOREACH(sdmap_to_digestmap(map), keyvar, <a class="code" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *, \</div><div class="line">                    valvar)</div><div class="ttc" id="structsigned__descriptor__t_html"><div class="ttname"><a href="structsigned__descriptor__t.html">signed_descriptor_t</a></div><div class="ttdef"><b>Definition:</b> or.h:2009</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0642e00994970234101190ca32fbf091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0642e00994970234101190ca32fbf091">&#9670;&nbsp;</a></span>authority_cert_dl_failed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void authority_cert_dl_failed </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>signing_key_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when an attempt to download a certificate with the authority with ID <b>id_digest</b> and, if not NULL, signed with key signing_key_digest fails with HTTP response code <b>status</b>: remember the failure, so we don't try again immediately. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a0642e00994970234101190ca32fbf091_cgraph.png" border="0" usemap="#routerlist_8c_a0642e00994970234101190ca32fbf091_cgraph" alt=""/></div>
<map name="routerlist_8c_a0642e00994970234101190ca32fbf091_cgraph" id="routerlist_8c_a0642e00994970234101190ca32fbf091_cgraph">
<area shape="rect" id="node2" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="209,5,323,32"/>
</map>
</div>

</div>
</div>
<a id="af0674d915ac20d064542496c8a8c2c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0674d915ac20d064542496c8a8c2c26">&#9670;&nbsp;</a></span>authority_cert_dl_looks_uncertain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authority_cert_dl_looks_uncertain </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff when we've been getting enough failures when trying to download the certificate with ID digest <b>id_digest</b> that we're willing to start bugging the user about it. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_af0674d915ac20d064542496c8a8c2c26_cgraph.png" border="0" usemap="#routerlist_8c_af0674d915ac20d064542496c8a8c2c26_cgraph" alt=""/></div>
<map name="routerlist_8c_af0674d915ac20d064542496c8a8c2c26_cgraph" id="routerlist_8c_af0674d915ac20d064542496c8a8c2c26_cgraph">
<area shape="rect" id="node2" href="directory_8c.html#a59a315ee3b1551a73aceac163faecd85" title="download_status_get\l_n_failures" alt="" coords="209,5,355,47"/>
</map>
</div>

</div>
</div>
<a id="a2bb77cd705f2c621023fff9a114c01bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb77cd705f2c621023fff9a114c01bf">&#9670;&nbsp;</a></span>authority_cert_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void authority_cert_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td>
          <td class="paramname"><em>cert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free storage held in <b>cert</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_cgraph.png" border="0" usemap="#routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_cgraph" alt=""/></div>
<map name="routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_cgraph" id="routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_cgraph">
<area shape="rect" id="node2" href="crypto_8c.html#a2a5f687763115d7c79f977a0abfddaff" title="crypto_pk_free" alt="" coords="184,5,292,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_icgraph.png" border="0" usemap="#routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_icgraph" alt=""/></div>
<map name="routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_icgraph" id="routerlist_8c_a2bb77cd705f2c621023fff9a114c01bf_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#a0b3529b215fcf74c3d7a14a97b4bb541" title="networkstatus_vote_free" alt="" coords="184,5,349,32"/>
<area shape="rect" id="node4" href="router_8h.html#a278cf107b4a9b636b105ec5581b2f427" title="router_free_all" alt="" coords="215,56,319,83"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#a5903397efb4437a9f991843962369b72" title="networkstatus_free_all" alt="" coords="397,5,551,32"/>
</map>
</div>

</div>
</div>
<a id="a4f963147c4e0b848b35c2bb5af493163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f963147c4e0b848b35c2bb5af493163">&#9670;&nbsp;</a></span>authority_cert_get_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void authority_cert_get_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>certs_out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add every known <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> to <b>certs_out</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a4f963147c4e0b848b35c2bb5af493163_cgraph.png" border="0" usemap="#routerlist_8c_a4f963147c4e0b848b35c2bb5af493163_cgraph" alt=""/></div>
<map name="routerlist_8c_a4f963147c4e0b848b35c2bb5af493163_cgraph" id="routerlist_8c_a4f963147c4e0b848b35c2bb5af493163_cgraph">
<area shape="rect" id="node2" href="container_8c.html#accf59a8b7d39a4286ff99653b6878006" title="smartlist_add" alt="" coords="200,5,300,32"/>
</map>
</div>

</div>
</div>
<a id="a58983e59cd226450674e7a11edc59dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58983e59cd226450674e7a11edc59dad">&#9670;&nbsp;</a></span>authority_cert_get_by_digests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a>* authority_cert_get_by_digests </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sk_digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the v3 authority certificate with signing key matching <b>sk_digest</b>, for the authority with identity digest <b>id_digest</b>. Return NULL if no such authority is known. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a58983e59cd226450674e7a11edc59dad_cgraph.png" border="0" usemap="#routerlist_8c_a58983e59cd226450674e7a11edc59dad_cgraph" alt=""/></div>
<map name="routerlist_8c_a58983e59cd226450674e7a11edc59dad_cgraph" id="routerlist_8c_a58983e59cd226450674e7a11edc59dad_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="180,13,267,39"/>
</map>
</div>

</div>
</div>
<a id="ab24c5c3729a4bf122f277447df1c5e8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24c5c3729a4bf122f277447df1c5e8c">&#9670;&nbsp;</a></span>authority_cert_get_by_sk_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a>* authority_cert_get_by_sk_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sk_digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the newest v3 authority certificate whose directory signing key has digest <b>sk_digest</b>. Return NULL if no such certificate is known. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ab24c5c3729a4bf122f277447df1c5e8c_cgraph.png" border="0" usemap="#routerlist_8c_ab24c5c3729a4bf122f277447df1c5e8c_cgraph" alt=""/></div>
<map name="routerlist_8c_ab24c5c3729a4bf122f277447df1c5e8c_cgraph" id="routerlist_8c_ab24c5c3729a4bf122f277447df1c5e8c_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="217,5,303,32"/>
<area shape="rect" id="node3" href="router_8c.html#aa3cf620c6ba1423c14c6cb57955e0408" title="get_my_v3_legacy_cert" alt="" coords="180,56,340,83"/>
</map>
</div>

</div>
</div>
<a id="a339be9cf9f2920c65e6e938e3de8b3b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a339be9cf9f2920c65e6e938e3de8b3b8">&#9670;&nbsp;</a></span>authority_cert_get_newest_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a>* authority_cert_get_newest_by_id </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the newest v3 authority certificate whose v3 authority identity key has digest <b>id_digest</b>. Return NULL if no such authority is known, or it has no certificate. </p>

</div>
</div>
<a id="a1414b47a61105dd75d01ba4966c511fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1414b47a61105dd75d01ba4966c511fc">&#9670;&nbsp;</a></span>authority_cert_is_blacklisted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int authority_cert_is_blacklisted </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td>
          <td class="paramname"><em>cert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>cert</b> authenticates some atuhority signing key which, because of the old openssl heartbleed vulnerability, should never be trusted. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a1414b47a61105dd75d01ba4966c511fc_cgraph.png" border="0" usemap="#routerlist_8c_a1414b47a61105dd75d01ba4966c511fc_cgraph" alt=""/></div>
<map name="routerlist_8c_a1414b47a61105dd75d01ba4966c511fc_cgraph" id="routerlist_8c_a1414b47a61105dd75d01ba4966c511fc_cgraph">
<area shape="rect" id="node2" href="util__format_8c.html#a8b8940b2ef607928eb3dca4850567ea5" title="base16_encode" alt="" coords="240,5,353,32"/>
</map>
</div>

</div>
</div>
<a id="a91f37bda7b9149b1da0f1abfff66ab23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f37bda7b9149b1da0f1abfff66ab23">&#9670;&nbsp;</a></span>authority_certs_fetch_missing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void authority_certs_fetch_missing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir_hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to download any v3 authority certificates that we may be missing. If <b>status</b> is provided, try to get all the ones that were used to sign <b>status</b>. Additionally, try to have a non-expired certificate for every V3 authority in trusted_dir_servers. Don't fetch certificates we already have.</p>
<p>If dir_hint is non-NULL, it's the identity digest for a directory that we've just successfully retrieved a consensus or certificates from, so try it first to fetch any missing certificates. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_cgraph.png" border="0" usemap="#routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_cgraph" alt=""/></div>
<map name="routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_cgraph" id="routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_cgraph">
<area shape="rect" id="node2" href="dirserv_8c.html#a5a9cf7f465217dbc8142aaf11384abbf" title="directory_caches_unknown\l_auth_certs" alt="" coords="197,5,377,47"/>
<area shape="rect" id="node4" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf" title="should_delay_dir_fetches" alt="" coords="203,71,372,98"/>
<area shape="rect" id="node3" href="router_8c.html#ab23297b12b098da9eac98126a587aa3b" title="dir_server_mode" alt="" coords="425,13,544,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_icgraph.png" border="0" usemap="#routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_icgraph" alt=""/></div>
<map name="routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_icgraph" id="routerlist_8c_a91f37bda7b9149b1da0f1abfff66ab23_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#aac5e0a37016a04c309a791ae15ecc86a" title="update_certificate\l_downloads" alt="" coords="197,5,323,47"/>
</map>
</div>

</div>
</div>
<a id="a8b22797a2be55707af8334b747d51047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b22797a2be55707af8334b747d51047">&#9670;&nbsp;</a></span>choose_array_element_by_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC int choose_array_element_by_weight </td>
          <td>(</td>
          <td class="paramtype">const uint64_t *&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_entries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pick a random element of <b>n_entries</b>-element array <b>entries</b>, choosing each element with a probability proportional to its (uint64_t) value, and return the index of that element. If all elements are 0, choose an index at random. Return -1 on error. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8b22797a2be55707af8334b747d51047_cgraph.png" border="0" usemap="#routerlist_8c_a8b22797a2be55707af8334b747d51047_cgraph" alt=""/></div>
<map name="routerlist_8c_a8b22797a2be55707af8334b747d51047_cgraph" id="routerlist_8c_a8b22797a2be55707af8334b747d51047_cgraph">
<area shape="rect" id="node2" href="crypto_8c.html#afe4dc26786171ac644ffa416f7121f0a" title="crypto_rand_int" alt="" coords="225,5,335,32"/>
<area shape="rect" id="node3" href="crypto_8c.html#ad85d7652b99b6a20bffbbe81972b9fa6" title="crypto_rand_uint64" alt="" coords="214,56,346,83"/>
<area shape="rect" id="node4" href="di__ops_8c.html#ab150d442a486218c80f7a0c25ae14c59" title="select_array_member\l_cumulative_timei" alt="" coords="207,107,353,149"/>
</map>
</div>

</div>
</div>
<a id="a6ffeae0d92b2c4eec18c14453732f726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ffeae0d92b2c4eec18c14453732f726">&#9670;&nbsp;</a></span>clear_dir_servers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clear_dir_servers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove all members from the list of dir servers. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a6ffeae0d92b2c4eec18c14453732f726_icgraph.png" border="0" usemap="#routerlist_8c_a6ffeae0d92b2c4eec18c14453732f726_icgraph" alt=""/></div>
<map name="routerlist_8c_a6ffeae0d92b2c4eec18c14453732f726_icgraph" id="routerlist_8c_a6ffeae0d92b2c4eec18c14453732f726_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a087a998f551e9fff456d9e4ce662668e" title="routerlist_free_all" alt="" coords="175,5,296,32"/>
</map>
</div>

</div>
</div>
<a id="a9bd4c9992a1cf27e95e2829ae40c7b79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bd4c9992a1cf27e95e2829ae40c7b79">&#9670;&nbsp;</a></span>dir_server_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dir_server_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__server__t.html">dir_server_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a directory server to the global list(s). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a9bd4c9992a1cf27e95e2829ae40c7b79_cgraph.png" border="0" usemap="#routerlist_8c_a9bd4c9992a1cf27e95e2829ae40c7b79_cgraph" alt=""/></div>
<map name="routerlist_8c_a9bd4c9992a1cf27e95e2829ae40c7b79_cgraph" id="routerlist_8c_a9bd4c9992a1cf27e95e2829ae40c7b79_cgraph">
<area shape="rect" id="node2" href="container_8c.html#accf59a8b7d39a4286ff99653b6878006" title="smartlist_add" alt="" coords="190,5,290,32"/>
<area shape="rect" id="node3" href="nodelist_8c.html#a32099caf417dbc0e15ea398b1bc2ea16" title="router_dir_info_changed" alt="" coords="160,56,320,83"/>
<area shape="rect" id="node4" href="rendservice_8c.html#ac44e79078bc122e1f77d770919baffa3" title="rend_hsdir_routers\l_changed" alt="" coords="368,49,497,90"/>
</map>
</div>

</div>
</div>
<a id="a5062bf36695d11df627a5d3cda2954fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5062bf36695d11df627a5d3cda2954fe">&#9670;&nbsp;</a></span>dump_routerlist_mem_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_routerlist_mem_usage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log information about how much memory is being used for routerlist, at log level <b>severity</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a5062bf36695d11df627a5d3cda2954fe_cgraph.png" border="0" usemap="#routerlist_8c_a5062bf36695d11df627a5d3cda2954fe_cgraph" alt=""/></div>
<map name="routerlist_8c_a5062bf36695d11df627a5d3cda2954fe_cgraph" id="routerlist_8c_a5062bf36695d11df627a5d3cda2954fe_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a048192107dfd3f8f22b9e599e45d0b34" title="tor_log" alt="" coords="200,13,261,39"/>
</map>
</div>

</div>
</div>
<a id="afd620fb5cbc29f6895ae016c0240d9a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd620fb5cbc29f6895ae016c0240d9a6">&#9670;&nbsp;</a></span>esc_router_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* esc_router_info </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate and return a new string representing the contact info and platform string for <b>router</b>, surrounded by quotes and using standard C escapes.</p>
<p>THIS FUNCTION IS NOT REENTRANT. Don't call it from outside the main thread. Also, each call invalidates the last-returned value, so don't try log_warn(LD_GENERAL, "%s %s", esc_router_info(a), esc_router_info(b));</p>
<p>If <b>router</b> is NULL, it just frees its internal memory and returns. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_cgraph.png" border="0" usemap="#routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_cgraph" alt=""/></div>
<map name="routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_cgraph" id="routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_cgraph">
<area shape="rect" id="node2" href="util_8c.html#ac152e18c6deb4f05823053bb2980a8e4" title="esc_for_log" alt="" coords="164,5,253,32"/>
<area shape="rect" id="node3" href="compat_8c.html#ade97970c1d8a691241adac739c4f9b12" title="tor_asprintf" alt="" coords="165,56,252,83"/>
<area shape="rect" id="node4" href="compat_8c.html#a5ef7a08e8b543c0d61f9ef1081d4c1ea" title="tor_vasprintf" alt="" coords="301,56,396,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_icgraph.png" border="0" usemap="#routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_icgraph" alt=""/></div>
<map name="routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_icgraph" id="routerlist_8c_afd620fb5cbc29f6895ae016c0240d9a6_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="164,5,324,47"/>
</map>
</div>

</div>
</div>
<a id="a36bbf9bf41105f61c8f1f5b6ffc3b12b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36bbf9bf41105f61c8f1f5b6ffc3b12b">&#9670;&nbsp;</a></span>extrainfo_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void extrainfo_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structextrainfo__t.html">extrainfo_t</a> *&#160;</td>
          <td class="paramname"><em>extrainfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all storage held by <b>extrainfo</b> </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_cgraph.png" border="0" usemap="#routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_cgraph" alt=""/></div>
<map name="routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_cgraph" id="routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_cgraph">
<area shape="rect" id="node2" href="torcert_8c.html#a69b51896c94df3682f5b40fdffd5daba" title="tor_cert_free" alt="" coords="155,5,249,32"/>
<area shape="rect" id="node3" href="crypto_8c.html#a955f8d276e5213dd68600bf6dee0b9ae" title="memwipe" alt="" coords="297,5,376,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_icgraph.png" border="0" usemap="#routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_icgraph" alt=""/></div>
<map name="routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_icgraph" id="routerlist_8c_a36bbf9bf41105f61c8f1f5b6ffc3b12b_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a278cf107b4a9b636b105ec5581b2f427" title="router_free_all" alt="" coords="155,5,259,32"/>
</map>
</div>

</div>
</div>
<a id="ab49c0521b1d8a01f75abf4438992fd08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49c0521b1d8a01f75abf4438992fd08">&#9670;&nbsp;</a></span>extrainfo_get_by_descriptor_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a>* extrainfo_get_by_descriptor_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the signed descriptor for the <a class="el" href="structextrainfo__t.html">extrainfo_t</a> in our routerlist whose extra-info-digest is <b>digest</b>. Return NULL if no such extra-info document is known. </p>

</div>
</div>
<a id="a0b3d74c73f42fb7ed7acc16a1cacfffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3d74c73f42fb7ed7acc16a1cacfffa">&#9670;&nbsp;</a></span>fallback_dir_server_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdir__server__t.html">dir_server_t</a>* fallback_dir_server_new </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dir_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>or_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *&#160;</td>
          <td class="paramname"><em>addrport_ipv6</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>weight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a new <a class="el" href="structdir__server__t.html">dir_server_t</a> for a fallback directory server at <b>addr</b>:<b>or_port</b>/<b>dir_port</b>, with identity key digest <b>id_digest</b> </p>

</div>
</div>
<a id="a8c5a2d791ec14d51bceebd0201d884a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c5a2d791ec14d51bceebd0201d884a5">&#9670;&nbsp;</a></span>frac_nodes_with_descriptors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double frac_nodes_with_descriptors </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>sl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#afec7ed946efd497dc5d098510c5a2d87">bandwidth_weight_rule_t</a>&#160;</td>
          <td class="paramname"><em>rule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For all nodes in <b>sl</b>, return the fraction of those nodes, weighted by their weighted bandwidths with rule <b>rule</b>, for which we have descriptors. </p>

</div>
</div>
<a id="a40b0857598d14d49c8082667c70bc023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40b0857598d14d49c8082667c70bc023">&#9670;&nbsp;</a></span>get_n_authorities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_n_authorities </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of directory authorities whose type matches some bit set in <b>type</b> </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a40b0857598d14d49c8082667c70bc023_icgraph.png" border="0" usemap="#routerlist_8c_a40b0857598d14d49c8082667c70bc023_icgraph" alt=""/></div>
<map name="routerlist_8c_a40b0857598d14d49c8082667c70bc023_icgraph" id="routerlist_8c_a40b0857598d14d49c8082667c70bc023_icgraph">
<area shape="rect" id="node2" href="entrynodes_8h.html#a958ebeeb4b45f01d919751bbcd6e79b2" title="fetch_bridge_descriptors" alt="" coords="175,5,339,32"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#a7bead3d790b19f3f5894a521526a3531" title="networkstatus_check\l_consensus_signature" alt="" coords="181,57,333,98"/>
<area shape="rect" id="node4" href="networkstatus_8h.html#a6d51fc24064bd6b1e7f3d148bddba693" title="networkstatus_note\l_certs_arrived" alt="" coords="387,57,523,98"/>
</map>
</div>

</div>
</div>
<a id="a589e19badbee6e0257d94d03dcc40ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a589e19badbee6e0257d94d03dcc40ba7">&#9670;&nbsp;</a></span>hex_digest_nickname_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hex_digest_nickname_decode </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hexdigest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>digest_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>nickname_qualifier_char_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>nickname_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper: given an extended nickname in <b>hexdigest</b> try to decode it. Return 0 on success, -1 on failure. Store the result into the DIGEST_LEN-byte buffer at <b>digest_out</b>, the single character at <b>nickname_qualifier_char_out</b>, and the MAXNICKNAME_LEN+1-byte buffer at <b>nickname_out</b>.</p>
<p>The recognized format is: HexName = Dollar? HexDigest NamePart? Dollar = '?' HexDigest = HexChar*20 HexChar = 'a'..'f' | 'A'..'F' | '0'..'9' NamePart = QualChar Name QualChar = '=' | '~' Name = NameChar*(1..MAX_NICKNAME_LEN) NameChar = Any ASCII alphanumeric character </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_cgraph.png" border="0" usemap="#routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_cgraph" alt=""/></div>
<map name="routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_cgraph" id="routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_cgraph">
<area shape="rect" id="node2" href="util__format_8c.html#a6942053f58dd619a86734e55a42d7266" title="base16_decode" alt="" coords="201,13,315,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_icgraph.png" border="0" usemap="#routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_icgraph" alt=""/></div>
<map name="routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_icgraph" id="routerlist_8c_a589e19badbee6e0257d94d03dcc40ba7_icgraph">
<area shape="rect" id="node2" href="nodelist_8h.html#af8ce600bda89ce38020c61ccb3fdd6a6" title="node_get_by_hex_id" alt="" coords="205,5,346,32"/>
<area shape="rect" id="node4" href="routerlist_8h.html#afd0f7cc93c54df7858c6a6fd3f0eb443" title="hex_digest_nickname\l_matches" alt="" coords="201,57,349,98"/>
<area shape="rect" id="node3" href="nodelist_8c.html#a331f404eaf4e481d2826de3ae45bcaff" title="MOCK_IMPL" alt="" coords="397,5,497,32"/>
</map>
</div>

</div>
</div>
<a id="afd0f7cc93c54df7858c6a6fd3f0eb443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd0f7cc93c54df7858c6a6fd3f0eb443">&#9670;&nbsp;</a></span>hex_digest_nickname_matches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hex_digest_nickname_matches </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hexdigest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>identity_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nickname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_named</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper: Return true iff the <b>identity_digest</b> and <b>nickname</b> combination of a router, encoded in hexadecimal, matches <b>hexdigest</b> (which is optionally prefixed with a single dollar sign). Return false if <b>hexdigest</b> is malformed, or it doesn't match. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_afd0f7cc93c54df7858c6a6fd3f0eb443_cgraph.png" border="0" usemap="#routerlist_8c_afd0f7cc93c54df7858c6a6fd3f0eb443_cgraph" alt=""/></div>
<map name="routerlist_8c_afd0f7cc93c54df7858c6a6fd3f0eb443_cgraph" id="routerlist_8c_afd0f7cc93c54df7858c6a6fd3f0eb443_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a589e19badbee6e0257d94d03dcc40ba7" title="hex_digest_nickname\l_decode" alt="" coords="201,5,349,47"/>
<area shape="rect" id="node4" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="232,71,319,98"/>
<area shape="rect" id="node3" href="util__format_8c.html#a6942053f58dd619a86734e55a42d7266" title="base16_decode" alt="" coords="397,13,511,39"/>
</map>
</div>

</div>
</div>
<a id="a940b9f42b7b36f3fc3721aa2536d7cdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a940b9f42b7b36f3fc3721aa2536d7cdf">&#9670;&nbsp;</a></span>hexdigest_to_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hexdigest_to_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hexdigest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If hexdigest is correctly formed, base16_decode it into digest, which must have DIGEST_LEN space in it. Return 0 on success, -1 on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a940b9f42b7b36f3fc3721aa2536d7cdf_cgraph.png" border="0" usemap="#routerlist_8c_a940b9f42b7b36f3fc3721aa2536d7cdf_cgraph" alt=""/></div>
<map name="routerlist_8c_a940b9f42b7b36f3fc3721aa2536d7cdf_cgraph" id="routerlist_8c_a940b9f42b7b36f3fc3721aa2536d7cdf_cgraph">
<area shape="rect" id="node2" href="util__format_8c.html#a6942053f58dd619a86734e55a42d7266" title="base16_decode" alt="" coords="192,5,305,32"/>
</map>
</div>

</div>
</div>
<a id="a33e8618001c42bd50575051362aaffa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e8618001c42bd50575051362aaffa2">&#9670;&nbsp;</a></span>launch_descriptor_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void launch_descriptor_downloads </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>purpose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>downloadable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a <b>purpose</b> (FETCH_MICRODESC or FETCH_SERVERDESC) and a list of router descriptor digests or microdescriptor digest256s in <b>downloadable</b>, decide whether to delay fetching until we have more. If we don't want to delay, launch one or more requests to the appropriate directory authorities. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a33e8618001c42bd50575051362aaffa2_cgraph.png" border="0" usemap="#routerlist_8c_a33e8618001c42bd50575051362aaffa2_cgraph" alt=""/></div>
<map name="routerlist_8c_a33e8618001c42bd50575051362aaffa2_cgraph" id="routerlist_8c_a33e8618001c42bd50575051362aaffa2_cgraph">
<area shape="rect" id="node2" href="dirserv_8c.html#ab38d643312052d4bfdb7d49dcba344a6" title="directory_fetches_dir\l_info_early" alt="" coords="247,35,389,76"/>
<area shape="rect" id="node3" href="dirserv_8c.html#a0b84786e17352524036694baf1955167" title="directory_fetches_from\l_authorities" alt="" coords="437,35,592,76"/>
<area shape="rect" id="node4" href="router_8c.html#afa75de94186fffc8f373de610ae4cab3" title="should_refuse_unknown\l_exits" alt="" coords="640,5,803,47"/>
<area shape="rect" id="node6" href="router_8c.html#ab23297b12b098da9eac98126a587aa3b" title="dir_server_mode" alt="" coords="662,71,781,98"/>
<area shape="rect" id="node5" href="networkstatus_8c.html#aba1790be4b1cea243c3dac989ad1b05c" title="networkstatus_get_param" alt="" coords="851,13,1023,39"/>
</map>
</div>

</div>
</div>
<a id="a19e2aa4caae99a8eba67490a4d920794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e2aa4caae99a8eba67490a4d920794">&#9670;&nbsp;</a></span>list_pending_microdesc_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_pending_microdesc_downloads </td>
          <td>(</td>
          <td class="paramtype">digest256map_t *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For every microdescriptor we are currently downloading by descriptor digest, set result[d] to (void*)1. </p>

</div>
</div>
<a id="abc402873af8a53772da45a4031b570b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc402873af8a53772da45a4031b570b4">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[1/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list_authority_ids_with_downloads&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a list of authority ID digests with potentially enumerable lists of <a class="el" href="structdownload__status__t.html">download_status_t</a> objects; used by controller GETINFO queries. </p>

</div>
</div>
<a id="a9086bb58ff626a397ab9e9f2f44d524d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9086bb58ff626a397ab9e9f2f44d524d">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[2/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdownload__status__t.html">download_status_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">id_only_download_status_for_authority_id&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *digest)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given an authority ID digest, return a pointer to the default download status, or NULL if there is no such entry in trusted_dir_certs </p>

</div>
</div>
<a id="afd5530b08ba4f684ec0bf3583257ba26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd5530b08ba4f684ec0bf3583257ba26">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[3/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list_sk_digests_for_authority_id&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *digest)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given an authority ID digest, return a smartlist of signing key digests for which <a class="el" href="structdownload__status__t.html">download_status_t</a> is potentially queryable, or NULL if no such authority ID digest is known. </p>

</div>
</div>
<a id="a94772fdbbbfc2973662cb5f08acc6ec6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94772fdbbbfc2973662cb5f08acc6ec6">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[4/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdownload__status__t.html">download_status_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">download_status_for_authority_id_and_sk&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *id_digest, const char *sk_digest)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given an authority ID digest and a signing key digest, return the <a class="el" href="structdownload__status__t.html">download_status_t</a> or NULL if none exists. </p>

</div>
</div>
<a id="a32d42576fb24610f05517f0e92fca275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d42576fb24610f05517f0e92fca275">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[5/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__server__t.html">dir_server_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trusteddirserver_get_by_v3_auth_digest&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *digest)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the <a class="el" href="structdir__server__t.html">dir_server_t</a> for the directory authority whose v3 identity key hashes to <b>digest</b>, or NULL if no such authority is known. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a32d42576fb24610f05517f0e92fca275_cgraph.png" border="0" usemap="#routerlist_8c_a32d42576fb24610f05517f0e92fca275_cgraph" alt=""/></div>
<map name="routerlist_8c_a32d42576fb24610f05517f0e92fca275_cgraph" id="routerlist_8c_a32d42576fb24610f05517f0e92fca275_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="153,5,240,32"/>
</map>
</div>

</div>
</div>
<a id="a2a332003a83b251551e2b084e7f1672d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a332003a83b251551e2b084e7f1672d">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[6/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_get_by_extrainfo_digest&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *digest)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the signed descriptor for the router in our routerlist whose 20-byte extra-info digest is <b>digest</b>. Return NULL if no such router is known. </p>

</div>
</div>
<a id="aa96fada5a8d19d0ea9158e0ff51ae320"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96fada5a8d19d0ea9158e0ff51ae320">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[7/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">STATIC&#160;</td>
          <td class="paramname"><em>was_router_added_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">extrainfo_insert&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="structrouterlist__t.html">routerlist_t</a> *rl, <a class="el" href="structextrainfo__t.html">extrainfo_t</a> *ei, int warn_if_incompatible)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds the <a class="el" href="structextrainfo__t.html">extrainfo_t</a> <b>ei</b> to the routerlist <b>rl</b>, if there is a corresponding router in rl-&gt;routers or rl-&gt;old_routers. Return the status of inserting <b>ei</b>. Free <b>ei</b> if it isn't inserted. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aa96fada5a8d19d0ea9158e0ff51ae320_cgraph.png" border="0" usemap="#routerlist_8c_aa96fada5a8d19d0ea9158e0ff51ae320_cgraph" alt=""/></div>
<map name="routerlist_8c_aa96fada5a8d19d0ea9158e0ff51ae320_cgraph" id="routerlist_8c_aa96fada5a8d19d0ea9158e0ff51ae320_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a30c5482965fda685a86a170304d48532" title="router_get_my_extrainfo" alt="" coords="153,46,316,73"/>
<area shape="rect" id="node3" href="router_8c.html#ac23927b27e54ab8752d8a379b5136b50" title="router_rebuild_descriptor" alt="" coords="364,46,528,73"/>
<area shape="rect" id="node4" href="router_8c.html#a74a228ad9efff13643397a5c02d7bec7" title="router_get_advertised\l_or_port" alt="" coords="576,39,723,80"/>
<area shape="rect" id="node5" href="router_8c.html#a19b606096c7f385bb3db639b1a1c15fe" title="router_get_advertised\l_or_port_by_af" alt="" coords="771,39,917,80"/>
<area shape="rect" id="node6" href="config_8c.html#a8b79c094d201fd02944aa463dcc6433c" title="get_first_advertised\l_port_by_type_af" alt="" coords="983,5,1119,47"/>
<area shape="rect" id="node7" href="router_8c.html#a8bfae58f61a3329fd20f43c378bff0bb" title="router_get_active_listener\l_port_by_type_af" alt="" coords="965,71,1136,112"/>
</map>
</div>

</div>
</div>
<a id="a264fc4b4441c88e689a8428be321d318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a264fc4b4441c88e689a8428be321d318">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[8/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">router_descriptor_is_older_than&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *router, int seconds)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if the signed descriptor of this router is older than <b>seconds</b> seconds. Otherwise return 0. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a264fc4b4441c88e689a8428be321d318_cgraph.png" border="0" usemap="#routerlist_8c_a264fc4b4441c88e689a8428be321d318_cgraph" alt=""/></div>
<map name="routerlist_8c_a264fc4b4441c88e689a8428be321d318_cgraph" id="routerlist_8c_a264fc4b4441c88e689a8428be321d318_cgraph">
<area shape="rect" id="node2" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="153,5,247,32"/>
</map>
</div>

</div>
</div>
<a id="a5e148d5a858adaad0b50f4c869aba05a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e148d5a858adaad0b50f4c869aba05a">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[9/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">STATIC&#160;</td>
          <td class="paramname"><em>void</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">initiate_descriptor_downloads&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *source, int purpose, <a class="el" href="structsmartlist__t.html">smartlist_t</a> *digests, int lo, int hi, int pds_flags)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch downloads for all the descriptors whose digests or digests256 are listed as digests[i] for lo &lt;= i &lt; hi. (Lo and hi may be out of range.) If <b>source</b> is given, download from <b>source</b>; otherwise, download from an appropriate random directory server. </p>

</div>
</div>
<a id="aaf1c16d2f07649504a2f0cb790312337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf1c16d2f07649504a2f0cb790312337">&#9670;&nbsp;</a></span>node_sl_choose_by_bandwidth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structnode__t.html">node_t</a>* node_sl_choose_by_bandwidth </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>sl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#afec7ed946efd497dc5d098510c5a2d87">bandwidth_weight_rule_t</a>&#160;</td>
          <td class="paramname"><em>rule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Choose a random element of status list <b>sl</b>, weighted by the advertised bandwidth of each node </p>

</div>
</div>
<a id="a8989395a52cfb9cb553c9eebf44395eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8989395a52cfb9cb553c9eebf44395eb">&#9670;&nbsp;</a></span>refresh_all_country_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void refresh_all_country_info </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when we change a node set, or when we reload the geoip IPv4 list: recompute all country info in all configuration node sets and in the routerlist. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8989395a52cfb9cb553c9eebf44395eb_cgraph.png" border="0" usemap="#routerlist_8c_a8989395a52cfb9cb553c9eebf44395eb_cgraph" alt=""/></div>
<map name="routerlist_8c_a8989395a52cfb9cb553c9eebf44395eb_cgraph" id="routerlist_8c_a8989395a52cfb9cb553c9eebf44395eb_cgraph">
<area shape="rect" id="node2" href="routerset_8c.html#a2cd388ad8f6957277538a1e52ae68066" title="routerset_refresh_countries" alt="" coords="213,5,393,32"/>
<area shape="rect" id="node3" href="nodelist_8c.html#a2f725fda356a7135d8997a544bcd0875" title="nodelist_refresh_countries" alt="" coords="216,56,391,83"/>
<area shape="rect" id="node4" href="nodelist_8c.html#acca4d59803258ee170491868c5cb4824" title="node_set_country" alt="" coords="441,56,567,83"/>
</map>
</div>

</div>
</div>
<a id="a91d657f054dd82fbaf519c02deb5ec51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91d657f054dd82fbaf519c02deb5ec51">&#9670;&nbsp;</a></span>router_add_extrainfo_to_routerlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="or_8h.html#a7c96814e647f1b5b99e501ea5763842f">was_router_added_t</a> router_add_extrainfo_to_routerlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structextrainfo__t.html">extrainfo_t</a> *&#160;</td>
          <td class="paramname"><em>ei</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_fetch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Insert <b>ei</b> into the routerlist, or free it. Other arguments are as for <a class="el" href="routerlist_8c.html#ab1878aef0f1dd92c783d5477248b985d">router_add_to_routerlist()</a>. Return ROUTER_ADDED_SUCCESSFULLY iff we actually inserted it, ROUTER_BAD_EI otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a91d657f054dd82fbaf519c02deb5ec51_cgraph.png" border="0" usemap="#routerlist_8c_a91d657f054dd82fbaf519c02deb5ec51_cgraph" alt=""/></div>
<map name="routerlist_8c_a91d657f054dd82fbaf519c02deb5ec51_cgraph" id="routerlist_8c_a91d657f054dd82fbaf519c02deb5ec51_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1" title="router_get_routerlist" alt="" coords="193,13,331,39"/>
</map>
</div>

</div>
</div>
<a id="aba23320c5a1abde91478e430c7bd42bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba23320c5a1abde91478e430c7bd42bd">&#9670;&nbsp;</a></span>router_add_running_nodes_to_smartlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_add_running_nodes_to_smartlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>sl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allow_invalid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_uptime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_guard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pref_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct_conn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add every suitable node from our nodelist to <b>sl</b>, so that we can pick a node for a circuit. </p>

</div>
</div>
<a id="ab1878aef0f1dd92c783d5477248b985d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1878aef0f1dd92c783d5477248b985d">&#9670;&nbsp;</a></span>router_add_to_routerlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="or_8h.html#a7c96814e647f1b5b99e501ea5763842f">was_router_added_t</a> router_add_to_routerlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_fetch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add <b>router</b> to the routerlist, if we don't already have it. Replace older entries (if any) with the same key. Note: Callers should not hold their pointers to <b>router</b> if this function fails; <b>router</b> will either be inserted into the routerlist or freed. Similarly, even if this call succeeds, they should not hold their pointers to <b>router</b> after subsequent calls with other routerinfo's &ndash; they might cause the original routerinfo to get freed.</p>
<p>Returns the status for the operation. Might set *<b>msg</b> if it wants the poster of the router to know something.</p>
<p>If <b>from_cache</b>, this descriptor came from our disk cache. If <b>from_fetch</b>, we received it in response to a request we made. (If both are false, that means it was uploaded to us as an auth dir server or via the controller.)</p>
<p>This function should be called <em>after</em> routers_update_status_from_consensus_networkstatus; subsequently, you should call router_rebuild_store and routerlist_descriptors_added. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ab1878aef0f1dd92c783d5477248b985d_cgraph.png" border="0" usemap="#routerlist_8c_ab1878aef0f1dd92c783d5477248b985d_cgraph" alt=""/></div>
<map name="routerlist_8c_ab1878aef0f1dd92c783d5477248b985d_cgraph" id="routerlist_8c_ab1878aef0f1dd92c783d5477248b985d_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a8522dfca1851365846ddef293a416656" title="authdir_mode_handles\l_descs" alt="" coords="212,23,364,65"/>
<area shape="rect" id="node3" href="router_8c.html#a9bcde98c72c7ec1b15a6c0837c6bec26" title="authdir_mode_any_nonhidserv" alt="" coords="412,5,611,32"/>
<area shape="rect" id="node4" href="router_8c.html#aab8dc47aca12ebfdd7c4a01d7fc4290b" title="authdir_mode_any_main" alt="" coords="659,31,821,57"/>
</map>
</div>

</div>
</div>
<a id="a0240e623457d6c4622dd3d9dad2a652f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0240e623457d6c4622dd3d9dad2a652f">&#9670;&nbsp;</a></span>router_addr_is_trusted_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_addr_is_trusted_dir </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>addr</b> is the address of one of our trusted directory authorities. </p>

</div>
</div>
<a id="a147ff0bee802b71e9c9e3bed69255f85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147ff0bee802b71e9c9e3bed69255f85">&#9670;&nbsp;</a></span>router_choose_random_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structnode__t.html">node_t</a>* router_choose_random_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>excludedsmartlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">routerset_t *&#160;</td>
          <td class="paramname"><em>excludedset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a274fd236a2f0fc116815f9077f5ca82c">router_crn_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a random running node from the nodelist. Never pick a node that is in <b>excludedsmartlist</b>, or which matches <b>excludedset</b>, even if they are the only nodes available. If <b>CRN_NEED_UPTIME</b> is set in flags and any router has more than a minimum uptime, return one of those. If <b>CRN_NEED_CAPACITY</b> is set in flags, weight your choice by the advertised capacity of each router. If <b>CRN_ALLOW_INVALID</b> is not set in flags, consider only Valid routers. If <b>CRN_NEED_GUARD</b> is set in flags, consider only Guard routers. If <b>CRN_WEIGHT_AS_EXIT</b> is set in flags, we weight bandwidths as if picking an exit node, otherwise we weight bandwidths for picking a relay node (that is, possibly discounting exit nodes). If <b>CRN_NEED_DESC</b> is set in flags, we only consider nodes that have a routerinfo or microdescriptor &ndash; that is, enough info to be used to build a circuit. If <b>CRN_PREF_ADDR</b> is set in flags, we only consider nodes that have an address that is preferred by the ClientPreferIPv6ORPort setting (regardless of this flag, we exclude nodes that aren't allowed by the firewall, including ClientUseIPv4 0 and <a class="el" href="policies_8c.html#a031a54e604699e45044acfd94930585e">fascist_firewall_use_ipv6()</a> == 0). </p>

</div>
</div>
<a id="ac41971537948013e1684f04ae286affd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac41971537948013e1684f04ae286affd">&#9670;&nbsp;</a></span>router_differences_are_cosmetic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_differences_are_cosmetic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>r1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>r2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff the only differences between r1 and r2 are such that would not cause a recent (post 0.1.1.6) dirserver to republish. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ac41971537948013e1684f04ae286affd_cgraph.png" border="0" usemap="#routerlist_8c_ac41971537948013e1684f04ae286affd_cgraph" alt=""/></div>
<map name="routerlist_8c_ac41971537948013e1684f04ae286affd_cgraph" id="routerlist_8c_ac41971537948013e1684f04ae286affd_cgraph">
<area shape="rect" id="node2" href="crypto_8c.html#a4b5a83669b5e7cbbcdbc8f635d95f8cb" title="crypto_pk_eq_keys" alt="" coords="180,5,315,32"/>
<area shape="rect" id="node5" href="policies_8c.html#a0364d20db6a5e87f6c190a70bcf9e5f6" title="addr_policies_eq" alt="" coords="188,56,307,83"/>
<area shape="rect" id="node3" href="crypto_8c.html#a46a418431f50aacae8a7392edcbb1d2b" title="crypto_pk_cmp_keys" alt="" coords="363,5,509,32"/>
<area shape="rect" id="node4" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="557,5,656,32"/>
</map>
</div>

</div>
</div>
<a id="aa0f6ecb349cc9b484a19c1a0397dc1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f6ecb349cc9b484a19c1a0397dc1ed">&#9670;&nbsp;</a></span>router_digest_is_fallback_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_digest_is_fallback_dir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if any fallback dirserver's identity key hashes to <b>digest</b>, or 0 if no such fallback is in the list of fallback_dir_servers. (fallback_dir_servers is affected by the FallbackDir and UseDefaultFallbackDirs torrc options.) The list of fallback directories includes the list of authorities. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aa0f6ecb349cc9b484a19c1a0397dc1ed_cgraph.png" border="0" usemap="#routerlist_8c_aa0f6ecb349cc9b484a19c1a0397dc1ed_cgraph" alt=""/></div>
<map name="routerlist_8c_aa0f6ecb349cc9b484a19c1a0397dc1ed_cgraph" id="routerlist_8c_aa0f6ecb349cc9b484a19c1a0397dc1ed_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#aaa2e70d04e8e04e2958f64f243e76987" title="router_get_fallback\l_dirserver_by_digest" alt="" coords="240,5,383,47"/>
<area shape="rect" id="node3" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="431,13,517,39"/>
</map>
</div>

</div>
</div>
<a id="a6c38eadb28cf4532a7623c5aa1885cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c38eadb28cf4532a7623c5aa1885cec">&#9670;&nbsp;</a></span>router_digest_is_trusted_dir_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_digest_is_trusted_dir_type </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>digest</b> is the digest of the identity key of a trusted directory matching at least one bit of <b>type</b>. If <b>type</b> is zero (NO_DIRINFO), or ALL_DIRINFO, any authority is okay. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a6c38eadb28cf4532a7623c5aa1885cec_cgraph.png" border="0" usemap="#routerlist_8c_a6c38eadb28cf4532a7623c5aa1885cec_cgraph" alt=""/></div>
<map name="routerlist_8c_a6c38eadb28cf4532a7623c5aa1885cec_cgraph" id="routerlist_8c_a6c38eadb28cf4532a7623c5aa1885cec_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="234,5,334,32"/>
<area shape="rect" id="node3" href="router_8c.html#abeb0f38915a46f77352900604075d82f" title="router_digest_is_me" alt="" coords="215,56,353,83"/>
<area shape="rect" id="node4" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="401,81,488,108"/>
</map>
</div>

</div>
</div>
<a id="a1cb0d178232a933f8fea51a845f41265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cb0d178232a933f8fea51a845f41265">&#9670;&nbsp;</a></span>router_exit_policy_rejects_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_exit_policy_rejects_all </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>router</b> does not permit exit streams. </p>

</div>
</div>
<a id="a529cee5c17927c3dd0bbab47b5530ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a529cee5c17927c3dd0bbab47b5530ced">&#9670;&nbsp;</a></span>router_get_advertised_bandwidth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t router_get_advertised_bandwidth </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the smaller of the router's configured BandwidthRate and its advertised capacity. </p>

</div>
</div>
<a id="ad6fa9db0634a1b718251a999c4972b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6fa9db0634a1b718251a999c4972b21">&#9670;&nbsp;</a></span>router_get_advertised_bandwidth_capped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t router_get_advertised_bandwidth_capped </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the smaller of the router's configured BandwidthRate and its advertised capacity, capped by max-believe-bw. </p>

</div>
</div>
<a id="aab0f360909c4cc3732e5f9541cf595bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab0f360909c4cc3732e5f9541cf595bb">&#9670;&nbsp;</a></span>router_get_by_descriptor_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a>* router_get_by_descriptor_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the router in our routerlist whose 20-byte descriptor is <b>digest</b>. Return NULL if no such router is known. </p>

</div>
</div>
<a id="a9eb1861cedcb477a2e455b6c02eb56d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eb1861cedcb477a2e455b6c02eb56d8">&#9670;&nbsp;</a></span>router_get_by_id_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a>* router_get_by_id_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the router in our routerlist whose 20-byte key digest is <b>digest</b>. Return NULL if no such router is known. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_cgraph.png" border="0" usemap="#routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_cgraph" alt=""/></div>
<map name="routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_cgraph" id="routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a848eea1698b3361538f190f55f2cc0e6" title="router_get_mutable\l_by_digest" alt="" coords="213,5,347,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_icgraph.png" border="0" usemap="#routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_icgraph" alt=""/></div>
<map name="routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_icgraph" id="routerlist_8c_a9eb1861cedcb477a2e455b6c02eb56d8_icgraph">
<area shape="rect" id="node2" href="connection__or_8h.html#a8573b49df7ffc3ad6df0faa6e7a12f10" title="connection_or_digest\l_is_known_relay" alt="" coords="213,5,359,47"/>
</map>
</div>

</div>
</div>
<a id="aaa2e70d04e8e04e2958f64f243e76987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa2e70d04e8e04e2958f64f243e76987">&#9670;&nbsp;</a></span>router_get_fallback_dirserver_by_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdir__server__t.html">dir_server_t</a>* router_get_fallback_dirserver_by_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the <a class="el" href="structdir__server__t.html">dir_server_t</a> for the fallback dirserver whose identity key hashes to <b>digest</b>, or NULL if no such fallback is in the list of fallback_dir_servers. (fallback_dir_servers is affected by the FallbackDir and UseDefaultFallbackDirs torrc options.) The list of fallback directories includes the list of authorities. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_cgraph.png" border="0" usemap="#routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_cgraph" alt=""/></div>
<map name="routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_cgraph" id="routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="196,13,283,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_icgraph.png" border="0" usemap="#routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_icgraph" alt=""/></div>
<map name="routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_icgraph" id="routerlist_8c_aaa2e70d04e8e04e2958f64f243e76987_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#aa0f6ecb349cc9b484a19c1a0397dc1ed" title="router_digest_is_fallback_dir" alt="" coords="196,13,383,39"/>
</map>
</div>

</div>
</div>
<a id="a848eea1698b3361538f190f55f2cc0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a848eea1698b3361538f190f55f2cc0e6">&#9670;&nbsp;</a></span>router_get_mutable_by_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a>* router_get_mutable_by_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As router_get_by_id_digest,but return a pointer that you're allowed to modify </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a848eea1698b3361538f190f55f2cc0e6_icgraph.png" border="0" usemap="#routerlist_8c_a848eea1698b3361538f190f55f2cc0e6_icgraph" alt=""/></div>
<map name="routerlist_8c_a848eea1698b3361538f190f55f2cc0e6_icgraph" id="routerlist_8c_a848eea1698b3361538f190f55f2cc0e6_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#afcfacad25b94db6f21e0df2f7897a3cf" title="routers_update_status\l_from_consensus_networkstatus" alt="" coords="187,8,401,49"/>
<area shape="rect" id="node4" href="routerlist_8h.html#a9eb1861cedcb477a2e455b6c02eb56d8" title="router_get_by_id_digest" alt="" coords="214,75,374,102"/>
<area shape="rect" id="node3" href="routerlist_8h.html#ae08c5697c58be20a7bb11b34ca9aba5e" title="router_load_routers\l_from_string" alt="" coords="455,5,589,47"/>
<area shape="rect" id="node5" href="connection__or_8h.html#a8573b49df7ffc3ad6df0faa6e7a12f10" title="connection_or_digest\l_is_known_relay" alt="" coords="449,71,595,112"/>
</map>
</div>

</div>
</div>
<a id="a9181bbed0ee6ff8088a7c53fc8c446f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9181bbed0ee6ff8088a7c53fc8c446f1">&#9670;&nbsp;</a></span>router_get_routerlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrouterlist__t.html">routerlist_t</a>* router_get_routerlist </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current list of all known routers. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a9181bbed0ee6ff8088a7c53fc8c446f1_icgraph.png" border="0" usemap="#routerlist_8c_a9181bbed0ee6ff8088a7c53fc8c446f1_icgraph" alt=""/></div>
<map name="routerlist_8c_a9181bbed0ee6ff8088a7c53fc8c446f1_icgraph" id="routerlist_8c_a9181bbed0ee6ff8088a7c53fc8c446f1_icgraph">
<area shape="rect" id="node2" href="dirvote_8h.html#ae288382ee634aeb5099f263fa9af8c25" title="dirserv_generate_networkstatus\l_vote_obj" alt="" coords="191,5,397,47"/>
<area shape="rect" id="node3" href="dirserv_8h.html#a285fc71bfe2b99bc2b09b949d95ac1b9" title="dirserv_get_routerdesc\l_fingerprints" alt="" coords="217,71,371,112"/>
<area shape="rect" id="node4" href="dirserv_8h.html#a8fca5a38cd000d8ccabe5bc73e296bb2" title="dirserv_get_routerdescs" alt="" coords="213,137,375,163"/>
<area shape="rect" id="node5" href="dirserv_8h.html#aac91a65fca7d877c033a594a96203ad7" title="dirserv_test_reachability" alt="" coords="213,187,375,214"/>
<area shape="rect" id="node6" href="networkstatus_8h.html#a17d10602167e09e05f4d5aefc744141b" title="routers_update_all\l_from_networkstatus" alt="" coords="222,239,366,280"/>
<area shape="rect" id="node7" href="networkstatus_8h.html#a522e50eabe88fdafcc39b375b6e4cced" title="networkstatus_getinfo\l_by_purpose" alt="" coords="219,304,369,345"/>
<area shape="rect" id="node9" href="nodelist_8h.html#af4c2088785ce22b0dcc6d15dea714da1" title="nodelist_assert_ok" alt="" coords="229,370,359,397"/>
<area shape="rect" id="node10" href="routerlist_8h.html#a86f14dd56cbe0cc04a9b096db95a4270" title="router_reload_router_list" alt="" coords="213,421,375,447"/>
<area shape="rect" id="node11" href="routerlist_8h.html#a91d657f054dd82fbaf519c02deb5ec51" title="router_add_extrainfo\l_to_routerlist" alt="" coords="224,472,364,513"/>
<area shape="rect" id="node8" href="networkstatus_8h.html#ada1c2d5fcccff6ee4e7aff6a497ec2cf" title="networkstatus_dump\l_bridge_status_to_file" alt="" coords="445,304,595,345"/>
</map>
</div>

</div>
</div>
<a id="aa9b36f7b87463dc114065ea058660ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b36f7b87463dc114065ea058660ac4">&#9670;&nbsp;</a></span>router_get_trusted_dir_servers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsmartlist__t.html">smartlist_t</a>* router_get_trusted_dir_servers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a smartlist containing a list of <a class="el" href="structdir__server__t.html">dir_server_t</a> * for all known trusted dirservers. Callers must not modify the list or its contents. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aa9b36f7b87463dc114065ea058660ac4_icgraph.png" border="0" usemap="#routerlist_8c_aa9b36f7b87463dc114065ea058660ac4_icgraph" alt=""/></div>
<map name="routerlist_8c_aa9b36f7b87463dc114065ea058660ac4_icgraph" id="routerlist_8c_aa9b36f7b87463dc114065ea058660ac4_icgraph">
<area shape="rect" id="node2" href="config_8c.html#a44bd3659f3928dce51310d4313e5fb93" title="consider_adding_dir\l_servers" alt="" coords="205,5,342,47"/>
<area shape="rect" id="node3" href="directory_8h.html#ae4524a59d1b721804ba0cb5c0b7cf53a" title="directories_have_accepted\l_server_descriptor" alt="" coords="185,71,362,112"/>
<area shape="rect" id="node4" href="directory_8h.html#aace63698f64d26bc7a14531381e2fa57" title="directory_post_to_dirservers" alt="" coords="180,137,367,163"/>
<area shape="rect" id="node5" href="directory_8h.html#a13483821c102fb862ab0d27091d7ffc7" title="directory_get_from\l_all_authorities" alt="" coords="208,188,339,229"/>
</map>
</div>

</div>
</div>
<a id="a5132d81b2730264e3a284d9d438ee420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5132d81b2730264e3a284d9d438ee420">&#9670;&nbsp;</a></span>router_get_trusteddirserver_by_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdir__server__t.html">dir_server_t</a>* router_get_trusteddirserver_by_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the <a class="el" href="structdir__server__t.html">dir_server_t</a> for the directory authority whose identity key hashes to <b>digest</b>, or NULL if no such authority is known. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a5132d81b2730264e3a284d9d438ee420_cgraph.png" border="0" usemap="#routerlist_8c_a5132d81b2730264e3a284d9d438ee420_cgraph" alt=""/></div>
<map name="routerlist_8c_a5132d81b2730264e3a284d9d438ee420_cgraph" id="routerlist_8c_a5132d81b2730264e3a284d9d438ee420_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="231,13,317,39"/>
</map>
</div>

</div>
</div>
<a id="a8b764a3362e4c3245d5e430925e380f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b764a3362e4c3245d5e430925e380f1">&#9670;&nbsp;</a></span>router_is_named()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_is_named </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff <b>router</b> is listed as named in the current consensus. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_cgraph.png" border="0" usemap="#routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_cgraph" alt=""/></div>
<map name="routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_cgraph" id="routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#af663020b40e6b122a43b26aa62ca4ed4" title="networkstatus_get_router\l_digest_by_nickname" alt="" coords="172,5,341,47"/>
<area shape="rect" id="node3" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="213,71,300,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_icgraph.png" border="0" usemap="#routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_icgraph" alt=""/></div>
<map name="routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_icgraph" id="routerlist_8c_a8b764a3362e4c3245d5e430925e380f1_icgraph">
<area shape="rect" id="node2" href="router_8h.html#ac97f03d757d76cc0e684e58d4dfea035" title="router_get_description" alt="" coords="172,13,323,39"/>
<area shape="rect" id="node3" href="router_8h.html#a4d59ce576eb8716561e1bc6be6f88de1" title="router_describe" alt="" coords="371,13,481,39"/>
<area shape="rect" id="node4" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="529,5,689,47"/>
</map>
</div>

</div>
</div>
<a id="a373b610cd5f3f54650e6e7d47ae70263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a373b610cd5f3f54650e6e7d47ae70263">&#9670;&nbsp;</a></span>router_load_extrainfo_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_load_extrainfo_from_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>eos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a010ba601a8385178d2aa25beb04b4d9c">saved_location_t</a>&#160;</td>
          <td class="paramname"><em>saved_location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>requested_fingerprints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>descriptor_digests</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse one or more extrainfos from <b>s</b> (ending immediately before <b>eos</b> if <b>eos</b> is present). Other arguments are as for <a class="el" href="routerlist_8c.html#ae08c5697c58be20a7bb11b34ca9aba5e">router_load_routers_from_string()</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a373b610cd5f3f54650e6e7d47ae70263_cgraph.png" border="0" usemap="#routerlist_8c_a373b610cd5f3f54650e6e7d47ae70263_cgraph" alt=""/></div>
<map name="routerlist_8c_a373b610cd5f3f54650e6e7d47ae70263_cgraph" id="routerlist_8c_a373b610cd5f3f54650e6e7d47ae70263_cgraph">
<area shape="rect" id="node2" href="routerparse_8c.html#a258ef1ce82ccf0fe39682829018a749e" title="router_parse_list_from\l_string" alt="" coords="196,5,347,47"/>
</map>
</div>

</div>
</div>
<a id="ae08c5697c58be20a7bb11b34ca9aba5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae08c5697c58be20a7bb11b34ca9aba5e">&#9670;&nbsp;</a></span>router_load_routers_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_load_routers_from_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>eos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a010ba601a8385178d2aa25beb04b4d9c">saved_location_t</a>&#160;</td>
          <td class="paramname"><em>saved_location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>requested_fingerprints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>descriptor_digests</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prepend_annotations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a string <b>s</b> containing some routerdescs, parse it and put the routers into our directory. If saved_location is SAVED_NOWHERE, the routers are in response to a query to the network: cache them by adding them to the journal.</p>
<p>Return the number of routers actually added.</p>
<p>If <b>requested_fingerprints</b> is provided, it must contain a list of uppercased fingerprints. Do not update any router whose fingerprint is not on the list; after updating a router, remove its fingerprint from the list.</p>
<p>If <b>descriptor_digests</b> is non-zero, then the requested_fingerprints are descriptor digests. Otherwise they are identity digests. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ae08c5697c58be20a7bb11b34ca9aba5e_cgraph.png" border="0" usemap="#routerlist_8c_ae08c5697c58be20a7bb11b34ca9aba5e_cgraph" alt=""/></div>
<map name="routerlist_8c_ae08c5697c58be20a7bb11b34ca9aba5e_cgraph" id="routerlist_8c_ae08c5697c58be20a7bb11b34ca9aba5e_cgraph">
<area shape="rect" id="node2" href="routerparse_8c.html#a258ef1ce82ccf0fe39682829018a749e" title="router_parse_list_from\l_string" alt="" coords="219,114,369,155"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#afcfacad25b94db6f21e0df2f7897a3cf" title="routers_update_status\l_from_consensus_networkstatus" alt="" coords="187,179,401,221"/>
<area shape="rect" id="node4" href="router_8c.html#a71fbf956eedbc38a293306c9bf1962e7" title="authdir_mode_v3" alt="" coords="469,5,591,32"/>
<area shape="rect" id="node6" href="routerlist_8c.html#aaf38df620524abf6789bd31196b07697" title="routers_sort_by_identity" alt="" coords="449,56,611,83"/>
<area shape="rect" id="node8" href="di__ops_8c.html#a47393c6ace65b9b2173d60ac6ae119aa" title="tor_memcmp" alt="" coords="481,107,579,133"/>
<area shape="rect" id="node9" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="487,157,573,184"/>
<area shape="rect" id="node10" href="routerlist_8c.html#a848eea1698b3361538f190f55f2cc0e6" title="router_get_mutable\l_by_digest" alt="" coords="463,209,597,250"/>
<area shape="rect" id="node11" href="dirserv_8c.html#a0c97fbc43a4398a45feb2fafa3d42fc1" title="dirserv_should_launch\l_reachability_test" alt="" coords="455,274,605,315"/>
<area shape="rect" id="node16" href="directory_8c.html#ae0c46dd4ad90ff8350a03414a4d79307" title="download_status_reset" alt="" coords="452,340,608,367"/>
<area shape="rect" id="node18" href="nodelist_8c.html#a32099caf417dbc0e15ea398b1bc2ea16" title="router_dir_info_changed" alt="" coords="450,395,610,421"/>
<area shape="rect" id="node5" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="686,5,786,32"/>
<area shape="rect" id="node7" href="container_8c.html#adeb0528c65b62117acb2b8f6e2b0e910" title="smartlist_sort" alt="" coords="685,56,787,83"/>
<area shape="rect" id="node12" href="router_8c.html#a8522dfca1851365846ddef293a416656" title="authdir_mode_handles\l_descs" alt="" coords="660,209,812,250"/>
<area shape="rect" id="node15" href="routerlist_8c.html#a9b25dd842df15283a342bb77cf5935a8" title="routers_have_same_or\l_addrs" alt="" coords="659,274,813,315"/>
<area shape="rect" id="node13" href="router_8c.html#a9bcde98c72c7ec1b15a6c0837c6bec26" title="authdir_mode_any_nonhidserv" alt="" coords="861,191,1060,217"/>
<area shape="rect" id="node14" href="router_8c.html#aab8dc47aca12ebfdd7c4a01d7fc4290b" title="authdir_mode_any_main" alt="" coords="1108,216,1271,243"/>
<area shape="rect" id="node17" href="directory_8c.html#af6977c51923b32ba38e29dcf72163d1d" title="find_dl_schedule" alt="" coords="677,340,795,367"/>
<area shape="rect" id="node19" href="rendservice_8c.html#ac44e79078bc122e1f77d770919baffa3" title="rend_hsdir_routers\l_changed" alt="" coords="671,391,801,433"/>
</map>
</div>

</div>
</div>
<a id="a7b194ad6a42e8fb2ef4f3aa1cf135830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b194ad6a42e8fb2ef4f3aa1cf135830">&#9670;&nbsp;</a></span>router_load_single_router()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_load_single_router </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Code to parse a single router descriptor and insert it into the routerlist. Return -1 if the descriptor was ill-formed; 0 if the descriptor was well-formed but could not be added; and 1 if the descriptor was added.</p>
<p>If we don't add it and <b>msg</b> is not NULL, then assign to *<b>msg</b> a static string describing the reason for refusing the descriptor.</p>
<p>This is used only by the controller. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a7b194ad6a42e8fb2ef4f3aa1cf135830_cgraph.png" border="0" usemap="#routerlist_8c_a7b194ad6a42e8fb2ef4f3aa1cf135830_cgraph" alt=""/></div>
<map name="routerlist_8c_a7b194ad6a42e8fb2ef4f3aa1cf135830_cgraph" id="routerlist_8c_a7b194ad6a42e8fb2ef4f3aa1cf135830_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="219,5,306,32"/>
<area shape="rect" id="node4" href="router_8c.html#a9ca20e44509fa800ecf49f25bef1cd52" title="router_purpose_to_string" alt="" coords="180,56,345,83"/>
<area shape="rect" id="node5" href="routerparse_8c.html#a6ed67129e89fe64d2f329a1e94063f48" title="router_parse_entry\l_from_string" alt="" coords="197,107,328,149"/>
<area shape="rect" id="node3" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="399,5,494,32"/>
<area shape="rect" id="node6" href="memarea_8c.html#a9bc481c5060ff6280cfb1e5eaaa915f4" title="memarea_new" alt="" coords="393,115,500,141"/>
</map>
</div>

</div>
</div>
<a id="ace83aa582c6836e9a172a8cafa1d4047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace83aa582c6836e9a172a8cafa1d4047">&#9670;&nbsp;</a></span>router_pick_directory_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_pick_directory_server </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to find a running dirserver that supports operations of <b>type</b>.</p>
<p>If there are no running dirservers in our routerlist and the <b>PDS_RETRY_IF_NO_SERVERS</b> flag is set, set all the fallback ones (including authorities) as running again, and pick one.</p>
<p>If the <b>PDS_IGNORE_FASCISTFIREWALL</b> flag is set, then include dirservers that we can't reach.</p>
<p>If the <b>PDS_ALLOW_SELF</b> flag is not set, then don't include ourself (if we're a dirserver).</p>
<p>Don't pick a fallback directory mirror if any non-fallback is viable; (the fallback directory mirrors include the authorities) try to avoid using servers that have returned 503 recently. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_cgraph.png" border="0" usemap="#routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_cgraph" alt=""/></div>
<map name="routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_cgraph" id="routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#ab3e64366c95e82de40cac88b7a39ae17" title="router_pick_directory\l_server_impl" alt="" coords="196,5,339,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_icgraph.png" border="0" usemap="#routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_icgraph" alt=""/></div>
<map name="routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_icgraph" id="routerlist_8c_ace83aa582c6836e9a172a8cafa1d4047_icgraph">
<area shape="rect" id="node2" href="entrynodes_8c.html#a12aaa196d99fc0a6a4416c17f8274e76" title="add_an_entry_guard" alt="" coords="196,13,335,39"/>
</map>
</div>

</div>
</div>
<a id="ab3e64366c95e82de40cac88b7a39ae17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3e64366c95e82de40cac88b7a39ae17">&#9670;&nbsp;</a></span>router_pick_directory_server_impl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_pick_directory_server_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>n_busy_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pick a random running valid directory server/mirror from our routerlist. Arguments are as for <a class="el" href="routerlist_8c.html#ace83aa582c6836e9a172a8cafa1d4047">router_pick_directory_server()</a>, except:</p>
<p>If <b>n_busy_out</b> is provided, set *<b>n_busy_out</b> to the number of directories that we excluded for no other reason than PDS_NO_EXISTING_SERVERDESC_FETCH or PDS_NO_EXISTING_MICRODESC_FETCH. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ab3e64366c95e82de40cac88b7a39ae17_icgraph.png" border="0" usemap="#routerlist_8c_ab3e64366c95e82de40cac88b7a39ae17_icgraph" alt=""/></div>
<map name="routerlist_8c_ab3e64366c95e82de40cac88b7a39ae17_icgraph" id="routerlist_8c_ab3e64366c95e82de40cac88b7a39ae17_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#ace83aa582c6836e9a172a8cafa1d4047" title="router_pick_directory\l_server" alt="" coords="196,5,339,47"/>
<area shape="rect" id="node3" href="entrynodes_8c.html#a12aaa196d99fc0a6a4416c17f8274e76" title="add_an_entry_guard" alt="" coords="387,13,525,39"/>
</map>
</div>

</div>
</div>
<a id="a58ed11d2f6808617760386221246b842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58ed11d2f6808617760386221246b842">&#9670;&nbsp;</a></span>router_pick_fallback_dirserver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_pick_fallback_dirserver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to find a running fallback directory. Flags are as for router_pick_directory_server. </p>

</div>
</div>
<a id="ad96c8d565baf8a82010f5adfacb99060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad96c8d565baf8a82010f5adfacb99060">&#9670;&nbsp;</a></span>router_pick_trusteddirserver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterstatus__t.html">routerstatus_t</a>* router_pick_trusteddirserver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to find a running directory authority. Flags are as for router_pick_directory_server. </p>

</div>
</div>
<a id="a86f14dd56cbe0cc04a9b096db95a4270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f14dd56cbe0cc04a9b096db95a4270">&#9670;&nbsp;</a></span>router_reload_router_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int router_reload_router_list </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load all cached router descriptors and extra-info documents from the store. Return 0 on success and -1 on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a86f14dd56cbe0cc04a9b096db95a4270_cgraph.png" border="0" usemap="#routerlist_8c_a86f14dd56cbe0cc04a9b096db95a4270_cgraph" alt=""/></div>
<map name="routerlist_8c_a86f14dd56cbe0cc04a9b096db95a4270_cgraph" id="routerlist_8c_a86f14dd56cbe0cc04a9b096db95a4270_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1" title="router_get_routerlist" alt="" coords="215,5,352,32"/>
</map>
</div>

</div>
</div>
<a id="adc3015689729ebc1c085666a99b80a10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc3015689729ebc1c085666a99b80a10">&#9670;&nbsp;</a></span>router_reset_descriptor_download_failures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_reset_descriptor_download_failures </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the descriptor download failure count on all routers, so that we can retry any long-failed routers immediately. </p>

</div>
</div>
<a id="a4fab5ecf53641fa3ee384520aaa22e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fab5ecf53641fa3ee384520aaa22e41">&#9670;&nbsp;</a></span>router_reset_status_download_failures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void router_reset_status_download_failures </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset all internal variables used to count failed downloads of network status objects. </p>

</div>
</div>
<a id="af2db10502386ef035c89377d2968c7e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2db10502386ef035c89377d2968c7e0">&#9670;&nbsp;</a></span>routerinfo_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerinfo_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>router</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held by <b>router</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_af2db10502386ef035c89377d2968c7e0_cgraph.png" border="0" usemap="#routerlist_8c_af2db10502386ef035c89377d2968c7e0_cgraph" alt=""/></div>
<map name="routerlist_8c_af2db10502386ef035c89377d2968c7e0_cgraph" id="routerlist_8c_af2db10502386ef035c89377d2968c7e0_cgraph">
<area shape="rect" id="node2" href="crypto_8c.html#a2a5f687763115d7c79f977a0abfddaff" title="crypto_pk_free" alt="" coords="175,5,283,32"/>
<area shape="rect" id="node3" href="torcert_8c.html#a69b51896c94df3682f5b40fdffd5daba" title="tor_cert_free" alt="" coords="182,56,277,83"/>
<area shape="rect" id="node5" href="policies_8c.html#af4571826592c41142d57b3240016812e" title="addr_policy_list_free" alt="" coords="159,107,300,133"/>
<area shape="rect" id="node7" href="policies_8c.html#a3a0c68a8d1b8b63eaa6ee5fe12eeb108" title="short_policy_free" alt="" coords="169,157,290,184"/>
<area shape="rect" id="node4" href="crypto_8c.html#a955f8d276e5213dd68600bf6dee0b9ae" title="memwipe" alt="" coords="367,56,446,83"/>
<area shape="rect" id="node6" href="policies_8c.html#a5220c9c0d6f599bd15f5e1fdee88ff14" title="addr_policy_free" alt="" coords="348,107,465,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_af2db10502386ef035c89377d2968c7e0_icgraph.png" border="0" usemap="#routerlist_8c_af2db10502386ef035c89377d2968c7e0_icgraph" alt=""/></div>
<map name="routerlist_8c_af2db10502386ef035c89377d2968c7e0_icgraph" id="routerlist_8c_af2db10502386ef035c89377d2968c7e0_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a278cf107b4a9b636b105ec5581b2f427" title="router_free_all" alt="" coords="159,5,263,32"/>
</map>
</div>

</div>
</div>
<a id="a8bcaa5e4b76efe015823a0e6e0e8f876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bcaa5e4b76efe015823a0e6e0e8f876">&#9670;&nbsp;</a></span>routerinfo_incompatible_with_extrainfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int routerinfo_incompatible_with_extrainfo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>identity_pkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structextrainfo__t.html">extrainfo_t</a> *&#160;</td>
          <td class="paramname"><em>ei</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>sd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether <b>sd</b> describes a router descriptor compatible with the extrainfo document <b>ei</b>.</p>
<p><b>identity_pkey</b> (which must also be provided) is RSA1024 identity key for the router. We use it to check the signature of the extrainfo document, if it has not already been checked.</p>
<p>If no router is compatible with <b>ei</b>, <b>ei</b> should be dropped. Return 0 for "compatible", return 1 for "reject, and inform
whoever uploaded &lt;b&gt;ei&lt;/b&gt;, and return -1 for "reject silently.". If <b>msg</b> is present, set *<b>msg</b> to a description of the incompatibility (if any).</p>
<p>Set the extrainfo_is_bogus field in <b>sd</b> if the digests matched but the extrainfo was nonetheless incompatible. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8bcaa5e4b76efe015823a0e6e0e8f876_cgraph.png" border="0" usemap="#routerlist_8c_a8bcaa5e4b76efe015823a0e6e0e8f876_cgraph" alt=""/></div>
<map name="routerlist_8c_a8bcaa5e4b76efe015823a0e6e0e8f876_cgraph" id="routerlist_8c_a8bcaa5e4b76efe015823a0e6e0e8f876_cgraph">
<area shape="rect" id="node2" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="227,5,314,32"/>
<area shape="rect" id="node3" href="util_8c.html#a7c5079074e649dc0369225eca3073f7d" title="tor_mem_is_zero" alt="" coords="209,56,332,83"/>
</map>
</div>

</div>
</div>
<a id="a6bbb04e1dbdbbde5ad2089aac715d9cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bbb04e1dbdbbde5ad2089aac715d9cf">&#9670;&nbsp;</a></span>routerlist_assert_ok()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_assert_ok </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterlist__t.html">routerlist_t</a> *&#160;</td>
          <td class="paramname"><em>rl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assert that the internal representation of <b>rl</b> is self-consistent. </p>

</div>
</div>
<a id="ad0e00a6f0df9aace49976da496902957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e00a6f0df9aace49976da496902957">&#9670;&nbsp;</a></span>routerlist_descriptors_added()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_descriptors_added </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>sl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_cache</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We just added a new set of descriptors. Take whatever extra steps we need. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ad0e00a6f0df9aace49976da496902957_cgraph.png" border="0" usemap="#routerlist_8c_ad0e00a6f0df9aace49976da496902957_cgraph" alt=""/></div>
<map name="routerlist_8c_ad0e00a6f0df9aace49976da496902957_cgraph" id="routerlist_8c_ad0e00a6f0df9aace49976da496902957_cgraph">
<area shape="rect" id="node2" href="control_8c.html#ac1c562cb6f09c13a49ec73cc1b72c7f8" title="control_event_descriptors\l_changed" alt="" coords="213,5,383,47"/>
<area shape="rect" id="node3" href="entrynodes_8c.html#af8213fa6b22741a8c0b7d4834d7dccff" title="learned_bridge_descriptor" alt="" coords="213,71,383,98"/>
<area shape="rect" id="node4" href="dirserv_8c.html#a87235a887afe2a5f796bd9a88b474909" title="dirserv_single_reachability_test" alt="" coords="196,122,400,149"/>
<area shape="rect" id="node6" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="251,173,345,199"/>
<area shape="rect" id="node5" href="nodelist_8c.html#a114f706e8f9039f1dce0137619807581" title="node_get_mutable_by_id" alt="" coords="448,122,615,149"/>
</map>
</div>

</div>
</div>
<a id="afc5cd667e54af0c810a0930e70e27348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc5cd667e54af0c810a0930e70e27348">&#9670;&nbsp;</a></span>routerlist_find_my_routerinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a>* routerlist_find_my_routerinfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look through the routerlist until we find a router that has my key. Return it. </p>

</div>
</div>
<a id="ab9228e04209739ed11f23f364b74bfde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9228e04209739ed11f23f364b74bfde">&#9670;&nbsp;</a></span>routerlist_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterlist__t.html">routerlist_t</a> *&#160;</td>
          <td class="paramname"><em>rl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held by a routerlist <b>rl</b>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ab9228e04209739ed11f23f364b74bfde_icgraph.png" border="0" usemap="#routerlist_8c_ab9228e04209739ed11f23f364b74bfde_icgraph" alt=""/></div>
<map name="routerlist_8c_ab9228e04209739ed11f23f364b74bfde_icgraph" id="routerlist_8c_ab9228e04209739ed11f23f364b74bfde_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a087a998f551e9fff456d9e4ce662668e" title="routerlist_free_all" alt="" coords="155,5,276,32"/>
</map>
</div>

</div>
</div>
<a id="a087a998f551e9fff456d9e4ce662668e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a087a998f551e9fff456d9e4ce662668e">&#9670;&nbsp;</a></span>routerlist_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all memory held by the routerlist module. Note: Calling <a class="el" href="routerlist_8c.html#a087a998f551e9fff456d9e4ce662668e">routerlist_free_all()</a> should always be paired with a call to <a class="el" href="nodelist_8c.html#a214eb0c58f4f381696fcf4a25349e50a">nodelist_free_all()</a>. These should only be called during cleanup. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a087a998f551e9fff456d9e4ce662668e_cgraph.png" border="0" usemap="#routerlist_8c_a087a998f551e9fff456d9e4ce662668e_cgraph" alt=""/></div>
<map name="routerlist_8c_a087a998f551e9fff456d9e4ce662668e_cgraph" id="routerlist_8c_a087a998f551e9fff456d9e4ce662668e_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#ab9228e04209739ed11f23f364b74bfde" title="routerlist_free" alt="" coords="185,5,286,32"/>
<area shape="rect" id="node3" href="routerlist_8c.html#a6ffeae0d92b2c4eec18c14453732f726" title="clear_dir_servers" alt="" coords="175,56,296,83"/>
</map>
</div>

</div>
</div>
<a id="a8c328828cd94c3bb84044c9003f8c78f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c328828cd94c3bb84044c9003f8c78f">&#9670;&nbsp;</a></span>routerlist_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterlist__t.html">routerlist_t</a> *&#160;</td>
          <td class="paramname"><em>rl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>ri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>make_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove an item <b>ri</b> from the routerlist <b>rl</b>, updating indices as needed. If <b>idx</b> is nonnegative and smartlist_get(rl-&gt;routers, idx) == ri, we don't need to do a linear search over the list to decide which to remove. We fill the gap in rl-&gt;routers with a later element in the list, if any exists. <b>ri</b> is freed.</p>
<p>If <b>make_old</b> is true, instead of deleting the router, we try adding it to rl-&gt;old_routers. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8c328828cd94c3bb84044c9003f8c78f_cgraph.png" border="0" usemap="#routerlist_8c_a8c328828cd94c3bb84044c9003f8c78f_cgraph" alt=""/></div>
<map name="routerlist_8c_a8c328828cd94c3bb84044c9003f8c78f_cgraph" id="routerlist_8c_a8c328828cd94c3bb84044c9003f8c78f_cgraph">
<area shape="rect" id="node2" href="nodelist_8c.html#aceea079915327ce0fede3a25bb254f00" title="nodelist_remove_routerinfo" alt="" coords="176,5,355,32"/>
<area shape="rect" id="node4" href="rephist_8c.html#a8d82d65e82208716c6db808c3361b19e" title="rep_hist_note_router\l_unreachable" alt="" coords="195,57,335,98"/>
<area shape="rect" id="node5" href="container_8c.html#ae56cc8eb3ee68132c63168b2485037cb" title="smartlist_del" alt="" coords="217,123,313,149"/>
<area shape="rect" id="node6" href="nodelist_8c.html#a32099caf417dbc0e15ea398b1bc2ea16" title="router_dir_info_changed" alt="" coords="185,173,345,200"/>
<area shape="rect" id="node3" href="nodelist_8c.html#a114f706e8f9039f1dce0137619807581" title="node_get_mutable_by_id" alt="" coords="403,5,569,32"/>
<area shape="rect" id="node7" href="rendservice_8c.html#ac44e79078bc122e1f77d770919baffa3" title="rend_hsdir_routers\l_changed" alt="" coords="421,166,551,207"/>
</map>
</div>

</div>
</div>
<a id="ad504742ed3340ecce532e798d3304c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad504742ed3340ecce532e798d3304c82">&#9670;&nbsp;</a></span>routerlist_remove_old_routers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_remove_old_routers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deactivate any routers from the routerlist that are more than ROUTER_MAX_AGE seconds old and not recommended by any networkstatuses; remove old routers from the list of cached routers if we have too many. </p>

</div>
</div>
<a id="ad5591c87fbad96a88fa4d0145431ef87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5591c87fbad96a88fa4d0145431ef87">&#9670;&nbsp;</a></span>routerlist_reset_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_reset_warnings </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Forget that we have issued any router-related warnings, so that we'll warn again if we see the same errors. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ad5591c87fbad96a88fa4d0145431ef87_cgraph.png" border="0" usemap="#routerlist_8c_ad5591c87fbad96a88fa4d0145431ef87_cgraph" alt=""/></div>
<map name="routerlist_8c_ad5591c87fbad96a88fa4d0145431ef87_cgraph" id="routerlist_8c_ad5591c87fbad96a88fa4d0145431ef87_cgraph">
<area shape="rect" id="node2" href="container_8c.html#ad24500d61ff1dbb6c845a8a70f6d2f14" title="smartlist_clear" alt="" coords="237,5,343,32"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#ad970a8be0b1c191044f84bd686747e88" title="networkstatus_reset\l_warnings" alt="" coords="220,57,360,98"/>
</map>
</div>

</div>
</div>
<a id="a52db265aafa57b000917a06850363fcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52db265aafa57b000917a06850363fcd">&#9670;&nbsp;</a></span>routerlist_retry_directory_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routerlist_retry_directory_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear all our timeouts for fetching v3 directory stuff, and then give it all a try again. </p>

</div>
</div>
<a id="a9b25dd842df15283a342bb77cf5935a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b25dd842df15283a342bb77cf5935a8">&#9670;&nbsp;</a></span>routers_have_same_or_addrs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int routers_have_same_or_addrs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>r1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>r2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff r1 and r2 have the same address and OR port. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a9b25dd842df15283a342bb77cf5935a8_icgraph.png" border="0" usemap="#routerlist_8c_a9b25dd842df15283a342bb77cf5935a8_icgraph" alt=""/></div>
<map name="routerlist_8c_a9b25dd842df15283a342bb77cf5935a8_icgraph" id="routerlist_8c_a9b25dd842df15283a342bb77cf5935a8_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a0c97fbc43a4398a45feb2fafa3d42fc1" title="dirserv_should_launch\l_reachability_test" alt="" coords="208,5,359,47"/>
<area shape="rect" id="node3" href="networkstatus_8h.html#afcfacad25b94db6f21e0df2f7897a3cf" title="routers_update_status\l_from_consensus_networkstatus" alt="" coords="407,5,621,47"/>
<area shape="rect" id="node4" href="routerlist_8h.html#ae08c5697c58be20a7bb11b34ca9aba5e" title="router_load_routers\l_from_string" alt="" coords="669,5,803,47"/>
</map>
</div>

</div>
</div>
<a id="aaf38df620524abf6789bd31196b07697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf38df620524abf6789bd31196b07697">&#9670;&nbsp;</a></span>routers_sort_by_identity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void routers_sort_by_identity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>routers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sort a list of <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> in ascending order of identity digest. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aaf38df620524abf6789bd31196b07697_cgraph.png" border="0" usemap="#routerlist_8c_aaf38df620524abf6789bd31196b07697_cgraph" alt=""/></div>
<map name="routerlist_8c_aaf38df620524abf6789bd31196b07697_cgraph" id="routerlist_8c_aaf38df620524abf6789bd31196b07697_cgraph">
<area shape="rect" id="node2" href="container_8c.html#adeb0528c65b62117acb2b8f6e2b0e910" title="smartlist_sort" alt="" coords="215,5,316,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aaf38df620524abf6789bd31196b07697_icgraph.png" border="0" usemap="#routerlist_8c_aaf38df620524abf6789bd31196b07697_icgraph" alt=""/></div>
<map name="routerlist_8c_aaf38df620524abf6789bd31196b07697_icgraph" id="routerlist_8c_aaf38df620524abf6789bd31196b07697_icgraph">
<area shape="rect" id="node2" href="networkstatus_8h.html#afcfacad25b94db6f21e0df2f7897a3cf" title="routers_update_status\l_from_consensus_networkstatus" alt="" coords="215,5,429,47"/>
<area shape="rect" id="node3" href="routerlist_8h.html#ae08c5697c58be20a7bb11b34ca9aba5e" title="router_load_routers\l_from_string" alt="" coords="477,5,611,47"/>
</map>
</div>

</div>
</div>
<a id="aa17ec1d95171be8c87bb5dcc4ac341ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17ec1d95171be8c87bb5dcc4ac341ba">&#9670;&nbsp;</a></span>scale_array_elements_to_u64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC void scale_array_elements_to_u64 </td>
          <td>(</td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>entries_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>entries_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>total_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given an array of double/uint64_t unions that are currently being used as doubles, convert them to uint64_t, and try to scale them linearly so as to much of the range of uint64_t. If <b>total_out</b> is provided, set it to the sum of all elements in the array <em>before</em> scaling. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_aa17ec1d95171be8c87bb5dcc4ac341ba_cgraph.png" border="0" usemap="#routerlist_8c_aa17ec1d95171be8c87bb5dcc4ac341ba_cgraph" alt=""/></div>
<map name="routerlist_8c_aa17ec1d95171be8c87bb5dcc4ac341ba_cgraph" id="routerlist_8c_aa17ec1d95171be8c87bb5dcc4ac341ba_cgraph">
<area shape="rect" id="node2" href="util_8c.html#a9b0befd3ad0e6ffcf03da6bd791d7e75" title="tor_llround" alt="" coords="203,13,285,39"/>
</map>
</div>

</div>
</div>
<a id="aa7aee947ee003a2d2367678bdbbb0aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7aee947ee003a2d2367678bdbbb0aa9">&#9670;&nbsp;</a></span>signed_descriptor_get_annotations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* signed_descriptor_get_annotations </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>desc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As <a class="el" href="routerlist_8c.html#af4d8bdd829c8eab4c9060c014fb59af8">signed_descriptor_get_body()</a>, but points to the beginning of the annotations section rather than the beginning of the descriptor. </p>

</div>
</div>
<a id="af4d8bdd829c8eab4c9060c014fb59af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4d8bdd829c8eab4c9060c014fb59af8">&#9670;&nbsp;</a></span>signed_descriptor_get_body()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* signed_descriptor_get_body </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsigned__descriptor__t.html">signed_descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>desc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to the signed textual representation of a descriptor. The returned string is not guaranteed to be NUL-terminated: the string's length will be in desc-&gt;signed_descriptor_len.</p>
<p>The caller must not free the string returned. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_af4d8bdd829c8eab4c9060c014fb59af8_icgraph.png" border="0" usemap="#routerlist_8c_af4d8bdd829c8eab4c9060c014fb59af8_icgraph" alt=""/></div>
<map name="routerlist_8c_af4d8bdd829c8eab4c9060c014fb59af8_icgraph" id="routerlist_8c_af4d8bdd829c8eab4c9060c014fb59af8_icgraph">
<area shape="rect" id="node2" href="router_8h.html#a41c282d28d3993d673a0bedf91e5d776" title="router_get_my_descriptor" alt="" coords="237,5,407,32"/>
</map>
</div>

</div>
</div>
<a id="a72a800ff3c4749f4b968b8ac5d97c91b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a800ff3c4749f4b968b8ac5d97c91b">&#9670;&nbsp;</a></span>trusted_dir_server_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdir__server__t.html">dir_server_t</a>* trusted_dir_server_new </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nickname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dir_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>or_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtor__addr__port__t.html">tor_addr_port_t</a> *&#160;</td>
          <td class="paramname"><em>ipv6_addrport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>v3_auth_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#ae733ffc8e2cde85d0705d947f8f86ada">dirinfo_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>weight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an authoritative directory server at <b>address</b>:<b>port</b>, with identity key <b>digest</b>. If <b>address</b> is NULL, add ourself. Return the new trusted directory server entry on success or NULL if we couldn't add it. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a72a800ff3c4749f4b968b8ac5d97c91b_cgraph.png" border="0" usemap="#routerlist_8c_a72a800ff3c4749f4b968b8ac5d97c91b_cgraph" alt=""/></div>
<map name="routerlist_8c_a72a800ff3c4749f4b968b8ac5d97c91b_cgraph" id="routerlist_8c_a72a800ff3c4749f4b968b8ac5d97c91b_cgraph">
<area shape="rect" id="node2" href="config_8c.html#ab211028e24942a1bc1827afaae620d4a" title="resolve_my_address" alt="" coords="211,5,353,32"/>
</map>
</div>

</div>
</div>
<a id="acb91993a221f80d7896395babb122f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb91993a221f80d7896395babb122f0a">&#9670;&nbsp;</a></span>trusted_dirs_flush_certs_to_disk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trusted_dirs_flush_certs_to_disk </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Save all v3 key certificates to the cached-certs file. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_acb91993a221f80d7896395babb122f0a_cgraph.png" border="0" usemap="#routerlist_8c_acb91993a221f80d7896395babb122f0a_cgraph" alt=""/></div>
<map name="routerlist_8c_acb91993a221f80d7896395babb122f0a_cgraph" id="routerlist_8c_acb91993a221f80d7896395babb122f0a_cgraph">
<area shape="rect" id="node2" href="util_8c.html#ae01530967d53afcfefa8227c98072e83" title="write_chunks_to_file" alt="" coords="179,13,320,39"/>
</map>
</div>

</div>
</div>
<a id="a0a6e87e7775e3d61a3a0f2cb14f78ea1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a6e87e7775e3d61a3a0f2cb14f78ea1">&#9670;&nbsp;</a></span>trusted_dirs_load_certs_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trusted_dirs_load_certs_from_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>contents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flush</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load a bunch of new key certificates from the string <b>contents</b>. If <b>source</b> is TRUSTED_DIRS_CERTS_SRC_FROM_STORE, the certificates are from the cache, and we don't need to flush them to disk. If we are a dirauth loading our own cert, source is TRUSTED_DIRS_CERTS_SRC_SELF. Otherwise, source is download type: TRUSTED_DIRS_CERTS_SRC_DL_BY_ID_DIGEST or TRUSTED_DIRS_CERTS_SRC_DL_BY_ID_SK_DIGEST. If <b>flush</b> is true, we need to flush any changed certificates to disk now. Return 0 on success, -1 if any certs fail to parse.</p>
<p>If source_dir is non-NULL, it's the identity digest for a directory that we've just successfully retrieved certificates from, so try it first to fetch any missing certificates. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a0a6e87e7775e3d61a3a0f2cb14f78ea1_icgraph.png" border="0" usemap="#routerlist_8c_a0a6e87e7775e3d61a3a0f2cb14f78ea1_icgraph" alt=""/></div>
<map name="routerlist_8c_a0a6e87e7775e3d61a3a0f2cb14f78ea1_icgraph" id="routerlist_8c_a0a6e87e7775e3d61a3a0f2cb14f78ea1_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a88c116d81fb2aed5dde4a9c8590af12c" title="trusted_dirs_reload\l_certs" alt="" coords="211,5,343,47"/>
</map>
</div>

</div>
</div>
<a id="a88c116d81fb2aed5dde4a9c8590af12c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88c116d81fb2aed5dde4a9c8590af12c">&#9670;&nbsp;</a></span>trusted_dirs_reload_certs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trusted_dirs_reload_certs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reload the cached v3 key certificates from the cached-certs file in the data directory. Return 0 on success, -1 on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a88c116d81fb2aed5dde4a9c8590af12c_cgraph.png" border="0" usemap="#routerlist_8c_a88c116d81fb2aed5dde4a9c8590af12c_cgraph" alt=""/></div>
<map name="routerlist_8c_a88c116d81fb2aed5dde4a9c8590af12c_cgraph" id="routerlist_8c_a88c116d81fb2aed5dde4a9c8590af12c_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a0a6e87e7775e3d61a3a0f2cb14f78ea1" title="trusted_dirs_load_certs\l_from_string" alt="" coords="185,5,343,47"/>
</map>
</div>

</div>
</div>
<a id="afe7f2c6bcc3135272bc6aa66ec09cd76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe7f2c6bcc3135272bc6aa66ec09cd76">&#9670;&nbsp;</a></span>update_all_descriptor_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_all_descriptor_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update downloads for router descriptors and/or microdescriptors as appropriate. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_cgraph.png" border="0" usemap="#routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_cgraph" alt=""/></div>
<map name="routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_cgraph" id="routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="215,184,380,225"/>
<area shape="rect" id="node20" href="microdesc_8c.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="199,250,396,277"/>
<area shape="rect" id="node3" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf" title="should_delay_dir_fetches" alt="" coords="459,250,628,277"/>
<area shape="rect" id="node4" href="microdesc_8c.html#a2667d23ef05f514b5bf916791b4a6bbd" title="we_fetch_router_descriptors" alt="" coords="450,67,637,94"/>
<area shape="rect" id="node11" href="routerlist_8c.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="458,119,629,160"/>
<area shape="rect" id="node19" href="networkstatus_8c.html#a44accdf47b7f9f40b25c45daf2c31475" title="networkstatus_get_reasonably\l_live_consensus" alt="" coords="444,184,643,225"/>
<area shape="rect" id="node5" href="dirserv_8c.html#a57e2ff1ad2ea65abe9b969ad3d76a418" title="directory_caches_dir_info" alt="" coords="909,71,1080,98"/>
<area shape="rect" id="node9" href="microdesc_8c.html#adeff3a88aa40b67ab6407bda5c941910" title="we_use_microdescriptors\l_for_circuits" alt="" coords="691,5,861,47"/>
<area shape="rect" id="node6" href="router_8c.html#ab23297b12b098da9eac98126a587aa3b" title="dir_server_mode" alt="" coords="1150,13,1269,39"/>
<area shape="rect" id="node7" href="router_8c.html#afa75de94186fffc8f373de610ae4cab3" title="should_refuse_unknown\l_exits" alt="" coords="1128,64,1291,105"/>
<area shape="rect" id="node8" href="networkstatus_8c.html#aba1790be4b1cea243c3dac989ad1b05c" title="networkstatus_get_param" alt="" coords="1339,71,1511,98"/>
<area shape="rect" id="node10" href="entrynodes_8c.html#aec3f497d942ccb88742194e3fe973a49" title="any_bridge_supports\l_microdescriptors" alt="" coords="923,5,1066,47"/>
<area shape="rect" id="node12" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="726,126,826,153"/>
<area shape="rect" id="node13" href="dirserv_8c.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="703,187,849,228"/>
<area shape="rect" id="node14" href="rephist_8c.html#a890009e83c2e90292a435526b8111727" title="rep_hist_circbuilding\l_dormant" alt="" coords="925,195,1065,236"/>
<area shape="rect" id="node15" href="rephist_8c.html#ae234f5b5dcf88ea65ef20ff5c3512327" title="any_predicted_circuits" alt="" coords="1133,261,1285,287"/>
<area shape="rect" id="node16" href="router_8c.html#a8b917b11fb2945b314286a6a567e34c3" title="check_whether_orport\l_reachable" alt="" coords="1134,312,1285,353"/>
<area shape="rect" id="node17" href="circuituse_8c.html#ac6c1a2c715351d85ef6747ca1a4db958" title="circuit_enough_testing\l_circs" alt="" coords="1133,129,1285,171"/>
<area shape="rect" id="node18" href="router_8c.html#a98317a030cb30700f60c8444d676087b" title="check_whether_dirport\l_reachable" alt="" coords="1133,195,1286,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_icgraph.png" border="0" usemap="#routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_icgraph" alt=""/></div>
<map name="routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_icgraph" id="routerlist_8c_afe7f2c6bcc3135272bc6aa66ec09cd76_icgraph">
<area shape="rect" id="node2" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="199,5,327,47"/>
</map>
</div>

</div>
</div>
<a id="a1a7cfda729e27cf26089db2112d21965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a7cfda729e27cf26089db2112d21965">&#9670;&nbsp;</a></span>update_consensus_router_descriptor_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_consensus_router_descriptor_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_vote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>consensus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For any descriptor that we want that's currently listed in <b>consensus</b>, download it as appropriate. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a1a7cfda729e27cf26089db2112d21965_cgraph.png" border="0" usemap="#routerlist_8c_a1a7cfda729e27cf26089db2112d21965_cgraph" alt=""/></div>
<map name="routerlist_8c_a1a7cfda729e27cf26089db2112d21965_cgraph" id="routerlist_8c_a1a7cfda729e27cf26089db2112d21965_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="247,64,347,91"/>
<area shape="rect" id="node3" href="dirserv_8c.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="224,115,371,157"/>
<area shape="rect" id="node4" href="dirserv_8c.html#a57e2ff1ad2ea65abe9b969ad3d76a418" title="directory_caches_dir_info" alt="" coords="419,64,589,91"/>
<area shape="rect" id="node8" href="rephist_8c.html#a890009e83c2e90292a435526b8111727" title="rep_hist_circbuilding\l_dormant" alt="" coords="434,174,574,215"/>
<area shape="rect" id="node5" href="router_8c.html#ab23297b12b098da9eac98126a587aa3b" title="dir_server_mode" alt="" coords="659,5,778,32"/>
<area shape="rect" id="node6" href="router_8c.html#afa75de94186fffc8f373de610ae4cab3" title="should_refuse_unknown\l_exits" alt="" coords="637,57,800,98"/>
<area shape="rect" id="node7" href="networkstatus_8c.html#aba1790be4b1cea243c3dac989ad1b05c" title="networkstatus_get_param" alt="" coords="848,64,1020,91"/>
<area shape="rect" id="node9" href="rephist_8c.html#ae234f5b5dcf88ea65ef20ff5c3512327" title="any_predicted_circuits" alt="" coords="643,123,795,149"/>
<area shape="rect" id="node10" href="router_8c.html#a8b917b11fb2945b314286a6a567e34c3" title="check_whether_orport\l_reachable" alt="" coords="643,174,794,215"/>
<area shape="rect" id="node11" href="circuituse_8c.html#ac6c1a2c715351d85ef6747ca1a4db958" title="circuit_enough_testing\l_circs" alt="" coords="643,239,795,281"/>
<area shape="rect" id="node12" href="router_8c.html#a98317a030cb30700f60c8444d676087b" title="check_whether_dirport\l_reachable" alt="" coords="642,305,795,346"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a1a7cfda729e27cf26089db2112d21965_icgraph.png" border="0" usemap="#routerlist_8c_a1a7cfda729e27cf26089db2112d21965_icgraph" alt=""/></div>
<map name="routerlist_8c_a1a7cfda729e27cf26089db2112d21965_icgraph" id="routerlist_8c_a1a7cfda729e27cf26089db2112d21965_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="224,5,389,47"/>
<area shape="rect" id="node3" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="437,5,583,47"/>
<area shape="rect" id="node4" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="631,5,759,47"/>
</map>
</div>

</div>
</div>
<a id="ab576efc7049ed4eca6fa56e9f0544844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab576efc7049ed4eca6fa56e9f0544844">&#9670;&nbsp;</a></span>update_extrainfo_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_extrainfo_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch extrainfo downloads as needed. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_cgraph.png" border="0" usemap="#routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_cgraph" alt=""/></div>
<map name="routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_cgraph" id="routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf" title="should_delay_dir_fetches" alt="" coords="439,5,608,32"/>
<area shape="rect" id="node3" href="nodelist_8c.html#af33ffac546e0698e054eb3183e6579ae" title="router_have_minimum\l_dir_info" alt="" coords="240,27,391,69"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_icgraph.png" border="0" usemap="#routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_icgraph" alt=""/></div>
<map name="routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_icgraph" id="routerlist_8c_ab576efc7049ed4eca6fa56e9f0544844_icgraph">
<area shape="rect" id="node2" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="240,5,368,47"/>
</map>
</div>

</div>
</div>
<a id="a8b67f737b9ea614297414b26eb3b784c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b67f737b9ea614297414b26eb3b784c">&#9670;&nbsp;</a></span>update_router_descriptor_downloads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_router_descriptor_downloads </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch downloads for router status as needed. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_cgraph.png" border="0" usemap="#routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_cgraph" alt=""/></div>
<map name="routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_cgraph" id="routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#aa278011afd1917ef43cc44fac287f7bf" title="should_delay_dir_fetches" alt="" coords="233,18,403,45"/>
<area shape="rect" id="node3" href="microdesc_8c.html#a2667d23ef05f514b5bf916791b4a6bbd" title="we_fetch_router_descriptors" alt="" coords="225,69,411,95"/>
<area shape="rect" id="node10" href="routerlist_8c.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="233,120,403,161"/>
<area shape="rect" id="node18" href="networkstatus_8c.html#a44accdf47b7f9f40b25c45daf2c31475" title="networkstatus_get_reasonably\l_live_consensus" alt="" coords="219,185,417,227"/>
<area shape="rect" id="node4" href="dirserv_8c.html#a57e2ff1ad2ea65abe9b969ad3d76a418" title="directory_caches_dir_info" alt="" coords="684,71,855,98"/>
<area shape="rect" id="node8" href="microdesc_8c.html#adeff3a88aa40b67ab6407bda5c941910" title="we_use_microdescriptors\l_for_circuits" alt="" coords="465,5,636,47"/>
<area shape="rect" id="node5" href="router_8c.html#ab23297b12b098da9eac98126a587aa3b" title="dir_server_mode" alt="" coords="925,13,1043,39"/>
<area shape="rect" id="node6" href="router_8c.html#afa75de94186fffc8f373de610ae4cab3" title="should_refuse_unknown\l_exits" alt="" coords="903,64,1065,105"/>
<area shape="rect" id="node7" href="networkstatus_8c.html#aba1790be4b1cea243c3dac989ad1b05c" title="networkstatus_get_param" alt="" coords="1113,71,1285,98"/>
<area shape="rect" id="node9" href="entrynodes_8c.html#aec3f497d942ccb88742194e3fe973a49" title="any_bridge_supports\l_microdescriptors" alt="" coords="698,5,841,47"/>
<area shape="rect" id="node11" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="501,126,601,153"/>
<area shape="rect" id="node12" href="dirserv_8c.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="477,177,624,219"/>
<area shape="rect" id="node13" href="rephist_8c.html#a890009e83c2e90292a435526b8111727" title="rep_hist_circbuilding\l_dormant" alt="" coords="699,195,839,236"/>
<area shape="rect" id="node14" href="rephist_8c.html#ae234f5b5dcf88ea65ef20ff5c3512327" title="any_predicted_circuits" alt="" coords="908,261,1060,287"/>
<area shape="rect" id="node15" href="router_8c.html#a8b917b11fb2945b314286a6a567e34c3" title="check_whether_orport\l_reachable" alt="" coords="909,312,1059,353"/>
<area shape="rect" id="node16" href="circuituse_8c.html#ac6c1a2c715351d85ef6747ca1a4db958" title="circuit_enough_testing\l_circs" alt="" coords="908,129,1060,171"/>
<area shape="rect" id="node17" href="router_8c.html#a98317a030cb30700f60c8444d676087b" title="check_whether_dirport\l_reachable" alt="" coords="907,195,1061,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_icgraph.png" border="0" usemap="#routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_icgraph" alt=""/></div>
<map name="routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_icgraph" id="routerlist_8c_a8b67f737b9ea614297414b26eb3b784c_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="219,5,364,47"/>
<area shape="rect" id="node3" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="412,5,540,47"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
