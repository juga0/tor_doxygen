<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/common/compat_pthreads.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_b7e1585941a202f53e5249c42015d573.html">common</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">compat_pthreads.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation for the pthreads-based multithreading backend functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;orconfig.h&quot;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;compat.h&quot;</code><br />
<code>#include &quot;<a class="el" href="torlog_8h_source.html">torlog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for compat_pthreads.c:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat__pthreads_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat__pthreads_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat__pthreads_8c">
<area shape="rect" id="node2" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="808,483,887,509"/>
<area shape="rect" id="node6" href="compat_8h_source.html" title="compat.h" alt="" coords="368,259,444,285"/>
<area shape="rect" id="node14" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="65,184,131,211"/>
<area shape="rect" id="node15" href="util_8h.html" title="Headers for util.c. " alt="" coords="774,109,825,136"/>
<area shape="rect" id="node7" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="851,408,913,435"/>
<area shape="rect" id="node8" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="150,408,249,435"/>
<area shape="rect" id="node10" href="compat__time_8h.html" title="Functions and types for monotonic times. " alt="" coords="5,408,113,435"/>
<area shape="rect" id="node13" href="compat__threads_8h_source.html" title="compat_threads.h" alt="" coords="520,333,647,360"/>
<area shape="rect" id="node16" href="di__ops_8h.html" title="Headers for di_ops.c. " alt="" coords="909,333,980,360"/>
<area shape="rect" id="node18" href="util__bug_8h.html" title="util_bug.h" alt="" coords="653,184,732,211"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtor__pthread__data__t.html">tor_pthread_data_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a391c5eb0f6b5febc48710d0be3f62394"><td class="memItemLeft" align="right" valign="top"><a id="a391c5eb0f6b5febc48710d0be3f62394"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PTHREAD_CREATE_DETACHED</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a391c5eb0f6b5febc48710d0be3f62394"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1b4173320f7a4cfddec39cce65ed6102"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtor__pthread__data__t.html">tor_pthread_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a1b4173320f7a4cfddec39cce65ed6102">tor_pthread_data_t</a></td></tr>
<tr class="separator:a1b4173320f7a4cfddec39cce65ed6102"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa65e1439e672696123542094e9923d76"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#aa65e1439e672696123542094e9923d76">spawn_func</a> (void(*func)(void *), void *data)</td></tr>
<tr class="separator:aa65e1439e672696123542094e9923d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fef188c88baad428ae5c2d0ed82df0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#aa5fef188c88baad428ae5c2d0ed82df0">spawn_exit</a> (void)</td></tr>
<tr class="separator:aa5fef188c88baad428ae5c2d0ed82df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accea24c75779968942013afa3ae1c051"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#accea24c75779968942013afa3ae1c051">tor_mutex_init</a> (<a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *mutex)</td></tr>
<tr class="separator:accea24c75779968942013afa3ae1c051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900a1a27db8f1815a4db66e98e67bac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a900a1a27db8f1815a4db66e98e67bac0">tor_mutex_init_nonrecursive</a> (<a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *mutex)</td></tr>
<tr class="separator:a900a1a27db8f1815a4db66e98e67bac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfcc96866bdf76508915db8b252f746"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a8bfcc96866bdf76508915db8b252f746">tor_mutex_acquire</a> (<a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *m)</td></tr>
<tr class="separator:a8bfcc96866bdf76508915db8b252f746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fc2298a8cb49803528daa6d35091372"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a3fc2298a8cb49803528daa6d35091372">tor_mutex_release</a> (<a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *m)</td></tr>
<tr class="separator:a3fc2298a8cb49803528daa6d35091372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc9b93e04c69ebd4c63c25563b4a9b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#affc9b93e04c69ebd4c63c25563b4a9b7">tor_mutex_uninit</a> (<a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *m)</td></tr>
<tr class="separator:affc9b93e04c69ebd4c63c25563b4a9b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd7b83553d2e566426c5f3ce63c13da3"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#afd7b83553d2e566426c5f3ce63c13da3">tor_get_thread_id</a> (void)</td></tr>
<tr class="separator:afd7b83553d2e566426c5f3ce63c13da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932d22985b63dc2d633500140a72bc69"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a932d22985b63dc2d633500140a72bc69">tor_cond_init</a> (<a class="el" href="structtor__cond__t.html">tor_cond_t</a> *cond)</td></tr>
<tr class="separator:a932d22985b63dc2d633500140a72bc69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46fe6310d6b7b006a801a9dae2737fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#af46fe6310d6b7b006a801a9dae2737fe">tor_cond_uninit</a> (<a class="el" href="structtor__cond__t.html">tor_cond_t</a> *cond)</td></tr>
<tr class="separator:af46fe6310d6b7b006a801a9dae2737fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8682eff80eb5e6e98d2c257d286b47e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#af8682eff80eb5e6e98d2c257d286b47e">tor_cond_wait</a> (<a class="el" href="structtor__cond__t.html">tor_cond_t</a> *cond, <a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *mutex, const struct <a class="el" href="structtimeval.html">timeval</a> *tv)</td></tr>
<tr class="separator:af8682eff80eb5e6e98d2c257d286b47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e05f98c7cfb397888338b69cb6c75f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#af4e05f98c7cfb397888338b69cb6c75f">tor_cond_signal_one</a> (<a class="el" href="structtor__cond__t.html">tor_cond_t</a> *cond)</td></tr>
<tr class="separator:af4e05f98c7cfb397888338b69cb6c75f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39be7962cb90a33dd3380747a2c28a8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a39be7962cb90a33dd3380747a2c28a8a">tor_cond_signal_all</a> (<a class="el" href="structtor__cond__t.html">tor_cond_t</a> *cond)</td></tr>
<tr class="separator:a39be7962cb90a33dd3380747a2c28a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af886d69cbbcb268c0800d4d20381a1d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#af886d69cbbcb268c0800d4d20381a1d1">tor_threadlocal_init</a> (<a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *threadlocal)</td></tr>
<tr class="separator:af886d69cbbcb268c0800d4d20381a1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ec4f112638772d2cd9615394faa686"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#ab5ec4f112638772d2cd9615394faa686">tor_threadlocal_destroy</a> (<a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *threadlocal)</td></tr>
<tr class="separator:ab5ec4f112638772d2cd9615394faa686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cb673aa66a1f9e0dad48b9d64e2fc16"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#a6cb673aa66a1f9e0dad48b9d64e2fc16">tor_threadlocal_get</a> (<a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *threadlocal)</td></tr>
<tr class="separator:a6cb673aa66a1f9e0dad48b9d64e2fc16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac75fb438cf54a6855abf1af61a9467c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#ac75fb438cf54a6855abf1af61a9467c8">tor_threadlocal_set</a> (<a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *threadlocal, void *value)</td></tr>
<tr class="separator:ac75fb438cf54a6855abf1af61a9467c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7af2665dcebaab14be9e040eef67de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat__pthreads_8c.html#ad7af2665dcebaab14be9e040eef67de0">tor_threads_init</a> (void)</td></tr>
<tr class="separator:ad7af2665dcebaab14be9e040eef67de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation for the pthreads-based multithreading backend functions. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a1b4173320f7a4cfddec39cce65ed6102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b4173320f7a4cfddec39cce65ed6102">&#9670;&nbsp;</a></span>tor_pthread_data_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtor__pthread__data__t.html">tor_pthread_data_t</a>  <a class="el" href="structtor__pthread__data__t.html">tor_pthread_data_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wraps a void (*)(void*) function and its argument so we can invoke them in a way pthreads would expect. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa5fef188c88baad428ae5c2d0ed82df0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5fef188c88baad428ae5c2d0ed82df0">&#9670;&nbsp;</a></span>spawn_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spawn_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>End the current thread/process. </p>

</div>
</div>
<a id="aa65e1439e672696123542094e9923d76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa65e1439e672696123542094e9923d76">&#9670;&nbsp;</a></span>spawn_func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spawn_func </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimalist interface to run a void function in the background. On Unix calls pthread_create, on win32 calls beginthread. Returns -1 on failure. func should not return, but rather should call spawn_exit.</p>
<p>NOTE: if <b>data</b> is used, it should not be allocated on the stack, since in a multithreaded environment, there is no way to be sure that the caller's stack will still be around when the called function is running. </p>

</div>
</div>
<a id="a932d22985b63dc2d633500140a72bc69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932d22985b63dc2d633500140a72bc69">&#9670;&nbsp;</a></span>tor_cond_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_cond_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__cond__t.html">tor_cond_t</a> *&#160;</td>
          <td class="paramname"><em>cond</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize an already-allocated condition variable. </p>

</div>
</div>
<a id="a39be7962cb90a33dd3380747a2c28a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39be7962cb90a33dd3380747a2c28a8a">&#9670;&nbsp;</a></span>tor_cond_signal_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_cond_signal_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__cond__t.html">tor_cond_t</a> *&#160;</td>
          <td class="paramname"><em>cond</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wake up all of the waiters on <b>cond</b>. </p>

</div>
</div>
<a id="af4e05f98c7cfb397888338b69cb6c75f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4e05f98c7cfb397888338b69cb6c75f">&#9670;&nbsp;</a></span>tor_cond_signal_one()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_cond_signal_one </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__cond__t.html">tor_cond_t</a> *&#160;</td>
          <td class="paramname"><em>cond</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wake up one of the waiters on <b>cond</b>. </p>

</div>
</div>
<a id="af46fe6310d6b7b006a801a9dae2737fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af46fe6310d6b7b006a801a9dae2737fe">&#9670;&nbsp;</a></span>tor_cond_uninit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_cond_uninit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__cond__t.html">tor_cond_t</a> *&#160;</td>
          <td class="paramname"><em>cond</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all resources held by <b>cond</b>, but do not free <b>cond</b> itself. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c_af46fe6310d6b7b006a801a9dae2737fe_icgraph.png" border="0" usemap="#compat__pthreads_8c_af46fe6310d6b7b006a801a9dae2737fe_icgraph" alt=""/></div>
<map name="compat__pthreads_8c_af46fe6310d6b7b006a801a9dae2737fe_icgraph" id="compat__pthreads_8c_af46fe6310d6b7b006a801a9dae2737fe_icgraph">
<area shape="rect" id="node2" href="compat__threads_8c.html#aca4c3c851143fe256d0e5315c67d76a1" title="tor_cond_free" alt="" coords="164,5,265,32"/>
</map>
</div>

</div>
</div>
<a id="af8682eff80eb5e6e98d2c257d286b47e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8682eff80eb5e6e98d2c257d286b47e">&#9670;&nbsp;</a></span>tor_cond_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_cond_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__cond__t.html">tor_cond_t</a> *&#160;</td>
          <td class="paramname"><em>cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeval.html">timeval</a> *&#160;</td>
          <td class="paramname"><em>tv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait until one of the tor_cond_signal functions is called on <b>cond</b>. (If <b>tv</b> is set, and that amount of time passes with no signal to <b>cond</b>, return anyway. All waiters on the condition must wait holding the same <b>mutex</b>. All signallers should hold that mutex. The mutex needs to have been allocated with tor_mutex_init_for_cond().</p>
<p>Returns 0 on success, -1 on failure, 1 on timeout. </p>

</div>
</div>
<a id="afd7b83553d2e566426c5f3ce63c13da3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd7b83553d2e566426c5f3ce63c13da3">&#9670;&nbsp;</a></span>tor_get_thread_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long tor_get_thread_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return an integer representing this thread. </p>

</div>
</div>
<a id="a8bfcc96866bdf76508915db8b252f746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bfcc96866bdf76508915db8b252f746">&#9670;&nbsp;</a></span>tor_mutex_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_mutex_acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait until <b>m</b> is free, then acquire it. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c_a8bfcc96866bdf76508915db8b252f746_icgraph.png" border="0" usemap="#compat__pthreads_8c_a8bfcc96866bdf76508915db8b252f746_icgraph" alt=""/></div>
<map name="compat__pthreads_8c_a8bfcc96866bdf76508915db8b252f746_icgraph" id="compat__pthreads_8c_a8bfcc96866bdf76508915db8b252f746_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#ae02136d1dde67b64beb4e87365ad6ccf" title="tor_localtime_r" alt="" coords="215,17,321,44"/>
<area shape="rect" id="node3" href="compat_8c.html#a983d273987a338a60523f0bce4006af2" title="tor_gmtime_r" alt="" coords="219,68,317,95"/>
<area shape="rect" id="node6" href="workqueue_8c.html#a19dc28519d407979f4a56f6c18a7f065" title="workqueue_entry_cancel" alt="" coords="185,125,351,152"/>
<area shape="rect" id="node8" href="workqueue_8c.html#aac1d5fd74ac97b4fed12770bb380f86e" title="threadpool_queue_update" alt="" coords="183,176,353,203"/>
<area shape="rect" id="node10" href="router_8h.html#a71d8f6e0ed3558284e43371894abb504" title="dup_onion_keys" alt="" coords="210,227,326,253"/>
<area shape="rect" id="node4" href="util_8h.html#a0e1e4c423a6ba1306a9c3b2565e99391" title="format_rfc1123_time" alt="" coords="420,5,561,32"/>
<area shape="rect" id="node5" href="dirvote_8h.html#ad12be9f1748f89ce9e33a895218912fb" title="dirvote_get_start_of\l_next_interval" alt="" coords="422,57,559,98"/>
<area shape="rect" id="node7" href="cpuworker_8h.html#a1b4530118cd6e50e83a95454a6f22036" title="cpuworker_cancel_circ\l_handshake" alt="" coords="413,122,568,163"/>
<area shape="rect" id="node9" href="cpuworker_8h.html#ab9e83641db8471cf0727e113713c278f" title="cpuworkers_rotate_keyinfo" alt="" coords="401,188,580,215"/>
</map>
</div>

</div>
</div>
<a id="accea24c75779968942013afa3ae1c051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accea24c75779968942013afa3ae1c051">&#9670;&nbsp;</a></span>tor_mutex_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_mutex_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize <b>mutex</b> so it can be locked. Every mutex must be set up with <a class="el" href="compat__pthreads_8c.html#accea24c75779968942013afa3ae1c051">tor_mutex_init()</a> or <a class="el" href="compat__threads_8c.html#a0f3b168e06f8e4b99789af20771ee096">tor_mutex_new()</a>; not both. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c_accea24c75779968942013afa3ae1c051_icgraph.png" border="0" usemap="#compat__pthreads_8c_accea24c75779968942013afa3ae1c051_icgraph" alt=""/></div>
<map name="compat__pthreads_8c_accea24c75779968942013afa3ae1c051_icgraph" id="compat__pthreads_8c_accea24c75779968942013afa3ae1c051_icgraph">
<area shape="rect" id="node2" href="torlog_8h.html#a0bc134e471615f694edc26aef8bf961f" title="init_logging" alt="" coords="157,31,244,57"/>
<area shape="rect" id="node3" href="tor__main_8c.html#a6374afd9273e4780748fb27a8c15f2a3" title="tor_main" alt="" coords="292,5,364,32"/>
<area shape="rect" id="node5" href="test_8h.html#a568fcf10cfdd05506333a2b7ac5ee068" title="pk_generate" alt="" coords="511,31,604,57"/>
<area shape="rect" id="node4" href="tor__main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="412,5,463,32"/>
</map>
</div>

</div>
</div>
<a id="a900a1a27db8f1815a4db66e98e67bac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900a1a27db8f1815a4db66e98e67bac0">&#9670;&nbsp;</a></span>tor_mutex_init_nonrecursive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_mutex_init_nonrecursive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As tor_mutex_init, but initialize a mutex suitable that may be non-recursive, if the OS supports that. </p>

</div>
</div>
<a id="a3fc2298a8cb49803528daa6d35091372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fc2298a8cb49803528daa6d35091372">&#9670;&nbsp;</a></span>tor_mutex_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_mutex_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release the lock <b>m</b> so another thread can have it. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c_a3fc2298a8cb49803528daa6d35091372_icgraph.png" border="0" usemap="#compat__pthreads_8c_a3fc2298a8cb49803528daa6d35091372_icgraph" alt=""/></div>
<map name="compat__pthreads_8c_a3fc2298a8cb49803528daa6d35091372_icgraph" id="compat__pthreads_8c_a3fc2298a8cb49803528daa6d35091372_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#ae02136d1dde67b64beb4e87365ad6ccf" title="tor_localtime_r" alt="" coords="213,13,319,40"/>
<area shape="rect" id="node3" href="compat_8c.html#a983d273987a338a60523f0bce4006af2" title="tor_gmtime_r" alt="" coords="217,64,315,91"/>
<area shape="rect" id="node6" href="workqueue_8c.html#a19dc28519d407979f4a56f6c18a7f065" title="workqueue_entry_cancel" alt="" coords="183,115,349,141"/>
<area shape="rect" id="node8" href="router_8h.html#a71d8f6e0ed3558284e43371894abb504" title="dup_onion_keys" alt="" coords="208,165,324,192"/>
<area shape="rect" id="node4" href="util_8h.html#a0e1e4c423a6ba1306a9c3b2565e99391" title="format_rfc1123_time" alt="" coords="404,5,545,32"/>
<area shape="rect" id="node5" href="dirvote_8h.html#ad12be9f1748f89ce9e33a895218912fb" title="dirvote_get_start_of\l_next_interval" alt="" coords="406,57,543,98"/>
<area shape="rect" id="node7" href="cpuworker_8h.html#a1b4530118cd6e50e83a95454a6f22036" title="cpuworker_cancel_circ\l_handshake" alt="" coords="397,122,552,163"/>
</map>
</div>

</div>
</div>
<a id="affc9b93e04c69ebd4c63c25563b4a9b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc9b93e04c69ebd4c63c25563b4a9b7">&#9670;&nbsp;</a></span>tor_mutex_uninit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_mutex_uninit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clean up the mutex <b>m</b> so that it no longer uses any system resources. Does not free <b>m</b>. This function must only be called on mutexes from <a class="el" href="compat__pthreads_8c.html#accea24c75779968942013afa3ae1c051">tor_mutex_init()</a>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c_affc9b93e04c69ebd4c63c25563b4a9b7_icgraph.png" border="0" usemap="#compat__pthreads_8c_affc9b93e04c69ebd4c63c25563b4a9b7_icgraph" alt=""/></div>
<map name="compat__pthreads_8c_affc9b93e04c69ebd4c63c25563b4a9b7_icgraph" id="compat__pthreads_8c_affc9b93e04c69ebd4c63c25563b4a9b7_icgraph">
<area shape="rect" id="node2" href="compat__threads_8c.html#a204271ab584393121f49bae2f6363ffa" title="tor_mutex_free" alt="" coords="172,5,281,32"/>
<area shape="rect" id="node3" href="router_8h.html#a278cf107b4a9b636b105ec5581b2f427" title="router_free_all" alt="" coords="329,5,433,32"/>
</map>
</div>

</div>
</div>
<a id="ab5ec4f112638772d2cd9615394faa686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5ec4f112638772d2cd9615394faa686">&#9670;&nbsp;</a></span>tor_threadlocal_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_threadlocal_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *&#160;</td>
          <td class="paramname"><em>threadlocal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all resource associated with a thread-local variable. </p>

</div>
</div>
<a id="a6cb673aa66a1f9e0dad48b9d64e2fc16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cb673aa66a1f9e0dad48b9d64e2fc16">&#9670;&nbsp;</a></span>tor_threadlocal_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* tor_threadlocal_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *&#160;</td>
          <td class="paramname"><em>threadlocal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current value of a thread-local variable for this thread.</p>
<p>It's undefined behavior to use this function if the threadlocal hasn't been initialized, or has been destroyed. </p>

</div>
</div>
<a id="af886d69cbbcb268c0800d4d20381a1d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af886d69cbbcb268c0800d4d20381a1d1">&#9670;&nbsp;</a></span>tor_threadlocal_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_threadlocal_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *&#160;</td>
          <td class="paramname"><em>threadlocal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a thread-local variable.</p>
<p>After you call this function on a tor_threadlocal_t, you can call tor_threadlocal_set to change the current value of this variable for the current thread, and tor_threadlocal_get to retrieve the current value for the current thread. Each thread has its own value. </p>

</div>
</div>
<a id="ac75fb438cf54a6855abf1af61a9467c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac75fb438cf54a6855abf1af61a9467c8">&#9670;&nbsp;</a></span>tor_threadlocal_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_threadlocal_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__threadlocal__s.html">tor_threadlocal_t</a> *&#160;</td>
          <td class="paramname"><em>threadlocal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change the current value of a thread-local variable for this thread to <b>value</b>.</p>
<p>It's undefined behavior to use this function if the threadlocal hasn't been initialized, or has been destroyed. </p>

</div>
</div>
<a id="ad7af2665dcebaab14be9e040eef67de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7af2665dcebaab14be9e040eef67de0">&#9670;&nbsp;</a></span>tor_threads_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_threads_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set up common structures for use by threading. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat__pthreads_8c_ad7af2665dcebaab14be9e040eef67de0_icgraph.png" border="0" usemap="#compat__pthreads_8c_ad7af2665dcebaab14be9e040eef67de0_icgraph" alt=""/></div>
<map name="compat__pthreads_8c_ad7af2665dcebaab14be9e040eef67de0_icgraph" id="compat__pthreads_8c_ad7af2665dcebaab14be9e040eef67de0_icgraph">
<area shape="rect" id="node2" href="tor__main_8c.html#a6374afd9273e4780748fb27a8c15f2a3" title="tor_main" alt="" coords="164,5,236,32"/>
<area shape="rect" id="node4" href="test_8h.html#a568fcf10cfdd05506333a2b7ac5ee068" title="pk_generate" alt="" coords="383,31,476,57"/>
<area shape="rect" id="node3" href="tor__main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="284,5,335,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
