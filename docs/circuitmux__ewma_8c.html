<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/circuitmux_ewma.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">circuitmux_ewma.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>EWMA circuit selection as a circuitmux_t policy.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;orconfig.h&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="or_8h_source.html">or.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitmux_8h_source.html">circuitmux.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitmux__ewma_8h_source.html">circuitmux_ewma.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__rand_8h_source.html">crypto_rand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="networkstatus_8h_source.html">networkstatus.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for circuitmux_ewma.c:</div>
<div class="dyncontent">
<div class="center"><img src="circuitmux__ewma_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2circuitmux__ewma_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2circuitmux__ewma_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2circuitmux__ewma_8c">
<area shape="rect" id="node2" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="1481,1080,1559,1107"/>
<area shape="rect" id="node4" href="or_8h.html" title="Master header file for Tor&#45;specific functionality. " alt="" coords="1594,259,1638,285"/>
<area shape="rect" id="node42" href="circuitmux_8h.html" title="Header file for circuitmux.c. " alt="" coords="1475,184,1568,211"/>
<area shape="rect" id="node43" href="circuitmux__ewma_8h.html" title="Header file for circuitmux_ewma.c. " alt="" coords="1549,109,1683,136"/>
<area shape="rect" id="node44" href="crypto__rand_8h.html" title="Common functions for using (pseudo&#45;)random number generators. " alt="" coords="2515,632,2616,659"/>
<area shape="rect" id="node45" href="networkstatus_8h.html" title="Header file for networkstatus.c. " alt="" coords="713,184,828,211"/>
<area shape="rect" id="node5" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="2161,1005,2223,1032"/>
<area shape="rect" id="node7" href="crypto_8h.html" title="Headers for crypto.c. " alt="" coords="1469,408,1539,435"/>
<area shape="rect" id="node21" href="container_8h_source.html" title="container.h" alt="" coords="1947,632,2034,659"/>
<area shape="rect" id="node23" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="683,707,749,733"/>
<area shape="rect" id="node24" href="crypto__format_8h_source.html" title="crypto_format.h" alt="" coords="1179,333,1293,360"/>
<area shape="rect" id="node25" href="crypto__ed25519_8h_source.html" title="crypto_ed25519.h" alt="" coords="1221,408,1347,435"/>
<area shape="rect" id="node26" href="crypto__curve25519_8h_source.html" title="crypto_curve25519.h" alt="" coords="1107,483,1250,509"/>
<area shape="rect" id="node29" href="tortls_8h.html" title="Headers for tortls.c. " alt="" coords="603,408,666,435"/>
<area shape="rect" id="node32" href="compress_8h.html" title="Headers for compress.c. " alt="" coords="1317,333,1408,360"/>
<area shape="rect" id="node33" href="address_8h.html" title="Headers for address.h. " alt="" coords="2107,557,2186,584"/>
<area shape="rect" id="node34" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="5,931,133,957"/>
<area shape="rect" id="node35" href="ht_8h_source.html" title="ht.h" alt="" coords="1534,333,1578,360"/>
<area shape="rect" id="node36" href="confline_8h_source.html" title="confline.h" alt="" coords="1979,408,2058,435"/>
<area shape="rect" id="node37" href="replaycache_8h.html" title="Header file for replaycache.c. " alt="" coords="1654,333,1757,360"/>
<area shape="rect" id="node38" href="tor__queue_8h_source.html" title="tor_queue.h" alt="" coords="1781,333,1872,360"/>
<area shape="rect" id="node39" href="token__bucket_8h_source.html" title="token_bucket.h" alt="" coords="1778,931,1889,957"/>
<area shape="rect" id="node40" href="util__format_8h_source.html" title="util_format.h" alt="" coords="1659,931,1754,957"/>
<area shape="rect" id="node41" href="hs__circuitmap_8h.html" title="Header file for hs_circuitmap.c. " alt="" coords="1947,333,2061,360"/>
<area shape="rect" id="node9" href="compat_8h_source.html" title="compat.h" alt="" coords="1255,856,1331,883"/>
<area shape="rect" id="node15" href="util_8h.html" title="Headers for util.c. " alt="" coords="1427,707,1477,733"/>
<area shape="rect" id="node19" href="crypto__rsa_8h.html" title="Headers for crypto_rsa.c. " alt="" coords="934,483,1029,509"/>
<area shape="rect" id="node10" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="647,1005,745,1032"/>
<area shape="rect" id="node12" href="compat__time_8h.html" title="Functions and types for monotonic times. " alt="" coords="1173,1005,1281,1032"/>
<area shape="rect" id="node14" href="compat__threads_8h_source.html" title="compat_threads.h" alt="" coords="1123,931,1250,957"/>
<area shape="rect" id="node16" href="di__ops_8h.html" title="Headers for di_ops.c. " alt="" coords="1913,931,1983,957"/>
<area shape="rect" id="node18" href="util__bug_8h.html" title="Macros to manage assertions, fatal and non&#45;fatal. " alt="" coords="1315,781,1394,808"/>
<area shape="rect" id="node20" href="crypto__digest_8h.html" title="Headers for crypto_digest.c. " alt="" coords="1305,557,1415,584"/>
<area shape="rect" id="node22" href="siphash_8h_source.html" title="siphash.h" alt="" coords="1951,707,2030,733"/>
<area shape="rect" id="node27" href="crypto__openssl__mgt_8h_source.html" title="crypto_openssl_mgt.h" alt="" coords="977,557,1127,584"/>
<area shape="rect" id="node30" href="compat__openssl_8h.html" title="compatibility definitions for working with different openssl forks " alt="" coords="469,483,597,509"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcell__ewma__s.html">cell_ewma_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structewma__policy__data__s.html">ewma_policy_data_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structewma__policy__circ__data__s.html">ewma_policy_circ_data_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae920454561cd1ab1dccf248d8a49a728"><td class="memItemLeft" align="right" valign="top"><a id="ae920454561cd1ab1dccf248d8a49a728"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIRCUITMUX_EWMA_PRIVATE</b></td></tr>
<tr class="separator:ae920454561cd1ab1dccf248d8a49a728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2c612117de24fb5c79d3957e493b4f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a2c2c612117de24fb5c79d3957e493b4f">EWMA_TICK_LEN</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a2c2c612117de24fb5c79d3957e493b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91982be008f0a504559c366359d9d5db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a91982be008f0a504559c366359d9d5db">EWMA_DEFAULT_HALFLIFE</a>&#160;&#160;&#160;0.0</td></tr>
<tr class="separator:a91982be008f0a504559c366359d9d5db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a002b2f4894492820fe708b1b7e7c5e70"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a002b2f4894492820fe708b1b7e7c5e70">EPSILON</a>&#160;&#160;&#160;0.00001</td></tr>
<tr class="separator:a002b2f4894492820fe708b1b7e7c5e70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e348e012de8a36ad4d1c87853d1485b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a7e348e012de8a36ad4d1c87853d1485b">LOG_ONEHALF</a>&#160;&#160;&#160;-0.69314718055994529</td></tr>
<tr class="separator:a7e348e012de8a36ad4d1c87853d1485b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c380de7ee50cf298f38a5fc2357c1a9"><td class="memItemLeft" align="right" valign="top"><a id="a8c380de7ee50cf298f38a5fc2357c1a9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EWMA_POL_DATA_MAGIC</b>&#160;&#160;&#160;0x2fd8b16aU</td></tr>
<tr class="separator:a8c380de7ee50cf298f38a5fc2357c1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe30a71c4eb36797304448618131ccae"><td class="memItemLeft" align="right" valign="top"><a id="afe30a71c4eb36797304448618131ccae"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EWMA_POL_CIRC_DATA_MAGIC</b>&#160;&#160;&#160;0x761e7747U</td></tr>
<tr class="separator:afe30a71c4eb36797304448618131ccae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fce2d070f60aa5ce046cb8f1157e009"><td class="memItemLeft" align="right" valign="top"><a id="a5fce2d070f60aa5ce046cb8f1157e009"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMUX_PRIORITY_HALFLIFE_MSEC_DEFAULT</b>&#160;&#160;&#160;30000</td></tr>
<tr class="separator:a5fce2d070f60aa5ce046cb8f1157e009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf31b2f286e93d2d7d955f830c6432b"><td class="memItemLeft" align="right" valign="top"><a id="afbf31b2f286e93d2d7d955f830c6432b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMUX_PRIORITY_HALFLIFE_MSEC_MIN</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:afbf31b2f286e93d2d7d955f830c6432b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab9f43a8686171af8b644508eb4788f4"><td class="memItemLeft" align="right" valign="top"><a id="aab9f43a8686171af8b644508eb4788f4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMUX_PRIORITY_HALFLIFE_MSEC_MAX</b>&#160;&#160;&#160;INT32_MAX</td></tr>
<tr class="separator:aab9f43a8686171af8b644508eb4788f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a88645abb47f69ef015abdcc0358f4a14"><td class="memItemLeft" align="right" valign="top"><a id="a88645abb47f69ef015abdcc0358f4a14"></a>
typedef struct <a class="el" href="structcell__ewma__s.html">cell_ewma_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>cell_ewma_t</b></td></tr>
<tr class="separator:a88645abb47f69ef015abdcc0358f4a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88235be57906635670eb6482f5e97d8f"><td class="memItemLeft" align="right" valign="top"><a id="a88235be57906635670eb6482f5e97d8f"></a>
typedef struct <a class="el" href="structewma__policy__data__s.html">ewma_policy_data_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ewma_policy_data_t</b></td></tr>
<tr class="separator:a88235be57906635670eb6482f5e97d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb4317c8db00f4f3fb75c1f5e2da1f8"><td class="memItemLeft" align="right" valign="top"><a id="a7eb4317c8db00f4f3fb75c1f5e2da1f8"></a>
typedef struct <a class="el" href="structewma__policy__circ__data__s.html">ewma_policy_circ_data_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ewma_policy_circ_data_t</b></td></tr>
<tr class="separator:a7eb4317c8db00f4f3fb75c1f5e2da1f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1a01966aa0933d9a4389e13a6959ddf5"><td class="memItemLeft" align="right" valign="top">STATIC void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a1a01966aa0933d9a4389e13a6959ddf5">cell_ewma_initialize_ticks</a> (void)</td></tr>
<tr class="separator:a1a01966aa0933d9a4389e13a6959ddf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ec9e06f050c4859ac03148b7b6bf43"><td class="memItemLeft" align="right" valign="top">STATIC unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a81ec9e06f050c4859ac03148b7b6bf43">cell_ewma_get_current_tick_and_fraction</a> (double *remainder_out)</td></tr>
<tr class="separator:a81ec9e06f050c4859ac03148b7b6bf43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd96dbf858bab2938389a1c251c4defb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#abd96dbf858bab2938389a1c251c4defb">cmux_ewma_set_options</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *consensus)</td></tr>
<tr class="separator:abd96dbf858bab2938389a1c251c4defb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51cac6d653887d5d5529c3b0d8699c0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitmux__ewma_8c.html#a51cac6d653887d5d5529c3b0d8699c0f">circuitmux_ewma_free_all</a> (void)</td></tr>
<tr class="separator:a51cac6d653887d5d5529c3b0d8699c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4d3df646ef8936ac38c1eb0a13734cfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcircuitmux__policy__s.html">circuitmux_policy_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ewma_policy</b></td></tr>
<tr class="separator:a4d3df646ef8936ac38c1eb0a13734cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>EWMA circuit selection as a circuitmux_t policy. </p>
<p>The "EWMA" in this module stands for the "exponentially weighted moving
average" of the number of cells sent on each circuit. The goal is to prioritize cells on circuits that have been quiet recently, by looking at those that have sent few cells over time, prioritizing recent times more than older ones.</p>
<p>Specifically, a cell sent at time "now" has weight 1, but a time X ticks before now has weight ewma_scale_factor ^ X , where ewma_scale_factor is between 0.0 and 1.0.</p>
<p>For efficiency, we do not re-scale these averages every time we send a cell: that would be horribly inefficient. Instead, we we keep the cell count on all circuits on the same circuitmux scaled relative to a single tick. When we add a new cell, we scale its weight depending on the time that has elapsed since the tick. We do re-scale the circuits on the circuitmux periodically, so that we don't overflow double.</p>
<p>This module should be used through the interfaces in <a class="el" href="circuitmux_8c.html" title="Circuit mux/cell selection abstraction. ">circuitmux.c</a>, which it implements. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a002b2f4894492820fe708b1b7e7c5e70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a002b2f4894492820fe708b1b7e7c5e70">&#9670;&nbsp;</a></span>EPSILON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EPSILON&#160;&#160;&#160;0.00001</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Any halflife smaller than this number of seconds is considered to be "disabled". </p>

</div>
</div>
<a id="a91982be008f0a504559c366359d9d5db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91982be008f0a504559c366359d9d5db">&#9670;&nbsp;</a></span>EWMA_DEFAULT_HALFLIFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EWMA_DEFAULT_HALFLIFE&#160;&#160;&#160;0.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The default per-tick scale factor, if it hasn't been overridden by a consensus or a configuration setting. zero means "disabled". </p>

</div>
</div>
<a id="a2c2c612117de24fb5c79d3957e493b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2c612117de24fb5c79d3957e493b4f">&#9670;&nbsp;</a></span>EWMA_TICK_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EWMA_TICK_LEN&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How long does a tick last (seconds)? </p>

</div>
</div>
<a id="a7e348e012de8a36ad4d1c87853d1485b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e348e012de8a36ad4d1c87853d1485b">&#9670;&nbsp;</a></span>LOG_ONEHALF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_ONEHALF&#160;&#160;&#160;-0.69314718055994529</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The natural logarithm of 0.5. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a81ec9e06f050c4859ac03148b7b6bf43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81ec9e06f050c4859ac03148b7b6bf43">&#9670;&nbsp;</a></span>cell_ewma_get_current_tick_and_fraction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC unsigned cell_ewma_get_current_tick_and_fraction </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>remainder_out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the current cell_ewma tick and the fraction of the tick that has elapsed between the start of the tick and the current time. Return the former and store the latter in *<b>remainder_out</b>.</p>
<p>These tick values are not meant to be shared between Tor instances, or used for other purposes. </p>

</div>
</div>
<a id="a1a01966aa0933d9a4389e13a6959ddf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a01966aa0933d9a4389e13a6959ddf5">&#9670;&nbsp;</a></span>cell_ewma_initialize_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC void cell_ewma_initialize_ticks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the system that tells which ewma tick we are in. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitmux__ewma_8c_a1a01966aa0933d9a4389e13a6959ddf5_icgraph.png" border="0" usemap="#circuitmux__ewma_8c_a1a01966aa0933d9a4389e13a6959ddf5_icgraph" alt=""/></div>
<map name="circuitmux__ewma_8c_a1a01966aa0933d9a4389e13a6959ddf5_icgraph" id="circuitmux__ewma_8c_a1a01966aa0933d9a4389e13a6959ddf5_icgraph">
<area shape="rect" id="node2" href="circuitmux__ewma_8h.html#abd96dbf858bab2938389a1c251c4defb" title="cmux_ewma_set_options" alt="" coords="192,13,363,39"/>
</map>
</div>

</div>
</div>
<a id="a51cac6d653887d5d5529c3b0d8699c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51cac6d653887d5d5529c3b0d8699c0f">&#9670;&nbsp;</a></span>circuitmux_ewma_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuitmux_ewma_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drop all resources held by <a class="el" href="circuitmux__ewma_8c.html" title="EWMA circuit selection as a circuitmux_t policy. ">circuitmux_ewma.c</a>, and deinitialize the module. </p>

</div>
</div>
<a id="abd96dbf858bab2938389a1c251c4defb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd96dbf858bab2938389a1c251c4defb">&#9670;&nbsp;</a></span>cmux_ewma_set_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cmux_ewma_set_options </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>consensus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adjust the global cell scale factor based on <b>options</b> </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitmux__ewma_8c_abd96dbf858bab2938389a1c251c4defb_cgraph.png" border="0" usemap="#circuitmux__ewma_8c_abd96dbf858bab2938389a1c251c4defb_cgraph" alt=""/></div>
<map name="circuitmux__ewma_8c_abd96dbf858bab2938389a1c251c4defb_cgraph" id="circuitmux__ewma_8c_abd96dbf858bab2938389a1c251c4defb_cgraph">
<area shape="rect" id="node2" href="circuitmux__ewma_8c.html#a1a01966aa0933d9a4389e13a6959ddf5" title="cell_ewma_initialize\l_ticks" alt="" coords="224,5,363,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4d3df646ef8936ac38c1eb0a13734cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d3df646ef8936ac38c1eb0a13734cfb">&#9670;&nbsp;</a></span>ewma_policy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcircuitmux__policy__s.html">circuitmux_policy_t</a> ewma_policy</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   ewma_alloc_cmux_data,</div><div class="line">   ewma_free_cmux_data,</div><div class="line">   ewma_alloc_circ_data,</div><div class="line">   ewma_free_circ_data,</div><div class="line">   ewma_notify_circ_active,</div><div class="line">   ewma_notify_circ_inactive,</div><div class="line">   NULL, </div><div class="line">   ewma_notify_xmit_cells,</div><div class="line">   ewma_pick_active_circuit,</div><div class="line">   ewma_cmp_cmux</div><div class="line">}</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
