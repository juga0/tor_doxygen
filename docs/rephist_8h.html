<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/rephist.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">rephist.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for <a class="el" href="rephist_8c.html" title="Basic history and performance-tracking functionality. ">rephist.c</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h__dep__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2rephist_8hdep" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2rephist_8hdep" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2rephist_8hdep">
<area shape="rect" id="node2" href="channel_8c.html" title="OR/OP&#45;to&#45;OR channel abstraction layer. A channel&#39;s job is to transfer cells from Tor instance to Tor ..." alt="" coords="5,109,153,165"/>
<area shape="rect" id="node3" href="channeltls_8c.html" title="A concrete subclass of channel_t using or_connection_t to transfer cells between Tor instances..." alt="" coords="177,109,325,165"/>
<area shape="rect" id="node4" href="circuitbuild_8c.html" title="Implements the details of building circuits (by chosing paths, constructing/sending create/extend cel..." alt="" coords="349,109,497,165"/>
<area shape="rect" id="node5" href="circuitlist_8c.html" title="Manage the global circuit list, and looking up circuits within it. " alt="" coords="521,109,669,165"/>
<area shape="rect" id="node6" href="circuituse_8c.html" title="Launch the right sort of circuits and attach streams to them. " alt="" coords="693,109,841,165"/>
<area shape="rect" id="node7" href="command_8c.html" title="Functions for processing incoming cells. " alt="" coords="865,109,1013,165"/>
<area shape="rect" id="node8" href="config_8c.html" title="Code to parse and interpret configuration files. " alt="" coords="1037,109,1185,165"/>
<area shape="rect" id="node9" href="connection_8c.html" title="General high&#45;level functions to handle reading and writing on connections. " alt="" coords="1209,109,1357,165"/>
<area shape="rect" id="node10" href="connection__edge_8c.html" title="Handle edge streams. " alt="" coords="1381,109,1553,165"/>
<area shape="rect" id="node11" href="connection__or_8c.html" title="Functions to handle OR connections, TLS handshaking, and cells on the network. " alt="" coords="1578,109,1733,165"/>
<area shape="rect" id="node12" href="control_8c.html" title="Implementation for Tor&#39;s control&#45;socket interface. " alt="" coords="1757,109,1905,165"/>
<area shape="rect" id="node13" href="cpuworker_8c.html" title="Uses the workqueue/threadpool code to farm CPU&#45;intensive activities out to subprocesses. " alt="" coords="1929,109,2077,165"/>
<area shape="rect" id="node14" href="directory_8c.html" title="Code to send and fetch directories and router descriptors via HTTP. Directories use dirserv..." alt="" coords="2101,109,2249,165"/>
<area shape="rect" id="node15" href="dirserv_8c.html" title="Directory server core implementation. Manages directory contents and generates directories. " alt="" coords="2273,109,2421,165"/>
<area shape="rect" id="node16" href="dirvote_8c.html" title="Functions to compute directory consensus, and schedule voting. " alt="" coords="2445,109,2593,165"/>
<area shape="rect" id="node17" href="main_8c.html" title="Toplevel module. Handles signals, multiplexes between connections, implements main loop..." alt="" coords="2617,109,2765,165"/>
<area shape="rect" id="node18" href="onion_8c.html" title="Functions to queue create cells, wrap the various onionskin types, and parse and create the CREATE ce..." alt="" coords="2789,109,2937,165"/>
<area shape="rect" id="node19" href="onion__tap_8c.html" title="Functions to implement the original Tor circuit extension handshake (a.k.a TAP). " alt="" coords="2961,109,3109,165"/>
<area shape="rect" id="node20" href="rendcache_8c.html" title="Hidden service descriptor cache. " alt="" coords="3133,109,3281,165"/>
<area shape="rect" id="node21" href="rendclient_8c.html" title="Client code to access location&#45;hidden services. " alt="" coords="3305,109,3453,165"/>
<area shape="rect" id="node22" href="rendcommon_8c.html" title="Rendezvous implementation: shared code between introducers, services, clients, and rendezvous points..." alt="" coords="3478,109,3627,165"/>
<area shape="rect" id="node23" href="rendmid_8c.html" title="Implement introductions points and rendezvous points. " alt="" coords="3652,109,3800,165"/>
<area shape="rect" id="node24" href="rendservice_8c.html" title="The hidden&#45;service side of rendezvous functionality. " alt="" coords="3824,109,3972,165"/>
<area shape="rect" id="node25" href="rephist_8c.html" title="Basic history and performance&#45;tracking functionality. " alt="" coords="3996,109,4144,165"/>
<area shape="rect" id="node26" href="router_8c.html" title="Miscellaneous relay functionality, including RSA key maintenance, generating and uploading server des..." alt="" coords="4168,109,4316,165"/>
<area shape="rect" id="node27" href="routerlist_8c.html" title="Code to maintain and access the global list of routerinfos for known servers. " alt="" coords="4340,109,4488,165"/>
<area shape="rect" id="node28" href="routerparse_8c.html" title="Code to parse and validate router descriptors, consenus directories, and similar objects. " alt="" coords="4512,109,4660,165"/>
<area shape="rect" id="node29" href="statefile_8c.html" title="Handles parsing and encoding the persistent &#39;state&#39; file that carries miscellaneous persistent state ..." alt="" coords="4684,109,4832,165"/>
<area shape="rect" id="node30" href="status_8c.html" title="Collect status information and log heartbeat messages. " alt="" coords="4856,109,5004,165"/>
</map>
</div>
</div>
<p><a href="rephist_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4d366e7eec3df9ea74e18f92ce04a308"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a4d366e7eec3df9ea74e18f92ce04a308">rep_hist_init</a> (void)</td></tr>
<tr class="separator:a4d366e7eec3df9ea74e18f92ce04a308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5126f7536c1ba478c345b491592e2578"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a5126f7536c1ba478c345b491592e2578">rep_hist_note_connect_failed</a> (const char *nickname, time_t when)</td></tr>
<tr class="separator:a5126f7536c1ba478c345b491592e2578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70175bcee5870d9bb5865afe9546f15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#af70175bcee5870d9bb5865afe9546f15">rep_hist_note_connect_succeeded</a> (const char *nickname, time_t when)</td></tr>
<tr class="separator:af70175bcee5870d9bb5865afe9546f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91eda051c85a34fafa9c8b841cb38d8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a91eda051c85a34fafa9c8b841cb38d8e">rep_hist_note_disconnect</a> (const char *nickname, time_t when)</td></tr>
<tr class="separator:a91eda051c85a34fafa9c8b841cb38d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a79c6da91278f419931dcdc0b9e6e35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a6a79c6da91278f419931dcdc0b9e6e35">rep_hist_note_connection_died</a> (const char *nickname, time_t when)</td></tr>
<tr class="separator:a6a79c6da91278f419931dcdc0b9e6e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11b10f46a4eaaf252642cb792e84aad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ae11b10f46a4eaaf252642cb792e84aad">rep_hist_note_extend_succeeded</a> (const char *from_name, const char *to_name)</td></tr>
<tr class="separator:ae11b10f46a4eaaf252642cb792e84aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c3f89e405d792f8696046f55c95efa4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a7c3f89e405d792f8696046f55c95efa4">rep_hist_note_extend_failed</a> (const char *from_name, const char *to_name)</td></tr>
<tr class="separator:a7c3f89e405d792f8696046f55c95efa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f2c4294a880006745284556ecbf7a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a86f2c4294a880006745284556ecbf7a6">rep_hist_dump_stats</a> (time_t now, int severity)</td></tr>
<tr class="separator:a86f2c4294a880006745284556ecbf7a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83be6fc7f1f878774cf695613c10bb25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a83be6fc7f1f878774cf695613c10bb25">rep_hist_note_bytes_read</a> (size_t num_bytes, time_t when)</td></tr>
<tr class="separator:a83be6fc7f1f878774cf695613c10bb25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a541242961ffc36e790fd7ef2cf428ce3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a541242961ffc36e790fd7ef2cf428ce3">rep_hist_note_bytes_written</a> (size_t num_bytes, time_t when)</td></tr>
<tr class="separator:a541242961ffc36e790fd7ef2cf428ce3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae263f2f9a13d6b47c052db721795027a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ae263f2f9a13d6b47c052db721795027a">rep_hist_make_router_pessimal</a> (const char *id, time_t when)</td></tr>
<tr class="separator:ae263f2f9a13d6b47c052db721795027a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8618ae2b4abf50632e0d2c0d7afa4f82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a8618ae2b4abf50632e0d2c0d7afa4f82">rep_hist_note_dir_bytes_read</a> (size_t num_bytes, time_t when)</td></tr>
<tr class="separator:a8618ae2b4abf50632e0d2c0d7afa4f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a339857e370cdbfcd003048f1529cc819"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a339857e370cdbfcd003048f1529cc819">rep_hist_note_dir_bytes_written</a> (size_t num_bytes, time_t when)</td></tr>
<tr class="separator:a339857e370cdbfcd003048f1529cc819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a747be37fb2bcd6f96de5e6ba3b365238"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a747be37fb2bcd6f96de5e6ba3b365238">rep_hist_bandwidth_assess</a> (void)</td></tr>
<tr class="separator:a747be37fb2bcd6f96de5e6ba3b365238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec38cadc5f0d80c3e7b739c25b20fb1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aeec38cadc5f0d80c3e7b739c25b20fb1">rep_hist_get_bandwidth_lines</a> (void)</td></tr>
<tr class="separator:aeec38cadc5f0d80c3e7b739c25b20fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb76ca6ea0d41d2b9f29975c25d11cf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#acb76ca6ea0d41d2b9f29975c25d11cf2">rep_hist_update_state</a> (<a class="el" href="structor__state__t.html">or_state_t</a> *state)</td></tr>
<tr class="separator:acb76ca6ea0d41d2b9f29975c25d11cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61328aa7339a8d9229391bee84a60481"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a61328aa7339a8d9229391bee84a60481">rep_hist_load_state</a> (<a class="el" href="structor__state__t.html">or_state_t</a> *state, char **err)</td></tr>
<tr class="separator:a61328aa7339a8d9229391bee84a60481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26034f0ea8dbd53bbe580f88de3adb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ab26034f0ea8dbd53bbe580f88de3adb6">rep_history_clean</a> (time_t before)</td></tr>
<tr class="separator:ab26034f0ea8dbd53bbe580f88de3adb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b5c4cccd072d6c29dae2dab3fd12294"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a1b5c4cccd072d6c29dae2dab3fd12294">rep_hist_note_router_reachable</a> (const char *id, const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *at_addr, const uint16_t at_port, time_t when)</td></tr>
<tr class="separator:a1b5c4cccd072d6c29dae2dab3fd12294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d82d65e82208716c6db808c3361b19e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a8d82d65e82208716c6db808c3361b19e">rep_hist_note_router_unreachable</a> (const char *id, time_t when)</td></tr>
<tr class="separator:a8d82d65e82208716c6db808c3361b19e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9bf4bc8b3124f73c775e4d83cf0a13"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#acc9bf4bc8b3124f73c775e4d83cf0a13">rep_hist_record_mtbf_data</a> (time_t now, int missing_means_down)</td></tr>
<tr class="separator:acc9bf4bc8b3124f73c775e4d83cf0a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b22d94b9f6a32b2213e011bb278258d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a3b22d94b9f6a32b2213e011bb278258d">rep_hist_load_mtbf_data</a> (time_t now)</td></tr>
<tr class="separator:a3b22d94b9f6a32b2213e011bb278258d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cf617b0c2ef526e55a7330493e54a7c"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a0cf617b0c2ef526e55a7330493e54a7c">rep_hist_downrate_old_runs</a> (time_t now)</td></tr>
<tr class="separator:a0cf617b0c2ef526e55a7330493e54a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7756c31625ece0df9fedb39eace5eb4a"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a7756c31625ece0df9fedb39eace5eb4a">rep_hist_get_uptime</a> (const char *id, time_t when)</td></tr>
<tr class="separator:a7756c31625ece0df9fedb39eace5eb4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a344a591888386fa1765d929473059adc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a344a591888386fa1765d929473059adc">rep_hist_get_stability</a> (const char *id, time_t when)</td></tr>
<tr class="separator:a344a591888386fa1765d929473059adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8d10b67c04a514af5c815ba3c3e21a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a6f8d10b67c04a514af5c815ba3c3e21a">rep_hist_get_weighted_fractional_uptime</a> (const char *id, time_t when)</td></tr>
<tr class="separator:a6f8d10b67c04a514af5c815ba3c3e21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab47eb1b0317449361156fb44b1c6c0"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a7ab47eb1b0317449361156fb44b1c6c0">rep_hist_get_weighted_time_known</a> (const char *id, time_t when)</td></tr>
<tr class="separator:a7ab47eb1b0317449361156fb44b1c6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5314eabb70c00fc38ae3fd34c813924"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#af5314eabb70c00fc38ae3fd34c813924">rep_hist_have_measured_enough_stability</a> (void)</td></tr>
<tr class="separator:af5314eabb70c00fc38ae3fd34c813924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a1d0bbc69ce2253a076062b087337a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a19a1d0bbc69ce2253a076062b087337a">rep_hist_note_used_port</a> (time_t now, uint16_t port)</td></tr>
<tr class="separator:a19a1d0bbc69ce2253a076062b087337a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65bc07992ae6d46e834570e7cdd1fac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ae65bc07992ae6d46e834570e7cdd1fac">rep_hist_get_predicted_ports</a> (time_t now)</td></tr>
<tr class="separator:ae65bc07992ae6d46e834570e7cdd1fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bb6e281220a985d4c054cf602005d7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a5bb6e281220a985d4c054cf602005d7e">rep_hist_remove_predicted_ports</a> (const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *rmv_ports)</td></tr>
<tr class="separator:a5bb6e281220a985d4c054cf602005d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45d4e4767a0ba5eed365aa5fe53e7f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aa45d4e4767a0ba5eed365aa5fe53e7f9">rep_hist_note_used_resolve</a> (time_t now)</td></tr>
<tr class="separator:aa45d4e4767a0ba5eed365aa5fe53e7f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925242d56f1b913429e29bb54e478574"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a925242d56f1b913429e29bb54e478574">rep_hist_note_used_internal</a> (time_t now, int need_uptime, int need_capacity)</td></tr>
<tr class="separator:a925242d56f1b913429e29bb54e478574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4717d346fa88f1ea706ed1105f7a605"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ad4717d346fa88f1ea706ed1105f7a605">rep_hist_get_predicted_internal</a> (time_t now, int *need_uptime, int *need_capacity)</td></tr>
<tr class="separator:ad4717d346fa88f1ea706ed1105f7a605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae234f5b5dcf88ea65ef20ff5c3512327"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ae234f5b5dcf88ea65ef20ff5c3512327">any_predicted_circuits</a> (time_t now)</td></tr>
<tr class="separator:ae234f5b5dcf88ea65ef20ff5c3512327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890009e83c2e90292a435526b8111727"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a890009e83c2e90292a435526b8111727">rep_hist_circbuilding_dormant</a> (time_t now)</td></tr>
<tr class="separator:a890009e83c2e90292a435526b8111727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a88c4403f60e265a54916b6e832f49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a55a88c4403f60e265a54916b6e832f49">note_crypto_pk_op</a> (<a class="el" href="or_8h.html#ad4049c44927c69ab79f92289e6b72937">pk_op_t</a> operation)</td></tr>
<tr class="separator:a55a88c4403f60e265a54916b6e832f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445ff3ee23999b52d45c456c7b4f8e63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a445ff3ee23999b52d45c456c7b4f8e63">dump_pk_ops</a> (int severity)</td></tr>
<tr class="separator:a445ff3ee23999b52d45c456c7b4f8e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68cb27a67eaea36055f87b2026009053"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a68cb27a67eaea36055f87b2026009053">rep_hist_exit_stats_init</a> (time_t now)</td></tr>
<tr class="separator:a68cb27a67eaea36055f87b2026009053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc1d070a99f98c88d5156415065cbd68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#adc1d070a99f98c88d5156415065cbd68">rep_hist_reset_exit_stats</a> (time_t now)</td></tr>
<tr class="separator:adc1d070a99f98c88d5156415065cbd68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a289eb22365316fdb74d9d18223765"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ae2a289eb22365316fdb74d9d18223765">rep_hist_exit_stats_term</a> (void)</td></tr>
<tr class="separator:ae2a289eb22365316fdb74d9d18223765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93529f170e0ab512c9a4e9f121af63b9"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a93529f170e0ab512c9a4e9f121af63b9">rep_hist_format_exit_stats</a> (time_t now)</td></tr>
<tr class="separator:a93529f170e0ab512c9a4e9f121af63b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af99f8a1303d319cc2c82444de4ae754e"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#af99f8a1303d319cc2c82444de4ae754e">rep_hist_exit_stats_write</a> (time_t now)</td></tr>
<tr class="separator:af99f8a1303d319cc2c82444de4ae754e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10562e9d8fedb7c21f604817f70aca10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a10562e9d8fedb7c21f604817f70aca10">rep_hist_note_exit_bytes</a> (uint16_t port, size_t num_written, size_t num_read)</td></tr>
<tr class="separator:a10562e9d8fedb7c21f604817f70aca10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c937d06bcbf838afd2303798b5dd0a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a6c937d06bcbf838afd2303798b5dd0a2">rep_hist_note_exit_stream_opened</a> (uint16_t port)</td></tr>
<tr class="separator:a6c937d06bcbf838afd2303798b5dd0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ea0ebfd04c62c6d8a5e761723b476ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a5ea0ebfd04c62c6d8a5e761723b476ca">rep_hist_buffer_stats_init</a> (time_t now)</td></tr>
<tr class="separator:a5ea0ebfd04c62c6d8a5e761723b476ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72188bf54aae0e9272929ebf7de27a0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a72188bf54aae0e9272929ebf7de27a0f">rep_hist_buffer_stats_add_circ</a> (<a class="el" href="structcircuit__t.html">circuit_t</a> *circ, time_t end_of_interval)</td></tr>
<tr class="separator:a72188bf54aae0e9272929ebf7de27a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adee1547a4ff701ad78b851ec2cbe37d5"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#adee1547a4ff701ad78b851ec2cbe37d5">rep_hist_buffer_stats_write</a> (time_t now)</td></tr>
<tr class="separator:adee1547a4ff701ad78b851ec2cbe37d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bbd8c271022f2de86846d5099ed7478"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a0bbd8c271022f2de86846d5099ed7478">rep_hist_buffer_stats_term</a> (void)</td></tr>
<tr class="separator:a0bbd8c271022f2de86846d5099ed7478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6922d0fa8a12f847528b60803ede013"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aa6922d0fa8a12f847528b60803ede013">rep_hist_add_buffer_stats</a> (double mean_num_cells_in_queue, double mean_time_cells_in_queue, uint32_t processed_cells)</td></tr>
<tr class="separator:aa6922d0fa8a12f847528b60803ede013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b52825041edb0008d04a95a8ce18b4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ad6b52825041edb0008d04a95a8ce18b4">rep_hist_format_buffer_stats</a> (time_t now)</td></tr>
<tr class="separator:ad6b52825041edb0008d04a95a8ce18b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89f927d97d217f29680458cec3a7d82e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a89f927d97d217f29680458cec3a7d82e">rep_hist_reset_buffer_stats</a> (time_t now)</td></tr>
<tr class="separator:a89f927d97d217f29680458cec3a7d82e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4d80d1275aed0509a8fe3cc73638fe1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ab4d80d1275aed0509a8fe3cc73638fe1">rep_hist_desc_stats_init</a> (time_t now)</td></tr>
<tr class="separator:ab4d80d1275aed0509a8fe3cc73638fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c954626f09cc1aa42022d14d72dc9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a08c954626f09cc1aa42022d14d72dc9c">rep_hist_note_desc_served</a> (const char *desc)</td></tr>
<tr class="separator:a08c954626f09cc1aa42022d14d72dc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ccbd8011e8a2ee861a16607090635a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a23ccbd8011e8a2ee861a16607090635a">rep_hist_desc_stats_term</a> (void)</td></tr>
<tr class="separator:a23ccbd8011e8a2ee861a16607090635a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514f1de075d0958e22f8f1970cefa324"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a514f1de075d0958e22f8f1970cefa324">rep_hist_desc_stats_write</a> (time_t now)</td></tr>
<tr class="separator:a514f1de075d0958e22f8f1970cefa324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c04e18f72e35ca2e92fdda98c707f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a75c04e18f72e35ca2e92fdda98c707f3">rep_hist_conn_stats_init</a> (time_t now)</td></tr>
<tr class="separator:a75c04e18f72e35ca2e92fdda98c707f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26f4a759a9cfe2f7853c5982fb6e4ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ad26f4a759a9cfe2f7853c5982fb6e4ee">rep_hist_note_or_conn_bytes</a> (uint64_t conn_id, size_t num_read, size_t num_written, time_t when)</td></tr>
<tr class="separator:ad26f4a759a9cfe2f7853c5982fb6e4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6701b2dd200113e2704f74cd617bcee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a6701b2dd200113e2704f74cd617bcee9">rep_hist_reset_conn_stats</a> (time_t now)</td></tr>
<tr class="separator:a6701b2dd200113e2704f74cd617bcee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db692e6556ac10614bc93ad4e47f641"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a2db692e6556ac10614bc93ad4e47f641">rep_hist_format_conn_stats</a> (time_t now)</td></tr>
<tr class="separator:a2db692e6556ac10614bc93ad4e47f641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd2df36e3a8459c5dd179393f9319cf"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a8cd2df36e3a8459c5dd179393f9319cf">rep_hist_conn_stats_write</a> (time_t now)</td></tr>
<tr class="separator:a8cd2df36e3a8459c5dd179393f9319cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab07295fcf86178837f8c44df26c9a133"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ab07295fcf86178837f8c44df26c9a133">rep_hist_conn_stats_term</a> (void)</td></tr>
<tr class="separator:ab07295fcf86178837f8c44df26c9a133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9585f6fefb625dd07f86b14a4959ae2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aa9585f6fefb625dd07f86b14a4959ae2">rep_hist_note_circuit_handshake_requested</a> (uint16_t type)</td></tr>
<tr class="separator:aa9585f6fefb625dd07f86b14a4959ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeada89386ef94a7d19f3aeeb0976e61b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aeada89386ef94a7d19f3aeeb0976e61b">rep_hist_note_circuit_handshake_assigned</a> (uint16_t type)</td></tr>
<tr class="separator:aeada89386ef94a7d19f3aeeb0976e61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa0ed85d3567e756589f66fc77e7ede"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aeaa0ed85d3567e756589f66fc77e7ede">rep_hist_log_circuit_handshake_stats</a> (time_t now)</td></tr>
<tr class="separator:aeaa0ed85d3567e756589f66fc77e7ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e68240855c007866b52038ae34eb2e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a8e68240855c007866b52038ae34eb2e3">rep_hist_hs_stats_init</a> (time_t now)</td></tr>
<tr class="separator:a8e68240855c007866b52038ae34eb2e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a9a5c1275066ae149c6eae8eb16578"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a27a9a5c1275066ae149c6eae8eb16578">rep_hist_hs_stats_term</a> (void)</td></tr>
<tr class="separator:a27a9a5c1275066ae149c6eae8eb16578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b518f5a00f74add63285d2d831834a0"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a8b518f5a00f74add63285d2d831834a0">rep_hist_hs_stats_write</a> (time_t now)</td></tr>
<tr class="separator:a8b518f5a00f74add63285d2d831834a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221b1be1ef8942db335b28887a26af53"><td class="memItemLeft" align="right" valign="top"><a id="a221b1be1ef8942db335b28887a26af53"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>rep_hist_get_hs_stats_string</b> (void)</td></tr>
<tr class="separator:a221b1be1ef8942db335b28887a26af53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa129953ef2ec16245171a6e0964018be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#aa129953ef2ec16245171a6e0964018be">rep_hist_seen_new_rp_cell</a> (void)</td></tr>
<tr class="separator:aa129953ef2ec16245171a6e0964018be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7fc106c03b6628580434b5469dae815"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#ab7fc106c03b6628580434b5469dae815">rep_hist_stored_maybe_new_hs</a> (const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *pubkey)</td></tr>
<tr class="separator:ab7fc106c03b6628580434b5469dae815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4739d83556eb91aea569c9294ca1780a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a4739d83556eb91aea569c9294ca1780a">rep_hist_free_all</a> (void)</td></tr>
<tr class="separator:a4739d83556eb91aea569c9294ca1780a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1289e7609b84a790ee03f06dd95ab023"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a1289e7609b84a790ee03f06dd95ab023">rep_hist_note_negotiated_link_proto</a> (unsigned link_proto, int started_here)</td></tr>
<tr class="separator:a1289e7609b84a790ee03f06dd95ab023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c148938a37328053015298538aa263a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a9c148938a37328053015298538aa263a">rep_hist_log_link_protocol_counts</a> (void)</td></tr>
<tr class="separator:a9c148938a37328053015298538aa263a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1c529acab759963aafdadf6a09919a1c"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a1c529acab759963aafdadf6a09919a1c">rephist_total_alloc</a></td></tr>
<tr class="separator:a1c529acab759963aafdadf6a09919a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee7ea1b1b6ddb95f2641841e20f9269"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rephist_8h.html#a9ee7ea1b1b6ddb95f2641841e20f9269">rephist_total_num</a></td></tr>
<tr class="separator:a9ee7ea1b1b6ddb95f2641841e20f9269"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for <a class="el" href="rephist_8c.html" title="Basic history and performance-tracking functionality. ">rephist.c</a>. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae234f5b5dcf88ea65ef20ff5c3512327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae234f5b5dcf88ea65ef20ff5c3512327">&#9670;&nbsp;</a></span>any_predicted_circuits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int any_predicted_circuits </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Any ports used lately? These are pre-seeded if we just started up or if we're running a hidden service. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_ae234f5b5dcf88ea65ef20ff5c3512327_icgraph.png" border="0" usemap="#rephist_8h_ae234f5b5dcf88ea65ef20ff5c3512327_icgraph" alt=""/></div>
<map name="rephist_8h_ae234f5b5dcf88ea65ef20ff5c3512327_icgraph" id="rephist_8h_ae234f5b5dcf88ea65ef20ff5c3512327_icgraph">
<area shape="rect" id="node2" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="1245,35,1373,77"/>
<area shape="rect" id="node3" href="rephist_8h.html#a890009e83c2e90292a435526b8111727" title="rep_hist_circbuilding\l_dormant" alt="" coords="205,65,345,106"/>
<area shape="rect" id="node4" href="dirserv_8h.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="393,75,540,117"/>
<area shape="rect" id="node5" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="807,93,1004,120"/>
<area shape="rect" id="node7" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="588,145,759,186"/>
<area shape="rect" id="node6" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="1052,94,1197,135"/>
<area shape="rect" id="node8" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="823,145,988,186"/>
</map>
</div>

</div>
</div>
<a id="a445ff3ee23999b52d45c456c7b4f8e63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a445ff3ee23999b52d45c456c7b4f8e63">&#9670;&nbsp;</a></span>dump_pk_ops()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_pk_ops </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log the number of times we've done each public/private-key operation. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a445ff3ee23999b52d45c456c7b4f8e63_cgraph.png" border="0" usemap="#rephist_8h_a445ff3ee23999b52d45c456c7b4f8e63_cgraph" alt=""/></div>
<map name="rephist_8h_a445ff3ee23999b52d45c456c7b4f8e63_cgraph" id="rephist_8h_a445ff3ee23999b52d45c456c7b4f8e63_cgraph">
<area shape="rect" id="node2" href="log_8c.html#a048192107dfd3f8f22b9e599e45d0b34" title="tor_log" alt="" coords="156,5,217,32"/>
</map>
</div>

</div>
</div>
<a id="a55a88c4403f60e265a54916b6e832f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a88c4403f60e265a54916b6e832f49">&#9670;&nbsp;</a></span>note_crypto_pk_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void note_crypto_pk_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#ad4049c44927c69ab79f92289e6b72937">pk_op_t</a>&#160;</td>
          <td class="paramname"><em>operation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Increment the count of the number of times we've done <b>operation</b>. </p>

</div>
</div>
<a id="aa6922d0fa8a12f847528b60803ede013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6922d0fa8a12f847528b60803ede013">&#9670;&nbsp;</a></span>rep_hist_add_buffer_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_add_buffer_stats </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mean_num_cells_in_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mean_time_cells_in_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>processed_cells</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember cell statistics <b>mean_num_cells_in_queue</b>, <b>mean_time_cells_in_queue</b>, and <b>processed_cells</b> of a circuit. </p>

</div>
</div>
<a id="a747be37fb2bcd6f96de5e6ba3b365238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a747be37fb2bcd6f96de5e6ba3b365238">&#9670;&nbsp;</a></span>rep_hist_bandwidth_assess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_bandwidth_assess </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find the largest sums in the past NUM_SECS_BW_SUM_IS_VALID (roughly) seconds. Find one sum for reading and one for writing. They don't have to be at the same time.</p>
<p>Return the smaller of these sums, divided by NUM_SECS_ROLLING_MEASURE. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a747be37fb2bcd6f96de5e6ba3b365238_icgraph.png" border="0" usemap="#rephist_8h_a747be37fb2bcd6f96de5e6ba3b365238_icgraph" alt=""/></div>
<map name="rephist_8h_a747be37fb2bcd6f96de5e6ba3b365238_icgraph" id="rephist_8h_a747be37fb2bcd6f96de5e6ba3b365238_icgraph">
<area shape="rect" id="node2" href="router_8h.html#ab9b5c1a252539d60ae2cfaca3a06c4e7" title="check_descriptor_bandwidth\l_changed" alt="" coords="188,5,375,47"/>
</map>
</div>

</div>
</div>
<a id="a72188bf54aae0e9272929ebf7de27a0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72188bf54aae0e9272929ebf7de27a0f">&#9670;&nbsp;</a></span>rep_hist_buffer_stats_add_circ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_buffer_stats_add_circ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>end_of_interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember cell statistics for circuit <b>circ</b> at time <b>end_of_interval</b> and reset cell counters in case the circuit remains open in the next measurement interval. </p>

</div>
</div>
<a id="a5ea0ebfd04c62c6d8a5e761723b476ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ea0ebfd04c62c6d8a5e761723b476ca">&#9670;&nbsp;</a></span>rep_hist_buffer_stats_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_buffer_stats_init </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize buffer stats. </p>

</div>
</div>
<a id="a0bbd8c271022f2de86846d5099ed7478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bbd8c271022f2de86846d5099ed7478">&#9670;&nbsp;</a></span>rep_hist_buffer_stats_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_buffer_stats_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop collecting cell stats in a way that we can re-start doing so in <a class="el" href="rephist_8c.html#a5ea0ebfd04c62c6d8a5e761723b476ca">rep_hist_buffer_stats_init()</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a0bbd8c271022f2de86846d5099ed7478_cgraph.png" border="0" usemap="#rephist_8h_a0bbd8c271022f2de86846d5099ed7478_cgraph" alt=""/></div>
<map name="rephist_8h_a0bbd8c271022f2de86846d5099ed7478_cgraph" id="rephist_8h_a0bbd8c271022f2de86846d5099ed7478_cgraph">
<area shape="rect" id="node2" href="rephist_8c.html#a89f927d97d217f29680458cec3a7d82e" title="rep_hist_reset_buffer\l_stats" alt="" coords="231,5,375,47"/>
<area shape="rect" id="node3" href="container_8c.html#ad24500d61ff1dbb6c845a8a70f6d2f14" title="smartlist_clear" alt="" coords="423,13,529,39"/>
</map>
</div>

</div>
</div>
<a id="adee1547a4ff701ad78b851ec2cbe37d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adee1547a4ff701ad78b851ec2cbe37d5">&#9670;&nbsp;</a></span>rep_hist_buffer_stats_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rep_hist_buffer_stats_write </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If 24 hours have passed since the beginning of the current buffer stats period, write buffer stats to $DATADIR/stats/buffer-stats (possibly overwriting an existing file) and reset counters. Return when we would next want to write buffer stats or 0 if we never want to write. </p>

</div>
</div>
<a id="a890009e83c2e90292a435526b8111727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890009e83c2e90292a435526b8111727">&#9670;&nbsp;</a></span>rep_hist_circbuilding_dormant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_circbuilding_dormant </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if we have no need for circuits currently, else return 0. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a890009e83c2e90292a435526b8111727_cgraph.png" border="0" usemap="#rephist_8h_a890009e83c2e90292a435526b8111727_cgraph" alt=""/></div>
<map name="rephist_8h_a890009e83c2e90292a435526b8111727_cgraph" id="rephist_8h_a890009e83c2e90292a435526b8111727_cgraph">
<area shape="rect" id="node2" href="rephist_8c.html#ae234f5b5dcf88ea65ef20ff5c3512327" title="any_predicted_circuits" alt="" coords="194,5,346,32"/>
<area shape="rect" id="node3" href="router_8c.html#a8b917b11fb2945b314286a6a567e34c3" title="check_whether_orport\l_reachable" alt="" coords="195,57,345,98"/>
<area shape="rect" id="node4" href="circuituse_8c.html#ac6c1a2c715351d85ef6747ca1a4db958" title="circuit_enough_testing\l_circs" alt="" coords="194,122,346,163"/>
<area shape="rect" id="node5" href="router_8c.html#a98317a030cb30700f60c8444d676087b" title="check_whether_dirport\l_reachable" alt="" coords="193,187,347,229"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a890009e83c2e90292a435526b8111727_icgraph.png" border="0" usemap="#rephist_8h_a890009e83c2e90292a435526b8111727_icgraph" alt=""/></div>
<map name="rephist_8h_a890009e83c2e90292a435526b8111727_icgraph" id="rephist_8h_a890009e83c2e90292a435526b8111727_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#a2c5edbbd6883a33af3d72bfead4033db" title="directory_too_idle\l_to_fetch_descriptors" alt="" coords="193,27,340,68"/>
<area shape="rect" id="node3" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="1045,5,1173,47"/>
<area shape="rect" id="node4" href="microdesc_8h.html#aad7f413d899b72e58bed8efc0162d8bd" title="update_microdesc_downloads" alt="" coords="607,34,804,61"/>
<area shape="rect" id="node6" href="routerlist_8h.html#a1a7cfda729e27cf26089db2112d21965" title="update_consensus_router\l_descriptor_downloads" alt="" coords="388,85,559,127"/>
<area shape="rect" id="node5" href="routerlist_8h.html#afe7f2c6bcc3135272bc6aa66ec09cd76" title="update_all_descriptor\l_downloads" alt="" coords="852,35,997,76"/>
<area shape="rect" id="node7" href="routerlist_8h.html#a8b67f737b9ea614297414b26eb3b784c" title="update_router_descriptor\l_downloads" alt="" coords="623,85,788,127"/>
</map>
</div>

</div>
</div>
<a id="a75c04e18f72e35ca2e92fdda98c707f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c04e18f72e35ca2e92fdda98c707f3">&#9670;&nbsp;</a></span>rep_hist_conn_stats_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_conn_stats_init </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize connection stats. </p>

</div>
</div>
<a id="ab07295fcf86178837f8c44df26c9a133"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab07295fcf86178837f8c44df26c9a133">&#9670;&nbsp;</a></span>rep_hist_conn_stats_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_conn_stats_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop collecting connection stats in a way that we can re-start doing so in <a class="el" href="rephist_8c.html#a75c04e18f72e35ca2e92fdda98c707f3">rep_hist_conn_stats_init()</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_ab07295fcf86178837f8c44df26c9a133_cgraph.png" border="0" usemap="#rephist_8h_ab07295fcf86178837f8c44df26c9a133_cgraph" alt=""/></div>
<map name="rephist_8h_ab07295fcf86178837f8c44df26c9a133_cgraph" id="rephist_8h_ab07295fcf86178837f8c44df26c9a133_cgraph">
<area shape="rect" id="node2" href="rephist_8c.html#a6701b2dd200113e2704f74cd617bcee9" title="rep_hist_reset_conn\l_stats" alt="" coords="225,5,364,47"/>
</map>
</div>

</div>
</div>
<a id="a8cd2df36e3a8459c5dd179393f9319cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cd2df36e3a8459c5dd179393f9319cf">&#9670;&nbsp;</a></span>rep_hist_conn_stats_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rep_hist_conn_stats_write </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If 24 hours have passed since the beginning of the current conn stats period, write conn stats to $DATADIR/stats/conn-stats (possibly overwriting an existing file) and reset counters. Return when we would next want to write conn stats or 0 if we never want to write. </p>

</div>
</div>
<a id="ab4d80d1275aed0509a8fe3cc73638fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4d80d1275aed0509a8fe3cc73638fe1">&#9670;&nbsp;</a></span>rep_hist_desc_stats_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_desc_stats_init </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize descriptor stats. </p>

</div>
</div>
<a id="a23ccbd8011e8a2ee861a16607090635a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ccbd8011e8a2ee861a16607090635a">&#9670;&nbsp;</a></span>rep_hist_desc_stats_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_desc_stats_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop collecting served descs stats, so that <a class="el" href="rephist_8c.html#ab4d80d1275aed0509a8fe3cc73638fe1">rep_hist_desc_stats_init()</a> is safe to be called again. </p>

</div>
</div>
<a id="a514f1de075d0958e22f8f1970cefa324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a514f1de075d0958e22f8f1970cefa324">&#9670;&nbsp;</a></span>rep_hist_desc_stats_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rep_hist_desc_stats_write </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If WRITE_STATS_INTERVAL seconds have passed since the beginning of the current served desc stats interval, write the stats to $DATADIR/stats/served-desc-stats (possibly appending to an existing file) and reset the state for the next interval. Return when we would next want to write served desc stats or 0 if we won't want to write. </p>

</div>
</div>
<a id="a0cf617b0c2ef526e55a7330493e54a7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cf617b0c2ef526e55a7330493e54a7c">&#9670;&nbsp;</a></span>rep_hist_downrate_old_runs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rep_hist_downrate_old_runs </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper: Discount all old MTBF data, if it is time to do so. Return the time at which we should next discount MTBF data. </p>

</div>
</div>
<a id="a86f2c4294a880006745284556ecbf7a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f2c4294a880006745284556ecbf7a6">&#9670;&nbsp;</a></span>rep_hist_dump_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_dump_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log all the reliability data we have remembered, with the chosen severity. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a86f2c4294a880006745284556ecbf7a6_cgraph.png" border="0" usemap="#rephist_8h_a86f2c4294a880006745284556ecbf7a6_cgraph" alt=""/></div>
<map name="rephist_8h_a86f2c4294a880006745284556ecbf7a6_cgraph" id="rephist_8h_a86f2c4294a880006745284556ecbf7a6_cgraph">
<area shape="rect" id="node2" href="rephist_8c.html#ab26034f0ea8dbd53bbe580f88de3adb6" title="rep_history_clean" alt="" coords="196,5,320,32"/>
<area shape="rect" id="node4" href="log_8c.html#a048192107dfd3f8f22b9e599e45d0b34" title="tor_log" alt="" coords="227,56,289,83"/>
<area shape="rect" id="node3" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="368,5,468,32"/>
</map>
</div>

</div>
</div>
<a id="a68cb27a67eaea36055f87b2026009053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68cb27a67eaea36055f87b2026009053">&#9670;&nbsp;</a></span>rep_hist_exit_stats_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_exit_stats_init </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize exit port stats. </p>

</div>
</div>
<a id="ae2a289eb22365316fdb74d9d18223765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a289eb22365316fdb74d9d18223765">&#9670;&nbsp;</a></span>rep_hist_exit_stats_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_exit_stats_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop collecting exit port stats in a way that we can re-start doing so in <a class="el" href="rephist_8c.html#a68cb27a67eaea36055f87b2026009053">rep_hist_exit_stats_init()</a>. </p>

</div>
</div>
<a id="af99f8a1303d319cc2c82444de4ae754e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af99f8a1303d319cc2c82444de4ae754e">&#9670;&nbsp;</a></span>rep_hist_exit_stats_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rep_hist_exit_stats_write </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If 24 hours have passed since the beginning of the current exit port stats period, write exit stats to $DATADIR/stats/exit-stats (possibly overwriting an existing file) and reset counters. Return when we would next want to write exit stats or 0 if we never want to write. </p>

</div>
</div>
<a id="ad6b52825041edb0008d04a95a8ce18b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b52825041edb0008d04a95a8ce18b4">&#9670;&nbsp;</a></span>rep_hist_format_buffer_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* rep_hist_format_buffer_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a newly allocated string containing the buffer statistics until <b>now</b>, or NULL if we're not collecting buffer stats. Caller must ensure start_of_buffer_stats_interval is in the past. </p>

</div>
</div>
<a id="a2db692e6556ac10614bc93ad4e47f641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2db692e6556ac10614bc93ad4e47f641">&#9670;&nbsp;</a></span>rep_hist_format_conn_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* rep_hist_format_conn_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a newly allocated string containing the connection statistics until <b>now</b>, or NULL if we're not collecting conn stats. Caller must ensure start_of_conn_stats_interval is in the past. </p>

</div>
</div>
<a id="a93529f170e0ab512c9a4e9f121af63b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93529f170e0ab512c9a4e9f121af63b9">&#9670;&nbsp;</a></span>rep_hist_format_exit_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* rep_hist_format_exit_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a newly allocated string containing the exit port statistics until <b>now</b>, or NULL if we're not collecting exit stats. Caller must ensure start_of_exit_stats_interval is in the past. </p>

</div>
</div>
<a id="a4739d83556eb91aea569c9294ca1780a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4739d83556eb91aea569c9294ca1780a">&#9670;&nbsp;</a></span>rep_hist_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held by the OR/link history caches, by the bandwidth history arrays, by the port history, or by statistics . </p>

</div>
</div>
<a id="aeec38cadc5f0d80c3e7b739c25b20fb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeec38cadc5f0d80c3e7b739c25b20fb1">&#9670;&nbsp;</a></span>rep_hist_get_bandwidth_lines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* rep_hist_get_bandwidth_lines </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate and return lines for representing this server's bandwidth history in its descriptor. We publish these lines in our extra-info descriptor. </p>

</div>
</div>
<a id="ad4717d346fa88f1ea706ed1105f7a605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4717d346fa88f1ea706ed1105f7a605">&#9670;&nbsp;</a></span>rep_hist_get_predicted_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_get_predicted_internal </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>need_uptime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>need_capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return 1 if we've used an internal circ recently; else return 0. </p>

</div>
</div>
<a id="ae65bc07992ae6d46e834570e7cdd1fac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae65bc07992ae6d46e834570e7cdd1fac">&#9670;&nbsp;</a></span>rep_hist_get_predicted_ports()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsmartlist__t.html">smartlist_t</a>* rep_hist_get_predicted_ports </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a newly allocated pointer to a list of uint16_t * for ports that are likely to be asked for in the near future. </p>

</div>
</div>
<a id="a344a591888386fa1765d929473059adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a344a591888386fa1765d929473059adc">&#9670;&nbsp;</a></span>rep_hist_get_stability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double rep_hist_get_stability </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return an estimated MTBF for the router whose identity digest is <b>id</b>. Return 0 if the router is unknown. </p>

</div>
</div>
<a id="a7756c31625ece0df9fedb39eace5eb4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7756c31625ece0df9fedb39eace5eb4a">&#9670;&nbsp;</a></span>rep_hist_get_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long rep_hist_get_uptime </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return how long the router whose identity digest is <b>id</b> has been reachable. Return 0 if the router is unknown or currently deemed unreachable. </p>

</div>
</div>
<a id="a6f8d10b67c04a514af5c815ba3c3e21a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f8d10b67c04a514af5c815ba3c3e21a">&#9670;&nbsp;</a></span>rep_hist_get_weighted_fractional_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double rep_hist_get_weighted_fractional_uptime </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return an estimated percent-of-time-online for the router whose identity digest is <b>id</b>. Return 0 if the router is unknown. </p>

</div>
</div>
<a id="a7ab47eb1b0317449361156fb44b1c6c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ab47eb1b0317449361156fb44b1c6c0">&#9670;&nbsp;</a></span>rep_hist_get_weighted_time_known()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long rep_hist_get_weighted_time_known </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a number representing how long we've known about the router whose digest is <b>id</b>. Return 0 if the router is unknown.</p>
<p>Be careful: this measure increases monotonically as we know the router for longer and longer, but it doesn't increase linearly. </p>

</div>
</div>
<a id="af5314eabb70c00fc38ae3fd34c813924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5314eabb70c00fc38ae3fd34c813924">&#9670;&nbsp;</a></span>rep_hist_have_measured_enough_stability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_have_measured_enough_stability </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true if we've been measuring MTBFs for long enough to pronounce on Stability. </p>

</div>
</div>
<a id="a8e68240855c007866b52038ae34eb2e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e68240855c007866b52038ae34eb2e3">&#9670;&nbsp;</a></span>rep_hist_hs_stats_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_hs_stats_init </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize hidden service statistics. </p>

</div>
</div>
<a id="a27a9a5c1275066ae149c6eae8eb16578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a9a5c1275066ae149c6eae8eb16578">&#9670;&nbsp;</a></span>rep_hist_hs_stats_term()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_hs_stats_term </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop collecting hidden service stats in a way that we can re-start doing so in <a class="el" href="rephist_8c.html#a5ea0ebfd04c62c6d8a5e761723b476ca">rep_hist_buffer_stats_init()</a>. </p>

</div>
</div>
<a id="a8b518f5a00f74add63285d2d831834a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b518f5a00f74add63285d2d831834a0">&#9670;&nbsp;</a></span>rep_hist_hs_stats_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rep_hist_hs_stats_write </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If 24 hours have passed since the beginning of the current HS stats period, write buffer stats to $DATADIR/stats/hidserv-stats (possibly overwriting an existing file) and reset counters. Return when we would next want to write buffer stats or 0 if we never want to write. </p>

</div>
</div>
<a id="a4d366e7eec3df9ea74e18f92ce04a308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d366e7eec3df9ea74e18f92ce04a308">&#9670;&nbsp;</a></span>rep_hist_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the static data structures for tracking history. </p>

</div>
</div>
<a id="a3b22d94b9f6a32b2213e011bb278258d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b22d94b9f6a32b2213e011bb278258d">&#9670;&nbsp;</a></span>rep_hist_load_mtbf_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_load_mtbf_data </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load MTBF data from disk. Returns 0 on success or recoverable error, -1 on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a3b22d94b9f6a32b2213e011bb278258d_cgraph.png" border="0" usemap="#rephist_8h_a3b22d94b9f6a32b2213e011bb278258d_cgraph" alt=""/></div>
<map name="rephist_8h_a3b22d94b9f6a32b2213e011bb278258d_cgraph" id="rephist_8h_a3b22d94b9f6a32b2213e011bb278258d_cgraph">
<area shape="rect" id="node2" href="container_8c.html#a1d75cac5583c66900c032ba972ffabc8" title="smartlist_split_string" alt="" coords="217,5,360,32"/>
<area shape="rect" id="node3" href="util_8c.html#a245aaefd9d8715af06ce0f7b7355fd0d" title="strcmpstart" alt="" coords="245,56,333,83"/>
<area shape="rect" id="node4" href="util_8c.html#a1d00748e8ddd4a785d07fec04205b892" title="tor_parse_long" alt="" coords="235,107,342,133"/>
</map>
</div>

</div>
</div>
<a id="a61328aa7339a8d9229391bee84a60481"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61328aa7339a8d9229391bee84a60481">&#9670;&nbsp;</a></span>rep_hist_load_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_load_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structor__state__t.html">or_state_t</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set bandwidth history from the state file we just loaded. </p>

</div>
</div>
<a id="aeaa0ed85d3567e756589f66fc77e7ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa0ed85d3567e756589f66fc77e7ede">&#9670;&nbsp;</a></span>rep_hist_log_circuit_handshake_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_log_circuit_handshake_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log our onionskin statistics since the last time we were called. </p>

</div>
</div>
<a id="a9c148938a37328053015298538aa263a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c148938a37328053015298538aa263a">&#9670;&nbsp;</a></span>rep_hist_log_link_protocol_counts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_log_link_protocol_counts </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log a heartbeat message explaining how many connections of each link protocol version we have used. </p>

</div>
</div>
<a id="ae263f2f9a13d6b47c052db721795027a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae263f2f9a13d6b47c052db721795027a">&#9670;&nbsp;</a></span>rep_hist_make_router_pessimal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_make_router_pessimal </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark a router with ID <b>id</b> as non-Running, and retroactively declare that it has never been running: give it no stability and no WFU. </p>

</div>
</div>
<a id="a83be6fc7f1f878774cf695613c10bb25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83be6fc7f1f878774cf695613c10bb25">&#9670;&nbsp;</a></span>rep_hist_note_bytes_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_bytes_read </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we wrote <b>num_bytes</b> bytes in second <b>when</b>. (like <a class="el" href="rephist_8c.html#a541242961ffc36e790fd7ef2cf428ce3">rep_hist_note_bytes_written()</a> above) </p>

</div>
</div>
<a id="a541242961ffc36e790fd7ef2cf428ce3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541242961ffc36e790fd7ef2cf428ce3">&#9670;&nbsp;</a></span>rep_hist_note_bytes_written()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_bytes_written </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we read <b>num_bytes</b> bytes in second <b>when</b>.</p>
<p>Add num_bytes to the current running total for <b>when</b>.</p>
<p><b>when</b> can go back to time, but it's safe to ignore calls earlier than the latest <b>when</b> you've heard of. </p>

</div>
</div>
<a id="aeada89386ef94a7d19f3aeeb0976e61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeada89386ef94a7d19f3aeeb0976e61b">&#9670;&nbsp;</a></span>rep_hist_note_circuit_handshake_assigned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_circuit_handshake_assigned </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We've sent an onionskin (using the <b>type</b> handshake) to a cpuworker. </p>

</div>
</div>
<a id="aa9585f6fefb625dd07f86b14a4959ae2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9585f6fefb625dd07f86b14a4959ae2">&#9670;&nbsp;</a></span>rep_hist_note_circuit_handshake_requested()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_circuit_handshake_requested </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A new onionskin (using the <b>type</b> handshake) has arrived. </p>

</div>
</div>
<a id="a5126f7536c1ba478c345b491592e2578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5126f7536c1ba478c345b491592e2578">&#9670;&nbsp;</a></span>rep_hist_note_connect_failed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_connect_failed </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that an attempt to connect to the OR with identity digest <b>id</b> failed at <b>when</b>. </p>

</div>
</div>
<a id="af70175bcee5870d9bb5865afe9546f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70175bcee5870d9bb5865afe9546f15">&#9670;&nbsp;</a></span>rep_hist_note_connect_succeeded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_connect_succeeded </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that an attempt to connect to the OR with identity digest <b>id</b> succeeded at <b>when</b>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_af70175bcee5870d9bb5865afe9546f15_icgraph.png" border="0" usemap="#rephist_8h_af70175bcee5870d9bb5865afe9546f15_icgraph" alt=""/></div>
<map name="rephist_8h_af70175bcee5870d9bb5865afe9546f15_icgraph" id="rephist_8h_af70175bcee5870d9bb5865afe9546f15_icgraph">
<area shape="rect" id="node2" href="channel_8c.html#a4bb9524073333e156da271ca623a772d" title="channel_do_open_actions" alt="" coords="207,13,379,39"/>
</map>
</div>

</div>
</div>
<a id="a6a79c6da91278f419931dcdc0b9e6e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a79c6da91278f419931dcdc0b9e6e35">&#9670;&nbsp;</a></span>rep_hist_note_connection_died()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_connection_died </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that our connection to the OR with identity digest <b>id</b> had an error and stopped working at <b>when</b>. </p>

</div>
</div>
<a id="a08c954626f09cc1aa42022d14d72dc9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c954626f09cc1aa42022d14d72dc9c">&#9670;&nbsp;</a></span>rep_hist_note_desc_served()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_desc_served </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to note that we've served a given descriptor (by digest). Incrememnts the count of descriptors served, and the number of times we've served this descriptor. </p>

</div>
</div>
<a id="a8618ae2b4abf50632e0d2c0d7afa4f82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8618ae2b4abf50632e0d2c0d7afa4f82">&#9670;&nbsp;</a></span>rep_hist_note_dir_bytes_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_dir_bytes_read </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we read <b>num_bytes</b> directory bytes in second <b>when</b>. (like <a class="el" href="rephist_8c.html#a541242961ffc36e790fd7ef2cf428ce3">rep_hist_note_bytes_written()</a> above) </p>

</div>
</div>
<a id="a339857e370cdbfcd003048f1529cc819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a339857e370cdbfcd003048f1529cc819">&#9670;&nbsp;</a></span>rep_hist_note_dir_bytes_written()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_dir_bytes_written </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we wrote <b>num_bytes</b> directory bytes in second <b>when</b>. (like <a class="el" href="rephist_8c.html#a541242961ffc36e790fd7ef2cf428ce3">rep_hist_note_bytes_written()</a> above) </p>

</div>
</div>
<a id="a91eda051c85a34fafa9c8b841cb38d8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91eda051c85a34fafa9c8b841cb38d8e">&#9670;&nbsp;</a></span>rep_hist_note_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_disconnect </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we intentionally closed our connection to the OR with identity digest <b>id</b> at <b>when</b>. </p>

</div>
</div>
<a id="a10562e9d8fedb7c21f604817f70aca10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10562e9d8fedb7c21f604817f70aca10">&#9670;&nbsp;</a></span>rep_hist_note_exit_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_exit_bytes </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_written</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Note that we wrote <b>num_written</b> bytes and read <b>num_read</b> bytes to/from an exit connection to <b>port</b>. </p>

</div>
</div>
<a id="a6c937d06bcbf838afd2303798b5dd0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c937d06bcbf838afd2303798b5dd0a2">&#9670;&nbsp;</a></span>rep_hist_note_exit_stream_opened()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_exit_stream_opened </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Note that we opened an exit stream to <b>port</b>. </p>

</div>
</div>
<a id="a7c3f89e405d792f8696046f55c95efa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c3f89e405d792f8696046f55c95efa4">&#9670;&nbsp;</a></span>rep_hist_note_extend_failed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_extend_failed </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we tried to extend from the OR with identity digest <b>from_id</b> to the OR with identity digest <b>to_name</b>, but failed. </p>

</div>
</div>
<a id="ae11b10f46a4eaaf252642cb792e84aad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae11b10f46a4eaaf252642cb792e84aad">&#9670;&nbsp;</a></span>rep_hist_note_extend_succeeded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_extend_succeeded </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we successfully extended from the OR with identity digest <b>from_id</b> to the OR with identity digest <b>to_name</b>. </p>

</div>
</div>
<a id="a1289e7609b84a790ee03f06dd95ab023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1289e7609b84a790ee03f06dd95ab023">&#9670;&nbsp;</a></span>rep_hist_note_negotiated_link_proto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_negotiated_link_proto </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>link_proto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>started_here</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Note that we negotiated link protocol version <b>link_proto</b>, on a connection that started here iff <b>started_here</b> is true. </p>

</div>
</div>
<a id="ad26f4a759a9cfe2f7853c5982fb6e4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad26f4a759a9cfe2f7853c5982fb6e4ee">&#9670;&nbsp;</a></span>rep_hist_note_or_conn_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_or_conn_bytes </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>conn_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_read</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_written</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We read <b>num_read</b> bytes and wrote <b>num_written</b> from/to OR connection <b>conn_id</b> in second <b>when</b>. If this is the first observation in a new interval, sum up the last observations. Add bytes for this connection. </p>

</div>
</div>
<a id="a1b5c4cccd072d6c29dae2dab3fd12294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b5c4cccd072d6c29dae2dab3fd12294">&#9670;&nbsp;</a></span>rep_hist_note_router_reachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_router_reachable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtor__addr__t.html">tor_addr_t</a> *&#160;</td>
          <td class="paramname"><em>at_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>at_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We have just decided that this router with identity digest <b>id</b> is reachable, meaning we will give it a "Running" flag for the next while. </p>

</div>
</div>
<a id="a8d82d65e82208716c6db808c3361b19e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d82d65e82208716c6db808c3361b19e">&#9670;&nbsp;</a></span>rep_hist_note_router_unreachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_router_unreachable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We have just decided that this router is unreachable, meaning we are taking away its "Running" flag. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a8d82d65e82208716c6db808c3361b19e_icgraph.png" border="0" usemap="#rephist_8h_a8d82d65e82208716c6db808c3361b19e_icgraph" alt=""/></div>
<map name="rephist_8h_a8d82d65e82208716c6db808c3361b19e_icgraph" id="rephist_8h_a8d82d65e82208716c6db808c3361b19e_icgraph">
<area shape="rect" id="node2" href="routerlist_8h.html#a8c328828cd94c3bb84044c9003f8c78f" title="routerlist_remove" alt="" coords="193,13,316,39"/>
</map>
</div>

</div>
</div>
<a id="a925242d56f1b913429e29bb54e478574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925242d56f1b913429e29bb54e478574">&#9670;&nbsp;</a></span>rep_hist_note_used_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_used_internal </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_uptime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that we used an internal circ at time <b>now</b>. </p>

</div>
</div>
<a id="a19a1d0bbc69ce2253a076062b087337a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19a1d0bbc69ce2253a076062b087337a">&#9670;&nbsp;</a></span>rep_hist_note_used_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_used_port </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remember that <b>port</b> has been asked for as of time <b>now</b>. This is used for predicting what sorts of streams we'll make in the future and making exit circuits to anticipate that. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a19a1d0bbc69ce2253a076062b087337a_icgraph.png" border="0" usemap="#rephist_8h_a19a1d0bbc69ce2253a076062b087337a_icgraph" alt=""/></div>
<map name="rephist_8h_a19a1d0bbc69ce2253a076062b087337a_icgraph" id="rephist_8h_a19a1d0bbc69ce2253a076062b087337a_icgraph">
<area shape="rect" id="node2" href="rephist_8h.html#aa45d4e4767a0ba5eed365aa5fe53e7f9" title="rep_hist_note_used\l_resolve" alt="" coords="217,5,352,47"/>
</map>
</div>

</div>
</div>
<a id="aa45d4e4767a0ba5eed365aa5fe53e7f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa45d4e4767a0ba5eed365aa5fe53e7f9">&#9670;&nbsp;</a></span>rep_hist_note_used_resolve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_note_used_resolve </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The user asked us to do a resolve. Rather than keeping track of timings and such of resolves, we fake it for now by treating it the same way as a connection to port 80. This way we will continue to have circuits lying around if the user only uses Tor for resolves. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_aa45d4e4767a0ba5eed365aa5fe53e7f9_cgraph.png" border="0" usemap="#rephist_8h_aa45d4e4767a0ba5eed365aa5fe53e7f9_cgraph" alt=""/></div>
<map name="rephist_8h_aa45d4e4767a0ba5eed365aa5fe53e7f9_cgraph" id="rephist_8h_aa45d4e4767a0ba5eed365aa5fe53e7f9_cgraph">
<area shape="rect" id="node2" href="rephist_8c.html#a19a1d0bbc69ce2253a076062b087337a" title="rep_hist_note_used_port" alt="" coords="188,13,352,39"/>
</map>
</div>

</div>
</div>
<a id="acc9bf4bc8b3124f73c775e4d83cf0a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc9bf4bc8b3124f73c775e4d83cf0a13">&#9670;&nbsp;</a></span>rep_hist_record_mtbf_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rep_hist_record_mtbf_data </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>missing_means_down</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write MTBF data to disk. Return 0 on success, negative on failure.</p>
<p>If <b>missing_means_down</b>, then if we're about to write an entry that is still considered up but isn't in our routerlist, consider it to be down. </p>

</div>
</div>
<a id="a5bb6e281220a985d4c054cf602005d7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bb6e281220a985d4c054cf602005d7e">&#9670;&nbsp;</a></span>rep_hist_remove_predicted_ports()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_remove_predicted_ports </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>rmv_ports</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Take a list of uint16_t *, and remove every port in the list from the current list of predicted ports. </p>

</div>
</div>
<a id="a89f927d97d217f29680458cec3a7d82e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89f927d97d217f29680458cec3a7d82e">&#9670;&nbsp;</a></span>rep_hist_reset_buffer_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_reset_buffer_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear history of circuit statistics and set the measurement interval start to <b>now</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a89f927d97d217f29680458cec3a7d82e_cgraph.png" border="0" usemap="#rephist_8h_a89f927d97d217f29680458cec3a7d82e_cgraph" alt=""/></div>
<map name="rephist_8h_a89f927d97d217f29680458cec3a7d82e_cgraph" id="rephist_8h_a89f927d97d217f29680458cec3a7d82e_cgraph">
<area shape="rect" id="node2" href="container_8c.html#ad24500d61ff1dbb6c845a8a70f6d2f14" title="smartlist_clear" alt="" coords="197,13,304,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a89f927d97d217f29680458cec3a7d82e_icgraph.png" border="0" usemap="#rephist_8h_a89f927d97d217f29680458cec3a7d82e_icgraph" alt=""/></div>
<map name="rephist_8h_a89f927d97d217f29680458cec3a7d82e_icgraph" id="rephist_8h_a89f927d97d217f29680458cec3a7d82e_icgraph">
<area shape="rect" id="node2" href="rephist_8h.html#a0bbd8c271022f2de86846d5099ed7478" title="rep_hist_buffer_stats_term" alt="" coords="197,13,375,39"/>
</map>
</div>

</div>
</div>
<a id="a6701b2dd200113e2704f74cd617bcee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6701b2dd200113e2704f74cd617bcee9">&#9670;&nbsp;</a></span>rep_hist_reset_conn_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_reset_conn_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset counters for conn statistics. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_a6701b2dd200113e2704f74cd617bcee9_icgraph.png" border="0" usemap="#rephist_8h_a6701b2dd200113e2704f74cd617bcee9_icgraph" alt=""/></div>
<map name="rephist_8h_a6701b2dd200113e2704f74cd617bcee9_icgraph" id="rephist_8h_a6701b2dd200113e2704f74cd617bcee9_icgraph">
<area shape="rect" id="node2" href="rephist_8h.html#ab07295fcf86178837f8c44df26c9a133" title="rep_hist_conn_stats_term" alt="" coords="192,13,364,39"/>
</map>
</div>

</div>
</div>
<a id="adc1d070a99f98c88d5156415065cbd68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc1d070a99f98c88d5156415065cbd68">&#9670;&nbsp;</a></span>rep_hist_reset_exit_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_reset_exit_stats </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset counters for exit port statistics. </p>

</div>
</div>
<a id="aa129953ef2ec16245171a6e0964018be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa129953ef2ec16245171a6e0964018be">&#9670;&nbsp;</a></span>rep_hist_seen_new_rp_cell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_seen_new_rp_cell </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We saw a new HS relay cell, Count it! </p>

</div>
</div>
<a id="ab7fc106c03b6628580434b5469dae815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7fc106c03b6628580434b5469dae815">&#9670;&nbsp;</a></span>rep_hist_stored_maybe_new_hs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_stored_maybe_new_hs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>pubkey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As HSDirs, we saw another hidden service with public key <b>pubkey</b>. Check whether we have counted it before, if not count it now! </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_ab7fc106c03b6628580434b5469dae815_cgraph.png" border="0" usemap="#rephist_8h_ab7fc106c03b6628580434b5469dae815_cgraph" alt=""/></div>
<map name="rephist_8h_ab7fc106c03b6628580434b5469dae815_cgraph" id="rephist_8h_ab7fc106c03b6628580434b5469dae815_cgraph">
<area shape="rect" id="node2" href="crypto_8c.html#a91336077a5062618ff895dae4e50079d" title="crypto_pk_get_digest" alt="" coords="211,13,357,39"/>
<area shape="rect" id="node3" href="crypto_8c.html#adc1609ea0f9d65a1f60225cb001eeb15" title="crypto_digest" alt="" coords="405,13,505,39"/>
</map>
</div>

</div>
</div>
<a id="acb76ca6ea0d41d2b9f29975c25d11cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb76ca6ea0d41d2b9f29975c25d11cf2">&#9670;&nbsp;</a></span>rep_hist_update_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_hist_update_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structor__state__t.html">or_state_t</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update <b>state</b> with the newest bandwidth history. Done before writing out a new state file. </p>

</div>
</div>
<a id="ab26034f0ea8dbd53bbe580f88de3adb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26034f0ea8dbd53bbe580f88de3adb6">&#9670;&nbsp;</a></span>rep_history_clean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rep_history_clean </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>before</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove history info for routers/links that haven't changed since <b>before</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_cgraph.png" border="0" usemap="#rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_cgraph" alt=""/></div>
<map name="rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_cgraph" id="rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="177,5,277,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_icgraph.png" border="0" usemap="#rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_icgraph" alt=""/></div>
<map name="rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_icgraph" id="rephist_8h_ab26034f0ea8dbd53bbe580f88de3adb6_icgraph">
<area shape="rect" id="node2" href="rephist_8h.html#a86f2c4294a880006745284556ecbf7a6" title="rep_hist_dump_stats" alt="" coords="177,5,320,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1c529acab759963aafdadf6a09919a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c529acab759963aafdadf6a09919a1c">&#9670;&nbsp;</a></span>rephist_total_alloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t rephist_total_alloc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Total number of bytes currently allocated in fields used by <a class="el" href="rephist_8c.html" title="Basic history and performance-tracking functionality. ">rephist.c</a>. </p>

</div>
</div>
<a id="a9ee7ea1b1b6ddb95f2641841e20f9269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee7ea1b1b6ddb95f2641841e20f9269">&#9670;&nbsp;</a></span>rephist_total_num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rephist_total_num</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of <a class="el" href="structor__history__t.html">or_history_t</a> objects currently allocated. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
