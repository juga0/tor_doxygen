<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/common/compat.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_b7e1585941a202f53e5249c42015d573.html">common</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">compat.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrappers to make calls more portable. This code defines functions such as tor_snprintf, get/set various data types, renaming, setting socket options, switching user IDs. It is basically where the non-portable items are conditionally included depending on the platform.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;compat.h&quot;</code><br />
<code>#include &quot;tor_readpassphrase.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="torlog_8h_source.html">torlog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;container.h&quot;</code><br />
<code>#include &quot;<a class="el" href="address_8h_source.html">address.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sandbox_8h_source.html">sandbox.h</a>&quot;</code><br />
<code>#include &quot;strlcpy.c&quot;</code><br />
<code>#include &quot;strlcat.c&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for compat.c:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2common_2compat_8c">
<area shape="rect" id="node2" href="compat_8h_source.html" title="compat.h" alt="" coords="710,408,786,435"/>
<area shape="rect" id="node12" href="tor__readpassphrase_8h_source.html" title="tor_readpassphrase.h" alt="" coords="1231,184,1378,211"/>
<area shape="rect" id="node15" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="1053,333,1118,360"/>
<area shape="rect" id="node16" href="util_8h.html" title="Headers for util.c. " alt="" coords="851,259,902,285"/>
<area shape="rect" id="node19" href="container_8h_source.html" title="container.h" alt="" coords="762,184,849,211"/>
<area shape="rect" id="node21" href="address_8h.html" title="Headers for address.h. " alt="" coords="182,109,261,136"/>
<area shape="rect" id="node22" href="sandbox_8h.html" title="Header file for sandbox.c. " alt="" coords="39,483,122,509"/>
<area shape="rect" id="node3" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="405,632,484,659"/>
<area shape="rect" id="node4" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="252,557,314,584"/>
<area shape="rect" id="node6" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="894,557,992,584"/>
<area shape="rect" id="node8" href="compat__time_8h.html" title="Functions and types for monotonic times. " alt="" coords="674,557,782,584"/>
<area shape="rect" id="node11" href="compat__threads_8h_source.html" title="compat_threads.h" alt="" coords="445,483,572,509"/>
<area shape="rect" id="node17" href="di__ops_8h.html" title="Headers for di_ops.c. " alt="" coords="248,483,318,509"/>
<area shape="rect" id="node18" href="util__bug_8h.html" title="Macros to manage assertions, fatal and non&#45;fatal. " alt="" coords="709,333,788,360"/>
<area shape="rect" id="node20" href="siphash_8h_source.html" title="siphash.h" alt="" coords="748,259,826,285"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtor__lockfile__t.html">tor_lockfile_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4bff79437a66cd30ecedab0609bf4b8d"><td class="memItemLeft" align="right" valign="top"><a id="a4bff79437a66cd30ecedab0609bf4b8d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>COMPAT_PRIVATE</b></td></tr>
<tr class="separator:a4bff79437a66cd30ecedab0609bf4b8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1319d56d911b0757b74e15c58ff150"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a9c1319d56d911b0757b74e15c58ff150">ULIMIT_BUFFER</a>&#160;&#160;&#160;32 /* keep 32 extra fd's beyond ConnLimit_ */</td></tr>
<tr class="separator:a9c1319d56d911b0757b74e15c58ff150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb56f9800294d432bf7e5e390b9b419b"><td class="memItemLeft" align="right" valign="top"><a id="acb56f9800294d432bf7e5e390b9b419b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CREDENTIAL_LOG_LEVEL</b>&#160;&#160;&#160;<a class="el" href="torlog_8h.html#aeb4f36db01bd128c7afeac5889dac311">LOG_INFO</a></td></tr>
<tr class="separator:acb56f9800294d432bf7e5e390b9b419b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9773b1bae11586cacfe7f226493e5ead"><td class="memItemLeft" align="right" valign="top"><a id="a9773b1bae11586cacfe7f226493e5ead"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>tor_passwd_free</b>(pw)&#160;&#160;&#160;FREE_AND_NULL(struct passwd, tor_passwd_free_, (pw))</td></tr>
<tr class="separator:a9773b1bae11586cacfe7f226493e5ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35bc541edc27383a7c42e0a12408259d"><td class="memItemLeft" align="right" valign="top"><a id="a35bc541edc27383a7c42e0a12408259d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DETECTABLE_CPUS</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a35bc541edc27383a7c42e0a12408259d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b69868f3de813ec50e8a53b1bfb71fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a6b69868f3de813ec50e8a53b1bfb71fe">TIME_FNS_NEED_LOCKS</a></td></tr>
<tr class="separator:a6b69868f3de813ec50e8a53b1bfb71fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a0d112bae8fd35be772185b6ec6bcbe64"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a0d112bae8fd35be772185b6ec6bcbe64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c8d0b76b470ba65a43ca46a88320f39"><td class="memItemLeft" align="right" valign="top"><a id="a4c8d0b76b470ba65a43ca46a88320f39"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEEK_CUR</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a4c8d0b76b470ba65a43ca46a88320f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a2e6c114780c3071efd24f16c7f7d8"><td class="memItemLeft" align="right" valign="top"><a id="ad2a2e6c114780c3071efd24f16c7f7d8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEEK_END</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ad2a2e6c114780c3071efd24f16c7f7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a9af2ac14f66a7097275d1e8baf77ce8f"><td class="memItemLeft" align="right" valign="top"><a id="a9af2ac14f66a7097275d1e8baf77ce8f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>mark_socket_open</b>(s)&#160;&#160;&#160;((void) (s))</td></tr>
<tr class="separator:a9af2ac14f66a7097275d1e8baf77ce8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a68cf2b7e7222c4f58cdc37dea2b5a912"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a68cf2b7e7222c4f58cdc37dea2b5a912">tor_open_cloexec</a> (const char *path, int flags, unsigned mode)</td></tr>
<tr class="separator:a68cf2b7e7222c4f58cdc37dea2b5a912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ee17f8317be48a2391c20e31e8a7b8"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a99ee17f8317be48a2391c20e31e8a7b8">tor_fopen_cloexec</a> (const char *path, const char *mode)</td></tr>
<tr class="separator:a99ee17f8317be48a2391c20e31e8a7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad879dd373ddf2edfa46eb01b346ba8bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ad879dd373ddf2edfa46eb01b346ba8bf">tor_rename</a> (const char *path_old, const char *path_new)</td></tr>
<tr class="separator:ad879dd373ddf2edfa46eb01b346ba8bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af032ac661214ae28b4f205781a515290"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#af032ac661214ae28b4f205781a515290">tor_snprintf</a> (char *str, size_t size, const char *format,...)</td></tr>
<tr class="separator:af032ac661214ae28b4f205781a515290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df7873b16ae8936d25dfedb706f4ea6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6">tor_vsnprintf</a> (char *str, size_t size, const char *format, va_list args)</td></tr>
<tr class="separator:a1df7873b16ae8936d25dfedb706f4ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade97970c1d8a691241adac739c4f9b12"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ade97970c1d8a691241adac739c4f9b12">tor_asprintf</a> (char **strp, const char *fmt,...)</td></tr>
<tr class="separator:ade97970c1d8a691241adac739c4f9b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ef7a08e8b543c0d61f9ef1081d4c1ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a5ef7a08e8b543c0d61f9ef1081d4c1ea">tor_vasprintf</a> (char **strp, const char *fmt, va_list args)</td></tr>
<tr class="separator:a5ef7a08e8b543c0d61f9ef1081d4c1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539ba773865aef09d46593f3ced79ba0"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a539ba773865aef09d46593f3ced79ba0">tor_memmem</a> (const void *_haystack, size_t hlen, const void *_needle, size_t nlen)</td></tr>
<tr class="separator:a539ba773865aef09d46593f3ced79ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84661ffc0d8c5c3c451954733306c700"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a84661ffc0d8c5c3c451954733306c700">tor_strtok_r_impl</a> (char *str, const char *sep, char **lasts)</td></tr>
<tr class="separator:a84661ffc0d8c5c3c451954733306c700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae67679aa2827ab3a1378abb8a2b953cf"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ae67679aa2827ab3a1378abb8a2b953cf">get_uint16</a> (const void *cp)</td></tr>
<tr class="separator:ae67679aa2827ab3a1378abb8a2b953cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601cbc7f9d07f77c3b28d7864b768054"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a601cbc7f9d07f77c3b28d7864b768054">get_uint32</a> (const void *cp)</td></tr>
<tr class="separator:a601cbc7f9d07f77c3b28d7864b768054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9dbcd05860d158a4d419dcd379d0d2"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ade9dbcd05860d158a4d419dcd379d0d2">get_uint64</a> (const void *cp)</td></tr>
<tr class="separator:ade9dbcd05860d158a4d419dcd379d0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf52deccd4f2b9244d6911488b907f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#adbf52deccd4f2b9244d6911488b907f3">set_uint16</a> (void *cp, uint16_t v)</td></tr>
<tr class="separator:adbf52deccd4f2b9244d6911488b907f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d2010c31db105982e47dc345116b5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ac4d2010c31db105982e47dc345116b5f">set_uint32</a> (void *cp, uint32_t v)</td></tr>
<tr class="separator:ac4d2010c31db105982e47dc345116b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9112085a21a609da6735a8284631229e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a9112085a21a609da6735a8284631229e">set_uint64</a> (void *cp, uint64_t v)</td></tr>
<tr class="separator:a9112085a21a609da6735a8284631229e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaceb8fb0b9b55778be3dd71cc847aee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#abaceb8fb0b9b55778be3dd71cc847aee">replace_file</a> (const char *from, const char *to)</td></tr>
<tr class="separator:abaceb8fb0b9b55778be3dd71cc847aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7008066dbddf2ee0a6fead8e3636f6fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a7008066dbddf2ee0a6fead8e3636f6fa">touch_file</a> (const char *fname)</td></tr>
<tr class="separator:a7008066dbddf2ee0a6fead8e3636f6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e59a7b36c548f64eacef17c6f27f65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtor__lockfile__t.html">tor_lockfile_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a06e59a7b36c548f64eacef17c6f27f65">tor_lockfile_lock</a> (const char *filename, int blocking, int *locked_out)</td></tr>
<tr class="separator:a06e59a7b36c548f64eacef17c6f27f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcfbcea2492c890d03a51c8feb0b797b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#afcfbcea2492c890d03a51c8feb0b797b">tor_lockfile_unlock</a> (<a class="el" href="structtor__lockfile__t.html">tor_lockfile_t</a> *lockfile)</td></tr>
<tr class="separator:afcfbcea2492c890d03a51c8feb0b797b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fcd0bbe12d23238c463a0a367b0532e"><td class="memItemLeft" align="right" valign="top">off_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a3fcd0bbe12d23238c463a0a367b0532e">tor_fd_getpos</a> (int fd)</td></tr>
<tr class="separator:a3fcd0bbe12d23238c463a0a367b0532e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3635c2c7246bf5b70666df1c21ac9f97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a3635c2c7246bf5b70666df1c21ac9f97">tor_fd_seekend</a> (int fd)</td></tr>
<tr class="separator:a3635c2c7246bf5b70666df1c21ac9f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d95395605962eab96331c455e00e9e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ad8d95395605962eab96331c455e00e9e">tor_fd_setpos</a> (int fd, off_t pos)</td></tr>
<tr class="separator:ad8d95395605962eab96331c455e00e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c4754873a254857ad67fff6cfacd775"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a9c4754873a254857ad67fff6cfacd775">tor_ftruncate</a> (int fd)</td></tr>
<tr class="separator:a9c4754873a254857ad67fff6cfacd775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a37ba388f43414326de76a9ce7d7eb9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a1a37ba388f43414326de76a9ce7d7eb9">tor_close_socket_simple</a> (tor_socket_t s)</td></tr>
<tr class="separator:a1a37ba388f43414326de76a9ce7d7eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ff5f4217ec63674eb98bcdc73eaee3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a51ff5f4217ec63674eb98bcdc73eaee3">MOCK_IMPL</a> (int, tor_close_socket,(tor_socket_t s))</td></tr>
<tr class="separator:a51ff5f4217ec63674eb98bcdc73eaee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e7546ce02736a0fa65c93d17027744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a71e7546ce02736a0fa65c93d17027744">MOCK_IMPL</a> (tor_socket_t, tor_open_socket,(int domain, int type, int protocol))</td></tr>
<tr class="separator:a71e7546ce02736a0fa65c93d17027744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a951f6283e2fb466ea748d192d1e153a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a951f6283e2fb466ea748d192d1e153a9">MOCK_IMPL</a> (tor_socket_t, tor_connect_socket,(tor_socket_t sock, const struct sockaddr *address, socklen_t address_len))</td></tr>
<tr class="separator:a951f6283e2fb466ea748d192d1e153a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa34bb7c861c2c81555132982b60efc0"><td class="memItemLeft" align="right" valign="top">tor_socket_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#afa34bb7c861c2c81555132982b60efc0">tor_open_socket_nonblocking</a> (int domain, int type, int protocol)</td></tr>
<tr class="separator:afa34bb7c861c2c81555132982b60efc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7b99a17b82bcbc2055197c4635e52b"><td class="memItemLeft" align="right" valign="top">tor_socket_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a8e7b99a17b82bcbc2055197c4635e52b">tor_open_socket_with_extensions</a> (int domain, int type, int protocol, int cloexec, int nonblock)</td></tr>
<tr class="separator:a8e7b99a17b82bcbc2055197c4635e52b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28f8739ae1509cef86b392cd50cc316"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ac28f8739ae1509cef86b392cd50cc316">tor_take_socket_ownership</a> (tor_socket_t s)</td></tr>
<tr class="separator:ac28f8739ae1509cef86b392cd50cc316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ebfd9c92357671caa19adcd269e4a5"><td class="memItemLeft" align="right" valign="top">tor_socket_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a04ebfd9c92357671caa19adcd269e4a5">tor_accept_socket</a> (tor_socket_t sockfd, struct sockaddr *addr, socklen_t *len)</td></tr>
<tr class="separator:a04ebfd9c92357671caa19adcd269e4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267ccd8feb3a4e5028168a12b58fb679"><td class="memItemLeft" align="right" valign="top">tor_socket_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a267ccd8feb3a4e5028168a12b58fb679">tor_accept_socket_nonblocking</a> (tor_socket_t sockfd, struct sockaddr *addr, socklen_t *len)</td></tr>
<tr class="separator:a267ccd8feb3a4e5028168a12b58fb679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7165d92f355a437277606dc56b469830"><td class="memItemLeft" align="right" valign="top">tor_socket_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a7165d92f355a437277606dc56b469830">tor_accept_socket_with_extensions</a> (tor_socket_t sockfd, struct sockaddr *addr, socklen_t *len, int cloexec, int nonblock)</td></tr>
<tr class="separator:a7165d92f355a437277606dc56b469830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ded07db25813a849b313e34f14a7ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a99ded07db25813a849b313e34f14a7ba">get_n_open_sockets</a> (void)</td></tr>
<tr class="separator:a99ded07db25813a849b313e34f14a7ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d67cdf3f4e2ee613ad1f9a3e9aee8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a19d67cdf3f4e2ee613ad1f9a3e9aee8f">MOCK_IMPL</a> (int, tor_getsockname,(tor_socket_t sock, struct sockaddr *address, socklen_t *address_len))</td></tr>
<tr class="separator:a19d67cdf3f4e2ee613ad1f9a3e9aee8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c2b4a2e5f57a92dd11e2034839f785"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a43c2b4a2e5f57a92dd11e2034839f785">tor_addr_from_getsockname</a> (<a class="el" href="structtor__addr__t.html">tor_addr_t</a> *addr_out, tor_socket_t sock)</td></tr>
<tr class="separator:a43c2b4a2e5f57a92dd11e2034839f785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a5268be644ee9a2f9305f748af5410"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a72a5268be644ee9a2f9305f748af5410">set_socket_nonblocking</a> (tor_socket_t sock)</td></tr>
<tr class="separator:a72a5268be644ee9a2f9305f748af5410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ffdb9205a16eada3bd63687272d027"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#aa0ffdb9205a16eada3bd63687272d027">tor_socketpair</a> (int family, int type, int protocol, tor_socket_t fd[2])</td></tr>
<tr class="separator:aa0ffdb9205a16eada3bd63687272d027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c31fcce7acf4b3d12953e4b360e21e"><td class="memItemLeft" align="right" valign="top"><a id="a31c31fcce7acf4b3d12953e4b360e21e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_max_sockets</b> (void)</td></tr>
<tr class="separator:a31c31fcce7acf4b3d12953e4b360e21e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3488e905c42d47ef7b5fe5d1b7bf31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a1b3488e905c42d47ef7b5fe5d1b7bf31">set_max_file_descriptors</a> (rlim_t limit, int *max_out)</td></tr>
<tr class="separator:a1b3488e905c42d47ef7b5fe5d1b7bf31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa295ae8310a13a304e4c3aa1570995d8"><td class="memItemLeft" align="right" valign="top">const struct passwd *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#aa295ae8310a13a304e4c3aa1570995d8">tor_getpwnam</a> (const char *username)</td></tr>
<tr class="separator:aa295ae8310a13a304e4c3aa1570995d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222f4f3dd5c5feff13868a021dc76e3e"><td class="memItemLeft" align="right" valign="top">const struct passwd *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a222f4f3dd5c5feff13868a021dc76e3e">tor_getpwuid</a> (uid_t uid)</td></tr>
<tr class="separator:a222f4f3dd5c5feff13868a021dc76e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427324ad137413d06efc9fee618cdf64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a427324ad137413d06efc9fee618cdf64">have_capability_support</a> (void)</td></tr>
<tr class="separator:a427324ad137413d06efc9fee618cdf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52bd203e1b4172725c42d42e49979b05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a52bd203e1b4172725c42d42e49979b05">switch_id</a> (const char *user, const unsigned flags)</td></tr>
<tr class="separator:a52bd203e1b4172725c42d42e49979b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acddb058e55c8ec037e06ce1a15a6ce33"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#acddb058e55c8ec037e06ce1a15a6ce33">tor_disable_debugger_attach</a> (void)</td></tr>
<tr class="separator:acddb058e55c8ec037e06ce1a15a6ce33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed3d1114b5bc88f16a295250deb8fe5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a0ed3d1114b5bc88f16a295250deb8fe5">get_parent_directory</a> (char *fname)</td></tr>
<tr class="separator:a0ed3d1114b5bc88f16a295250deb8fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af110786af1def218c45a51da8b39a7a3"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#af110786af1def218c45a51da8b39a7a3">make_path_absolute</a> (char *fname)</td></tr>
<tr class="separator:af110786af1def218c45a51da8b39a7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e69845b5a9619b4098e8f163fb386e"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a77e69845b5a9619b4098e8f163fb386e">get_environment</a> (void)</td></tr>
<tr class="separator:a77e69845b5a9619b4098e8f163fb386e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8456c3775a6b9d39123b713c4900f3b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a8456c3775a6b9d39123b713c4900f3b9">MOCK_IMPL</a> (int, tor_gethostname,(char *name, size_t namelen))</td></tr>
<tr class="separator:a8456c3775a6b9d39123b713c4900f3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a802226afdc80ad46ae394289b1e586ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a802226afdc80ad46ae394289b1e586ee">tor_inet_aton</a> (const char *str, struct in_addr *addr)</td></tr>
<tr class="separator:a802226afdc80ad46ae394289b1e586ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf2add8a435d6a782f057562de228637"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#aaf2add8a435d6a782f057562de228637">tor_inet_ntop</a> (int af, const void *src, char *dst, size_t len)</td></tr>
<tr class="separator:aaf2add8a435d6a782f057562de228637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba87984a3a5dd16e7b60621ff983a89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a8ba87984a3a5dd16e7b60621ff983a89">tor_inet_pton</a> (int af, const char *src, void *dst)</td></tr>
<tr class="separator:a8ba87984a3a5dd16e7b60621ff983a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d9e9afc4056db605fbadbdafea7772e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a7d9e9afc4056db605fbadbdafea7772e">MOCK_IMPL</a> (int, tor_lookup_hostname,(const char *name, uint32_t *addr))</td></tr>
<tr class="separator:a7d9e9afc4056db605fbadbdafea7772e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09ccde24c9c108880f8a56d388a2b125"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a09ccde24c9c108880f8a56d388a2b125">MOCK_IMPL</a> (const char *, get_uname,(void))</td></tr>
<tr class="separator:a09ccde24c9c108880f8a56d388a2b125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa88386bf611ee3d9a49f14414cb100b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#aa88386bf611ee3d9a49f14414cb100b6">compute_num_cpus</a> (void)</td></tr>
<tr class="separator:aa88386bf611ee3d9a49f14414cb100b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:ae02136d1dde67b64beb4e87365ad6ccf"><td class="memItemLeft" align="right" valign="top">struct tm *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ae02136d1dde67b64beb4e87365ad6ccf">tor_localtime_r</a> (const time_t *timep, struct tm *result)</td></tr>
<tr class="separator:ae02136d1dde67b64beb4e87365ad6ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a983d273987a338a60523f0bce4006af2"><td class="memItemLeft" align="right" valign="top">struct tm *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a983d273987a338a60523f0bce4006af2">tor_gmtime_r</a> (const time_t *timep, struct tm *result)</td></tr>
<tr class="separator:a983d273987a338a60523f0bce4006af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd80fa3fbf50fb4bb96cd83431674930"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#afd80fa3fbf50fb4bb96cd83431674930">tor_mlockall</a> (void)</td></tr>
<tr class="separator:afd80fa3fbf50fb4bb96cd83431674930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82f54eee778446acb0a0266506d2465d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a82f54eee778446acb0a0266506d2465d">network_init</a> (void)</td></tr>
<tr class="separator:a82f54eee778446acb0a0266506d2465d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79471da62032dabadf4e16957d196fce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a79471da62032dabadf4e16957d196fce">MOCK_IMPL</a> (int, get_total_system_memory,(size_t *mem_out))</td></tr>
<tr class="separator:a79471da62032dabadf4e16957d196fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e53263fadf99fbc77a312134b747c58"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a2e53263fadf99fbc77a312134b747c58">tor_getpass</a> (const char *prompt, char *output, size_t buflen)</td></tr>
<tr class="separator:a2e53263fadf99fbc77a312134b747c58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8368fa29952fc0441b02aa4216d64b6e"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a8368fa29952fc0441b02aa4216d64b6e">tor_get_avail_disk_space</a> (const char *path)</td></tr>
<tr class="separator:a8368fa29952fc0441b02aa4216d64b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa006daaf11f1e2e45a6ababaf463212b"><td class="memItemLeft" align="right" valign="top"><a id="aa006daaf11f1e2e45a6ababaf463212b"></a>
char **&#160;</td><td class="memItemRight" valign="bottom"><b>environ</b></td></tr>
<tr class="separator:aa006daaf11f1e2e45a6ababaf463212b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:ac2ac6b4d715f4abb600be2aa7539f41f"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#ac2ac6b4d715f4abb600be2aa7539f41f">TOR_ISALPHA_TABLE</a> [8]</td></tr>
<tr class="separator:ac2ac6b4d715f4abb600be2aa7539f41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae2e01bf2b3e7ee44d9a696b1cb7f24"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISALNUM_TABLE</b> [8]</td></tr>
<tr class="separator:a5ae2e01bf2b3e7ee44d9a696b1cb7f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfcd3a42577254b1be54195af547d4d2"><td class="memItemLeft" align="right" valign="top"><a id="acfcd3a42577254b1be54195af547d4d2"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISSPACE_TABLE</b> [8] = { 0x3e00, 0x1, 0, 0, 0, 0, 0, 0 }</td></tr>
<tr class="separator:acfcd3a42577254b1be54195af547d4d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51480cec43fd334bb94be169f71151b3"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISXDIGIT_TABLE</b> [8]</td></tr>
<tr class="separator:a51480cec43fd334bb94be169f71151b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dd2b0ccc4f36c3609c64af8467a2f23"><td class="memItemLeft" align="right" valign="top"><a id="a4dd2b0ccc4f36c3609c64af8467a2f23"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISDIGIT_TABLE</b> [8] = { 0, 0x3ff0000, 0, 0, 0, 0, 0, 0 }</td></tr>
<tr class="separator:a4dd2b0ccc4f36c3609c64af8467a2f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a508b45764a2388ac5b4ac37f7045bd"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISPRINT_TABLE</b> [8]</td></tr>
<tr class="separator:a8a508b45764a2388ac5b4ac37f7045bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d61349acd60cfba2d7a043be8a5e11"><td class="memItemLeft" align="right" valign="top"><a id="af2d61349acd60cfba2d7a043be8a5e11"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISUPPER_TABLE</b> [8] = { 0, 0, 0x7fffffe, 0, 0, 0, 0, 0 }</td></tr>
<tr class="separator:af2d61349acd60cfba2d7a043be8a5e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9fd8e4cbaf46ef3c0969d64a03f42d"><td class="memItemLeft" align="right" valign="top"><a id="a1a9fd8e4cbaf46ef3c0969d64a03f42d"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_ISLOWER_TABLE</b> [8] = { 0, 0, 0, 0x7fffffe, 0, 0, 0, 0 }</td></tr>
<tr class="separator:a1a9fd8e4cbaf46ef3c0969d64a03f42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613b655cc331638898797dcf008a9af0"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compat_8c.html#a613b655cc331638898797dcf008a9af0">TOR_TOUPPER_TABLE</a> [256]</td></tr>
<tr class="separator:a613b655cc331638898797dcf008a9af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72682a65b9904461e9705ebac215ee4a"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>TOR_TOLOWER_TABLE</b> [256]</td></tr>
<tr class="separator:a72682a65b9904461e9705ebac215ee4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrappers to make calls more portable. This code defines functions such as tor_snprintf, get/set various data types, renaming, setting socket options, switching user IDs. It is basically where the non-portable items are conditionally included depending on the platform. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a0d112bae8fd35be772185b6ec6bcbe64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d112bae8fd35be772185b6ec6bcbe64">&#9670;&nbsp;</a></span>SEEK_SET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEEK_SET&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Some old versions of Unix didn't define constants for these values, and instead expect you to say 0, 1, or 2. </p>

</div>
</div>
<a id="a6b69868f3de813ec50e8a53b1bfb71fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b69868f3de813ec50e8a53b1bfb71fe">&#9670;&nbsp;</a></span>TIME_FNS_NEED_LOCKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIME_FNS_NEED_LOCKS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined iff we need to add locks when defining fake versions of reentrant versions of time-related functions. </p>

</div>
</div>
<a id="a9c1319d56d911b0757b74e15c58ff150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c1319d56d911b0757b74e15c58ff150">&#9670;&nbsp;</a></span>ULIMIT_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ULIMIT_BUFFER&#160;&#160;&#160;32 /* keep 32 extra fd's beyond ConnLimit_ */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of extra file descriptors to keep in reserve beyond those that we tell Tor it's allowed to use. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa88386bf611ee3d9a49f14414cb100b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa88386bf611ee3d9a49f14414cb100b6">&#9670;&nbsp;</a></span>compute_num_cpus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compute_num_cpus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return how many CPUs we are running with. We assume that nobody is using hot-swappable CPUs, so we don't recompute this after the first time. Return -1 if we don't know how to tell the number of CPUs on this system. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_aa88386bf611ee3d9a49f14414cb100b6_icgraph.png" border="0" usemap="#compat_8c_aa88386bf611ee3d9a49f14414cb100b6_icgraph" alt=""/></div>
<map name="compat_8c_aa88386bf611ee3d9a49f14414cb100b6_icgraph" id="compat_8c_aa88386bf611ee3d9a49f14414cb100b6_icgraph">
<area shape="rect" id="node2" href="config_8h.html#a24b84820686d4e33c276ae68be4f3c22" title="get_num_cpus" alt="" coords="192,5,299,32"/>
<area shape="rect" id="node3" href="cpuworker_8h.html#a560ad8614ae03841a10b489f4370bc51" title="cpu_init" alt="" coords="347,5,413,32"/>
</map>
</div>

</div>
</div>
<a id="a77e69845b5a9619b4098e8f163fb386e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e69845b5a9619b4098e8f163fb386e">&#9670;&nbsp;</a></span>get_environment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** get_environment </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current environment. This is a portable replacement for 'environ'. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a77e69845b5a9619b4098e8f163fb386e_icgraph.png" border="0" usemap="#compat_8c_a77e69845b5a9619b4098e8f163fb386e_icgraph" alt=""/></div>
<map name="compat_8c_a77e69845b5a9619b4098e8f163fb386e_icgraph" id="compat_8c_a77e69845b5a9619b4098e8f163fb386e_icgraph">
<area shape="rect" id="node2" href="util_8h.html#a98f5785d540bfcd4822ebbcbe61685cd" title="get_current_process\l_environment_variables" alt="" coords="172,5,331,47"/>
</map>
</div>

</div>
</div>
<a id="a99ded07db25813a849b313e34f14a7ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99ded07db25813a849b313e34f14a7ba">&#9670;&nbsp;</a></span>get_n_open_sockets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_n_open_sockets </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of sockets we currently have opened. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a99ded07db25813a849b313e34f14a7ba_icgraph.png" border="0" usemap="#compat_8c_a99ded07db25813a849b313e34f14a7ba_icgraph" alt=""/></div>
<map name="compat_8c_a99ded07db25813a849b313e34f14a7ba_icgraph" id="compat_8c_a99ded07db25813a849b313e34f14a7ba_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#a7165d92f355a437277606dc56b469830" title="tor_accept_socket_with\l_extensions" alt="" coords="196,23,356,65"/>
<area shape="rect" id="node3" href="compat_8c.html#a04ebfd9c92357671caa19adcd269e4a5" title="tor_accept_socket" alt="" coords="442,5,571,32"/>
<area shape="rect" id="node4" href="compat_8c.html#a267ccd8feb3a4e5028168a12b58fb679" title="tor_accept_socket_nonblocking" alt="" coords="404,56,609,83"/>
</map>
</div>

</div>
</div>
<a id="a0ed3d1114b5bc88f16a295250deb8fe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ed3d1114b5bc88f16a295250deb8fe5">&#9670;&nbsp;</a></span>get_parent_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_parent_directory </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modify <b>fname</b> to contain the name of its parent directory. Doesn't actually examine the filesystem; does a purely syntactic modification.</p>
<p>The parent of the root director is considered to be iteself.</p>
<p>Path separators are the forward slash (/) everywhere and additionally the backslash () on Win32.</p>
<p>Cuts off any number of trailing path separators but otherwise ignores them for purposes of finding the parent directory.</p>
<p>Returns 0 if a parent directory was successfully found, -1 otherwise (fname did not have any path separators or only had them at the end). </p>

</div>
</div>
<a id="ae67679aa2827ab3a1378abb8a2b953cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae67679aa2827ab3a1378abb8a2b953cf">&#9670;&nbsp;</a></span>get_uint16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t get_uint16 </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>cp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a 16-bit value beginning at <b>cp</b>. Equivalent to *(uint16_t*)(cp), but will not cause segfaults on platforms that forbid unaligned memory access. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ae67679aa2827ab3a1378abb8a2b953cf_icgraph.png" border="0" usemap="#compat_8c_ae67679aa2827ab3a1378abb8a2b953cf_icgraph" alt=""/></div>
<map name="compat_8c_ae67679aa2827ab3a1378abb8a2b953cf_icgraph" id="compat_8c_ae67679aa2827ab3a1378abb8a2b953cf_icgraph">
<area shape="rect" id="node2" href="relay_8h.html#a9b06f0a66f2b1af9d4e0855225192e1d" title="relay_header_unpack" alt="" coords="141,13,286,39"/>
<area shape="rect" id="node4" href="relay_8h.html#a80c7cd7222554bcc46ce4d6da8574499" title="packed_cell_get_circid" alt="" coords="136,63,291,90"/>
<area shape="rect" id="node3" href="connection__edge_8h.html#a8805ef6708301581c9339e83f41e76e0" title="connection_exit_begin\l_resolve" alt="" coords="339,5,489,47"/>
</map>
</div>

</div>
</div>
<a id="a601cbc7f9d07f77c3b28d7864b768054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a601cbc7f9d07f77c3b28d7864b768054">&#9670;&nbsp;</a></span>get_uint32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t get_uint32 </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>cp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a 32-bit value beginning at <b>cp</b>. Equivalent to *(uint32_t*)(cp), but will not cause segfaults on platforms that forbid unaligned memory access. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a601cbc7f9d07f77c3b28d7864b768054_icgraph.png" border="0" usemap="#compat_8c_a601cbc7f9d07f77c3b28d7864b768054_icgraph" alt=""/></div>
<map name="compat_8c_a601cbc7f9d07f77c3b28d7864b768054_icgraph" id="compat_8c_a601cbc7f9d07f77c3b28d7864b768054_icgraph">
<area shape="rect" id="node2" href="relay_8c.html#a6dede264de96c7c9a8916ed1127bbbc5" title="connected_cell_parse" alt="" coords="139,5,287,32"/>
<area shape="rect" id="node3" href="relay_8h.html#a80c7cd7222554bcc46ce4d6da8574499" title="packed_cell_get_circid" alt="" coords="136,56,291,83"/>
</map>
</div>

</div>
</div>
<a id="ade9dbcd05860d158a4d419dcd379d0d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade9dbcd05860d158a4d419dcd379d0d2">&#9670;&nbsp;</a></span>get_uint64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_uint64 </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>cp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a 64-bit value beginning at <b>cp</b>. Equivalent to *(uint64_t*)(cp), but will not cause segfaults on platforms that forbid unaligned memory access. </p>

</div>
</div>
<a id="a427324ad137413d06efc9fee618cdf64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427324ad137413d06efc9fee618cdf64">&#9670;&nbsp;</a></span>have_capability_support()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int have_capability_support </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff we were compiled with capability support, and capabilities seem to work. </p>

</div>
</div>
<a id="af110786af1def218c45a51da8b39a7a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af110786af1def218c45a51da8b39a7a3">&#9670;&nbsp;</a></span>make_path_absolute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* make_path_absolute </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Expand possibly relative path <b>fname</b> to an absolute path. Return a newly allocated string, possibly equal to <b>fname</b>. </p>

</div>
</div>
<a id="a51ff5f4217ec63674eb98bcdc73eaee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51ff5f4217ec63674eb98bcdc73eaee3">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_close_socket&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(tor_socket_t s)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As <a class="el" href="compat_8c.html#a1a37ba388f43414326de76a9ce7d7eb9">tor_close_socket_simple()</a>, but keeps track of the number of open sockets. Returns 0 on success, -1 on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a51ff5f4217ec63674eb98bcdc73eaee3_cgraph.png" border="0" usemap="#compat_8c_a51ff5f4217ec63674eb98bcdc73eaee3_cgraph" alt=""/></div>
<map name="compat_8c_a51ff5f4217ec63674eb98bcdc73eaee3_cgraph" id="compat_8c_a51ff5f4217ec63674eb98bcdc73eaee3_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a1a37ba388f43414326de76a9ce7d7eb9" title="tor_close_socket_simple" alt="" coords="153,5,320,32"/>
</map>
</div>

</div>
</div>
<a id="a71e7546ce02736a0fa65c93d17027744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e7546ce02736a0fa65c93d17027744">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_open_socket&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(int domain, int type, int protocol)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As socket(), but counts the number of open sockets. </p>

</div>
</div>
<a id="a951f6283e2fb466ea748d192d1e153a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a951f6283e2fb466ea748d192d1e153a9">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_connect_socket&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(tor_socket_t sock, const struct sockaddr *address, socklen_t address_len)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mockable wrapper for connect(). </p>

</div>
</div>
<a id="a19d67cdf3f4e2ee613ad1f9a3e9aee8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d67cdf3f4e2ee613ad1f9a3e9aee8f">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_getsockname&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(tor_socket_t sock, struct sockaddr *address, socklen_t *address_len)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mockable wrapper for getsockname(). </p>

</div>
</div>
<a id="a8456c3775a6b9d39123b713c4900f3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8456c3775a6b9d39123b713c4900f3b9">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_gethostname&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(char *name, size_t namelen)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get name of current host and write it to <b>name</b> array, whose length is specified by <b>namelen</b> argument. Return 0 upon successful completion; otherwise return return -1. (Currently, this function is merely a mockable wrapper for POSIX gethostname().) </p>

</div>
</div>
<a id="a7d9e9afc4056db605fbadbdafea7772e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d9e9afc4056db605fbadbdafea7772e">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_lookup_hostname&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const char *name, uint32_t *addr)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Similar behavior to Unix gethostbyname: resolve <b>name</b>, and set *<b>addr</b> to the proper IP address, in host byte order. Returns 0 on success, -1 on failure; 1 on transient failure.</p>
<p>(This function exists because standard windows gethostbyname doesn't treat raw IP addresses properly.) </p>

</div>
</div>
<a id="a09ccde24c9c108880f8a56d388a2b125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09ccde24c9c108880f8a56d388a2b125">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">get_uname&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a description of our platform. </p>

</div>
</div>
<a id="a79471da62032dabadf4e16957d196fce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79471da62032dabadf4e16957d196fce">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">get_total_system_memory&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(size_t *mem_out)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to find out how much physical memory the system has. On success, return 0 and set *<b>mem_out</b> to that value. On failure, return -1. </p>

</div>
</div>
<a id="a82f54eee778446acb0a0266506d2465d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82f54eee778446acb0a0266506d2465d">&#9670;&nbsp;</a></span>network_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int network_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>On Windows, WSAEWOULDBLOCK is not always correct: when you see it, you need to ask the socket for its actual errno. Also, you need to get your errors from WSAGetLastError, not errno. (If you supply a socket of -1, we check WSAGetLastError, but don't correct WSAEWOULDBLOCKs.)</p>
<p>The upshot of all of this is that when a socket call fails, you should call tor_socket_errno <em>at most once</em> on the failing socket to get the error. Called before we make any calls to network-related functions. (Some operating systems require their network libraries to be initialized.) </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a82f54eee778446acb0a0266506d2465d_icgraph.png" border="0" usemap="#compat_8c_a82f54eee778446acb0a0266506d2465d_icgraph" alt=""/></div>
<map name="compat_8c_a82f54eee778446acb0a0266506d2465d_icgraph" id="compat_8c_a82f54eee778446acb0a0266506d2465d_icgraph">
<area shape="rect" id="node2" href="test_8h.html#a334e47899bf2c19bf8a5ce0f226ab399" title="get_fname_rnd" alt="" coords="145,5,253,32"/>
</map>
</div>

</div>
</div>
<a id="abaceb8fb0b9b55778be3dd71cc847aee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaceb8fb0b9b55778be3dd71cc847aee">&#9670;&nbsp;</a></span>replace_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int replace_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rename the file <b>from</b> to the file <b>to</b>. On Unix, this is the same as rename(2). On windows, this removes <b>to</b> first if it already exists. Returns 0 on success. Returns -1 and sets errno on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_abaceb8fb0b9b55778be3dd71cc847aee_cgraph.png" border="0" usemap="#compat_8c_abaceb8fb0b9b55778be3dd71cc847aee_cgraph" alt=""/></div>
<map name="compat_8c_abaceb8fb0b9b55778be3dd71cc847aee_cgraph" id="compat_8c_abaceb8fb0b9b55778be3dd71cc847aee_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#ad879dd373ddf2edfa46eb01b346ba8bf" title="tor_rename" alt="" coords="141,5,228,32"/>
<area shape="rect" id="node3" href="util_8c.html#aae26b1614b89d2c4bbfe5a7c2dab7c76" title="file_status" alt="" coords="143,56,226,83"/>
</map>
</div>

</div>
</div>
<a id="a1b3488e905c42d47ef7b5fe5d1b7bf31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b3488e905c42d47ef7b5fe5d1b7bf31">&#9670;&nbsp;</a></span>set_max_file_descriptors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_max_file_descriptors </td>
          <td>(</td>
          <td class="paramtype">rlim_t&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>max_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Learn the maximum allowed number of file descriptors, and tell the system we want to use up to that number. (Some systems have a low soft limit, and let us set it higher.) We compute this by finding the largest number that we can use.</p>
<p>If the limit is below the reserved file descriptor value (ULIMIT_BUFFER), return -1 and <b>max_out</b> is untouched.</p>
<p>If we can't find a number greater than or equal to <b>limit</b>, then we fail by returning -1 and <b>max_out</b> is untouched.</p>
<p>If we are unable to set the limit value because of setrlimit() failing, return 0 and <b>max_out</b> is set to the current maximum value returned by getrlimit().</p>
<p>Otherwise, return 0 and store the maximum we found inside <b>max_out</b> and set <b>max_sockets</b> with that value as well. </p>

</div>
</div>
<a id="a72a5268be644ee9a2f9305f748af5410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a5268be644ee9a2f9305f748af5410">&#9670;&nbsp;</a></span>set_socket_nonblocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_socket_nonblocking </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turn <b>socket</b> into a nonblocking socket. Return 0 on success, -1 on failure. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a72a5268be644ee9a2f9305f748af5410_icgraph.png" border="0" usemap="#compat_8c_a72a5268be644ee9a2f9305f748af5410_icgraph" alt=""/></div>
<map name="compat_8c_a72a5268be644ee9a2f9305f748af5410_icgraph" id="compat_8c_a72a5268be644ee9a2f9305f748af5410_icgraph">
<area shape="rect" id="node2" href="compat__threads_8c.html#a467693e4a53ffd3ec0fd191f6dc29d36" title="alert_sockets_create" alt="" coords="216,5,359,32"/>
</map>
</div>

</div>
</div>
<a id="adbf52deccd4f2b9244d6911488b907f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf52deccd4f2b9244d6911488b907f3">&#9670;&nbsp;</a></span>set_uint16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_uint16 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a 16-bit value beginning at <b>cp</b> to <b>v</b>. Equivalent to *(uint16_t*)(cp) = v, but will not cause segfaults on platforms that forbid unaligned memory access. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_adbf52deccd4f2b9244d6911488b907f3_icgraph.png" border="0" usemap="#compat_8c_adbf52deccd4f2b9244d6911488b907f3_icgraph" alt=""/></div>
<map name="compat_8c_adbf52deccd4f2b9244d6911488b907f3_icgraph" id="compat_8c_adbf52deccd4f2b9244d6911488b907f3_icgraph">
<area shape="rect" id="node2" href="tortls_8c.html#a21a637d49c20f40551fab123341ee855" title="find_cipher_by_id" alt="" coords="149,5,271,32"/>
<area shape="rect" id="node3" href="connection__or_8h.html#aac9d7322cd3dd3f5b1c1d9eb9a6bf509" title="cell_pack" alt="" coords="171,56,249,83"/>
<area shape="rect" id="node4" href="connection__or_8h.html#a61c229ce284577c48c7a51f9532d8e15" title="var_cell_pack_header" alt="" coords="136,107,284,133"/>
<area shape="rect" id="node6" href="ext__orport_8c.html#aeb4c42bca0be106a592a42e87c7c3765" title="connection_write_ext\l_or_command" alt="" coords="137,158,283,199"/>
<area shape="rect" id="node7" href="relay_8h.html#a7f83d0d894f6754d7b1090d03f082e40" title="relay_header_pack" alt="" coords="145,224,275,251"/>
<area shape="rect" id="node5" href="connection__or_8c.html#aaf43644cf527a6655657b8f4aa1d1e1e" title="MOCK_IMPL" alt="" coords="332,107,432,133"/>
</map>
</div>

</div>
</div>
<a id="ac4d2010c31db105982e47dc345116b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d2010c31db105982e47dc345116b5f">&#9670;&nbsp;</a></span>set_uint32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_uint32 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a 32-bit value beginning at <b>cp</b> to <b>v</b>. Equivalent to *(uint32_t*)(cp) = v, but will not cause segfaults on platforms that forbid unaligned memory access. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ac4d2010c31db105982e47dc345116b5f_icgraph.png" border="0" usemap="#compat_8c_ac4d2010c31db105982e47dc345116b5f_icgraph" alt=""/></div>
<map name="compat_8c_ac4d2010c31db105982e47dc345116b5f_icgraph" id="compat_8c_ac4d2010c31db105982e47dc345116b5f_icgraph">
<area shape="rect" id="node2" href="connection__or_8h.html#aac9d7322cd3dd3f5b1c1d9eb9a6bf509" title="cell_pack" alt="" coords="171,5,249,32"/>
<area shape="rect" id="node3" href="connection__or_8h.html#a61c229ce284577c48c7a51f9532d8e15" title="var_cell_pack_header" alt="" coords="136,56,284,83"/>
<area shape="rect" id="node4" href="connection__or_8c.html#aaf43644cf527a6655657b8f4aa1d1e1e" title="MOCK_IMPL" alt="" coords="332,56,432,83"/>
</map>
</div>

</div>
</div>
<a id="a9112085a21a609da6735a8284631229e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9112085a21a609da6735a8284631229e">&#9670;&nbsp;</a></span>set_uint64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_uint64 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a 64-bit value beginning at <b>cp</b> to <b>v</b>. Equivalent to *(uint64_t*)(cp) = v, but will not cause segfaults on platforms that forbid unaligned memory access. </p>

</div>
</div>
<a id="a52bd203e1b4172725c42d42e49979b05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52bd203e1b4172725c42d42e49979b05">&#9670;&nbsp;</a></span>switch_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int switch_id </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call setuid and setgid to run as <b>user</b> and switch to their primary group. Return 0 on success. On failure, log and return -1.</p>
<p>If SWITCH_ID_KEEP_BINDLOW is set in 'flags', try to use the capability system to retain the abilitity to bind low ports.</p>
<p>If SWITCH_ID_WARN_IF_NO_CAPS is set in flags, also warn if we have don't have capability support. </p>

</div>
</div>
<a id="a04ebfd9c92357671caa19adcd269e4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04ebfd9c92357671caa19adcd269e4a5">&#9670;&nbsp;</a></span>tor_accept_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tor_socket_t tor_accept_socket </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As accept(), but counts the number of open sockets. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a04ebfd9c92357671caa19adcd269e4a5_cgraph.png" border="0" usemap="#compat_8c_a04ebfd9c92357671caa19adcd269e4a5_cgraph" alt=""/></div>
<map name="compat_8c_a04ebfd9c92357671caa19adcd269e4a5_cgraph" id="compat_8c_a04ebfd9c92357671caa19adcd269e4a5_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a7165d92f355a437277606dc56b469830" title="tor_accept_socket_with\l_extensions" alt="" coords="183,5,343,47"/>
<area shape="rect" id="node3" href="compat_8c.html#a99ded07db25813a849b313e34f14a7ba" title="get_n_open_sockets" alt="" coords="391,13,533,39"/>
</map>
</div>

</div>
</div>
<a id="a267ccd8feb3a4e5028168a12b58fb679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a267ccd8feb3a4e5028168a12b58fb679">&#9670;&nbsp;</a></span>tor_accept_socket_nonblocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tor_socket_t tor_accept_socket_nonblocking </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As accept(), but returns a nonblocking socket and counts the number of open sockets. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a267ccd8feb3a4e5028168a12b58fb679_cgraph.png" border="0" usemap="#compat_8c_a267ccd8feb3a4e5028168a12b58fb679_cgraph" alt=""/></div>
<map name="compat_8c_a267ccd8feb3a4e5028168a12b58fb679_cgraph" id="compat_8c_a267ccd8feb3a4e5028168a12b58fb679_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a7165d92f355a437277606dc56b469830" title="tor_accept_socket_with\l_extensions" alt="" coords="259,5,419,47"/>
<area shape="rect" id="node3" href="compat_8c.html#a99ded07db25813a849b313e34f14a7ba" title="get_n_open_sockets" alt="" coords="467,13,609,39"/>
</map>
</div>

</div>
</div>
<a id="a7165d92f355a437277606dc56b469830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7165d92f355a437277606dc56b469830">&#9670;&nbsp;</a></span>tor_accept_socket_with_extensions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tor_socket_t tor_accept_socket_with_extensions </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cloexec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nonblock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As accept(), but counts the number of open sockets and handles socket creation with either of SOCK_CLOEXEC and SOCK_NONBLOCK specified. <b>cloexec</b> and <b>nonblock</b> should be either 0 or 1 to indicate if the corresponding extension should be used. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a7165d92f355a437277606dc56b469830_cgraph.png" border="0" usemap="#compat_8c_a7165d92f355a437277606dc56b469830_cgraph" alt=""/></div>
<map name="compat_8c_a7165d92f355a437277606dc56b469830_cgraph" id="compat_8c_a7165d92f355a437277606dc56b469830_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a99ded07db25813a849b313e34f14a7ba" title="get_n_open_sockets" alt="" coords="213,13,356,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a7165d92f355a437277606dc56b469830_icgraph.png" border="0" usemap="#compat_8c_a7165d92f355a437277606dc56b469830_icgraph" alt=""/></div>
<map name="compat_8c_a7165d92f355a437277606dc56b469830_icgraph" id="compat_8c_a7165d92f355a437277606dc56b469830_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#a04ebfd9c92357671caa19adcd269e4a5" title="tor_accept_socket" alt="" coords="251,5,381,32"/>
<area shape="rect" id="node3" href="compat_8c.html#a267ccd8feb3a4e5028168a12b58fb679" title="tor_accept_socket_nonblocking" alt="" coords="213,56,419,83"/>
</map>
</div>

</div>
</div>
<a id="a43c2b4a2e5f57a92dd11e2034839f785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43c2b4a2e5f57a92dd11e2034839f785">&#9670;&nbsp;</a></span>tor_addr_from_getsockname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_addr_from_getsockname </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__addr__t.html">tor_addr_t</a> *&#160;</td>
          <td class="paramname"><em>addr_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find the local address associated with the socket <b>sock</b>, and place it in *<b>addr_out</b>. Return 0 on success, -1 on failure.</p>
<p>(As tor_getsockname, but instead places the result in a <a class="el" href="structtor__addr__t.html">tor_addr_t</a>.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_cgraph.png" border="0" usemap="#compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_cgraph" alt=""/></div>
<map name="compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_cgraph" id="compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_cgraph">
<area shape="rect" id="node2" href="address_8c.html#ad420cb52f698056c5680b8fa80e44998" title="tor_addr_from_sockaddr" alt="" coords="240,31,403,57"/>
<area shape="rect" id="node3" href="address_8c.html#a182078d5f88554dc801c8acdb2ba2145" title="tor_addr_from_ipv4n" alt="" coords="451,5,591,32"/>
<area shape="rect" id="node4" href="address_8c.html#abf67a34456e0c4de9ae7bb63a9c6dc16" title="tor_addr_from_in6" alt="" coords="457,56,584,83"/>
<area shape="rect" id="node5" href="address_8c.html#ad073fc5f97a49b9b382af983aa1ae3d5" title="tor_addr_from_ipv6\l_bytes" alt="" coords="639,49,772,90"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_icgraph.png" border="0" usemap="#compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_icgraph" alt=""/></div>
<map name="compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_icgraph" id="compat_8c_a43c2b4a2e5f57a92dd11e2034839f785_icgraph">
<area shape="rect" id="node2" href="address_8c.html#af2b3d99f38741ff959e402198f02f963" title="MOCK_IMPL" alt="" coords="240,5,340,32"/>
</map>
</div>

</div>
</div>
<a id="ade97970c1d8a691241adac739c4f9b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade97970c1d8a691241adac739c4f9b12">&#9670;&nbsp;</a></span>tor_asprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_asprintf </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>strp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Portable asprintf implementation. Does a printf() into a newly malloc'd string. Sets *<b>strp</b> to this string, and returns its length (not including the terminating NUL character).</p>
<p>You can treat this function as if its implementation were something like </p><pre>
  char buf[_INFINITY_];
  tor_snprintf(buf, sizeof(buf), fmt, args);
  *strp = tor_strdup(buf);
  return strlen(*strp):
</pre><p> Where <em>INFINITY</em> is an imaginary constant so big that any string can fit into it. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ade97970c1d8a691241adac739c4f9b12_cgraph.png" border="0" usemap="#compat_8c_ade97970c1d8a691241adac739c4f9b12_cgraph" alt=""/></div>
<map name="compat_8c_ade97970c1d8a691241adac739c4f9b12_cgraph" id="compat_8c_ade97970c1d8a691241adac739c4f9b12_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a5ef7a08e8b543c0d61f9ef1081d4c1ea" title="tor_vasprintf" alt="" coords="140,5,235,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ade97970c1d8a691241adac739c4f9b12_icgraph.png" border="0" usemap="#compat_8c_ade97970c1d8a691241adac739c4f9b12_icgraph" alt=""/></div>
<map name="compat_8c_ade97970c1d8a691241adac739c4f9b12_icgraph" id="compat_8c_ade97970c1d8a691241adac739c4f9b12_icgraph">
<area shape="rect" id="node2" href="address_8h.html#aee1a3f2d72f43f9b0a7d7c5ae85e51e7" title="tor_sockaddr_to_str" alt="" coords="165,5,302,32"/>
<area shape="rect" id="node3" href="addressmap_8c.html#afb820c2da000dbdab619cb6c8f487169" title="addressmap_rewrite\l_reverse" alt="" coords="164,57,303,98"/>
<area shape="rect" id="node4" href="addressmap_8c.html#a1aec8b38f4126d096d6009696f9fc52b" title="client_dns_set_reverse\l_addressmap" alt="" coords="155,122,311,163"/>
<area shape="rect" id="node5" href="bridges_8h.html#a362a2f2ca9c3d9f5956010fa079e1a6d" title="learned_router_identity" alt="" coords="157,188,310,215"/>
<area shape="rect" id="node6" href="config_8h.html#a3113591cdd3555bd354860a3a0802222" title="get_version" alt="" coords="410,239,499,265"/>
<area shape="rect" id="node9" href="config_8h.html#a229118cbc4221ec841824b17f7c82b06" title="get_short_version" alt="" coords="171,289,296,316"/>
<area shape="rect" id="node11" href="connection_8c.html#ab88cfc0f345a7adb709c58312e6ae462" title="MOCK_IMPL" alt="" coords="183,340,283,367"/>
<area shape="rect" id="node12" href="directory_8c.html#a2ab1c7dcfde852c520eb496643fdc865" title="parse_http_url" alt="" coords="181,391,285,417"/>
<area shape="rect" id="node13" href="geoip_8h.html#a8b5c99d168aba5cb0223650cd2989054" title="format_client_stats\l_heartbeat" alt="" coords="167,442,300,483"/>
<area shape="rect" id="node14" href="geoip_8h.html#a921840886e0a3d9ba57b014e6629cf1b" title="getinfo_helper_geoip" alt="" coords="163,508,304,535"/>
<area shape="rect" id="node15" href="hs__common_8h.html#a7a3e59649c9a0a37894603b7da486229" title="hs_lookup_last_hid\l_serv_request" alt="" coords="167,559,300,601"/>
<area shape="rect" id="node17" href="hs__service_8c.html#a0db0ef0b23d20f33bc2d933e9580303a" title="encode_desc_rev_counter\l_for_state" alt="" coords="146,625,321,666"/>
<area shape="rect" id="node18" href="rephist_8h.html#a9f0b93391109cd9331d0b91cd1e56381" title="rep_hist_get_padding\l_count_lines" alt="" coords="161,690,306,731"/>
<area shape="rect" id="node19" href="routerlist_8h.html#afd620fb5cbc29f6895ae016c0240d9a6" title="esc_router_info" alt="" coords="178,756,289,783"/>
<area shape="rect" id="node21" href="status_8c.html#a963a0d6030b8281fb99dd747d846f07b" title="secs_to_uptime" alt="" coords="176,807,291,833"/>
<area shape="rect" id="node22" href="status_8c.html#a01e4f8019372bf2266507c072a7f23f6" title="bytes_to_usage" alt="" coords="176,857,291,884"/>
<area shape="rect" id="node23" href="transports_8c.html#a5d3b79994a8b79ea9455cc271fcd1fce" title="get_pt_proxy_uri" alt="" coords="174,908,293,935"/>
<area shape="rect" id="node24" href="transports_8h.html#a7b99ca768a76f864050b04271a629044" title="pt_get_extra_info_descriptor\l_string" alt="" coords="140,959,327,1001"/>
<area shape="rect" id="node25" href="test_8h.html#a334e47899bf2c19bf8a5ce0f226ab399" title="get_fname_rnd" alt="" coords="179,1025,287,1052"/>
<area shape="rect" id="node7" href="main_8c.html#a5c761b9de5289922e4f75826f766355f" title="tor_init" alt="" coords="583,213,644,240"/>
<area shape="rect" id="node8" href="tor__api_8h.html#a03a6419d2872fb481d95c23a7283cebf" title="tor_run_main" alt="" coords="692,239,789,265"/>
<area shape="rect" id="node10" href="router_8c.html#af8911501c12d293f7fe03a101f3563ba" title="get_platform_str" alt="" coords="397,289,513,316"/>
<area shape="rect" id="node16" href="hs__common_8h.html#a9af4bf6fe3cc01d5524f2dd4123573a8" title="hs_pick_hsdir" alt="" coords="403,567,506,593"/>
<area shape="rect" id="node20" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="375,749,535,790"/>
</map>
</div>

</div>
</div>
<a id="a1a37ba388f43414326de76a9ce7d7eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a37ba388f43414326de76a9ce7d7eb9">&#9670;&nbsp;</a></span>tor_close_socket_simple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_close_socket_simple </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As close(), but guaranteed to work for sockets across platforms (including Windows, where close()ing a socket doesn't work. Returns 0 on success and the socket error code on failure. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a1a37ba388f43414326de76a9ce7d7eb9_icgraph.png" border="0" usemap="#compat_8c_a1a37ba388f43414326de76a9ce7d7eb9_icgraph" alt=""/></div>
<map name="compat_8c_a1a37ba388f43414326de76a9ce7d7eb9_icgraph" id="compat_8c_a1a37ba388f43414326de76a9ce7d7eb9_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#a51ff5f4217ec63674eb98bcdc73eaee3" title="MOCK_IMPL" alt="" coords="220,5,320,32"/>
</map>
</div>

</div>
</div>
<a id="acddb058e55c8ec037e06ce1a15a6ce33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acddb058e55c8ec037e06ce1a15a6ce33">&#9670;&nbsp;</a></span>tor_disable_debugger_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_disable_debugger_attach </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to disable debugger attachment: return 1 on success, -1 on failure, and 0 if we don't know how to try on this platform. </p>

</div>
</div>
<a id="a3fcd0bbe12d23238c463a0a367b0532e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fcd0bbe12d23238c463a0a367b0532e">&#9670;&nbsp;</a></span>tor_fd_getpos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">off_t tor_fd_getpos </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the position of <b>fd</b> with respect to the start of the file. </p>

</div>
</div>
<a id="a3635c2c7246bf5b70666df1c21ac9f97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3635c2c7246bf5b70666df1c21ac9f97">&#9670;&nbsp;</a></span>tor_fd_seekend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_fd_seekend </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move <b>fd</b> to the end of the file. Return -1 on error, 0 on success. If the file is a pipe, do nothing and succeed. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a3635c2c7246bf5b70666df1c21ac9f97_icgraph.png" border="0" usemap="#compat_8c_a3635c2c7246bf5b70666df1c21ac9f97_icgraph" alt=""/></div>
<map name="compat_8c_a3635c2c7246bf5b70666df1c21ac9f97_icgraph" id="compat_8c_a3635c2c7246bf5b70666df1c21ac9f97_icgraph">
<area shape="rect" id="node2" href="torlog_8h.html#a28f9c3bc29733dbef552114f3181021d" title="add_file_log" alt="" coords="164,5,255,32"/>
</map>
</div>

</div>
</div>
<a id="ad8d95395605962eab96331c455e00e9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8d95395605962eab96331c455e00e9e">&#9670;&nbsp;</a></span>tor_fd_setpos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_fd_setpos </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move <b>fd</b> to position <b>pos</b> in the file. Return -1 on error, 0 on success. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ad8d95395605962eab96331c455e00e9e_icgraph.png" border="0" usemap="#compat_8c_ad8d95395605962eab96331c455e00e9e_icgraph" alt=""/></div>
<map name="compat_8c_ad8d95395605962eab96331c455e00e9e_icgraph" id="compat_8c_ad8d95395605962eab96331c455e00e9e_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#a9c4754873a254857ad67fff6cfacd775" title="tor_ftruncate" alt="" coords="155,5,249,32"/>
<area shape="rect" id="node3" href="torlog_8h.html#a3e463d453e7760c85808b0462d0f9fb4" title="truncate_logs" alt="" coords="297,5,397,32"/>
</map>
</div>

</div>
</div>
<a id="a99ee17f8317be48a2391c20e31e8a7b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99ee17f8317be48a2391c20e31e8a7b8">&#9670;&nbsp;</a></span>tor_fopen_cloexec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* tor_fopen_cloexec </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As fopen(path,mode), but ensures that the O_CLOEXEC bit is set on the underlying file handle. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a99ee17f8317be48a2391c20e31e8a7b8_icgraph.png" border="0" usemap="#compat_8c_a99ee17f8317be48a2391c20e31e8a7b8_icgraph" alt=""/></div>
<map name="compat_8c_a99ee17f8317be48a2391c20e31e8a7b8_icgraph" id="compat_8c_a99ee17f8317be48a2391c20e31e8a7b8_icgraph">
<area shape="rect" id="node2" href="dirserv_8h.html#af364b236821a07880cc8dc54e98ca999" title="dirserv_read_measured\l_bandwidths" alt="" coords="181,5,339,47"/>
<area shape="rect" id="node3" href="geoip_8h.html#a99613dd6eb7666bd2e5fe481f15ec301" title="geoip_load_file" alt="" coords="206,71,314,98"/>
</map>
</div>

</div>
</div>
<a id="a9c4754873a254857ad67fff6cfacd775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c4754873a254857ad67fff6cfacd775">&#9670;&nbsp;</a></span>tor_ftruncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_ftruncate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replacement for ftruncate(fd, 0): move to the front of the file and remove all the rest of the file. Return -1 on error, 0 on success. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a9c4754873a254857ad67fff6cfacd775_cgraph.png" border="0" usemap="#compat_8c_a9c4754873a254857ad67fff6cfacd775_cgraph" alt=""/></div>
<map name="compat_8c_a9c4754873a254857ad67fff6cfacd775_cgraph" id="compat_8c_a9c4754873a254857ad67fff6cfacd775_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#ad8d95395605962eab96331c455e00e9e" title="tor_fd_setpos" alt="" coords="148,5,249,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a9c4754873a254857ad67fff6cfacd775_icgraph.png" border="0" usemap="#compat_8c_a9c4754873a254857ad67fff6cfacd775_icgraph" alt=""/></div>
<map name="compat_8c_a9c4754873a254857ad67fff6cfacd775_icgraph" id="compat_8c_a9c4754873a254857ad67fff6cfacd775_icgraph">
<area shape="rect" id="node2" href="torlog_8h.html#a3e463d453e7760c85808b0462d0f9fb4" title="truncate_logs" alt="" coords="148,5,248,32"/>
</map>
</div>

</div>
</div>
<a id="a8368fa29952fc0441b02aa4216d64b6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8368fa29952fc0441b02aa4216d64b6e">&#9670;&nbsp;</a></span>tor_get_avail_disk_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t tor_get_avail_disk_space </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the amount of free disk space we have permission to use, in bytes. Return -1 if the amount of free space can't be determined. </p>

</div>
</div>
<a id="a2e53263fadf99fbc77a312134b747c58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e53263fadf99fbc77a312134b747c58">&#9670;&nbsp;</a></span>tor_getpass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t tor_getpass </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prompt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Emit the password prompt <b>prompt</b>, then read up to <b>buflen</b> bytes of passphrase into <b>output</b>. Return the number of bytes in the passphrase, excluding terminating NUL. </p>

</div>
</div>
<a id="aa295ae8310a13a304e4c3aa1570995d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa295ae8310a13a304e4c3aa1570995d8">&#9670;&nbsp;</a></span>tor_getpwnam()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct passwd* tor_getpwnam </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wrapper around getpwnam() that caches result. Used so that we don't need to give the sandbox access to /etc/passwd.</p>
<p>The following fields alone will definitely be copied in the output: pw_uid, pw_gid, pw_name, pw_dir. Other fields are not present in cached values.</p>
<p>When called with a NULL argument, this function clears storage associated with static variables it uses. </p>

</div>
</div>
<a id="a222f4f3dd5c5feff13868a021dc76e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a222f4f3dd5c5feff13868a021dc76e3e">&#9670;&nbsp;</a></span>tor_getpwuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct passwd* tor_getpwuid </td>
          <td>(</td>
          <td class="paramtype">uid_t&#160;</td>
          <td class="paramname"><em>uid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wrapper around getpwnam() that can use cached result from <a class="el" href="compat_8c.html#aa295ae8310a13a304e4c3aa1570995d8">tor_getpwnam()</a>. Used so that we don't need to give the sandbox access to /etc/passwd.</p>
<p>The following fields alone will definitely be copied in the output: pw_uid, pw_gid, pw_name, pw_dir. Other fields are not present in cached values. </p>

</div>
</div>
<a id="a983d273987a338a60523f0bce4006af2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983d273987a338a60523f0bce4006af2">&#9670;&nbsp;</a></span>tor_gmtime_r()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tm* tor_gmtime_r </td>
          <td>(</td>
          <td class="paramtype">const time_t *&#160;</td>
          <td class="paramname"><em>timep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As gmtime_r, but defined for platforms that don't have it:</p>
<p>Convert *<b>timep</b> to a struct tm in UTC, and store the value in *<b>result</b>. Return the result on success, or NULL on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a983d273987a338a60523f0bce4006af2_cgraph.png" border="0" usemap="#compat_8c_a983d273987a338a60523f0bce4006af2_cgraph" alt=""/></div>
<map name="compat_8c_a983d273987a338a60523f0bce4006af2_cgraph" id="compat_8c_a983d273987a338a60523f0bce4006af2_cgraph">
<area shape="rect" id="node2" href="compat__threads_8c.html#a0f3b168e06f8e4b99789af20771ee096" title="tor_mutex_new" alt="" coords="161,5,272,32"/>
<area shape="rect" id="node3" href="compat__pthreads_8c.html#a8bfcc96866bdf76508915db8b252f746" title="tor_mutex_acquire" alt="" coords="152,56,281,83"/>
<area shape="rect" id="node4" href="compat__pthreads_8c.html#a3fc2298a8cb49803528daa6d35091372" title="tor_mutex_release" alt="" coords="152,107,281,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a983d273987a338a60523f0bce4006af2_icgraph.png" border="0" usemap="#compat_8c_a983d273987a338a60523f0bce4006af2_icgraph" alt=""/></div>
<map name="compat_8c_a983d273987a338a60523f0bce4006af2_icgraph" id="compat_8c_a983d273987a338a60523f0bce4006af2_icgraph">
<area shape="rect" id="node2" href="util_8h.html#a0e1e4c423a6ba1306a9c3b2565e99391" title="format_rfc1123_time" alt="" coords="159,5,300,32"/>
<area shape="rect" id="node3" href="voting__schedule_8h.html#a19239aba163189612262ba8c314d2a1c" title="voting_schedule_get\l_start_of_next_interval" alt="" coords="152,57,307,98"/>
</map>
</div>

</div>
</div>
<a id="a802226afdc80ad46ae394289b1e586ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802226afdc80ad46ae394289b1e586ee">&#9670;&nbsp;</a></span>tor_inet_aton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_inet_aton </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set *addr to the IP address (in dotted-quad notation) stored in *str. Return 1 on success, 0 if *str is badly formatted. (Like inet_aton(str,addr), but works on Windows and Solaris.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a802226afdc80ad46ae394289b1e586ee_cgraph.png" border="0" usemap="#compat_8c_a802226afdc80ad46ae394289b1e586ee_cgraph" alt=""/></div>
<map name="compat_8c_a802226afdc80ad46ae394289b1e586ee_cgraph" id="compat_8c_a802226afdc80ad46ae394289b1e586ee_cgraph">
<area shape="rect" id="node2" href="util_8c.html#a58eee4159dfe33194147f2146f0dbc2f" title="tor_sscanf" alt="" coords="151,5,233,32"/>
<area shape="rect" id="node3" href="util_8c.html#a90e57e8764505012f016303eab3e4180" title="tor_vsscanf" alt="" coords="281,5,372,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a802226afdc80ad46ae394289b1e586ee_icgraph.png" border="0" usemap="#compat_8c_a802226afdc80ad46ae394289b1e586ee_icgraph" alt=""/></div>
<map name="compat_8c_a802226afdc80ad46ae394289b1e586ee_icgraph" id="compat_8c_a802226afdc80ad46ae394289b1e586ee_icgraph">
<area shape="rect" id="node2" href="address_8h.html#a704407961c6ac0d2fddfd29b8a719d91" title="tor_addr_parse_PTR_name" alt="" coords="151,5,332,32"/>
<area shape="rect" id="node3" href="compat_8c.html#a8ba87984a3a5dd16e7b60621ff983a89" title="tor_inet_pton" alt="" coords="193,56,290,83"/>
<area shape="rect" id="node7" href="nodelist_8h.html#aa6437a3da576fc05f0b444878bbeb93e" title="router_find_exact_exit\l_enclave" alt="" coords="166,107,317,149"/>
<area shape="rect" id="node4" href="util_8h.html#a307d12f617bd1f5606b8f971733e4c48" title="string_is_valid_ipv4\l_address" alt="" coords="380,15,516,57"/>
<area shape="rect" id="node6" href="util_8h.html#a06c31f983cd56699cca308532a09a14c" title="string_is_valid_ipv6\l_address" alt="" coords="380,81,516,122"/>
<area shape="rect" id="node5" href="util_8h.html#a526379934c7164b1f7d675cf9b725846" title="string_is_valid_nonrfc\l_hostname" alt="" coords="564,15,712,57"/>
</map>
</div>

</div>
</div>
<a id="aaf2add8a435d6a782f057562de228637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf2add8a435d6a782f057562de228637">&#9670;&nbsp;</a></span>tor_inet_ntop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* tor_inet_ntop </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given <b>af</b>==AF_INET and <b>src</b> a struct in_addr, or <b>af</b>==AF_INET6 and <b>src</b> a struct <a class="el" href="structin6__addr.html">in6_addr</a>, try to format the address and store it in the <b>len</b>-byte buffer <b>dst</b>. Returns <b>dst</b> on success, NULL on failure.</p>
<p>(Like inet_ntop(af,src,dst,len), but works on platforms that don't have it: Tor sometimes needs to format ipv6 addresses even on platforms without ipv6 support.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_aaf2add8a435d6a782f057562de228637_cgraph.png" border="0" usemap="#compat_8c_aaf2add8a435d6a782f057562de228637_cgraph" alt=""/></div>
<map name="compat_8c_aaf2add8a435d6a782f057562de228637_cgraph" id="compat_8c_aaf2add8a435d6a782f057562de228637_cgraph">
<area shape="rect" id="node2" href="address_8c.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="151,5,248,32"/>
<area shape="rect" id="node3" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="296,31,383,57"/>
<area shape="rect" id="node4" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="431,31,525,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_aaf2add8a435d6a782f057562de228637_icgraph.png" border="0" usemap="#compat_8c_aaf2add8a435d6a782f057562de228637_icgraph" alt=""/></div>
<map name="compat_8c_aaf2add8a435d6a782f057562de228637_icgraph" id="compat_8c_aaf2add8a435d6a782f057562de228637_icgraph">
<area shape="rect" id="node2" href="address_8h.html#a4ec1578f8fab114634b8b58d68d02be8" title="tor_dup_ip" alt="" coords="151,5,233,32"/>
</map>
</div>

</div>
</div>
<a id="a8ba87984a3a5dd16e7b60621ff983a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba87984a3a5dd16e7b60621ff983a89">&#9670;&nbsp;</a></span>tor_inet_pton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_inet_pton </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given <b>af</b>==AF_INET or <b>af</b>==AF_INET6, and a string <b>src</b> encoding an IPv4 address or IPv6 address correspondingly, try to parse the address and store the result in <b>dst</b> (which must have space for a struct in_addr or a struct <a class="el" href="structin6__addr.html">in6_addr</a>, as appropriate). Return 1 on success, 0 on a bad parse, and -1 on a bad <b>af</b>.</p>
<p>(Like inet_pton(af,src,dst) but works on platforms that don't have it: Tor sometimes needs to format ipv6 addresses even on platforms without ipv6 support.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_cgraph.png" border="0" usemap="#compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_cgraph" alt=""/></div>
<map name="compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_cgraph" id="compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a802226afdc80ad46ae394289b1e586ee" title="tor_inet_aton" alt="" coords="151,5,248,32"/>
<area shape="rect" id="node3" href="util_8c.html#a58eee4159dfe33194147f2146f0dbc2f" title="tor_sscanf" alt="" coords="296,31,379,57"/>
<area shape="rect" id="node4" href="util_8c.html#a90e57e8764505012f016303eab3e4180" title="tor_vsscanf" alt="" coords="427,31,517,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_icgraph.png" border="0" usemap="#compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_icgraph" alt=""/></div>
<map name="compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_icgraph" id="compat_8c_a8ba87984a3a5dd16e7b60621ff983a89_icgraph">
<area shape="rect" id="node2" href="util_8h.html#a307d12f617bd1f5606b8f971733e4c48" title="string_is_valid_ipv4\l_address" alt="" coords="151,5,287,47"/>
<area shape="rect" id="node4" href="util_8h.html#a06c31f983cd56699cca308532a09a14c" title="string_is_valid_ipv6\l_address" alt="" coords="151,71,287,112"/>
<area shape="rect" id="node3" href="util_8h.html#a526379934c7164b1f7d675cf9b725846" title="string_is_valid_nonrfc\l_hostname" alt="" coords="335,5,483,47"/>
</map>
</div>

</div>
</div>
<a id="ae02136d1dde67b64beb4e87365ad6ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae02136d1dde67b64beb4e87365ad6ccf">&#9670;&nbsp;</a></span>tor_localtime_r()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tm* tor_localtime_r </td>
          <td>(</td>
          <td class="paramtype">const time_t *&#160;</td>
          <td class="paramname"><em>timep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As localtime_r, but defined for platforms that don't have it:</p>
<p>Convert *<b>timep</b> to a struct tm in local time, and store the value in *<b>result</b>. Return the result on success, or NULL on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ae02136d1dde67b64beb4e87365ad6ccf_cgraph.png" border="0" usemap="#compat_8c_ae02136d1dde67b64beb4e87365ad6ccf_cgraph" alt=""/></div>
<map name="compat_8c_ae02136d1dde67b64beb4e87365ad6ccf_cgraph" id="compat_8c_ae02136d1dde67b64beb4e87365ad6ccf_cgraph">
<area shape="rect" id="node2" href="compat__threads_8c.html#a0f3b168e06f8e4b99789af20771ee096" title="tor_mutex_new" alt="" coords="169,5,280,32"/>
<area shape="rect" id="node3" href="compat__pthreads_8c.html#a8bfcc96866bdf76508915db8b252f746" title="tor_mutex_acquire" alt="" coords="160,56,289,83"/>
<area shape="rect" id="node4" href="compat__pthreads_8c.html#a3fc2298a8cb49803528daa6d35091372" title="tor_mutex_release" alt="" coords="160,107,289,133"/>
</map>
</div>

</div>
</div>
<a id="a06e59a7b36c548f64eacef17c6f27f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e59a7b36c548f64eacef17c6f27f65">&#9670;&nbsp;</a></span>tor_lockfile_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtor__lockfile__t.html">tor_lockfile_t</a>* tor_lockfile_lock </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>locked_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to get a lock on the lockfile <b>filename</b>, creating it as necessary. If someone else has the lock and <b>blocking</b> is true, wait until the lock is available. Otherwise return immediately whether we succeeded or not.</p>
<p>Set *<b>locked_out</b> to true if somebody else had the lock, and to false otherwise.</p>
<p>Return a <b><a class="el" href="structtor__lockfile__t.html">tor_lockfile_t</a></b> on success, NULL on failure.</p>
<p>(Implementation note: because we need to fall back to fcntl on some platforms, these locks are per-process, not per-thread. If you want to do in-process locking, use <a class="el" href="structtor__mutex__t.html">tor_mutex_t</a> like a normal person. On Windows, when <b>blocking</b> is true, the maximum time that is actually waited is 10 seconds, after which NULL is returned and <b>locked_out</b> is set to 1.) </p>

</div>
</div>
<a id="afcfbcea2492c890d03a51c8feb0b797b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcfbcea2492c890d03a51c8feb0b797b">&#9670;&nbsp;</a></span>tor_lockfile_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_lockfile_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtor__lockfile__t.html">tor_lockfile_t</a> *&#160;</td>
          <td class="paramname"><em>lockfile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release the lock held as <b>lockfile</b>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_afcfbcea2492c890d03a51c8feb0b797b_icgraph.png" border="0" usemap="#compat_8c_afcfbcea2492c890d03a51c8feb0b797b_icgraph" alt=""/></div>
<map name="compat_8c_afcfbcea2492c890d03a51c8feb0b797b_icgraph" id="compat_8c_afcfbcea2492c890d03a51c8feb0b797b_icgraph">
<area shape="rect" id="node2" href="main_8h.html#a47f354a197343260ba0e44498b9a495e" title="release_lockfile" alt="" coords="184,5,296,32"/>
</map>
</div>

</div>
</div>
<a id="a539ba773865aef09d46593f3ced79ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a539ba773865aef09d46593f3ced79ba0">&#9670;&nbsp;</a></span>tor_memmem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void* tor_memmem </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>_haystack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>hlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>_needle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given <b>hlen</b> bytes at <b>haystack</b> and <b>nlen</b> bytes at <b>needle</b>, return a pointer to the first occurrence of the needle within the haystack, or NULL if there is no such occurrence.</p>
<p>This function is <em>not</em> timing-safe.</p>
<p>Requires that <b>nlen</b> be greater than zero. </p>

</div>
</div>
<a id="afd80fa3fbf50fb4bb96cd83431674930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd80fa3fbf50fb4bb96cd83431674930">&#9670;&nbsp;</a></span>tor_mlockall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_mlockall </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to lock all current and all future memory pages. This should only be called once and while we're privileged. Like mlockall() we return 0 when we're successful and -1 when we're not. Unlike mlockall() we return 1 if we've already attempted to lock memory. </p>

</div>
</div>
<a id="a68cf2b7e7222c4f58cdc37dea2b5a912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68cf2b7e7222c4f58cdc37dea2b5a912">&#9670;&nbsp;</a></span>tor_open_cloexec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_open_cloexec </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As open(path, flags, mode), but return an fd with the close-on-exec mode set. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a68cf2b7e7222c4f58cdc37dea2b5a912_icgraph.png" border="0" usemap="#compat_8c_a68cf2b7e7222c4f58cdc37dea2b5a912_icgraph" alt=""/></div>
<map name="compat_8c_a68cf2b7e7222c4f58cdc37dea2b5a912_icgraph" id="compat_8c_a68cf2b7e7222c4f58cdc37dea2b5a912_icgraph">
<area shape="rect" id="node2" href="torlog_8h.html#a28f9c3bc29733dbef552114f3181021d" title="add_file_log" alt="" coords="202,5,293,32"/>
<area shape="rect" id="node3" href="util_8c.html#a18a8335da29f8a902b5d2d3b9ef68f19" title="MOCK_IMPL" alt="" coords="197,56,297,83"/>
<area shape="rect" id="node4" href="keypin_8c.html#acb854ec6cf0f8d6e0f3e62719c224908" title="keypin_open_journal" alt="" coords="177,107,317,133"/>
</map>
</div>

</div>
</div>
<a id="afa34bb7c861c2c81555132982b60efc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa34bb7c861c2c81555132982b60efc0">&#9670;&nbsp;</a></span>tor_open_socket_nonblocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tor_socket_t tor_open_socket_nonblocking </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>protocol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As socket(), but creates a nonblocking socket and counts the number of open sockets. </p>

</div>
</div>
<a id="a8e7b99a17b82bcbc2055197c4635e52b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7b99a17b82bcbc2055197c4635e52b">&#9670;&nbsp;</a></span>tor_open_socket_with_extensions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tor_socket_t tor_open_socket_with_extensions </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cloexec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nonblock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As socket(), but counts the number of open sockets and handles socket creation with either of SOCK_CLOEXEC and SOCK_NONBLOCK specified. <b>cloexec</b> and <b>nonblock</b> should be either 0 or 1 to indicate if the corresponding extension should be used. </p>

</div>
</div>
<a id="ad879dd373ddf2edfa46eb01b346ba8bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad879dd373ddf2edfa46eb01b346ba8bf">&#9670;&nbsp;</a></span>tor_rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_rename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path_new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As rename(), but work correctly with the sandbox. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_ad879dd373ddf2edfa46eb01b346ba8bf_icgraph.png" border="0" usemap="#compat_8c_ad879dd373ddf2edfa46eb01b346ba8bf_icgraph" alt=""/></div>
<map name="compat_8c_ad879dd373ddf2edfa46eb01b346ba8bf_icgraph" id="compat_8c_ad879dd373ddf2edfa46eb01b346ba8bf_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#abaceb8fb0b9b55778be3dd71cc847aee" title="replace_file" alt="" coords="140,5,228,32"/>
</map>
</div>

</div>
</div>
<a id="af032ac661214ae28b4f205781a515290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af032ac661214ae28b4f205781a515290">&#9670;&nbsp;</a></span>tor_snprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_snprintf </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replacement for snprintf. Differs from platform snprintf in two ways: First, always NUL-terminates its output. Second, always returns -1 if the result is truncated. (Note that this return behavior does <em>not</em> conform to C99; it just happens to be easier to emulate "return -1" with conformant implementations than it is to emulate "return number that would be written" with non-conformant implementations.) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_af032ac661214ae28b4f205781a515290_cgraph.png" border="0" usemap="#compat_8c_af032ac661214ae28b4f205781a515290_cgraph" alt=""/></div>
<map name="compat_8c_af032ac661214ae28b4f205781a515290_cgraph" id="compat_8c_af032ac661214ae28b4f205781a515290_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="140,5,235,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_af032ac661214ae28b4f205781a515290_icgraph.png" border="0" usemap="#compat_8c_af032ac661214ae28b4f205781a515290_icgraph" alt=""/></div>
<map name="compat_8c_af032ac661214ae28b4f205781a515290_icgraph" id="compat_8c_af032ac661214ae28b4f205781a515290_icgraph">
<area shape="rect" id="node2" href="address_8h.html#a1b6ba2d6f5a3bc607d7d761c849ec110" title="fmt_addrport" alt="" coords="196,64,291,91"/>
<area shape="rect" id="node5" href="address_8h.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="195,173,292,200"/>
<area shape="rect" id="node7" href="compat_8c.html#aaf2add8a435d6a782f057562de228637" title="tor_inet_ntop" alt="" coords="446,224,543,251"/>
<area shape="rect" id="node15" href="compress__zstd_8h.html#a18b4f70b64f51203f45826f98e23a89e" title="tor_zstd_method_supported" alt="" coords="152,275,335,301"/>
<area shape="rect" id="node16" href="container_8c.html#a9060e1f019093c294f1a076b6f0226da" title="smartlist_contains\l_int_as_string" alt="" coords="179,326,307,367"/>
<area shape="rect" id="node19" href="crypto__format_8c.html#a58e217ce83721c40e22a70f6f9ca1544" title="crypto_write_tagged\l_contents_to_file" alt="" coords="174,391,313,433"/>
<area shape="rect" id="node23" href="util_8h.html#a198d1f011891d6d369bab39eaeecd275" title="format_iso_time_nospace_usec" alt="" coords="140,457,347,484"/>
<area shape="rect" id="node24" href="util_8h.html#a9a88be72c2d4775622cedbda5d76f833" title="format_time_interval" alt="" coords="173,508,313,535"/>
<area shape="rect" id="node26" href="circuitlist_8h.html#a812936e0ba7830eaaf06aee73fd7ac88" title="circuit_purpose_to\l_controller_string" alt="" coords="179,559,307,601"/>
<area shape="rect" id="node27" href="circuitlist_8h.html#a6c79060856f98208dbdbf81c4f5ed336" title="circuit_purpose_to\l_string" alt="" coords="179,625,307,666"/>
<area shape="rect" id="node29" href="control_8h.html#a3215ddc475a10ee916377da0a97e62f2" title="control_event_guard" alt="" coords="174,691,313,717"/>
<area shape="rect" id="node30" href="entrynodes_8h.html#a446ff1a56de96285dac2fe015e972bd0" title="entry_guard_describe" alt="" coords="170,741,317,768"/>
<area shape="rect" id="node31" href="main_8c.html#a5c761b9de5289922e4f75826f766355f" title="tor_init" alt="" coords="213,792,274,819"/>
<area shape="rect" id="node33" href="router_8c.html#af8911501c12d293f7fe03a101f3563ba" title="get_platform_str" alt="" coords="185,843,301,869"/>
<area shape="rect" id="node34" href="routerkeys_8c.html#aae1c5a5d448a1f0460373478e6304b36" title="ed_key_init_from_file" alt="" coords="171,893,316,920"/>
<area shape="rect" id="node35" href="routerlist_8h.html#a7b194ad6a42e8fb2ef4f3aa1cf135830" title="router_load_single\l_router" alt="" coords="180,945,307,986"/>
<area shape="rect" id="node36" href="routerparse_8c.html#a65294e0f578a21d0e10431bf4ef1d038" title="MOCK_IMPL" alt="" coords="193,1011,293,1037"/>
<area shape="rect" id="node3" href="dirvote_8c.html#a059168318a87de5f77438cbcefdb73ed" title="dirvote_create_microdescriptor" alt="" coords="395,5,595,32"/>
<area shape="rect" id="node4" href="transports_8h.html#a7b99ca768a76f864050b04271a629044" title="pt_get_extra_info_descriptor\l_string" alt="" coords="401,57,588,98"/>
<area shape="rect" id="node6" href="address_8h.html#a65887d7caae24e0c647d43e978eeeb49" title="fmt_addr32" alt="" coords="451,123,538,149"/>
<area shape="rect" id="node9" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd" title="format_node_description" alt="" coords="413,173,577,200"/>
<area shape="rect" id="node8" href="address_8h.html#a4ec1578f8fab114634b8b58d68d02be8" title="tor_dup_ip" alt="" coords="681,249,763,276"/>
<area shape="rect" id="node10" href="router_8h.html#a4d59ce576eb8716561e1bc6be6f88de1" title="router_describe" alt="" coords="667,148,777,175"/>
<area shape="rect" id="node12" href="router_8h.html#a9123f7ab38acbdf103fcb38433311d42" title="node_describe" alt="" coords="669,199,775,225"/>
<area shape="rect" id="node13" href="router_8h.html#ab375311f5454761bc6691091cdf50847" title="routerstatus_describe" alt="" coords="649,47,795,73"/>
<area shape="rect" id="node14" href="router_8h.html#a76d2b00d031ef80969722b77807f2f0c" title="extend_info_describe" alt="" coords="649,97,795,124"/>
<area shape="rect" id="node11" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="849,141,1009,182"/>
<area shape="rect" id="node17" href="circuituse_8h.html#aa9c9e6111de126ec1c3ca4dd17f4091c" title="circuit_stream_is_being\l_handled" alt="" coords="415,275,574,317"/>
<area shape="rect" id="node18" href="circuituse_8h.html#ac0941a9dc5da7825f107d1d4bf028063" title="circuit_remove_handled\l_ports" alt="" coords="643,301,801,342"/>
<area shape="rect" id="node20" href="crypto__curve25519_8c.html#a700be6ddcf2a5ddbbbf56c91f3cd7cc7" title="curve25519_keypair\l_write_to_file" alt="" coords="425,341,564,382"/>
<area shape="rect" id="node21" href="crypto__ed25519_8c.html#a91a3f7e13f15a365d83bcb418daaaf7d" title="ed25519_seckey_write\l_to_file" alt="" coords="417,406,572,447"/>
<area shape="rect" id="node22" href="crypto__ed25519_8c.html#a7619807bfd3a082c5bba11d43f9f63ee" title="ed25519_pubkey_write\l_to_file" alt="" coords="417,471,572,513"/>
<area shape="rect" id="node25" href="connection_8c.html#ab88cfc0f345a7adb709c58312e6ae462" title="MOCK_IMPL" alt="" coords="445,537,545,564"/>
<area shape="rect" id="node28" href="circuituse_8h.html#a407966b13bb02eb365910ea9f07e08be" title="circuit_change_purpose" alt="" coords="415,632,574,659"/>
<area shape="rect" id="node32" href="tor__api_8h.html#a03a6419d2872fb481d95c23a7283cebf" title="tor_run_main" alt="" coords="446,792,543,819"/>
</map>
</div>

</div>
</div>
<a id="aa0ffdb9205a16eada3bd63687272d027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ffdb9205a16eada3bd63687272d027">&#9670;&nbsp;</a></span>tor_socketpair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_socketpair </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>fd</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a pair of connected sockets. (Like socketpair(family, type,protocol,fd), but works on systems that don't have socketpair.)</p>
<p>Currently, only (AF_UNIX, SOCK_STREAM, 0) sockets are supported.</p>
<p>Note that on systems without socketpair, this call will fail if localhost is inaccessible (for example, if the networking stack is down). And even if it succeeds, the socket pair will not be able to read while localhost is down later (the socket pair may even close, depending on OS-specific timeouts).</p>
<p>Returns 0 on success and -errno on failure; do not rely on the value of errno or WSAGetLastError(). </p>

</div>
</div>
<a id="a84661ffc0d8c5c3c451954733306c700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84661ffc0d8c5c3c451954733306c700">&#9670;&nbsp;</a></span>tor_strtok_r_impl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* tor_strtok_r_impl </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>lasts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implementation of strtok_r for platforms whose coders haven't figured out how to write one. Hey, retrograde libc developers! You can use this code here for free! </p>

</div>
</div>
<a id="ac28f8739ae1509cef86b392cd50cc316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28f8739ae1509cef86b392cd50cc316">&#9670;&nbsp;</a></span>tor_take_socket_ownership()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tor_take_socket_ownership </td>
          <td>(</td>
          <td class="paramtype">tor_socket_t&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For socket accounting: remember that we are the owner of the socket <b>s</b>. This will prevent us from overallocating sockets, and prevent us from asserting later when we close the socket <b>s</b>. </p>

</div>
</div>
<a id="a5ef7a08e8b543c0d61f9ef1081d4c1ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ef7a08e8b543c0d61f9ef1081d4c1ea">&#9670;&nbsp;</a></span>tor_vasprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_vasprintf </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>strp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Portable vasprintf implementation. Does a printf() into a newly malloc'd string. Differs from regular vasprintf in the same ways that <a class="el" href="compat_8c.html#ade97970c1d8a691241adac739c4f9b12">tor_asprintf()</a> differs from regular asprintf. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a5ef7a08e8b543c0d61f9ef1081d4c1ea_icgraph.png" border="0" usemap="#compat_8c_a5ef7a08e8b543c0d61f9ef1081d4c1ea_icgraph" alt=""/></div>
<map name="compat_8c_a5ef7a08e8b543c0d61f9ef1081d4c1ea_icgraph" id="compat_8c_a5ef7a08e8b543c0d61f9ef1081d4c1ea_icgraph">
<area shape="rect" id="node2" href="buffers_8c.html#aa957514fdc2f68cccc3ec62ecb9448ef" title="buf_add_vprintf" alt="" coords="171,257,282,284"/>
<area shape="rect" id="node4" href="compat_8c.html#ade97970c1d8a691241adac739c4f9b12" title="tor_asprintf" alt="" coords="183,559,270,585"/>
<area shape="rect" id="node29" href="util_8c.html#a4fee2abf83af3a8b8a18b245daf4083b" title="smartlist_add_vasprintf" alt="" coords="148,860,305,887"/>
<area shape="rect" id="node3" href="buffers_8c.html#a05f864bf1a0d082230f7869e4f5b51c7" title="buf_add_printf" alt="" coords="389,5,493,32"/>
<area shape="rect" id="node5" href="address_8h.html#aee1a3f2d72f43f9b0a7d7c5ae85e51e7" title="tor_sockaddr_to_str" alt="" coords="372,157,509,184"/>
<area shape="rect" id="node6" href="addressmap_8c.html#afb820c2da000dbdab619cb6c8f487169" title="addressmap_rewrite\l_reverse" alt="" coords="371,209,510,250"/>
<area shape="rect" id="node7" href="addressmap_8c.html#a1aec8b38f4126d096d6009696f9fc52b" title="client_dns_set_reverse\l_addressmap" alt="" coords="363,274,519,315"/>
<area shape="rect" id="node8" href="bridges_8h.html#a362a2f2ca9c3d9f5956010fa079e1a6d" title="learned_router_identity" alt="" coords="364,340,517,367"/>
<area shape="rect" id="node9" href="config_8h.html#a3113591cdd3555bd354860a3a0802222" title="get_version" alt="" coords="625,199,714,225"/>
<area shape="rect" id="node12" href="config_8h.html#a229118cbc4221ec841824b17f7c82b06" title="get_short_version" alt="" coords="378,391,503,417"/>
<area shape="rect" id="node14" href="connection_8c.html#ab88cfc0f345a7adb709c58312e6ae462" title="MOCK_IMPL" alt="" coords="391,508,491,535"/>
<area shape="rect" id="node15" href="directory_8c.html#a2ab1c7dcfde852c520eb496643fdc865" title="parse_http_url" alt="" coords="389,559,493,585"/>
<area shape="rect" id="node16" href="geoip_8h.html#a8b5c99d168aba5cb0223650cd2989054" title="format_client_stats\l_heartbeat" alt="" coords="374,610,507,651"/>
<area shape="rect" id="node17" href="geoip_8h.html#a921840886e0a3d9ba57b014e6629cf1b" title="getinfo_helper_geoip" alt="" coords="370,676,511,703"/>
<area shape="rect" id="node18" href="hs__common_8h.html#a7a3e59649c9a0a37894603b7da486229" title="hs_lookup_last_hid\l_serv_request" alt="" coords="374,442,507,483"/>
<area shape="rect" id="node20" href="hs__service_8c.html#a0db0ef0b23d20f33bc2d933e9580303a" title="encode_desc_rev_counter\l_for_state" alt="" coords="353,778,528,819"/>
<area shape="rect" id="node21" href="rephist_8h.html#a9f0b93391109cd9331d0b91cd1e56381" title="rep_hist_get_padding\l_count_lines" alt="" coords="368,843,513,885"/>
<area shape="rect" id="node22" href="routerlist_8h.html#afd620fb5cbc29f6895ae016c0240d9a6" title="esc_router_info" alt="" coords="385,727,496,753"/>
<area shape="rect" id="node24" href="status_8c.html#a963a0d6030b8281fb99dd747d846f07b" title="secs_to_uptime" alt="" coords="383,960,498,987"/>
<area shape="rect" id="node25" href="status_8c.html#a01e4f8019372bf2266507c072a7f23f6" title="bytes_to_usage" alt="" coords="383,1011,498,1037"/>
<area shape="rect" id="node26" href="transports_8c.html#a5d3b79994a8b79ea9455cc271fcd1fce" title="get_pt_proxy_uri" alt="" coords="381,1061,500,1088"/>
<area shape="rect" id="node27" href="transports_8h.html#a7b99ca768a76f864050b04271a629044" title="pt_get_extra_info_descriptor\l_string" alt="" coords="576,902,763,943"/>
<area shape="rect" id="node28" href="test_8h.html#a334e47899bf2c19bf8a5ce0f226ab399" title="get_fname_rnd" alt="" coords="387,107,495,133"/>
<area shape="rect" id="node10" href="main_8c.html#a5c761b9de5289922e4f75826f766355f" title="tor_init" alt="" coords="880,173,941,200"/>
<area shape="rect" id="node11" href="tor__api_8h.html#a03a6419d2872fb481d95c23a7283cebf" title="tor_run_main" alt="" coords="1059,199,1156,225"/>
<area shape="rect" id="node13" href="router_8c.html#af8911501c12d293f7fe03a101f3563ba" title="get_platform_str" alt="" coords="611,391,727,417"/>
<area shape="rect" id="node19" href="hs__common_8h.html#a9af4bf6fe3cc01d5524f2dd4123573a8" title="hs_pick_hsdir" alt="" coords="618,449,721,476"/>
<area shape="rect" id="node23" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="589,719,749,761"/>
<area shape="rect" id="node30" href="util_8c.html#a68cb44a66a7446022122c93590b6d179" title="smartlist_add_asprintf" alt="" coords="365,1112,516,1139"/>
<area shape="rect" id="node31" href="config_8h.html#a371199c6500ed7bbdf40789df8310c92" title="get_list_of_ports_to\l_forward" alt="" coords="843,1230,979,1271"/>
<area shape="rect" id="node32" href="control_8h.html#a0381183e4e119ef80562083e5d6305fe" title="control_ports_write\l_to_file" alt="" coords="603,1318,735,1359"/>
<area shape="rect" id="node33" href="control_8h.html#ad442667356d1ccf0fc9c42aefde5c16b" title="control_event_conf\l_changed" alt="" coords="603,967,735,1009"/>
<area shape="rect" id="node34" href="dirvote_8c.html#a059168318a87de5f77438cbcefdb73ed" title="dirvote_create_microdescriptor" alt="" coords="811,1059,1011,1085"/>
<area shape="rect" id="node35" href="policies_8h.html#a8dd804fdc250aed2c7270fe142400c56" title="write_short_policy" alt="" coords="606,1084,733,1111"/>
<area shape="rect" id="node36" href="transports_8c.html#ae4a43088088565eae5f080835a902cb0" title="get_transport_options\l_for_server_proxy" alt="" coords="596,1135,743,1177"/>
<area shape="rect" id="node37" href="transports_8h.html#a57ab748ff34348f65f1c76974b4edb3f" title="get_transport_proxy\l_ports" alt="" coords="601,1201,738,1242"/>
</map>
</div>

</div>
</div>
<a id="a1df7873b16ae8936d25dfedb706f4ea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df7873b16ae8936d25dfedb706f4ea6">&#9670;&nbsp;</a></span>tor_vsnprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tor_vsnprintf </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replacement for vsnprintf; behavior differs as tor_snprintf differs from snprintf. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="compat_8c_a1df7873b16ae8936d25dfedb706f4ea6_icgraph.png" border="0" usemap="#compat_8c_a1df7873b16ae8936d25dfedb706f4ea6_icgraph" alt=""/></div>
<map name="compat_8c_a1df7873b16ae8936d25dfedb706f4ea6_icgraph" id="compat_8c_a1df7873b16ae8936d25dfedb706f4ea6_icgraph">
<area shape="rect" id="node2" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="148,567,235,593"/>
<area shape="rect" id="node3" href="address_8h.html#a1b6ba2d6f5a3bc607d7d761c849ec110" title="fmt_addrport" alt="" coords="339,64,433,91"/>
<area shape="rect" id="node6" href="address_8h.html#a78e7adae7e6b4e12cff810f6bd3a4e71" title="tor_inet_ntoa" alt="" coords="337,173,435,200"/>
<area shape="rect" id="node8" href="compat_8c.html#aaf2add8a435d6a782f057562de228637" title="tor_inet_ntop" alt="" coords="589,224,686,251"/>
<area shape="rect" id="node16" href="compress__zstd_8h.html#a18b4f70b64f51203f45826f98e23a89e" title="tor_zstd_method_supported" alt="" coords="295,275,477,301"/>
<area shape="rect" id="node17" href="container_8c.html#a9060e1f019093c294f1a076b6f0226da" title="smartlist_contains\l_int_as_string" alt="" coords="322,326,450,367"/>
<area shape="rect" id="node20" href="crypto__format_8c.html#a58e217ce83721c40e22a70f6f9ca1544" title="crypto_write_tagged\l_contents_to_file" alt="" coords="317,391,455,433"/>
<area shape="rect" id="node24" href="util_8h.html#a198d1f011891d6d369bab39eaeecd275" title="format_iso_time_nospace_usec" alt="" coords="283,457,489,484"/>
<area shape="rect" id="node25" href="util_8h.html#a9a88be72c2d4775622cedbda5d76f833" title="format_time_interval" alt="" coords="316,508,456,535"/>
<area shape="rect" id="node27" href="circuitlist_8h.html#a812936e0ba7830eaaf06aee73fd7ac88" title="circuit_purpose_to\l_controller_string" alt="" coords="322,559,450,601"/>
<area shape="rect" id="node28" href="circuitlist_8h.html#a6c79060856f98208dbdbf81c4f5ed336" title="circuit_purpose_to\l_string" alt="" coords="322,625,450,666"/>
<area shape="rect" id="node30" href="control_8h.html#a3215ddc475a10ee916377da0a97e62f2" title="control_event_guard" alt="" coords="317,691,455,717"/>
<area shape="rect" id="node31" href="entrynodes_8h.html#a446ff1a56de96285dac2fe015e972bd0" title="entry_guard_describe" alt="" coords="313,741,459,768"/>
<area shape="rect" id="node32" href="main_8c.html#a5c761b9de5289922e4f75826f766355f" title="tor_init" alt="" coords="355,792,417,819"/>
<area shape="rect" id="node34" href="router_8c.html#af8911501c12d293f7fe03a101f3563ba" title="get_platform_str" alt="" coords="328,843,444,869"/>
<area shape="rect" id="node35" href="routerkeys_8c.html#aae1c5a5d448a1f0460373478e6304b36" title="ed_key_init_from_file" alt="" coords="313,893,459,920"/>
<area shape="rect" id="node36" href="routerlist_8h.html#a7b194ad6a42e8fb2ef4f3aa1cf135830" title="router_load_single\l_router" alt="" coords="323,945,449,986"/>
<area shape="rect" id="node37" href="routerparse_8c.html#a65294e0f578a21d0e10431bf4ef1d038" title="MOCK_IMPL" alt="" coords="336,1011,436,1037"/>
<area shape="rect" id="node4" href="dirvote_8c.html#a059168318a87de5f77438cbcefdb73ed" title="dirvote_create_microdescriptor" alt="" coords="537,5,737,32"/>
<area shape="rect" id="node5" href="transports_8h.html#a7b99ca768a76f864050b04271a629044" title="pt_get_extra_info_descriptor\l_string" alt="" coords="544,57,731,98"/>
<area shape="rect" id="node7" href="address_8h.html#a65887d7caae24e0c647d43e978eeeb49" title="fmt_addr32" alt="" coords="594,123,681,149"/>
<area shape="rect" id="node10" href="router_8c.html#a54ab47db660fac7decf06081ba29f8dd" title="format_node_description" alt="" coords="555,173,719,200"/>
<area shape="rect" id="node9" href="address_8h.html#a4ec1578f8fab114634b8b58d68d02be8" title="tor_dup_ip" alt="" coords="823,249,906,276"/>
<area shape="rect" id="node11" href="router_8h.html#a4d59ce576eb8716561e1bc6be6f88de1" title="router_describe" alt="" coords="809,148,920,175"/>
<area shape="rect" id="node13" href="router_8h.html#a9123f7ab38acbdf103fcb38433311d42" title="node_describe" alt="" coords="811,199,918,225"/>
<area shape="rect" id="node14" href="router_8h.html#ab375311f5454761bc6691091cdf50847" title="routerstatus_describe" alt="" coords="791,47,938,73"/>
<area shape="rect" id="node15" href="router_8h.html#a76d2b00d031ef80969722b77807f2f0c" title="extend_info_describe" alt="" coords="792,97,937,124"/>
<area shape="rect" id="node12" href="dirserv_8h.html#adaceacf408562b95dd1169799995bd6c" title="authdir_wants_to_reject\l_router" alt="" coords="992,141,1152,182"/>
<area shape="rect" id="node18" href="circuituse_8h.html#aa9c9e6111de126ec1c3ca4dd17f4091c" title="circuit_stream_is_being\l_handled" alt="" coords="558,275,717,317"/>
<area shape="rect" id="node19" href="circuituse_8h.html#ac0941a9dc5da7825f107d1d4bf028063" title="circuit_remove_handled\l_ports" alt="" coords="785,301,944,342"/>
<area shape="rect" id="node21" href="crypto__curve25519_8c.html#a700be6ddcf2a5ddbbbf56c91f3cd7cc7" title="curve25519_keypair\l_write_to_file" alt="" coords="568,341,707,382"/>
<area shape="rect" id="node22" href="crypto__ed25519_8c.html#a91a3f7e13f15a365d83bcb418daaaf7d" title="ed25519_seckey_write\l_to_file" alt="" coords="560,406,715,447"/>
<area shape="rect" id="node23" href="crypto__ed25519_8c.html#a7619807bfd3a082c5bba11d43f9f63ee" title="ed25519_pubkey_write\l_to_file" alt="" coords="560,471,715,513"/>
<area shape="rect" id="node26" href="connection_8c.html#ab88cfc0f345a7adb709c58312e6ae462" title="MOCK_IMPL" alt="" coords="587,537,687,564"/>
<area shape="rect" id="node29" href="circuituse_8h.html#a407966b13bb02eb365910ea9f07e08be" title="circuit_change_purpose" alt="" coords="558,632,717,659"/>
<area shape="rect" id="node33" href="tor__api_8h.html#a03a6419d2872fb481d95c23a7283cebf" title="tor_run_main" alt="" coords="589,792,686,819"/>
</map>
</div>

</div>
</div>
<a id="a7008066dbddf2ee0a6fead8e3636f6fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7008066dbddf2ee0a6fead8e3636f6fa">&#9670;&nbsp;</a></span>touch_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int touch_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change <b>fname</b>'s modification time to now. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5ae2e01bf2b3e7ee44d9a696b1cb7f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae2e01bf2b3e7ee44d9a696b1cb7f24">&#9670;&nbsp;</a></span>TOR_ISALNUM_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t TOR_ISALNUM_TABLE[8]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">  { 0, 0x3ff0000, 0x7fffffe, 0x7fffffe, 0, 0, 0, 0 }</div></div><!-- fragment -->
</div>
</div>
<a id="ac2ac6b4d715f4abb600be2aa7539f41f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ac6b4d715f4abb600be2aa7539f41f">&#9670;&nbsp;</a></span>TOR_ISALPHA_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t TOR_ISALPHA_TABLE[8]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">  { 0, 0, 0x7fffffe, 0x7fffffe, 0, 0, 0, 0 }</div></div><!-- fragment --><p>Tables to implement ctypes-replacement TOR_IS*() functions. Each table has 256 bits to look up whether a character is in some set or not. This fails on non-ASCII platforms, but it is hard to find a platform whose character set is not a superset of ASCII nowadays. </p>

</div>
</div>
<a id="a8a508b45764a2388ac5b4ac37f7045bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a508b45764a2388ac5b4ac37f7045bd">&#9670;&nbsp;</a></span>TOR_ISPRINT_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t TOR_ISPRINT_TABLE[8]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">  { 0, 0xffffffff, 0xffffffff, 0x7fffffff, 0, 0, 0, 0x0 }</div></div><!-- fragment -->
</div>
</div>
<a id="a51480cec43fd334bb94be169f71151b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51480cec43fd334bb94be169f71151b3">&#9670;&nbsp;</a></span>TOR_ISXDIGIT_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t TOR_ISXDIGIT_TABLE[8]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">  { 0, 0x3ff0000, 0x7e, 0x7e, 0, 0, 0, 0 }</div></div><!-- fragment -->
</div>
</div>
<a id="a72682a65b9904461e9705ebac215ee4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72682a65b9904461e9705ebac215ee4a">&#9670;&nbsp;</a></span>TOR_TOLOWER_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t TOR_TOLOWER_TABLE[256]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,</div><div class="line">  16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,</div><div class="line">  32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,</div><div class="line">  48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,</div><div class="line">  64,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,</div><div class="line">  112,113,114,115,116,117,118,119,120,121,122,91,92,93,94,95,</div><div class="line">  96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,</div><div class="line">  112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,</div><div class="line">  128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,</div><div class="line">  144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,</div><div class="line">  160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,</div><div class="line">  176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,</div><div class="line">  192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,</div><div class="line">  208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,</div><div class="line">  224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,</div><div class="line">  240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,</div><div class="line">}</div></div><!-- fragment -->
</div>
</div>
<a id="a613b655cc331638898797dcf008a9af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a613b655cc331638898797dcf008a9af0">&#9670;&nbsp;</a></span>TOR_TOUPPER_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t TOR_TOUPPER_TABLE[256]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,</div><div class="line">  16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,</div><div class="line">  32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,</div><div class="line">  48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,</div><div class="line">  64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,</div><div class="line">  80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,</div><div class="line">  96,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,</div><div class="line">  80,81,82,83,84,85,86,87,88,89,90,123,124,125,126,127,</div><div class="line">  128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,</div><div class="line">  144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,</div><div class="line">  160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,</div><div class="line">  176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,</div><div class="line">  192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,</div><div class="line">  208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,</div><div class="line">  224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,</div><div class="line">  240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,</div><div class="line">}</div></div><!-- fragment --><p>Upper-casing and lowercasing tables to map characters to upper/lowercase equivalents. Used by tor_toupper() and tor_tolower(). </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
