<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/dirvote.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dirvote.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for <a class="el" href="dirvote_8c.html" title="Functions to compute directory consensus, and schedule voting. ">dirvote.c</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;testsupport.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dirvote.h:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2dirvote_8h" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2dirvote_8h" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2dirvote_8h">
<area shape="rect" id="node2" href="testsupport_8h_source.html" title="testsupport.h" alt="" coords="30,109,129,136"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h__dep__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2dirvote_8hdep" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2dirvote_8hdep" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2dirvote_8hdep">
<area shape="rect" id="node2" href="config_8c.html" title="Code to parse and interpret configuration files. " alt="" coords="5,117,153,173"/>
<area shape="rect" id="node3" href="dircollate_8c.html" title="Collation code for figuring out which identities to vote for in the directory voting process..." alt="" coords="177,117,325,173"/>
<area shape="rect" id="node4" href="directory_8c.html" title="Code to send and fetch directories and router descriptors via HTTP. Directories use dirserv..." alt="" coords="349,117,497,173"/>
<area shape="rect" id="node5" href="dirserv_8c.html" title="Directory server core implementation. Manages directory contents and generates directories. " alt="" coords="521,117,669,173"/>
<area shape="rect" id="node6" href="dirvote_8c.html" title="Functions to compute directory consensus, and schedule voting. " alt="" coords="693,117,841,173"/>
<area shape="rect" id="node7" href="main_8c.html" title="Toplevel module. Handles signals, multiplexes between connections, implements main loop..." alt="" coords="865,117,1013,173"/>
<area shape="rect" id="node8" href="networkstatus_8c.html" title="Functions and structures for handling network status documents as a client or cache. " alt="" coords="1037,117,1193,173"/>
<area shape="rect" id="node9" href="routerlist_8c.html" title="Code to maintain and access the global list of routerinfos for known servers. " alt="" coords="1217,117,1365,173"/>
<area shape="rect" id="node10" href="routerparse_8c.html" title="Code to parse and validate router descriptors, consenus directories, and similar objects. " alt="" coords="1389,117,1537,173"/>
<area shape="rect" id="node11" href="shared__random_8c.html" title="Functions and data structure needed to accomplish the shared random protocol as defined in proposal #..." alt="" coords="1562,117,1725,173"/>
<area shape="rect" id="node12" href="shared__random__state_8c.html" title="Functions and data structures for the state of the random protocol as defined in proposal #250..." alt="" coords="1749,109,1901,180"/>
</map>
</div>
</div>
<p><a href="dirvote_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvoting__schedule__t.html">voting_schedule_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adeaa8d01888643571bd75e1e4d7e63f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#adeaa8d01888643571bd75e1e4d7e63f6">MIN_VOTE_SECONDS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:adeaa8d01888643571bd75e1e4d7e63f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b553651dba7e501f5c7f7f6ee28313"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ad6b553651dba7e501f5c7f7f6ee28313">MIN_VOTE_SECONDS_TESTING</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ad6b553651dba7e501f5c7f7f6ee28313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1ce3c85194a9c6dd6f29391542d2d91"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ab1ce3c85194a9c6dd6f29391542d2d91">MIN_DIST_SECONDS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ab1ce3c85194a9c6dd6f29391542d2d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09dc06298f9a5bb2acf55e7090b26ad6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a09dc06298f9a5bb2acf55e7090b26ad6">MIN_DIST_SECONDS_TESTING</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a09dc06298f9a5bb2acf55e7090b26ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f3fca94d7934e1cd4d9eb4115e2dd0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a2f3fca94d7934e1cd4d9eb4115e2dd0e">MIN_VOTE_INTERVAL</a>&#160;&#160;&#160;300</td></tr>
<tr class="separator:a2f3fca94d7934e1cd4d9eb4115e2dd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265d2fdcb77b18a288cc9e0f372bebfd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a265d2fdcb77b18a288cc9e0f372bebfd">MIN_VOTE_INTERVAL_TESTING</a>&#160;&#160;&#160;(((<a class="el" href="dirvote_8h.html#ad6b553651dba7e501f5c7f7f6ee28313">MIN_VOTE_SECONDS_TESTING</a>)+(<a class="el" href="dirvote_8h.html#a09dc06298f9a5bb2acf55e7090b26ad6">MIN_DIST_SECONDS_TESTING</a>)+1)*2)</td></tr>
<tr class="separator:a265d2fdcb77b18a288cc9e0f372bebfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c94d0322585fdcece91e1bb68f4ac65"><td class="memItemLeft" align="right" valign="top"><a id="a1c94d0322585fdcece91e1bb68f4ac65"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_VOTE_INTERVAL_TESTING_INITIAL</b>&#160;&#160;&#160;((<a class="el" href="dirvote_8h.html#ad6b553651dba7e501f5c7f7f6ee28313">MIN_VOTE_SECONDS_TESTING</a>)+(<a class="el" href="dirvote_8h.html#a09dc06298f9a5bb2acf55e7090b26ad6">MIN_DIST_SECONDS_TESTING</a>)+1)</td></tr>
<tr class="separator:a1c94d0322585fdcece91e1bb68f4ac65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71d548b723626a26c06fa91db3e4ce8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a71d548b723626a26c06fa91db3e4ce8c">MIN_SUPPORTED_CONSENSUS_METHOD</a>&#160;&#160;&#160;13</td></tr>
<tr class="separator:a71d548b723626a26c06fa91db3e4ce8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9289ed14738a1817d6b8b3ba083f29c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#af9289ed14738a1817d6b8b3ba083f29c">MAX_SUPPORTED_CONSENSUS_METHOD</a>&#160;&#160;&#160;25</td></tr>
<tr class="separator:af9289ed14738a1817d6b8b3ba083f29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc100cb393f80643ce0215cc41c5ea6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#afbc100cb393f80643ce0215cc41c5ea6">MIN_METHOD_FOR_MANDATORY_MICRODESC</a>&#160;&#160;&#160;13</td></tr>
<tr class="separator:afbc100cb393f80643ce0215cc41c5ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2566d9a9254466aaa2be0f11a76021"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a5a2566d9a9254466aaa2be0f11a76021">MIN_METHOD_FOR_A_LINES</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:a5a2566d9a9254466aaa2be0f11a76021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfe25f33143e9c42834f92e6fce3691"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a7cfe25f33143e9c42834f92e6fce3691">MIN_METHOD_FOR_P6_LINES</a>&#160;&#160;&#160;15</td></tr>
<tr class="separator:a7cfe25f33143e9c42834f92e6fce3691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7d307981b0ed1b0b8664e573f694812"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ad7d307981b0ed1b0b8664e573f694812">MIN_METHOD_FOR_NTOR_KEY</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ad7d307981b0ed1b0b8664e573f694812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0898bea8a0e3b2466d41c4ca42472ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#af0898bea8a0e3b2466d41c4ca42472ff">MIN_METHOD_TO_CLIP_UNMEASURED_BW</a>&#160;&#160;&#160;17</td></tr>
<tr class="separator:af0898bea8a0e3b2466d41c4ca42472ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2cd11a193190774e8b7b386fef339a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a9b2cd11a193190774e8b7b386fef339a">MIN_METHOD_FOR_ID_HASH_IN_MD</a>&#160;&#160;&#160;18</td></tr>
<tr class="separator:a9b2cd11a193190774e8b7b386fef339a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ddc3c0a5bb123782063f3be3ccda92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#aa4ddc3c0a5bb123782063f3be3ccda92">MIN_METHOD_FOR_PACKAGE_LINES</a>&#160;&#160;&#160;19</td></tr>
<tr class="separator:aa4ddc3c0a5bb123782063f3be3ccda92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad011898d83f41696a4daf383cbc0f3e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ad011898d83f41696a4daf383cbc0f3e6">MIN_METHOD_FOR_GUARDFRACTION</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:ad011898d83f41696a4daf383cbc0f3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc96d3eeeb5f0015daed02e1935dbfd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a5fc96d3eeeb5f0015daed02e1935dbfd">MIN_METHOD_FOR_ED25519_ID_IN_MD</a>&#160;&#160;&#160;21</td></tr>
<tr class="separator:a5fc96d3eeeb5f0015daed02e1935dbfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56fbb14839e9a4e0d297e251b8fe6ec3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a56fbb14839e9a4e0d297e251b8fe6ec3">MIN_METHOD_FOR_ED25519_ID_VOTING</a>&#160;&#160;&#160;22</td></tr>
<tr class="separator:a56fbb14839e9a4e0d297e251b8fe6ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341c41cc04a7ed3f789aaa76ecd17e63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a341c41cc04a7ed3f789aaa76ecd17e63">MIN_METHOD_FOR_SHARED_RANDOM</a>&#160;&#160;&#160;23</td></tr>
<tr class="separator:a341c41cc04a7ed3f789aaa76ecd17e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba1d426eee26913067756e3d80a4f38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a4ba1d426eee26913067756e3d80a4f38">MIN_METHOD_FOR_EXCLUDING_INVALID_NODES</a>&#160;&#160;&#160;24</td></tr>
<tr class="separator:a4ba1d426eee26913067756e3d80a4f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95808985ce7ff8a6807c7f2e75c4a388"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a95808985ce7ff8a6807c7f2e75c4a388">MIN_METHOD_FOR_RECOMMENDED_PROTOCOLS</a>&#160;&#160;&#160;25</td></tr>
<tr class="separator:a95808985ce7ff8a6807c7f2e75c4a388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addd5f0afe14f3ae9a72bd6de14892317"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#addd5f0afe14f3ae9a72bd6de14892317">MIN_METHOD_FOR_RS_PROTOCOLS</a>&#160;&#160;&#160;25</td></tr>
<tr class="separator:addd5f0afe14f3ae9a72bd6de14892317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6442676045808489c889d712304d00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#aab6442676045808489c889d712304d00">DEFAULT_MAX_UNMEASURED_BW_KB</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:aab6442676045808489c889d712304d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8746489f69e2e2769730a6b95e0afaf4"><td class="memItemLeft" align="right" valign="top"><a id="a8746489f69e2e2769730a6b95e0afaf4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DGV_BY_ID</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a8746489f69e2e2769730a6b95e0afaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba90ba20cc906e5a03dc7ae3cadef7f"><td class="memItemLeft" align="right" valign="top"><a id="a3ba90ba20cc906e5a03dc7ae3cadef7f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DGV_INCLUDE_PENDING</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a3ba90ba20cc906e5a03dc7ae3cadef7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b878762a131e9777e3cfe959b8b774"><td class="memItemLeft" align="right" valign="top"><a id="a32b878762a131e9777e3cfe959b8b774"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DGV_INCLUDE_PREVIOUS</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a32b878762a131e9777e3cfe959b8b774"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a585a4928108f1321756e08eb86712d51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a585a4928108f1321756e08eb86712d51">dirvote_free_all</a> (void)</td></tr>
<tr class="separator:a585a4928108f1321756e08eb86712d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffac0db845bcd69944e5249a5f15344"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#aaffac0db845bcd69944e5249a5f15344">networkstatus_compute_consensus</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *votes, int total_authorities, <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *identity_key, <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *signing_key, const char *legacy_identity_key_digest, <a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *legacy_signing_key, <a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flavor)</td></tr>
<tr class="separator:aaffac0db845bcd69944e5249a5f15344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b21332ec8c217620fefe5f2bd405c93"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a5b21332ec8c217620fefe5f2bd405c93">networkstatus_add_detached_signatures</a> (<a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *target, <a class="el" href="structns__detached__signatures__t.html">ns_detached_signatures_t</a> *sigs, const char *source, int severity, const char **msg_out)</td></tr>
<tr class="separator:a5b21332ec8c217620fefe5f2bd405c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b12c0f09a9033deb2cb78cc1dc321c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a88b12c0f09a9033deb2cb78cc1dc321c">networkstatus_get_detached_signatures</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *consensuses)</td></tr>
<tr class="separator:a88b12c0f09a9033deb2cb78cc1dc321c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a36c2930edf9d2ca915c30057a64da8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a4a36c2930edf9d2ca915c30057a64da8">ns_detached_signatures_free</a> (<a class="el" href="structns__detached__signatures__t.html">ns_detached_signatures_t</a> *s)</td></tr>
<tr class="separator:a4a36c2930edf9d2ca915c30057a64da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38bc81b8644900e12b2b9b9569d105b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a38bc81b8644900e12b2b9b9569d105b5">authority_cert_dup</a> (<a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *cert)</td></tr>
<tr class="separator:a38bc81b8644900e12b2b9b9569d105b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f959ff7a4b18d042860c27616465a2b"><td class="memItemLeft" align="right" valign="top"><a id="a8f959ff7a4b18d042860c27616465a2b"></a>
<a class="el" href="structvoting__schedule__t.html">voting_schedule_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_voting_schedule</b> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, time_t now, int severity)</td></tr>
<tr class="separator:a8f959ff7a4b18d042860c27616465a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adffd241c7a248002845c761c4147ab58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#adffd241c7a248002845c761c4147ab58">voting_schedule_free</a> (<a class="el" href="structvoting__schedule__t.html">voting_schedule_t</a> *voting_schedule_to_free)</td></tr>
<tr class="separator:adffd241c7a248002845c761c4147ab58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60188357707e416d29de6342bc32a883"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a60188357707e416d29de6342bc32a883">dirvote_get_preferred_voting_intervals</a> (<a class="el" href="structvote__timing__t.html">vote_timing_t</a> *timing_out)</td></tr>
<tr class="separator:a60188357707e416d29de6342bc32a883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12be9f1748f89ce9e33a895218912fb"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ad12be9f1748f89ce9e33a895218912fb">dirvote_get_start_of_next_interval</a> (time_t now, int interval, int offset)</td></tr>
<tr class="separator:ad12be9f1748f89ce9e33a895218912fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7ea3ac9bbece8dbdd6c3c167dc0ae9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#aab7ea3ac9bbece8dbdd6c3c167dc0ae9">dirvote_recalculate_timing</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, time_t now)</td></tr>
<tr class="separator:aab7ea3ac9bbece8dbdd6c3c167dc0ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333f56fb4797757ca9e04bee1550cabe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a333f56fb4797757ca9e04bee1550cabe">dirvote_act</a> (const <a class="el" href="structor__options__t.html">or_options_t</a> *options, time_t now)</td></tr>
<tr class="separator:a333f56fb4797757ca9e04bee1550cabe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7335b766c539b24f72e1953ed9ee59c1"><td class="memItemLeft" align="right" valign="top"><a id="a7335b766c539b24f72e1953ed9ee59c1"></a>
time_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_next_valid_after_time</b> (time_t now)</td></tr>
<tr class="separator:a7335b766c539b24f72e1953ed9ee59c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41039a7c25c1f8a8be7d042dd256a4ad"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpending__vote__t.html">pending_vote_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a41039a7c25c1f8a8be7d042dd256a4ad">dirvote_add_vote</a> (const char *vote_body, const char **msg_out, int *status_out)</td></tr>
<tr class="separator:a41039a7c25c1f8a8be7d042dd256a4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad03bc934480606343e40ebc07c6fd22b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ad03bc934480606343e40ebc07c6fd22b">dirvote_add_signatures</a> (const char *detached_signatures_body, const char *source, const char **msg_out)</td></tr>
<tr class="separator:ad03bc934480606343e40ebc07c6fd22b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48b3b71c6381eb36ad6b32ec339ebdb"><td class="memItemLeft" align="right" valign="top"><a id="ab48b3b71c6381eb36ad6b32ec339ebdb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MOCK_DECL</b> (const char *, dirvote_get_pending_consensus,(<a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a> flav))</td></tr>
<tr class="separator:ab48b3b71c6381eb36ad6b32ec339ebdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f3e307ca869d8cba0e07a489837a91c"><td class="memItemLeft" align="right" valign="top"><a id="a2f3e307ca869d8cba0e07a489837a91c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MOCK_DECL</b> (const char *, dirvote_get_pending_detached_signatures,(void))</td></tr>
<tr class="separator:a2f3e307ca869d8cba0e07a489837a91c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6905fdc89a2bce64a9f79c526c140f94"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structcached__dir__t.html">cached_dir_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a6905fdc89a2bce64a9f79c526c140f94">dirvote_get_vote</a> (const char *fp, int flags)</td></tr>
<tr class="separator:a6905fdc89a2bce64a9f79c526c140f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441a08d3eefcfb08ff0c8ee680183490"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a441a08d3eefcfb08ff0c8ee680183490">set_routerstatus_from_routerinfo</a> (<a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *rs, <a class="el" href="structnode__t.html">node_t</a> *node, <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri, time_t now, int listbadexits)</td></tr>
<tr class="separator:a441a08d3eefcfb08ff0c8ee680183490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae288382ee634aeb5099f263fa9af8c25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#ae288382ee634aeb5099f263fa9af8c25">dirserv_generate_networkstatus_vote_obj</a> (<a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *private_key, <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *cert)</td></tr>
<tr class="separator:ae288382ee634aeb5099f263fa9af8c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97feb95be6e8e94295fa6775355318ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmicrodesc__t.html">microdesc_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a97feb95be6e8e94295fa6775355318ee">dirvote_create_microdescriptor</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri, int consensus_method)</td></tr>
<tr class="separator:a97feb95be6e8e94295fa6775355318ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914458f7367ecc3c6827787d674fd52a"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a914458f7367ecc3c6827787d674fd52a">dirvote_format_microdesc_vote_line</a> (char *out, size_t out_len, const <a class="el" href="structmicrodesc__t.html">microdesc_t</a> *md, int consensus_method_low, int consensus_method_high)</td></tr>
<tr class="separator:a914458f7367ecc3c6827787d674fd52a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c8c11aee1a421ac4cd72f1d020ac6d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvote__microdesc__hash__t.html">vote_microdesc_hash_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a7c8c11aee1a421ac4cd72f1d020ac6d5">dirvote_format_all_microdesc_vote_lines</a> (const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *ri, time_t now, <a class="el" href="structsmartlist__t.html">smartlist_t</a> *microdescriptors_out)</td></tr>
<tr class="separator:a7c8c11aee1a421ac4cd72f1d020ac6d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72cd954260c2fb4bfc45884588730a50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a72cd954260c2fb4bfc45884588730a50">vote_routerstatus_find_microdesc_hash</a> (char *digest256_out, const <a class="el" href="structvote__routerstatus__t.html">vote_routerstatus_t</a> *vrs, int method, digest_algorithm_t alg)</td></tr>
<tr class="separator:a72cd954260c2fb4bfc45884588730a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60af55f760759eb6ad39a5c11ba3baaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdocument__signature__t.html">document_signature_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirvote_8h.html#a60af55f760759eb6ad39a5c11ba3baaf">voter_get_sig_by_algorithm</a> (const <a class="el" href="structnetworkstatus__voter__info__t.html">networkstatus_voter_info_t</a> *voter, digest_algorithm_t alg)</td></tr>
<tr class="separator:a60af55f760759eb6ad39a5c11ba3baaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for <a class="el" href="dirvote_8c.html" title="Functions to compute directory consensus, and schedule voting. ">dirvote.c</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aab6442676045808489c889d712304d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6442676045808489c889d712304d00">&#9670;&nbsp;</a></span>DEFAULT_MAX_UNMEASURED_BW_KB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MAX_UNMEASURED_BW_KB&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default bandwidth to clip unmeasured bandwidths to using method &gt;= MIN_METHOD_TO_CLIP_UNMEASURED_BW. (This is not a consensus method; do not get confused with the above macros.) </p>

</div>
</div>
<a id="af9289ed14738a1817d6b8b3ba083f29c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9289ed14738a1817d6b8b3ba083f29c">&#9670;&nbsp;</a></span>MAX_SUPPORTED_CONSENSUS_METHOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SUPPORTED_CONSENSUS_METHOD&#160;&#160;&#160;25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The highest consensus method that we currently support. </p>

</div>
</div>
<a id="ab1ce3c85194a9c6dd6f29391542d2d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1ce3c85194a9c6dd6f29391542d2d91">&#9670;&nbsp;</a></span>MIN_DIST_SECONDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_DIST_SECONDS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest allowable value for DistSeconds. </p>

</div>
</div>
<a id="a09dc06298f9a5bb2acf55e7090b26ad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09dc06298f9a5bb2acf55e7090b26ad6">&#9670;&nbsp;</a></span>MIN_DIST_SECONDS_TESTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_DIST_SECONDS_TESTING&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest allowable value for DistSeconds when TestingTorNetwork is 1 </p>

</div>
</div>
<a id="a5a2566d9a9254466aaa2be0f11a76021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a2566d9a9254466aaa2be0f11a76021">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_A_LINES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_A_LINES&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method that contains "a" lines. </p>

</div>
</div>
<a id="a5fc96d3eeeb5f0015daed02e1935dbfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc96d3eeeb5f0015daed02e1935dbfd">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_ED25519_ID_IN_MD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_ED25519_ID_IN_MD&#160;&#160;&#160;21</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities may include an "id" line for ed25519 identities in microdescriptors. (Broken; see consensus_method_is_supported() for more info.) </p>

</div>
</div>
<a id="a56fbb14839e9a4e0d297e251b8fe6ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56fbb14839e9a4e0d297e251b8fe6ec3">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_ED25519_ID_VOTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_ED25519_ID_VOTING&#160;&#160;&#160;22</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities vote on ed25519 ids and ensure ed25519 id consistency. </p>

</div>
</div>
<a id="a4ba1d426eee26913067756e3d80a4f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ba1d426eee26913067756e3d80a4f38">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_EXCLUDING_INVALID_NODES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_EXCLUDING_INVALID_NODES&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities drop all nodes that don't get the Valid flag. </p>

</div>
</div>
<a id="ad011898d83f41696a4daf383cbc0f3e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad011898d83f41696a4daf383cbc0f3e6">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_GUARDFRACTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_GUARDFRACTION&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities may include GuardFraction information in microdescriptors. </p>

</div>
</div>
<a id="a9b2cd11a193190774e8b7b386fef339a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b2cd11a193190774e8b7b386fef339a">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_ID_HASH_IN_MD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_ID_HASH_IN_MD&#160;&#160;&#160;18</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities may include an "id" line in microdescriptors. </p>

</div>
</div>
<a id="afbc100cb393f80643ce0215cc41c5ea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc100cb393f80643ce0215cc41c5ea6">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_MANDATORY_MICRODESC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_MANDATORY_MICRODESC&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where microdesc consensuses omit any entry with no microdesc. </p>

</div>
</div>
<a id="ad7d307981b0ed1b0b8664e573f694812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7d307981b0ed1b0b8664e573f694812">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_NTOR_KEY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_NTOR_KEY&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where microdescs may include an onion-key-ntor line </p>

</div>
</div>
<a id="a7cfe25f33143e9c42834f92e6fce3691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cfe25f33143e9c42834f92e6fce3691">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_P6_LINES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_P6_LINES&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where microdescs may include a "p6" line. </p>

</div>
</div>
<a id="aa4ddc3c0a5bb123782063f3be3ccda92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ddc3c0a5bb123782063f3be3ccda92">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_PACKAGE_LINES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_PACKAGE_LINES&#160;&#160;&#160;19</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where we include "package" lines </p>

</div>
</div>
<a id="a95808985ce7ff8a6807c7f2e75c4a388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95808985ce7ff8a6807c7f2e75c4a388">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_RECOMMENDED_PROTOCOLS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_RECOMMENDED_PROTOCOLS&#160;&#160;&#160;25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities vote on required/recommended protocols. </p>

</div>
</div>
<a id="addd5f0afe14f3ae9a72bd6de14892317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addd5f0afe14f3ae9a72bd6de14892317">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_RS_PROTOCOLS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_RS_PROTOCOLS&#160;&#160;&#160;25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities add protocols to routerstatus entries. </p>

</div>
</div>
<a id="a341c41cc04a7ed3f789aaa76ecd17e63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341c41cc04a7ed3f789aaa76ecd17e63">&#9670;&nbsp;</a></span>MIN_METHOD_FOR_SHARED_RANDOM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_FOR_SHARED_RANDOM&#160;&#160;&#160;23</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method where authorities may include a shared random value(s). </p>

</div>
</div>
<a id="af0898bea8a0e3b2466d41c4ca42472ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0898bea8a0e3b2466d41c4ca42472ff">&#9670;&nbsp;</a></span>MIN_METHOD_TO_CLIP_UNMEASURED_BW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_METHOD_TO_CLIP_UNMEASURED_BW&#160;&#160;&#160;17</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest consensus method that ensures that authorities output an Unmeasured=1 flag for unmeasured bandwidths </p>

</div>
</div>
<a id="a71d548b723626a26c06fa91db3e4ce8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d548b723626a26c06fa91db3e4ce8c">&#9670;&nbsp;</a></span>MIN_SUPPORTED_CONSENSUS_METHOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_SUPPORTED_CONSENSUS_METHOD&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The lowest consensus method that we currently support. </p>

</div>
</div>
<a id="a2f3fca94d7934e1cd4d9eb4115e2dd0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f3fca94d7934e1cd4d9eb4115e2dd0e">&#9670;&nbsp;</a></span>MIN_VOTE_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_VOTE_INTERVAL&#160;&#160;&#160;300</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest allowable voting interval. </p>

</div>
</div>
<a id="a265d2fdcb77b18a288cc9e0f372bebfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265d2fdcb77b18a288cc9e0f372bebfd">&#9670;&nbsp;</a></span>MIN_VOTE_INTERVAL_TESTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_VOTE_INTERVAL_TESTING&#160;&#160;&#160;(((<a class="el" href="dirvote_8h.html#ad6b553651dba7e501f5c7f7f6ee28313">MIN_VOTE_SECONDS_TESTING</a>)+(<a class="el" href="dirvote_8h.html#a09dc06298f9a5bb2acf55e7090b26ad6">MIN_DIST_SECONDS_TESTING</a>)+1)*2)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest allowable voting interval when TestingTorNetwork is 1: Voting Interval can be: 10, 12, 15, 18, 20, 24, 25, 30, 36, 40, 45, 50, 60, ... Testing Initial Voting Interval can be: 5, 6, 8, 9, or any of the possible values for Voting Interval, as they both need to evenly divide 30 minutes. If clock desynchronisation is an issue, use an interval of at least: 18 * drift in seconds, to allow for a clock slop factor </p>

</div>
</div>
<a id="adeaa8d01888643571bd75e1e4d7e63f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeaa8d01888643571bd75e1e4d7e63f6">&#9670;&nbsp;</a></span>MIN_VOTE_SECONDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_VOTE_SECONDS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest allowable value for VoteSeconds. </p>

</div>
</div>
<a id="ad6b553651dba7e501f5c7f7f6ee28313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b553651dba7e501f5c7f7f6ee28313">&#9670;&nbsp;</a></span>MIN_VOTE_SECONDS_TESTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_VOTE_SECONDS_TESTING&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lowest allowable value for VoteSeconds when TestingTorNetwork is 1 </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a38bc81b8644900e12b2b9b9569d105b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38bc81b8644900e12b2b9b9569d105b5">&#9670;&nbsp;</a></span>authority_cert_dup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a>* authority_cert_dup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td>
          <td class="paramname"><em>cert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate and return a new <a class="el" href="structauthority__cert__t.html">authority_cert_t</a> with the same contents as <b>cert</b>. </p>

</div>
</div>
<a id="ae288382ee634aeb5099f263fa9af8c25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae288382ee634aeb5099f263fa9af8c25">&#9670;&nbsp;</a></span>dirserv_generate_networkstatus_vote_obj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a>* dirserv_generate_networkstatus_vote_obj </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>private_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structauthority__cert__t.html">authority_cert_t</a> *&#160;</td>
          <td class="paramname"><em>cert</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a new networkstatus_t* containing our current opinion. (For v3 authorities) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_ae288382ee634aeb5099f263fa9af8c25_cgraph.png" border="0" usemap="#dirvote_8h_ae288382ee634aeb5099f263fa9af8c25_cgraph" alt=""/></div>
<map name="dirvote_8h_ae288382ee634aeb5099f263fa9af8c25_cgraph" id="dirvote_8h_ae288382ee634aeb5099f263fa9af8c25_cgraph">
<area shape="rect" id="node2" href="routerlist_8c.html#a9181bbed0ee6ff8088a7c53fc8c446f1" title="router_get_routerlist" alt="" coords="260,13,397,39"/>
</map>
</div>

</div>
</div>
<a id="a333f56fb4797757ca9e04bee1550cabe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a333f56fb4797757ca9e04bee1550cabe">&#9670;&nbsp;</a></span>dirvote_act()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dirvote_act </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Entry point: Take whatever voting actions are pending as of <b>now</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_a333f56fb4797757ca9e04bee1550cabe_cgraph.png" border="0" usemap="#dirvote_8h_a333f56fb4797757ca9e04bee1550cabe_cgraph" alt=""/></div>
<map name="dirvote_8h_a333f56fb4797757ca9e04bee1550cabe_cgraph" id="dirvote_8h_a333f56fb4797757ca9e04bee1550cabe_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a71fbf956eedbc38a293306c9bf1962e7" title="authdir_mode_v3" alt="" coords="140,5,261,32"/>
<area shape="rect" id="node3" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="309,5,409,32"/>
</map>
</div>

</div>
</div>
<a id="ad03bc934480606343e40ebc07c6fd22b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad03bc934480606343e40ebc07c6fd22b">&#9670;&nbsp;</a></span>dirvote_add_signatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dirvote_add_signatures </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>detached_signatures_body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper: we just got the <b>detached_signatures_body</b> sent to us as signatures on the currently pending consensus. Add them to the pending consensus (if we have one); otherwise queue them until we have a consensus. Return negative on failure, nonnegative on success. </p>

</div>
</div>
<a id="a41039a7c25c1f8a8be7d042dd256a4ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41039a7c25c1f8a8be7d042dd256a4ad">&#9670;&nbsp;</a></span>dirvote_add_vote()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpending__vote__t.html">pending_vote_t</a>* dirvote_add_vote </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>vote_body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>status_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when we have received a networkstatus vote in <b>vote_body</b>. Parse and validate it, and on success store it as a pending vote (which we then return). Return NULL on failure. Sets *<b>msg_out</b> and *<b>status_out</b> to an HTTP response and status code. (V3 authority only) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_a41039a7c25c1f8a8be7d042dd256a4ad_cgraph.png" border="0" usemap="#dirvote_8h_a41039a7c25c1f8a8be7d042dd256a4ad_cgraph" alt=""/></div>
<map name="dirvote_8h_a41039a7c25c1f8a8be7d042dd256a4ad_cgraph" id="dirvote_8h_a41039a7c25c1f8a8be7d042dd256a4ad_cgraph">
<area shape="rect" id="node2" href="routerparse_8c.html#a65f051065986f87c9969726c07d761be" title="networkstatus_parse\l_vote_from_string" alt="" coords="175,5,317,47"/>
</map>
</div>

</div>
</div>
<a id="a97feb95be6e8e94295fa6775355318ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97feb95be6e8e94295fa6775355318ee">&#9670;&nbsp;</a></span>dirvote_create_microdescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmicrodesc__t.html">microdesc_t</a>* dirvote_create_microdescriptor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>ri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>consensus_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct and return a new microdescriptor from a routerinfo <b>ri</b> according to <b>consensus_method</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_a97feb95be6e8e94295fa6775355318ee_cgraph.png" border="0" usemap="#dirvote_8h_a97feb95be6e8e94295fa6775355318ee_cgraph" alt=""/></div>
<map name="dirvote_8h_a97feb95be6e8e94295fa6775355318ee_cgraph" id="dirvote_8h_a97feb95be6e8e94295fa6775355318ee_cgraph">
<area shape="rect" id="node2" href="crypto_8c.html#a557593755a335c3edf74bb3ead7af209" title="crypto_pk_write_public\l_key_to_string" alt="" coords="265,5,420,47"/>
<area shape="rect" id="node3" href="policies_8c.html#af2e21a770e119c34b55360c703040bdc" title="policy_summarize" alt="" coords="279,71,406,98"/>
<area shape="rect" id="node4" href="container_8c.html#ab865391a8cac688c51809c33dad0bfe2" title="smartlist_join_strings" alt="" coords="270,122,415,149"/>
<area shape="rect" id="node6" href="util_8c.html#a68cb44a66a7446022122c93590b6d179" title="smartlist_add_asprintf" alt="" coords="481,173,631,199"/>
<area shape="rect" id="node10" href="util__format_8c.html#a2394b082102cdbb3d443955e9b056e0e" title="base64_encode" alt="" coords="702,426,815,453"/>
<area shape="rect" id="node12" href="address_8c.html#a6ecc12236743caf7527376436791c75e" title="tor_addr_is_null" alt="" coords="286,274,399,301"/>
<area shape="rect" id="node13" href="address_8c.html#a1b6ba2d6f5a3bc607d7d761c849ec110" title="fmt_addrport" alt="" coords="295,325,390,351"/>
<area shape="rect" id="node16" href="policies_8c.html#a8dd804fdc250aed2c7270fe142400c56" title="write_short_policy" alt="" coords="279,223,406,250"/>
<area shape="rect" id="node17" href="crypto__format_8c.html#abfe3914879d93c7eb2f06d9628979364" title="ed25519_public_to_base64" alt="" coords="253,375,432,402"/>
<area shape="rect" id="node19" href="crypto__format_8c.html#aa31b9d5fd609a1c8c3c888c7d817284c" title="digest_to_base64" alt="" coords="494,477,618,503"/>
<area shape="rect" id="node20" href="routerparse_8c.html#abfc52ced95cf906593bbdab812e1cd8e" title="microdescs_parse_from\l_string" alt="" coords="262,528,423,569"/>
<area shape="rect" id="node5" href="container_8c.html#aac69a4c0d462859a1a13a6eb35ab3c0a" title="smartlist_join_strings2" alt="" coords="480,122,632,149"/>
<area shape="rect" id="node7" href="util_8c.html#a4fee2abf83af3a8b8a18b245daf4083b" title="smartlist_add_vasprintf" alt="" coords="680,173,837,199"/>
<area shape="rect" id="node8" href="compat_8c.html#a5ef7a08e8b543c0d61f9ef1081d4c1ea" title="tor_vasprintf" alt="" coords="910,173,1005,199"/>
<area shape="rect" id="node9" href="container_8c.html#accf59a8b7d39a4286ff99653b6878006" title="smartlist_add" alt="" coords="907,223,1007,250"/>
<area shape="rect" id="node11" href="util__format_8c.html#a733f32f58c6056750ad6f64228af51b2" title="base64_encode_size" alt="" coords="885,426,1029,453"/>
<area shape="rect" id="node14" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="513,325,599,351"/>
<area shape="rect" id="node15" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="711,325,806,351"/>
<area shape="rect" id="node18" href="crypto__format_8c.html#a357bf351fe9894c905f7e7029da38f9a" title="digest256_to_base64" alt="" coords="483,375,629,402"/>
</map>
</div>

</div>
</div>
<a id="a7c8c11aee1a421ac4cd72f1d020ac6d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c8c11aee1a421ac4cd72f1d020ac6d5">&#9670;&nbsp;</a></span>dirvote_format_all_microdesc_vote_lines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvote__microdesc__hash__t.html">vote_microdesc_hash_t</a>* dirvote_format_all_microdesc_vote_lines </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>ri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>microdescriptors_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate and return a linked list of all the lines that should appear to describe a router's microdescriptor versions in a directory vote. Add the generated microdescriptors to <b>microdescriptors_out</b>. </p>

</div>
</div>
<a id="a914458f7367ecc3c6827787d674fd52a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914458f7367ecc3c6827787d674fd52a">&#9670;&nbsp;</a></span>dirvote_format_microdesc_vote_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t dirvote_format_microdesc_vote_line </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_buf_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmicrodesc__t.html">microdesc_t</a> *&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>consensus_method_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>consensus_method_high</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Format the appropriate vote line to describe the microdescriptor <b>md</b> in a consensus vote document. Write it into the <b>out_len</b>-byte buffer in <b>out</b>. Return -1 on failure and the number of characters written on success. </p>

</div>
</div>
<a id="a585a4928108f1321756e08eb86712d51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a585a4928108f1321756e08eb86712d51">&#9670;&nbsp;</a></span>dirvote_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dirvote_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all static storage held in <a class="el" href="dirvote_8c.html" title="Functions to compute directory consensus, and schedule voting. ">dirvote.c</a> </p>

</div>
</div>
<a id="a60188357707e416d29de6342bc32a883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60188357707e416d29de6342bc32a883">&#9670;&nbsp;</a></span>dirvote_get_preferred_voting_intervals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dirvote_get_preferred_voting_intervals </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvote__timing__t.html">vote_timing_t</a> *&#160;</td>
          <td class="paramname"><em>timing_out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set *<b>timing_out</b> to the intervals at which we would like to vote. Note that these aren't the intervals we'll use to vote; they're the ones that we'll vote to use. </p>

</div>
</div>
<a id="ad12be9f1748f89ce9e33a895218912fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad12be9f1748f89ce9e33a895218912fb">&#9670;&nbsp;</a></span>dirvote_get_start_of_next_interval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t dirvote_get_start_of_next_interval </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the start of the next interval of size <b>interval</b> (in seconds) after <b>now</b>, plus <b>offset</b>. Midnight always starts a fresh interval, and if the last interval of a day would be truncated to less than half its size, it is rolled into the previous interval. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_ad12be9f1748f89ce9e33a895218912fb_cgraph.png" border="0" usemap="#dirvote_8h_ad12be9f1748f89ce9e33a895218912fb_cgraph" alt=""/></div>
<map name="dirvote_8h_ad12be9f1748f89ce9e33a895218912fb_cgraph" id="dirvote_8h_ad12be9f1748f89ce9e33a895218912fb_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#a983d273987a338a60523f0bce4006af2" title="tor_gmtime_r" alt="" coords="191,56,289,83"/>
<area shape="rect" id="node6" href="util_8c.html#a966c4dd39a43f89fd5207aebb4756654" title="tor_timegm" alt="" coords="197,107,283,133"/>
<area shape="rect" id="node3" href="compat__threads_8c.html#a0f3b168e06f8e4b99789af20771ee096" title="tor_mutex_new" alt="" coords="347,5,457,32"/>
<area shape="rect" id="node4" href="compat__pthreads_8c.html#a8bfcc96866bdf76508915db8b252f746" title="tor_mutex_acquire" alt="" coords="337,56,467,83"/>
<area shape="rect" id="node5" href="compat__pthreads_8c.html#a3fc2298a8cb49803528daa6d35091372" title="tor_mutex_release" alt="" coords="337,107,467,133"/>
</map>
</div>

</div>
</div>
<a id="a6905fdc89a2bce64a9f79c526c140f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6905fdc89a2bce64a9f79c526c140f94">&#9670;&nbsp;</a></span>dirvote_get_vote()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structcached__dir__t.html">cached_dir_t</a>* dirvote_get_vote </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a given vote specified by <b>fp</b>. If <b>by_id</b>, return the vote for the authority with the v3 authority identity key digest <b>fp</b>; if <b>by_id</b> is false, return the vote whose digest is <b>fp</b>. If <b>fp</b> is NULL, return our own vote. If <b>include_previous</b> is false, do not consider any votes for a consensus that's already been built. If <b>include_pending</b> is false, do not consider any votes for the consensus that's in progress. May return NULL if we have no vote for the authority in question. </p>

</div>
</div>
<a id="aab7ea3ac9bbece8dbdd6c3c167dc0ae9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7ea3ac9bbece8dbdd6c3c167dc0ae9">&#9670;&nbsp;</a></span>dirvote_recalculate_timing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dirvote_recalculate_timing </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structor__options__t.html">or_options_t</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set voting_schedule to hold the timing for the next vote we should be doing. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_aab7ea3ac9bbece8dbdd6c3c167dc0ae9_cgraph.png" border="0" usemap="#dirvote_8h_aab7ea3ac9bbece8dbdd6c3c167dc0ae9_cgraph" alt=""/></div>
<map name="dirvote_8h_aab7ea3ac9bbece8dbdd6c3c167dc0ae9_cgraph" id="dirvote_8h_aab7ea3ac9bbece8dbdd6c3c167dc0ae9_cgraph">
<area shape="rect" id="node2" href="router_8c.html#a71fbf956eedbc38a293306c9bf1962e7" title="authdir_mode_v3" alt="" coords="184,13,305,39"/>
<area shape="rect" id="node3" href="router_8c.html#a2d62b1eeaa990670a04de8dfbb42ab8f" title="authdir_mode" alt="" coords="353,13,453,39"/>
</map>
</div>

</div>
</div>
<a id="a5b21332ec8c217620fefe5f2bd405c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b21332ec8c217620fefe5f2bd405c93">&#9670;&nbsp;</a></span>networkstatus_add_detached_signatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networkstatus_add_detached_signatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structns__detached__signatures__t.html">ns_detached_signatures_t</a> *&#160;</td>
          <td class="paramname"><em>sigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a consensus vote <b>target</b> and a set of detached signatures in <b>sigs</b> that correspond to the same consensus, check whether there are any new signatures in <b>src_voter_list</b> that should be added to <b>target</b>. (A signature should be added if we have no signature for that voter in <b>target</b> yet, or if we have no verifiable signature and the new signature is verifiable.) Return the number of signatures added or changed, or -1 if the document signed by <b>sigs</b> isn't the same document as <b>target</b>. </p>
<p>Make sure all the digests we know match, and at least one matches. </p>

</div>
</div>
<a id="aaffac0db845bcd69944e5249a5f15344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaffac0db845bcd69944e5249a5f15344">&#9670;&nbsp;</a></span>networkstatus_compute_consensus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* networkstatus_compute_consensus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>votes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>total_authorities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>identity_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>signing_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>legacy_id_key_digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcrypto__pk__t.html">crypto_pk_t</a> *&#160;</td>
          <td class="paramname"><em>legacy_signing_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#ada0879620550843533b891a49543b109">consensus_flavor_t</a>&#160;</td>
          <td class="paramname"><em>flavor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a list of vote <a class="el" href="structnetworkstatus__t.html">networkstatus_t</a> in <b>votes</b>, our public authority <b>identity_key</b>, our private authority <b>signing_key</b>, and the number of <b>total_authorities</b> that we believe exist in our voting quorum, generate the text of a new v3 consensus vote, and return the value in a newly allocated string.</p>
<p>Note: this function DOES NOT check whether the votes are from recognized authorities. (dirvote_add_vote does that.) </p>

</div>
</div>
<a id="a88b12c0f09a9033deb2cb78cc1dc321c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b12c0f09a9033deb2cb78cc1dc321c">&#9670;&nbsp;</a></span>networkstatus_get_detached_signatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* networkstatus_get_detached_signatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>consensuses</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a newly allocated string holding the detached-signatures document corresponding to the signatures on <b>consensuses</b>, which must contain exactly one FLAV_NS consensus, and no more than one consensus for each other flavor. </p>

</div>
</div>
<a id="a4a36c2930edf9d2ca915c30057a64da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a36c2930edf9d2ca915c30057a64da8">&#9670;&nbsp;</a></span>ns_detached_signatures_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ns_detached_signatures_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structns__detached__signatures__t.html">ns_detached_signatures_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all storage held in <b>s</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_a4a36c2930edf9d2ca915c30057a64da8_cgraph.png" border="0" usemap="#dirvote_8h_a4a36c2930edf9d2ca915c30057a64da8_cgraph" alt=""/></div>
<map name="dirvote_8h_a4a36c2930edf9d2ca915c30057a64da8_cgraph" id="dirvote_8h_a4a36c2930edf9d2ca915c30057a64da8_cgraph">
<area shape="rect" id="node2" href="networkstatus_8c.html#af6fa8990a971778c3d879c662c1579a9" title="document_signature_free" alt="" coords="245,5,413,32"/>
<area shape="rect" id="node3" href="util_8c.html#a40d94cc20afc38582c65aa418919ebed" title="tor_free_" alt="" coords="293,56,366,83"/>
</map>
</div>

</div>
</div>
<a id="a441a08d3eefcfb08ff0c8ee680183490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a441a08d3eefcfb08ff0c8ee680183490">&#9670;&nbsp;</a></span>set_routerstatus_from_routerinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_routerstatus_from_routerinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrouterstatus__t.html">routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnode__t.html">node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrouterinfo__t.html">routerinfo_t</a> *&#160;</td>
          <td class="paramname"><em>ri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>listbadexits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extract status information from <b>ri</b> and from other authority functions and store it in <b>rs</b>&gt;.</p>
<p>We assume that ri-&gt;is_running has already been set, e.g. by dirserv_set_router_is_running(ri, now); </p>

</div>
</div>
<a id="a72cd954260c2fb4bfc45884588730a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72cd954260c2fb4bfc45884588730a50">&#9670;&nbsp;</a></span>vote_routerstatus_find_microdesc_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vote_routerstatus_find_microdesc_hash </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>digest256_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvote__routerstatus__t.html">vote_routerstatus_t</a> *&#160;</td>
          <td class="paramname"><em>vrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">digest_algorithm_t&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If <b>vrs</b> has a hash made for the consensus method <b>method</b> with the digest algorithm <b>alg</b>, decode it and copy it into <b>digest256_out</b> and return 0. Otherwise return -1. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="dirvote_8h_a72cd954260c2fb4bfc45884588730a50_cgraph.png" border="0" usemap="#dirvote_8h_a72cd954260c2fb4bfc45884588730a50_cgraph" alt=""/></div>
<map name="dirvote_8h_a72cd954260c2fb4bfc45884588730a50_cgraph" id="dirvote_8h_a72cd954260c2fb4bfc45884588730a50_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="241,5,327,32"/>
<area shape="rect" id="node4" href="crypto_8c.html#adefcd6cb8ded2532779e981dce8d5011" title="crypto_digest_algorithm\l_get_name" alt="" coords="204,57,364,98"/>
<area shape="rect" id="node3" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="412,5,507,32"/>
</map>
</div>

</div>
</div>
<a id="a60af55f760759eb6ad39a5c11ba3baaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60af55f760759eb6ad39a5c11ba3baaf">&#9670;&nbsp;</a></span>voter_get_sig_by_algorithm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdocument__signature__t.html">document_signature_t</a>* voter_get_sig_by_algorithm </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnetworkstatus__voter__info__t.html">networkstatus_voter_info_t</a> *&#160;</td>
          <td class="paramname"><em>voter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">digest_algorithm_t&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the signature made by <b>voter</b> using the algorithm <b>alg</b>, or NULL if none is found. </p>

</div>
</div>
<a id="adffd241c7a248002845c761c4147ab58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adffd241c7a248002845c761c4147ab58">&#9670;&nbsp;</a></span>voting_schedule_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void voting_schedule_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvoting__schedule__t.html">voting_schedule_t</a> *&#160;</td>
          <td class="paramname"><em>voting_schedule_to_free</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees a <a class="el" href="structvoting__schedule__t.html">voting_schedule_t</a>. This should be used instead of the generic tor_free. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
