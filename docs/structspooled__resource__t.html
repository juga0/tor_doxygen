<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: spooled_resource_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">spooled_resource_t Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="dirserv_8h_source.html">dirserv.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for spooled_resource_t:</div>
<div class="dyncontent">
<div class="center"><img src="structspooled__resource__t__coll__graph.png" border="0" usemap="#spooled__resource__t_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a6009a0f737b78ceac268bf70756280e9"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspooled__resource__t.html#a6009a0f737b78ceac268bf70756280e9">spool_eagerly</a>: 1</td></tr>
<tr class="separator:a6009a0f737b78ceac268bf70756280e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40909144cdc83d2352e3e4dbbe8820c1"><td class="memItemLeft" align="right" valign="top">dir_spool_source_bitfield_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspooled__resource__t.html#a40909144cdc83d2352e3e4dbbe8820c1">spool_source</a>: 7</td></tr>
<tr class="separator:a40909144cdc83d2352e3e4dbbe8820c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762bd02d32a0df2b0afa4c497b7401d9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspooled__resource__t.html#a762bd02d32a0df2b0afa4c497b7401d9">digest</a> [<a class="el" href="crypto__digest_8h.html#a34e055abb21d9f47b5f3d821e4beb091">DIGEST256_LEN</a>]</td></tr>
<tr class="separator:a762bd02d32a0df2b0afa4c497b7401d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd8a13b80cdd5dc57be42cad6d654e5e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcached__dir__t.html">cached_dir_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspooled__resource__t.html#acd8a13b80cdd5dc57be42cad6d654e5e">cached_dir_ref</a></td></tr>
<tr class="separator:acd8a13b80cdd5dc57be42cad6d654e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9295f1a09aed2cbf0535a7418fabcd9c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconsensus__cache__entry__t.html">consensus_cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspooled__resource__t.html#a9295f1a09aed2cbf0535a7418fabcd9c">consensus_cache_entry</a></td></tr>
<tr class="separator:a9295f1a09aed2cbf0535a7418fabcd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa86acaccef2b172e2b79fd2716377990"><td class="memItemLeft" align="right" valign="top"><a id="aa86acaccef2b172e2b79fd2716377990"></a>
const uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>cce_body</b></td></tr>
<tr class="separator:aa86acaccef2b172e2b79fd2716377990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdee01270b897b01d207b4094bfba1be"><td class="memItemLeft" align="right" valign="top"><a id="afdee01270b897b01d207b4094bfba1be"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>cce_len</b></td></tr>
<tr class="separator:afdee01270b897b01d207b4094bfba1be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aed39a139d9b5dcba95ab946738f796"><td class="memItemLeft" align="right" valign="top">off_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspooled__resource__t.html#a8aed39a139d9b5dcba95ab946738f796">cached_dir_offset</a></td></tr>
<tr class="separator:a8aed39a139d9b5dcba95ab946738f796"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Object to remember the identity of an object that we are spooling, or about to spool, in response to a directory request.</p>
<p>(Why do we spool? Because some directory responses are very large, and we don't want to just shove the complete answer into the output buffer: that would take a ridiculous amount of RAM.)</p>
<p>If the spooled resource is relatively small (like microdescriptors, descriptors, etc), we look them up by ID as needed, and add the whole thing onto the output buffer at once. If the spooled reseource is big (like networkstatus documents), we reference-count it, and add it a few K at a time. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a8aed39a139d9b5dcba95ab946738f796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aed39a139d9b5dcba95ab946738f796">&#9670;&nbsp;</a></span>cached_dir_offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">off_t cached_dir_offset</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current offset into cached_dir or cce_body. Only used when spool_eagerly is false </p>

</div>
</div>
<a id="acd8a13b80cdd5dc57be42cad6d654e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd8a13b80cdd5dc57be42cad6d654e5e">&#9670;&nbsp;</a></span>cached_dir_ref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcached__dir__t.html">cached_dir_t</a>* cached_dir_ref</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A large object that we're spooling. Holds a reference count. Only used when spool_eagerly is false. </p>

</div>
</div>
<a id="a9295f1a09aed2cbf0535a7418fabcd9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9295f1a09aed2cbf0535a7418fabcd9c">&#9670;&nbsp;</a></span>consensus_cache_entry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconsensus__cache__entry__t.html">consensus_cache_entry_t</a>* consensus_cache_entry</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A different kind of large object that we might be spooling. Also reference-counted. Also only used when spool_eagerly is false. </p>

</div>
</div>
<a id="a762bd02d32a0df2b0afa4c497b7401d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a762bd02d32a0df2b0afa4c497b7401d9">&#9670;&nbsp;</a></span>digest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t digest[<a class="el" href="crypto__digest_8h.html#a34e055abb21d9f47b5f3d821e4beb091">DIGEST256_LEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tells us the specific object to spool. </p>

</div>
</div>
<a id="a6009a0f737b78ceac268bf70756280e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6009a0f737b78ceac268bf70756280e9">&#9670;&nbsp;</a></span>spool_eagerly</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned spool_eagerly</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If true, we add the entire object to the outbuf. If false, we spool the object a few K at a time. </p>

</div>
</div>
<a id="a40909144cdc83d2352e3e4dbbe8820c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40909144cdc83d2352e3e4dbbe8820c1">&#9670;&nbsp;</a></span>spool_source</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dir_spool_source_bitfield_t spool_source</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tells us what kind of object to get, and how to look it up. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/user/_my/code/bwauth-related/tor/src/or/<a class="el" href="dirserv_8h_source.html">dirserv.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
