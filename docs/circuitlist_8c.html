<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tor: /home/user/_my/code/bwauth-related/tor/src/or/circuitlist.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tor
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97b64286d42c5ef1697cb5f17129db19.html">tor</a></li><li class="navelem"><a class="el" href="dir_3cb0ba3f4b82dbe34a1a06276e96bc8d.html">src</a></li><li class="navelem"><a class="el" href="dir_386635fabd7f6c74e9d9c7a8604514a0.html">or</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">circuitlist.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manage global structures that list and index circuits, and look up circuits within them.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="torint_8h_source.html">torint.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="or_8h_source.html">or.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="channel_8h_source.html">channel.h</a>&quot;</code><br />
<code>#include &quot;circpathbias.h&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitbuild_8h_source.html">circuitbuild.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitlist_8h_source.html">circuitlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuituse_8h_source.html">circuituse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="circuitstats_8h_source.html">circuitstats.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection_8h_source.html">connection.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection__edge_8h_source.html">connection_edge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="connection__or_8h_source.html">connection_or.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__rand_8h_source.html">crypto_rand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crypto__util_8h_source.html">crypto_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="entrynodes_8h_source.html">entrynodes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hs__circuit_8h_source.html">hs_circuit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hs__circuitmap_8h_source.html">hs_circuitmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hs__ident_8h_source.html">hs_ident.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="networkstatus_8h_source.html">networkstatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nodelist_8h_source.html">nodelist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="onion_8h_source.html">onion.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="onion__fast_8h_source.html">onion_fast.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="policies_8h_source.html">policies.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="relay_8h_source.html">relay.h</a>&quot;</code><br />
<code>#include &quot;relay_crypto.h&quot;</code><br />
<code>#include &quot;<a class="el" href="rendclient_8h_source.html">rendclient.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rendcommon_8h_source.html">rendcommon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rephist_8h_source.html">rephist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="routerlist_8h_source.html">routerlist.h</a>&quot;</code><br />
<code>#include &quot;routerset.h&quot;</code><br />
<code>#include &quot;channelpadding.h&quot;</code><br />
<code>#include &quot;<a class="el" href="compress__lzma_8h_source.html">compress_lzma.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="compress__zlib_8h_source.html">compress_zlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="compress__zstd_8h_source.html">compress_zstd.h</a>&quot;</code><br />
<code>#include &quot;ht.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for circuitlist.c:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c__incl.png" border="0" usemap="#_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2circuitlist_8c" alt=""/></div>
<map name="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2circuitlist_8c" id="_2home_2user_2__my_2code_2bwauth-related_2tor_2src_2or_2circuitlist_8c">
<area shape="rect" id="node2" href="torint_8h.html" title="Header file to define uint32_t and friends. " alt="" coords="106,333,168,360"/>
<area shape="rect" id="node5" href="or_8h.html" title="Master header file for Tor&#45;specific functionality. " alt="" coords="574,184,618,211"/>
<area shape="rect" id="node14" href="ht_8h_source.html" title="ht.h" alt="" coords="1138,259,1182,285"/>
<area shape="rect" id="node17" href="hs__circuitmap_8h.html" title="Header file for hs_circuitmap.c. " alt="" coords="1206,259,1321,285"/>
<area shape="rect" id="node18" href="channel_8h.html" title="Header file for channel.c. " alt="" coords="502,109,580,136"/>
<area shape="rect" id="node19" href="circpathbias_8h_source.html" title="circpathbias.h" alt="" coords="820,109,923,136"/>
<area shape="rect" id="node20" href="circuitbuild_8h.html" title="Header file for circuitbuild.c. " alt="" coords="947,109,1042,136"/>
<area shape="rect" id="node21" href="circuitlist_8h.html" title="Header file for circuitlist.c. " alt="" coords="1117,109,1202,136"/>
<area shape="rect" id="node22" href="hs__ident_8h.html" title="Header file containing circuit and connection identifier data for the whole HS subsytem. " alt="" coords="1078,184,1161,211"/>
<area shape="rect" id="node23" href="circuituse_8h.html" title="Header file for circuituse.c. " alt="" coords="1227,109,1316,136"/>
<area shape="rect" id="node24" href="circuitstats_8h.html" title="Header file for circuitstats.c. " alt="" coords="1340,109,1438,136"/>
<area shape="rect" id="node25" href="connection_8h.html" title="Header file for connection.c. " alt="" coords="1462,109,1558,136"/>
<area shape="rect" id="node26" href="config_8h.html" title="Header file for config.c. " alt="" coords="1583,109,1651,136"/>
<area shape="rect" id="node27" href="connection__edge_8h.html" title="Header file for connection_edge.c. " alt="" coords="1676,109,1806,136"/>
<area shape="rect" id="node28" href="connection__or_8h.html" title="Header file for connection_or.c. " alt="" coords="1830,109,1945,136"/>
<area shape="rect" id="node29" href="control_8h.html" title="Header file for control.c. " alt="" coords="1969,109,2041,136"/>
<area shape="rect" id="node30" href="crypto__rand_8h.html" title="Common functions for using (pseudo&#45;)random number generators. " alt="" coords="108,184,209,211"/>
<area shape="rect" id="node31" href="crypto__util_8h.html" title="Common functions for cryptographic routines. " alt="" coords="266,184,360,211"/>
<area shape="rect" id="node32" href="entrynodes_8h.html" title="Header file for circuitbuild.c. " alt="" coords="2066,109,2163,136"/>
<area shape="rect" id="node33" href="main_8h.html" title="Header file for main.c. " alt="" coords="2188,109,2249,136"/>
<area shape="rect" id="node34" href="hs__circuit_8h.html" title="Header file containing circuit data for the whole HS subsytem. " alt="" coords="604,109,694,136"/>
<area shape="rect" id="node35" href="networkstatus_8h.html" title="Header file for networkstatus.c. " alt="" coords="2273,109,2388,136"/>
<area shape="rect" id="node36" href="nodelist_8h.html" title="Header file for nodelist.c. " alt="" coords="2412,109,2491,136"/>
<area shape="rect" id="node37" href="onion_8h.html" title="Header file for onion.c. " alt="" coords="2516,109,2580,136"/>
<area shape="rect" id="node38" href="onion__fast_8h.html" title="Header file for onion_fast.c. " alt="" coords="2604,109,2697,136"/>
<area shape="rect" id="node39" href="policies_8h.html" title="Header file for policies.c. " alt="" coords="2721,109,2798,136"/>
<area shape="rect" id="node40" href="relay_8h.html" title="Header file for relay.c. " alt="" coords="2822,109,2884,136"/>
<area shape="rect" id="node41" href="relay__crypto_8h_source.html" title="relay_crypto.h" alt="" coords="2908,109,3012,136"/>
<area shape="rect" id="node42" href="rendclient_8h.html" title="Header file for rendclient.c. " alt="" coords="3036,109,3126,136"/>
<area shape="rect" id="node43" href="rendcommon_8h.html" title="Header file for rendcommon.c. " alt="" coords="3150,109,3258,136"/>
<area shape="rect" id="node44" href="rephist_8h.html" title="Header file for rephist.c. " alt="" coords="3282,109,3354,136"/>
<area shape="rect" id="node45" href="routerlist_8h.html" title="Header file for routerlist.c. " alt="" coords="3378,109,3461,136"/>
<area shape="rect" id="node46" href="routerset_8h_source.html" title="routerset.h" alt="" coords="3486,109,3570,136"/>
<area shape="rect" id="node47" href="channelpadding_8h_source.html" title="channelpadding.h" alt="" coords="3594,109,3717,136"/>
<area shape="rect" id="node48" href="compress__lzma_8h.html" title="Header for compress_lzma.c. " alt="" coords="3741,109,3866,136"/>
<area shape="rect" id="node49" href="compress__zlib_8h.html" title="Header for compress_zlib.c. " alt="" coords="3890,109,4008,136"/>
<area shape="rect" id="node50" href="compress__zstd_8h.html" title="Header for compress_zstd.c. " alt="" coords="4032,109,4154,136"/>
<area shape="rect" id="node3" href="orconfig_8h_source.html" title="orconfig.h" alt="" coords="332,408,411,435"/>
<area shape="rect" id="node6" href="crypto_8h.html" title="Headers for crypto.c. " alt="" coords="265,259,334,285"/>
<area shape="rect" id="node7" href="crypto__format_8h_source.html" title="crypto_format.h" alt="" coords="127,259,240,285"/>
<area shape="rect" id="node8" href="tortls_8h.html" title="Headers for tortls.c. " alt="" coords="564,259,627,285"/>
<area shape="rect" id="node9" href="torlog_8h.html" title="Headers for log.c. " alt="" coords="651,259,716,285"/>
<area shape="rect" id="node10" href="container_8h_source.html" title="container.h" alt="" coords="711,333,798,360"/>
<area shape="rect" id="node11" href="compress_8h.html" title="Headers for compress.c. " alt="" coords="896,259,986,285"/>
<area shape="rect" id="node12" href="address_8h.html" title="Headers for address.h. " alt="" coords="410,259,488,285"/>
<area shape="rect" id="node13" href="compat__libevent_8h_source.html" title="compat_libevent.h" alt="" coords="461,333,589,360"/>
<area shape="rect" id="node15" href="confline_8h_source.html" title="confline.h" alt="" coords="792,259,871,285"/>
<area shape="rect" id="node16" href="replaycache_8h.html" title="Header file for replaycache.c. " alt="" coords="1011,259,1114,285"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structchan__circid__circuit__map__t.html">chan_circid_circuit_map_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4d03df7ec8391535f673b8127c775c50"><td class="memItemLeft" align="right" valign="top"><a id="a4d03df7ec8391535f673b8127c775c50"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIRCUITLIST_PRIVATE</b></td></tr>
<tr class="separator:a4d03df7ec8391535f673b8127c775c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb61e315bc18f170c587876a96704733"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#acb61e315bc18f170c587876a96704733">DFLT_IDLE_TIMEOUT_WHILE_LEARNING</a>&#160;&#160;&#160;(3*60)</td></tr>
<tr class="separator:acb61e315bc18f170c587876a96704733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ffc0fbc067507b7a538f2a9b2ca9c90"><td class="memItemLeft" align="right" valign="top"><a id="a8ffc0fbc067507b7a538f2a9b2ca9c90"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN_IDLE_TIMEOUT_WHILE_LEARNING</b>&#160;&#160;&#160;(10)</td></tr>
<tr class="separator:a8ffc0fbc067507b7a538f2a9b2ca9c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b15e1f5acc146dd96f05586e3aebb9"><td class="memItemLeft" align="right" valign="top"><a id="af7b15e1f5acc146dd96f05586e3aebb9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IDLE_TIMEOUT_WHILE_LEARNING</b>&#160;&#160;&#160;(1000*60)</td></tr>
<tr class="separator:af7b15e1f5acc146dd96f05586e3aebb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a7952da6e0639df3972a04e44d3f66"><td class="memItemLeft" align="right" valign="top"><a id="a93a7952da6e0639df3972a04e44d3f66"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FRACTION_OF_DATA_TO_RETAIN_ON_OOM</b>&#160;&#160;&#160;0.90</td></tr>
<tr class="separator:a93a7952da6e0639df3972a04e44d3f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae1067e5e7037fa3b590361cc77f456db"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structchan__circid__circuit__map__t.html">chan_circid_circuit_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ae1067e5e7037fa3b590361cc77f456db">chan_circid_circuit_map_t</a></td></tr>
<tr class="separator:ae1067e5e7037fa3b590361cc77f456db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a71e07c8c1e138de359a2f6e9c7690d27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a71e07c8c1e138de359a2f6e9c7690d27">channel_mark_circid_unusable</a> (<a class="el" href="structchannel__s.html">channel_t</a> *chan, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id)</td></tr>
<tr class="separator:a71e07c8c1e138de359a2f6e9c7690d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e94f7978dbb55534d7e9fd22a1a9b53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a8e94f7978dbb55534d7e9fd22a1a9b53">channel_mark_circid_usable</a> (<a class="el" href="structchannel__s.html">channel_t</a> *chan, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id)</td></tr>
<tr class="separator:a8e94f7978dbb55534d7e9fd22a1a9b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b2d8b47856533721178b8ca6773b5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a24b2d8b47856533721178b8ca6773b5e">channel_note_destroy_pending</a> (<a class="el" href="structchannel__s.html">channel_t</a> *chan, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id)</td></tr>
<tr class="separator:a24b2d8b47856533721178b8ca6773b5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc4347c59e1edf62f58a0cfa72080ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#acfc4347c59e1edf62f58a0cfa72080ab">MOCK_IMPL</a> (void, channel_note_destroy_not_pending,(<a class="el" href="structchannel__s.html">channel_t</a> *chan, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id))</td></tr>
<tr class="separator:acfc4347c59e1edf62f58a0cfa72080ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b04e080622ab9d4fb23f9b9ffafeeac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a2b04e080622ab9d4fb23f9b9ffafeeac">circuit_set_p_circid_chan</a> (<a class="el" href="structor__circuit__t.html">or_circuit_t</a> *or_circ, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:a2b04e080622ab9d4fb23f9b9ffafeeac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38413accb1cc33e6949c1083f30f86f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a38413accb1cc33e6949c1083f30f86f4">circuit_set_n_circid_chan</a> (<a class="el" href="structcircuit__t.html">circuit_t</a> *circ, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:a38413accb1cc33e6949c1083f30f86f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a56e94fe3ac816942314b7172c3b30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a59a56e94fe3ac816942314b7172c3b30">circuit_set_state</a> (<a class="el" href="structcircuit__t.html">circuit_t</a> *circ, uint8_t state)</td></tr>
<tr class="separator:a59a56e94fe3ac816942314b7172c3b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef0c4aefe50f0432478e21e51814a34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#aaef0c4aefe50f0432478e21e51814a34">circuit_get_all_pending_on_channel</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *out, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:aaef0c4aefe50f0432478e21e51814a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa797a036ce04a0d14f669e656ec62408"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#aa797a036ce04a0d14f669e656ec62408">circuit_count_pending_on_channel</a> (<a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:aa797a036ce04a0d14f669e656ec62408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c312b3a8d3a28dc90a5ec70e617043"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a11c312b3a8d3a28dc90a5ec70e617043">circuit_close_all_marked</a> (void)</td></tr>
<tr class="separator:a11c312b3a8d3a28dc90a5ec70e617043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fad396f3e0850a9330c2d7c7aa43c67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a6fad396f3e0850a9330c2d7c7aa43c67">MOCK_IMPL</a> (<a class="el" href="structsmartlist__t.html">smartlist_t</a> *, circuit_get_global_list,(void))</td></tr>
<tr class="separator:a6fad396f3e0850a9330c2d7c7aa43c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab526f33075e1edd4dd62437af9ef6c43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ab526f33075e1edd4dd62437af9ef6c43">circuit_get_global_origin_circuit_list</a> (void)</td></tr>
<tr class="separator:ab526f33075e1edd4dd62437af9ef6c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c20bc469ef67338216bb762b661b0ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a7c20bc469ef67338216bb762b661b0ac">circuit_any_opened_circuits</a> (void)</td></tr>
<tr class="separator:a7c20bc469ef67338216bb762b661b0ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4fb133db6217d7f5fa19a5dee77ca19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ac4fb133db6217d7f5fa19a5dee77ca19">circuit_cache_opened_circuit_state</a> (int circuits_are_opened)</td></tr>
<tr class="separator:ac4fb133db6217d7f5fa19a5dee77ca19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1254d702e18cb40b466c578e7187d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a1f1254d702e18cb40b466c578e7187d3">circuit_any_opened_circuits_cached</a> (void)</td></tr>
<tr class="separator:a1f1254d702e18cb40b466c578e7187d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae84ef8267cda6f1d07cf1103a409e327"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ae84ef8267cda6f1d07cf1103a409e327">circuit_state_to_string</a> (int state)</td></tr>
<tr class="separator:ae84ef8267cda6f1d07cf1103a409e327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a812936e0ba7830eaaf06aee73fd7ac88"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a812936e0ba7830eaaf06aee73fd7ac88">circuit_purpose_to_controller_string</a> (uint8_t purpose)</td></tr>
<tr class="separator:a812936e0ba7830eaaf06aee73fd7ac88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a086953aba35fad817919757859c45f82"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a086953aba35fad817919757859c45f82">circuit_purpose_to_controller_hs_state_string</a> (uint8_t purpose)</td></tr>
<tr class="separator:a086953aba35fad817919757859c45f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c79060856f98208dbdbf81c4f5ed336"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a6c79060856f98208dbdbf81c4f5ed336">circuit_purpose_to_string</a> (uint8_t purpose)</td></tr>
<tr class="separator:a6c79060856f98208dbdbf81c4f5ed336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5c2bcd4138363a8e5ab5943cd19b79"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#afe5c2bcd4138363a8e5ab5943cd19b79">circuit_initial_package_window</a> (void)</td></tr>
<tr class="separator:afe5c2bcd4138363a8e5ab5943cd19b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543a0ac445cdd07bd65cd176092a48a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a543a0ac445cdd07bd65cd176092a48a8">origin_circuit_new</a> (void)</td></tr>
<tr class="separator:a543a0ac445cdd07bd65cd176092a48a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b61a8de4d2d95f7cb3a119cbb01368"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structor__circuit__t.html">or_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#af1b61a8de4d2d95f7cb3a119cbb01368">or_circuit_new</a> (<a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> p_circ_id, <a class="el" href="structchannel__s.html">channel_t</a> *p_chan)</td></tr>
<tr class="separator:af1b61a8de4d2d95f7cb3a119cbb01368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9b1bf0e3ebdf2185b6b89ebd5143daa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ae9b1bf0e3ebdf2185b6b89ebd5143daa">circuit_clear_testing_cell_stats</a> (<a class="el" href="structcircuit__t.html">circuit_t</a> *circ)</td></tr>
<tr class="separator:ae9b1bf0e3ebdf2185b6b89ebd5143daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f0f6e30fad4255603ad0ae7f7519a1e"><td class="memItemLeft" align="right" valign="top">STATIC void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a0f0f6e30fad4255603ad0ae7f7519a1e">circuit_free_</a> (<a class="el" href="structcircuit__t.html">circuit_t</a> *circ)</td></tr>
<tr class="separator:a0f0f6e30fad4255603ad0ae7f7519a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593021d7930ad975a926605290a55bac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a593021d7930ad975a926605290a55bac">circuit_clear_cpath</a> (<a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *circ)</td></tr>
<tr class="separator:a593021d7930ad975a926605290a55bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ac4853b0a4837bd67a52bdb8eb0ca93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a5ac4853b0a4837bd67a52bdb8eb0ca93">circuit_free_all</a> (void)</td></tr>
<tr class="separator:a5ac4853b0a4837bd67a52bdb8eb0ca93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a738513ab0a29830fe1727c7fe388edb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a738513ab0a29830fe1727c7fe388edb7">circuit_dump_by_conn</a> (<a class="el" href="structconnection__t.html">connection_t</a> *conn, int severity)</td></tr>
<tr class="separator:a738513ab0a29830fe1727c7fe388edb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79742a4ab88106ca1d80728809d8e81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#af79742a4ab88106ca1d80728809d8e81">circuit_get_by_global_id</a> (uint32_t id)</td></tr>
<tr class="separator:af79742a4ab88106ca1d80728809d8e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f5c15da602779343d53dcd022cd22b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a48f5c15da602779343d53dcd022cd22b">circuit_get_by_circid_channel</a> (<a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> circ_id, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:a48f5c15da602779343d53dcd022cd22b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3f5de779a301bc93a2293e6f689b60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a0b3f5de779a301bc93a2293e6f689b60">circuit_get_by_circid_channel_even_if_marked</a> (<a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> circ_id, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:a0b3f5de779a301bc93a2293e6f689b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b3500c2a9f864edd57d61b3550fa7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a31b3500c2a9f864edd57d61b3550fa7a">circuit_id_in_use_on_channel</a> (<a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> circ_id, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:a31b3500c2a9f864edd57d61b3550fa7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac37b3621f17213b10cad9940c800c2ef"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ac37b3621f17213b10cad9940c800c2ef">circuit_id_when_marked_unusable_on_channel</a> (<a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> circ_id, <a class="el" href="structchannel__s.html">channel_t</a> *chan)</td></tr>
<tr class="separator:ac37b3621f17213b10cad9940c800c2ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60b5bc8820f7f98c15ea5c6999738997"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a60b5bc8820f7f98c15ea5c6999738997">circuit_get_by_edge_conn</a> (<a class="el" href="structedge__connection__t.html">edge_connection_t</a> *conn)</td></tr>
<tr class="separator:a60b5bc8820f7f98c15ea5c6999738997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefaec2ca33f3b6b2dd23d12719b9773f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#aefaec2ca33f3b6b2dd23d12719b9773f">circuit_unlink_all_from_channel</a> (<a class="el" href="structchannel__s.html">channel_t</a> *chan, int reason)</td></tr>
<tr class="separator:aefaec2ca33f3b6b2dd23d12719b9773f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfbcfe9939d96dcb85e57524f8d1d3f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#adfbcfe9939d96dcb85e57524f8d1d3f2">circuit_get_ready_rend_circ_by_rend_data</a> (const <a class="el" href="structrend__data__t.html">rend_data_t</a> *rend_data)</td></tr>
<tr class="separator:adfbcfe9939d96dcb85e57524f8d1d3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b4f1c72602c612ab3dbb0bde85872f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a61b4f1c72602c612ab3dbb0bde85872f">circuit_get_next_service_intro_circ</a> (<a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *start)</td></tr>
<tr class="separator:a61b4f1c72602c612ab3dbb0bde85872f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6cba784887221ba992b79d38009439e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ac6cba784887221ba992b79d38009439e">circuit_get_next_service_rp_circ</a> (<a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *start)</td></tr>
<tr class="separator:ac6cba784887221ba992b79d38009439e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0213b0a539495feb29202a4f05d47c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ac0213b0a539495feb29202a4f05d47c4">circuit_get_next_by_pk_and_purpose</a> (<a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *start, const uint8_t *digest, uint8_t purpose)</td></tr>
<tr class="separator:ac0213b0a539495feb29202a4f05d47c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8d85a6437038797c4e68a34a4c09e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a2f8d85a6437038797c4e68a34a4c09e9">circuit_find_to_cannibalize</a> (uint8_t purpose_to_produce, <a class="el" href="structextend__info__t.html">extend_info_t</a> *info, int flags)</td></tr>
<tr class="separator:a2f8d85a6437038797c4e68a34a4c09e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d569b96b07da7c91549695cc1ce8ccf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a8d569b96b07da7c91549695cc1ce8ccf">circuit_find_circuits_to_upgrade_from_guard_wait</a> (void)</td></tr>
<tr class="separator:a8d569b96b07da7c91549695cc1ce8ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cbb4360c5100b6b2ab735449a21fb2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a8cbb4360c5100b6b2ab735449a21fb2e">circuit_get_cpath_len</a> (<a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *circ)</td></tr>
<tr class="separator:a8cbb4360c5100b6b2ab735449a21fb2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946530ab71c12655f35d3206c16d49b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a946530ab71c12655f35d3206c16d49b5">circuit_get_cpath_opened_len</a> (const <a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *circ)</td></tr>
<tr class="separator:a946530ab71c12655f35d3206c16d49b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab91c6d08d7d2896efefd973d0bb4b8d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcrypt__path__t.html">crypt_path_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#ab91c6d08d7d2896efefd973d0bb4b8d1">circuit_get_cpath_hop</a> (<a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *circ, int hopnum)</td></tr>
<tr class="separator:ab91c6d08d7d2896efefd973d0bb4b8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc3a3bf5eccd42bc5dc3f75d5aec392"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#afbc3a3bf5eccd42bc5dc3f75d5aec392">circuit_mark_all_unused_circs</a> (void)</td></tr>
<tr class="separator:afbc3a3bf5eccd42bc5dc3f75d5aec392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c4991dce45efd8d927b6092e3c85be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a52c4991dce45efd8d927b6092e3c85be">circuit_mark_all_dirty_circs_as_unusable</a> (void)</td></tr>
<tr class="separator:a52c4991dce45efd8d927b6092e3c85be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c002c85c1165ee85550bffe9f80f4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#af5c002c85c1165ee85550bffe9f80f4b">MOCK_IMPL</a> (void, circuit_mark_for_close_,(<a class="el" href="structcircuit__t.html">circuit_t</a> *circ, int reason, int line, const char *file))</td></tr>
<tr class="separator:af5c002c85c1165ee85550bffe9f80f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334868eea72d5bf22fef327ace35887c"><td class="memItemLeft" align="right" valign="top">STATIC size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a334868eea72d5bf22fef327ace35887c">n_cells_in_circ_queues</a> (const <a class="el" href="structcircuit__t.html">circuit_t</a> *c)</td></tr>
<tr class="separator:a334868eea72d5bf22fef327ace35887c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa984f19d399dd7cc2e1bb2c1d8f67271"><td class="memItemLeft" align="right" valign="top">STATIC uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#aa984f19d399dd7cc2e1bb2c1d8f67271">circuit_max_queued_cell_age</a> (const <a class="el" href="structcircuit__t.html">circuit_t</a> *c, uint32_t now)</td></tr>
<tr class="separator:aa984f19d399dd7cc2e1bb2c1d8f67271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87dc7128c6aaba5b68de157f06901bd5"><td class="memItemLeft" align="right" valign="top">STATIC uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a87dc7128c6aaba5b68de157f06901bd5">circuit_max_queued_data_age</a> (const <a class="el" href="structcircuit__t.html">circuit_t</a> *c, uint32_t now)</td></tr>
<tr class="separator:a87dc7128c6aaba5b68de157f06901bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0683212f0e98953ec1752019b7e3f822"><td class="memItemLeft" align="right" valign="top">STATIC uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a0683212f0e98953ec1752019b7e3f822">circuit_max_queued_item_age</a> (const <a class="el" href="structcircuit__t.html">circuit_t</a> *c, uint32_t now)</td></tr>
<tr class="separator:a0683212f0e98953ec1752019b7e3f822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b241b1bf7965929622477090a6c7b36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a4b241b1bf7965929622477090a6c7b36">circuits_handle_oom</a> (size_t current_allocation)</td></tr>
<tr class="separator:a4b241b1bf7965929622477090a6c7b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ae9f9f6e068c0ffb605650ca68a4ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a63ae9f9f6e068c0ffb605650ca68a4ac">assert_cpath_layer_ok</a> (const <a class="el" href="structcrypt__path__t.html">crypt_path_t</a> *cp)</td></tr>
<tr class="separator:a63ae9f9f6e068c0ffb605650ca68a4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd7c61397e708cf05c1c06d3188ab30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="circuitlist_8c.html#a8bd7c61397e708cf05c1c06d3188ab30">MOCK_IMPL</a> (void, assert_circuit_ok,(const <a class="el" href="structcircuit__t.html">circuit_t</a> *c))</td></tr>
<tr class="separator:a8bd7c61397e708cf05c1c06d3188ab30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manage global structures that list and index circuits, and look up circuits within them. </p>
<p>One of the most frequent operations in Tor occurs every time that a relay cell arrives on a channel. When that happens, we need to find which circuit it is associated with, based on the channel and the circuit ID in the relay cell.</p>
<p>To handle that, we maintain a global list of circuits, and a hashtable mapping [channel,circID] pairs to circuits. Circuits are added to and removed from this mapping using <a class="el" href="circuitlist_8c.html#a2b04e080622ab9d4fb23f9b9ffafeeac">circuit_set_p_circid_chan()</a> and <a class="el" href="circuitlist_8c.html#a38413accb1cc33e6949c1083f30f86f4">circuit_set_n_circid_chan()</a>. To look up a circuit from this map, most callers should use <a class="el" href="circuitlist_8c.html#a48f5c15da602779343d53dcd022cd22b">circuit_get_by_circid_channel()</a>, though <a class="el" href="circuitlist_8c.html#a0b3f5de779a301bc93a2293e6f689b60">circuit_get_by_circid_channel_even_if_marked()</a> is appropriate under some circumstances.</p>
<p>We also need to allow for the possibility that we have blocked use of a circuit ID (because we are waiting to send a DESTROY cell), but the circuit is not there any more. For that case, we allow placeholder entries in the table, using <a class="el" href="circuitlist_8c.html#a71e07c8c1e138de359a2f6e9c7690d27">channel_mark_circid_unusable()</a>.</p>
<p>To efficiently handle a channel that has just opened, we also maintain a list of the circuits waiting for channels, so we can attach them as needed without iterating through the whole list of circuits, using <a class="el" href="circuitlist_8c.html#aaef0c4aefe50f0432478e21e51814a34">circuit_get_all_pending_on_channel()</a>.</p>
<p>In this module, we also handle the list of circuits that have been marked for close elsewhere, and close them as needed. (We use this "mark now, close later" pattern here and elsewhere to avoid unpredictable recursion if we closed every circuit immediately upon realizing it needed to close.) See circuit_mark_for_close() for the mark function, and <a class="el" href="circuitlist_8c.html#a11c312b3a8d3a28dc90a5ec70e617043">circuit_close_all_marked()</a> for the close function.</p>
<p>For hidden services, we need to be able to look up introduction point circuits and rendezvous circuits by cookie, key, etc. These are currently handled with linear searches in circuit_get_ready_rend_circuit_by_rend_data(), <a class="el" href="circuitlist_8c.html#ac0213b0a539495feb29202a4f05d47c4">circuit_get_next_by_pk_and_purpose()</a>, and with hash lookups in circuit_get_rendezvous() and circuit_get_intro_point().</p>
<p>This module is also the entry point for our out-of-memory handler logic, which was originally circuit-focused. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acb61e315bc18f170c587876a96704733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb61e315bc18f170c587876a96704733">&#9670;&nbsp;</a></span>DFLT_IDLE_TIMEOUT_WHILE_LEARNING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFLT_IDLE_TIMEOUT_WHILE_LEARNING&#160;&#160;&#160;(3*60)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If we haven't yet decided on a good timeout value for circuit building, we close idle circuits aggressively so we can get more data points. These are the default, min, and max consensus values </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae1067e5e7037fa3b590361cc77f456db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1067e5e7037fa3b590361cc77f456db">&#9670;&nbsp;</a></span>chan_circid_circuit_map_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structchan__circid__circuit__map__t.html">chan_circid_circuit_map_t</a>  <a class="el" href="structchan__circid__circuit__map__t.html">chan_circid_circuit_map_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A map from channel and circuit ID to circuit. (Lookup performance is very important here, since we need to do it every time a cell arrives.) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a63ae9f9f6e068c0ffb605650ca68a4ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ae9f9f6e068c0ffb605650ca68a4ac">&#9670;&nbsp;</a></span>assert_cpath_layer_ok()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_cpath_layer_ok </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcrypt__path__t.html">crypt_path_t</a> *&#160;</td>
          <td class="paramname"><em>cp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Verify that cpath layer <b>cp</b> has all of its invariants correct. Trigger an assert if anything is invalid. </p>

</div>
</div>
<a id="a71e07c8c1e138de359a2f6e9c7690d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e07c8c1e138de359a2f6e9c7690d27">&#9670;&nbsp;</a></span>channel_mark_circid_unusable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void channel_mark_circid_unusable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark that circuit id <b>id</b> shouldn't be used on channel <b>chan</b>, even if there is no circuit on the channel. We use this to keep the circuit id from getting re-used while we have queued but not yet sent a destroy cell. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a71e07c8c1e138de359a2f6e9c7690d27_icgraph.png" border="0" usemap="#circuitlist_8c_a71e07c8c1e138de359a2f6e9c7690d27_icgraph" alt=""/></div>
<map name="circuitlist_8c_a71e07c8c1e138de359a2f6e9c7690d27_icgraph" id="circuitlist_8c_a71e07c8c1e138de359a2f6e9c7690d27_icgraph">
<area shape="rect" id="node2" href="circuitlist_8h.html#a931cd41e6b2c350f134e3f1e3b43edc9" title="circuit_set_p_circid_chan" alt="" coords="195,5,364,32"/>
<area shape="rect" id="node3" href="circuitlist_8h.html#a38413accb1cc33e6949c1083f30f86f4" title="circuit_set_n_circid_chan" alt="" coords="195,56,364,83"/>
</map>
</div>

</div>
</div>
<a id="a8e94f7978dbb55534d7e9fd22a1a9b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e94f7978dbb55534d7e9fd22a1a9b53">&#9670;&nbsp;</a></span>channel_mark_circid_usable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void channel_mark_circid_usable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark that a circuit id <b>id</b> can be used again on <b>chan</b>. We use this to re-enable the circuit ID after we've sent a destroy cell. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a8e94f7978dbb55534d7e9fd22a1a9b53_icgraph.png" border="0" usemap="#circuitlist_8c_a8e94f7978dbb55534d7e9fd22a1a9b53_icgraph" alt=""/></div>
<map name="circuitlist_8c_a8e94f7978dbb55534d7e9fd22a1a9b53_icgraph" id="circuitlist_8c_a8e94f7978dbb55534d7e9fd22a1a9b53_icgraph">
<area shape="rect" id="node2" href="circuitmux_8h.html#a316a4d7aa9470bceecfd8f27b1964bdc" title="circuitmux_mark_destroyed\l_circids_usable" alt="" coords="195,5,377,47"/>
</map>
</div>

</div>
</div>
<a id="a24b2d8b47856533721178b8ca6773b5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b2d8b47856533721178b8ca6773b5e">&#9670;&nbsp;</a></span>channel_note_destroy_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void channel_note_destroy_pending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to indicate that a DESTROY is pending on <b>chan</b> with circuit ID <b>id</b>, but hasn't been sent yet. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a24b2d8b47856533721178b8ca6773b5e_cgraph.png" border="0" usemap="#circuitlist_8c_a24b2d8b47856533721178b8ca6773b5e_cgraph" alt=""/></div>
<map name="circuitlist_8c_a24b2d8b47856533721178b8ca6773b5e_cgraph" id="circuitlist_8c_a24b2d8b47856533721178b8ca6773b5e_cgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#a0b3f5de779a301bc93a2293e6f689b60" title="circuit_get_by_circid\l_channel_even_if_marked" alt="" coords="203,5,376,47"/>
</map>
</div>

</div>
</div>
<a id="a7c20bc469ef67338216bb762b661b0ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c20bc469ef67338216bb762b661b0ac">&#9670;&nbsp;</a></span>circuit_any_opened_circuits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circuit_any_opened_circuits </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true if we have any opened general-purpose 3 hop origin circuits.</p>
<p>The result from this function is cached for use by <a class="el" href="circuitlist_8c.html#a1f1254d702e18cb40b466c578e7187d3">circuit_any_opened_circuits_cached()</a>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_cgraph.png" border="0" usemap="#circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_cgraph" alt=""/></div>
<map name="circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_cgraph" id="circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_cgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#ab526f33075e1edd4dd62437af9ef6c43" title="circuit_get_global\l_origin_circuit_list" alt="" coords="199,5,325,47"/>
<area shape="rect" id="node3" href="circuitlist_8c.html#ac4fb133db6217d7f5fa19a5dee77ca19" title="circuit_cache_opened\l_circuit_state" alt="" coords="188,71,336,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_icgraph.png" border="0" usemap="#circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_icgraph" alt=""/></div>
<map name="circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_icgraph" id="circuitlist_8c_a7c20bc469ef67338216bb762b661b0ac_icgraph">
<area shape="rect" id="node2" href="circuituse_8h.html#a857005b7512302feee182107aed11121" title="circuit_expire_building" alt="" coords="188,13,339,39"/>
</map>
</div>

</div>
</div>
<a id="a1f1254d702e18cb40b466c578e7187d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f1254d702e18cb40b466c578e7187d3">&#9670;&nbsp;</a></span>circuit_any_opened_circuits_cached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circuit_any_opened_circuits_cached </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true if there were any opened circuits since the last call to <a class="el" href="circuitlist_8c.html#a7c20bc469ef67338216bb762b661b0ac">circuit_any_opened_circuits()</a>, or since <a class="el" href="circuituse_8c.html#a857005b7512302feee182107aed11121">circuit_expire_building()</a> last ran (it runs roughly once per second). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a1f1254d702e18cb40b466c578e7187d3_icgraph.png" border="0" usemap="#circuitlist_8c_a1f1254d702e18cb40b466c578e7187d3_icgraph" alt=""/></div>
<map name="circuitlist_8c_a1f1254d702e18cb40b466c578e7187d3_icgraph" id="circuitlist_8c_a1f1254d702e18cb40b466c578e7187d3_icgraph">
<area shape="rect" id="node2" href="circuitstats_8h.html#a306615a489277731398dbd19065f7b2b" title="circuit_build_times\l_handle_completed_hop" alt="" coords="188,5,351,47"/>
</map>
</div>

</div>
</div>
<a id="ac4fb133db6217d7f5fa19a5dee77ca19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4fb133db6217d7f5fa19a5dee77ca19">&#9670;&nbsp;</a></span>circuit_cache_opened_circuit_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_cache_opened_circuit_state </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>circuits_are_opened</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cache the "any circuits opened" state, as specified in param circuits_are_opened. This is a helper function to update the circuit opened status whenever we happen to look at the circuit list. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_ac4fb133db6217d7f5fa19a5dee77ca19_icgraph.png" border="0" usemap="#circuitlist_8c_ac4fb133db6217d7f5fa19a5dee77ca19_icgraph" alt=""/></div>
<map name="circuitlist_8c_ac4fb133db6217d7f5fa19a5dee77ca19_icgraph" id="circuitlist_8c_ac4fb133db6217d7f5fa19a5dee77ca19_icgraph">
<area shape="rect" id="node2" href="circuitlist_8h.html#a7c20bc469ef67338216bb762b661b0ac" title="circuit_any_opened\l_circuits" alt="" coords="201,5,336,47"/>
<area shape="rect" id="node3" href="circuituse_8h.html#a857005b7512302feee182107aed11121" title="circuit_expire_building" alt="" coords="384,13,535,39"/>
</map>
</div>

</div>
</div>
<a id="a593021d7930ad975a926605290a55bac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593021d7930ad975a926605290a55bac">&#9670;&nbsp;</a></span>circuit_clear_cpath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_clear_cpath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocate the linked list circ-&gt;<b>cpath</b>, and remove the cpath from <b>circ</b>. </p>

</div>
</div>
<a id="ae9b1bf0e3ebdf2185b6b89ebd5143daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9b1bf0e3ebdf2185b6b89ebd5143daa">&#9670;&nbsp;</a></span>circuit_clear_testing_cell_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_clear_testing_cell_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all storage held in circ-&gt;testing_cell_stats </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_ae9b1bf0e3ebdf2185b6b89ebd5143daa_icgraph.png" border="0" usemap="#circuitlist_8c_ae9b1bf0e3ebdf2185b6b89ebd5143daa_icgraph" alt=""/></div>
<map name="circuitlist_8c_ae9b1bf0e3ebdf2185b6b89ebd5143daa_icgraph" id="circuitlist_8c_ae9b1bf0e3ebdf2185b6b89ebd5143daa_icgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#a0f0f6e30fad4255603ad0ae7f7519a1e" title="circuit_free_" alt="" coords="192,13,285,39"/>
</map>
</div>

</div>
</div>
<a id="a11c312b3a8d3a28dc90a5ec70e617043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11c312b3a8d3a28dc90a5ec70e617043">&#9670;&nbsp;</a></span>circuit_close_all_marked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_close_all_marked </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Detach from the global circuit list, and deallocate, all circuits that have been marked for close. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a11c312b3a8d3a28dc90a5ec70e617043_cgraph.png" border="0" usemap="#circuitlist_8c_a11c312b3a8d3a28dc90a5ec70e617043_cgraph" alt=""/></div>
<map name="circuitlist_8c_a11c312b3a8d3a28dc90a5ec70e617043_cgraph" id="circuitlist_8c_a11c312b3a8d3a28dc90a5ec70e617043_cgraph">
<area shape="rect" id="node2" href="container_8c.html#ae56cc8eb3ee68132c63168b2485037cb" title="smartlist_del" alt="" coords="219,5,315,32"/>
</map>
</div>

</div>
</div>
<a id="aa797a036ce04a0d14f669e656ec62408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa797a036ce04a0d14f669e656ec62408">&#9670;&nbsp;</a></span>circuit_count_pending_on_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circuit_count_pending_on_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of circuits in state CHAN_WAIT, waiting for the given channel. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_aa797a036ce04a0d14f669e656ec62408_cgraph.png" border="0" usemap="#circuitlist_8c_aa797a036ce04a0d14f669e656ec62408_cgraph" alt=""/></div>
<map name="circuitlist_8c_aa797a036ce04a0d14f669e656ec62408_cgraph" id="circuitlist_8c_aa797a036ce04a0d14f669e656ec62408_cgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#aaef0c4aefe50f0432478e21e51814a34" title="circuit_get_all_pending\l_on_channel" alt="" coords="201,23,356,65"/>
<area shape="rect" id="node3" href="util_8c.html#add0703747195c2abd042572426e80266" title="tor_digest_is_zero" alt="" coords="439,5,567,32"/>
<area shape="rect" id="node5" href="channel_8c.html#a6cb4f4e8f649a753d3d22fb84653c05b" title="channel_matches_extend_info" alt="" coords="404,56,603,83"/>
<area shape="rect" id="node4" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="651,5,737,32"/>
</map>
</div>

</div>
</div>
<a id="a738513ab0a29830fe1727c7fe388edb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a738513ab0a29830fe1727c7fe388edb7">&#9670;&nbsp;</a></span>circuit_dump_by_conn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_dump_by_conn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structconnection__t.html">connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>severity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log, at severity <b>severity</b>, information about each circuit that is connected to <b>conn</b>. </p>

</div>
</div>
<a id="a8d569b96b07da7c91549695cc1ce8ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d569b96b07da7c91549695cc1ce8ccf">&#9670;&nbsp;</a></span>circuit_find_circuits_to_upgrade_from_guard_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsmartlist__t.html">smartlist_t</a>* circuit_find_circuits_to_upgrade_from_guard_wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether any of the origin circuits that are waiting to see if their guard is good enough to use can be upgraded to "ready". If so, return a new smartlist containing them. Otherwise return NULL. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_cgraph.png" border="0" usemap="#circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_cgraph" alt=""/></div>
<map name="circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_cgraph" id="circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_cgraph">
<area shape="rect" id="node2" href="entrynodes_8c.html#a30eec9f6966e2df9934d3d9770e45df9" title="entry_guards_upgrade\l_waiting_circuits" alt="" coords="257,197,408,238"/>
<area shape="rect" id="node13" href="entrynodes_8c.html#ae55f2a4d95b0bc81220dd0464b8494f8" title="get_guard_selection_info" alt="" coords="249,263,416,289"/>
<area shape="rect" id="node3" href="entrynodes_8c.html#acad8e7ba6123e0a214361a425f711c05" title="entry_guards_all_primary\l_guards_are_down" alt="" coords="464,197,631,238"/>
<area shape="rect" id="node4" href="entrynodes_8c.html#a0715381bede98a7d8f4da7f73d062801" title="entry_guards_update\l_primary" alt="" coords="679,125,821,166"/>
<area shape="rect" id="node10" href="entrynodes_8c.html#ab335f71d2749aa457ffd8a82065649c6" title="entry_guard_consider\l_retry" alt="" coords="1295,209,1441,250"/>
<area shape="rect" id="node5" href="entrynodes_8c.html#a045186178310a765b1193b31c9c98be8" title="get_n_primary_guards" alt="" coords="881,5,1031,32"/>
<area shape="rect" id="node6" href="container_8c.html#a5e71fb7bc775f079d9f9d724f0203fc1" title="smartlist_add_all" alt="" coords="896,56,1016,83"/>
<area shape="rect" id="node7" href="container_8c.html#accf59a8b7d39a4286ff99653b6878006" title="smartlist_add" alt="" coords="906,107,1006,133"/>
<area shape="rect" id="node8" href="container_8c.html#abbb4ca13d840b2761ed4d70c63f0b2f4" title="smartlist_contains" alt="" coords="892,157,1020,184"/>
<area shape="rect" id="node9" href="entrynodes_8c.html#a440f5217f0a557c13b02a251f93db5d6" title="sample_reachable_filtered\l_entry_guards" alt="" coords="869,209,1043,250"/>
<area shape="rect" id="node12" href="entrynodes_8c.html#ac771815070c48fdafceda321e3b56739" title="num_reachable_filtered\l_guards" alt="" coords="1091,209,1247,250"/>
<area shape="rect" id="node11" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="1489,216,1583,243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_icgraph.png" border="0" usemap="#circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_icgraph" alt=""/></div>
<map name="circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_icgraph" id="circuitlist_8c_a8d569b96b07da7c91549695cc1ce8ccf_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8h.html#afbeee8004f6e86e019ed4c4a9556d7de" title="circuit_upgrade_circuits\l_from_guard_wait" alt="" coords="249,5,408,47"/>
</map>
</div>

</div>
</div>
<a id="a2f8d85a6437038797c4e68a34a4c09e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8d85a6437038797c4e68a34a4c09e9">&#9670;&nbsp;</a></span>circuit_find_to_cannibalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* circuit_find_to_cannibalize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose_to_produce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structextend__info__t.html">extend_info_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a circuit that is open, is CIRCUIT_PURPOSE_C_GENERAL, has a timestamp_dirty value of 0, has flags matching the CIRCLAUNCH_* flags in <b>flags</b>, and if info is defined, does not already use info as any of its hops; or NULL if no circuit fits this description.</p>
<p>The <b>purpose</b> argument refers to the purpose of the circuit we want to create, not the purpose of the circuit we want to cannibalize.</p>
<p>If !CIRCLAUNCH_NEED_UPTIME, prefer returning non-uptime circuits.</p>
<p>To "cannibalize" a circuit means to extend it an extra hop, and use it for some other purpose than we had originally intended. We do this when we want to perform some low-bandwidth task at a specific relay, and we would like the circuit to complete as soon as possible. (If we were going to use a lot of bandwidth, we wouldn't want a circuit with an extra hop. If we didn't care about circuit completion latency, we would just build a new circuit.) </p>

</div>
</div>
<a id="a0f0f6e30fad4255603ad0ae7f7519a1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f0f6e30fad4255603ad0ae7f7519a1e">&#9670;&nbsp;</a></span>circuit_free_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC void circuit_free_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocate space associated with circ. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a0f0f6e30fad4255603ad0ae7f7519a1e_cgraph.png" border="0" usemap="#circuitlist_8c_a0f0f6e30fad4255603ad0ae7f7519a1e_cgraph" alt=""/></div>
<map name="circuitlist_8c_a0f0f6e30fad4255603ad0ae7f7519a1e_cgraph" id="circuitlist_8c_a0f0f6e30fad4255603ad0ae7f7519a1e_cgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#ae9b1bf0e3ebdf2185b6b89ebd5143daa" title="circuit_clear_testing\l_cell_stats" alt="" coords="147,5,285,47"/>
</map>
</div>

</div>
</div>
<a id="a5ac4853b0a4837bd67a52bdb8eb0ca93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ac4853b0a4837bd67a52bdb8eb0ca93">&#9670;&nbsp;</a></span>circuit_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_free_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release all storage held by circuits. </p>

</div>
</div>
<a id="aaef0c4aefe50f0432478e21e51814a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaef0c4aefe50f0432478e21e51814a34">&#9670;&nbsp;</a></span>circuit_get_all_pending_on_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_get_all_pending_on_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append to <b>out</b> all circuits in state CHAN_WAIT waiting for the given connection. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_cgraph.png" border="0" usemap="#circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_cgraph" alt=""/></div>
<map name="circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_cgraph" id="circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_cgraph">
<area shape="rect" id="node2" href="util_8c.html#add0703747195c2abd042572426e80266" title="tor_digest_is_zero" alt="" coords="243,5,371,32"/>
<area shape="rect" id="node4" href="channel_8c.html#a6cb4f4e8f649a753d3d22fb84653c05b" title="channel_matches_extend_info" alt="" coords="208,56,407,83"/>
<area shape="rect" id="node3" href="di__ops_8c.html#a473334ee93cca0aea10523321a444ea3" title="tor_memeq" alt="" coords="455,5,541,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_icgraph.png" border="0" usemap="#circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_icgraph" alt=""/></div>
<map name="circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_icgraph" id="circuitlist_8c_aaef0c4aefe50f0432478e21e51814a34_icgraph">
<area shape="rect" id="node2" href="circuitlist_8h.html#aa797a036ce04a0d14f669e656ec62408" title="circuit_count_pending\l_on_channel" alt="" coords="215,5,363,47"/>
<area shape="rect" id="node3" href="entrynodes_8h.html#a0e486d12b1fae8b40a392567b676a083" title="entry_guard_chan_failed" alt="" coords="208,71,371,98"/>
</map>
</div>

</div>
</div>
<a id="a48f5c15da602779343d53dcd022cd22b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f5c15da602779343d53dcd022cd22b">&#9670;&nbsp;</a></span>circuit_get_by_circid_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcircuit__t.html">circuit_t</a>* circuit_get_by_circid_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>circ_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a circ such that:</p><ul>
<li>circ-&gt;n_circ_id or circ-&gt;p_circ_id is equal to <b>circ_id</b>, and</li>
<li>circ is attached to <b>chan</b>, either as p_chan or n_chan.</li>
<li>circ is not marked for close. Return NULL if no such circuit exists. </li>
</ul>

</div>
</div>
<a id="a0b3f5de779a301bc93a2293e6f689b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3f5de779a301bc93a2293e6f689b60">&#9670;&nbsp;</a></span>circuit_get_by_circid_channel_even_if_marked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcircuit__t.html">circuit_t</a>* circuit_get_by_circid_channel_even_if_marked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>circ_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a circ such that:</p><ul>
<li>circ-&gt;n_circ_id or circ-&gt;p_circ_id is equal to <b>circ_id</b>, and</li>
<li>circ is attached to <b>chan</b>, either as p_chan or n_chan. Return NULL if no such circuit exists. </li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a0b3f5de779a301bc93a2293e6f689b60_icgraph.png" border="0" usemap="#circuitlist_8c_a0b3f5de779a301bc93a2293e6f689b60_icgraph" alt=""/></div>
<map name="circuitlist_8c_a0b3f5de779a301bc93a2293e6f689b60_icgraph" id="circuitlist_8c_a0b3f5de779a301bc93a2293e6f689b60_icgraph">
<area shape="rect" id="node2" href="circuitlist_8h.html#a24b2d8b47856533721178b8ca6773b5e" title="channel_note_destroy\l_pending" alt="" coords="227,5,376,47"/>
<area shape="rect" id="node3" href="circuitlist_8c.html#acfc4347c59e1edf62f58a0cfa72080ab" title="MOCK_IMPL" alt="" coords="251,71,351,98"/>
<area shape="rect" id="node4" href="circuitmux_8h.html#a4a5fff70da3c5abf8e3ae7abd1aee1cc" title="circuitmux_set_policy" alt="" coords="227,122,375,149"/>
<area shape="rect" id="node5" href="circuitmux_8h.html#a1eefa6dc14786d08f7dcc6a9d33c11b2" title="circuitmux_clear_policy" alt="" coords="424,122,583,149"/>
</map>
</div>

</div>
</div>
<a id="a60b5bc8820f7f98c15ea5c6999738997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60b5bc8820f7f98c15ea5c6999738997">&#9670;&nbsp;</a></span>circuit_get_by_edge_conn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcircuit__t.html">circuit_t</a>* circuit_get_by_edge_conn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structedge__connection__t.html">edge_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the circuit that a given edge connection is using. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a60b5bc8820f7f98c15ea5c6999738997_icgraph.png" border="0" usemap="#circuitlist_8c_a60b5bc8820f7f98c15ea5c6999738997_icgraph" alt=""/></div>
<map name="circuitlist_8c_a60b5bc8820f7f98c15ea5c6999738997_icgraph" id="circuitlist_8c_a60b5bc8820f7f98c15ea5c6999738997_icgraph">
<area shape="rect" id="node2" href="relay_8h.html#a4e70e8fbfc6c89fa97102836a87a99c4" title="connection_edge_consider\l_sending_sendme" alt="" coords="227,27,403,69"/>
<area shape="rect" id="node3" href="connection__edge_8h.html#a98855be3866a7e56063cefe658788fcd" title="connection_edge_flushed_some" alt="" coords="451,5,659,32"/>
<area shape="rect" id="node4" href="connection__edge_8h.html#a84d464ff322df919a496d6fdfba9dade" title="connection_edge_finished\l_flushing" alt="" coords="469,57,641,98"/>
</map>
</div>

</div>
</div>
<a id="af79742a4ab88106ca1d80728809d8e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79742a4ab88106ca1d80728809d8e81">&#9670;&nbsp;</a></span>circuit_get_by_global_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* circuit_get_by_global_id </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the circuit whose global ID is <b>id</b>, or NULL if no such circuit exists. </p>

</div>
</div>
<a id="ab91c6d08d7d2896efefd973d0bb4b8d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab91c6d08d7d2896efefd973d0bb4b8d1">&#9670;&nbsp;</a></span>circuit_get_cpath_hop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcrypt__path__t.html">crypt_path_t</a>* circuit_get_cpath_hop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hopnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the <b>hopnum</b>th hop in <b>circ</b>-&gt;cpath, or NULL if there aren't that many hops in the list. <b>hopnum</b> starts at 1. Returns NULL if <b>hopnum</b> is 0 or negative. </p>

</div>
</div>
<a id="a8cbb4360c5100b6b2ab735449a21fb2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cbb4360c5100b6b2ab735449a21fb2e">&#9670;&nbsp;</a></span>circuit_get_cpath_len()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circuit_get_cpath_len </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of hops in circuit's path. If circ has no entries, or is NULL, returns 0. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a8cbb4360c5100b6b2ab735449a21fb2e_icgraph.png" border="0" usemap="#circuitlist_8c_a8cbb4360c5100b6b2ab735449a21fb2e_icgraph" alt=""/></div>
<map name="circuitlist_8c_a8cbb4360c5100b6b2ab735449a21fb2e_icgraph" id="circuitlist_8c_a8cbb4360c5100b6b2ab735449a21fb2e_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8c.html#a5871c3dbbf307ba2cc7f119d015f1d6d" title="onion_extend_cpath" alt="" coords="199,5,337,32"/>
<area shape="rect" id="node3" href="circuituse_8h.html#a0bd87fd29ee842fc8518b17c9f7cb9ac" title="circuit_build_failed" alt="" coords="203,56,333,83"/>
</map>
</div>

</div>
</div>
<a id="a946530ab71c12655f35d3206c16d49b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a946530ab71c12655f35d3206c16d49b5">&#9670;&nbsp;</a></span>circuit_get_cpath_opened_len()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circuit_get_cpath_opened_len </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of opened hops in circuit's path. If circ has no entries, or is NULL, returns 0. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a946530ab71c12655f35d3206c16d49b5_icgraph.png" border="0" usemap="#circuitlist_8c_a946530ab71c12655f35d3206c16d49b5_icgraph" alt=""/></div>
<map name="circuitlist_8c_a946530ab71c12655f35d3206c16d49b5_icgraph" id="circuitlist_8c_a946530ab71c12655f35d3206c16d49b5_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8h.html#aa58d1c16591ccd8590c84255d7b3cc34" title="circuit_timeout_want\l_to_count_circ" alt="" coords="248,5,391,47"/>
<area shape="rect" id="node3" href="circuitstats_8h.html#a306615a489277731398dbd19065f7b2b" title="circuit_build_times\l_handle_completed_hop" alt="" coords="439,5,601,47"/>
</map>
</div>

</div>
</div>
<a id="ab526f33075e1edd4dd62437af9ef6c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab526f33075e1edd4dd62437af9ef6c43">&#9670;&nbsp;</a></span>circuit_get_global_origin_circuit_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsmartlist__t.html">smartlist_t</a>* circuit_get_global_origin_circuit_list </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to the global list of origin circuits. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_ab526f33075e1edd4dd62437af9ef6c43_icgraph.png" border="0" usemap="#circuitlist_8c_ab526f33075e1edd4dd62437af9ef6c43_icgraph" alt=""/></div>
<map name="circuitlist_8c_ab526f33075e1edd4dd62437af9ef6c43_icgraph" id="circuitlist_8c_ab526f33075e1edd4dd62437af9ef6c43_icgraph">
<area shape="rect" id="node2" href="circuitlist_8h.html#a7c20bc469ef67338216bb762b661b0ac" title="circuit_any_opened\l_circuits" alt="" coords="186,5,321,47"/>
<area shape="rect" id="node4" href="circuituse_8h.html#a4be6726f65e9f2c81ad77a9c70002ad1" title="circuit_expire_waiting\l_for_better_guard" alt="" coords="180,71,327,112"/>
<area shape="rect" id="node3" href="circuituse_8h.html#a857005b7512302feee182107aed11121" title="circuit_expire_building" alt="" coords="375,13,525,39"/>
</map>
</div>

</div>
</div>
<a id="ac0213b0a539495feb29202a4f05d47c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0213b0a539495feb29202a4f05d47c4">&#9670;&nbsp;</a></span>circuit_get_next_by_pk_and_purpose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* circuit_get_next_by_pk_and_purpose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the first circuit originating here in global_circuitlist after <b>start</b> whose purpose is <b>purpose</b>, and where <b>digest</b> (if set) matches the private key digest of the rend data associated with the circuit. Return NULL if no circuit is found. If <b>start</b> is NULL, begin at the start of the list. </p>

</div>
</div>
<a id="a61b4f1c72602c612ab3dbb0bde85872f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b4f1c72602c612ab3dbb0bde85872f">&#9670;&nbsp;</a></span>circuit_get_next_service_intro_circ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* circuit_get_next_service_intro_circ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>start</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the first service introduction circuit originating from the global circuit list after <b>start</b> or at the start of the list if <b>start</b> is NULL. Return NULL if no circuit is found.</p>
<p>A service introduction point circuit has a purpose of either CIRCUIT_PURPOSE_S_ESTABLISH_INTRO or CIRCUIT_PURPOSE_S_INTRO. This does not return a circuit marked for close and its state must be open. </p>

</div>
</div>
<a id="ac6cba784887221ba992b79d38009439e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6cba784887221ba992b79d38009439e">&#9670;&nbsp;</a></span>circuit_get_next_service_rp_circ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* circuit_get_next_service_rp_circ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>start</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the first service rendezvous circuit originating from the global circuit list after <b>start</b> or at the start of the list if <b>start</b> is NULL. Return NULL if no circuit is found.</p>
<p>A service rendezvous point circuit has a purpose of either CIRCUIT_PURPOSE_S_CONNECT_REND or CIRCUIT_PURPOSE_S_REND_JOINED. This does not return a circuit marked for close and its state must be open. </p>

</div>
</div>
<a id="adfbcfe9939d96dcb85e57524f8d1d3f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbcfe9939d96dcb85e57524f8d1d3f2">&#9670;&nbsp;</a></span>circuit_get_ready_rend_circ_by_rend_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* circuit_get_ready_rend_circ_by_rend_data </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrend__data__t.html">rend_data_t</a> *&#160;</td>
          <td class="paramname"><em>rend_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a circ such that</p><ul>
<li>circ-&gt;rend_data-&gt;onion_address is equal to <b>rend_data</b>-&gt;onion_address,</li>
<li>circ-&gt;rend_data-&gt;rend_cookie is equal to <b>rend_data</b>-&gt;rend_cookie, and</li>
<li>circ-&gt;purpose is equal to CIRCUIT_PURPOSE_C_REND_READY.</li>
</ul>
<p>Return NULL if no such circuit exists. </p>

</div>
</div>
<a id="a31b3500c2a9f864edd57d61b3550fa7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31b3500c2a9f864edd57d61b3550fa7a">&#9670;&nbsp;</a></span>circuit_id_in_use_on_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int circuit_id_in_use_on_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>circ_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true iff the circuit ID <b>circ_id</b> is currently used by a circuit, marked or not, on <b>chan</b>, or if the circ ID is reserved until a queued destroy cell can be sent.</p>
<p>(Return 1 if the circuit is present, marked or not; Return 2 if the circuit ID is pending a destroy.) </p>

</div>
</div>
<a id="ac37b3621f17213b10cad9940c800c2ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac37b3621f17213b10cad9940c800c2ef">&#9670;&nbsp;</a></span>circuit_id_when_marked_unusable_on_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t circuit_id_when_marked_unusable_on_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>circ_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper for debugging 12184. Returns the time since which 'circ_id' has been marked unusable on 'chan'. </p>

</div>
</div>
<a id="afe5c2bcd4138363a8e5ab5943cd19b79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5c2bcd4138363a8e5ab5943cd19b79">&#9670;&nbsp;</a></span>circuit_initial_package_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t circuit_initial_package_window </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pick a reasonable package_window to start out for our circuits. Originally this was hard-coded at 1000, but now the consensus votes on the answer. See proposal 168. </p>

</div>
</div>
<a id="a52c4991dce45efd8d927b6092e3c85be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52c4991dce45efd8d927b6092e3c85be">&#9670;&nbsp;</a></span>circuit_mark_all_dirty_circs_as_unusable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_mark_all_dirty_circs_as_unusable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Go through the circuitlist; for each circuit that starts at us and is dirty, frob its timestamp_dirty so we won't use it for any new streams.</p>
<p>This is useful for letting the user change pseudonyms, so new streams will not be linkable to old streams. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_cgraph.png" border="0" usemap="#circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_cgraph" alt=""/></div>
<map name="circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_cgraph" id="circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_cgraph">
<area shape="rect" id="node2" href="circuituse_8c.html#adf36645f7a473ad622918668f2f5ba33" title="mark_circuit_unusable\l_for_new_conns" alt="" coords="199,5,351,47"/>
<area shape="rect" id="node3" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="399,13,492,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_icgraph.png" border="0" usemap="#circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_icgraph" alt=""/></div>
<map name="circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_icgraph" id="circuitlist_8c_a52c4991dce45efd8d927b6092e3c85be_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8h.html#ad0daecc03b3062716a6845b8a522d3da" title="circuit_note_clock\l_jumped" alt="" coords="199,5,326,47"/>
<area shape="rect" id="node3" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="199,71,327,112"/>
</map>
</div>

</div>
</div>
<a id="afbc3a3bf5eccd42bc5dc3f75d5aec392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc3a3bf5eccd42bc5dc3f75d5aec392">&#9670;&nbsp;</a></span>circuit_mark_all_unused_circs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_mark_all_unused_circs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Go through the circuitlist; mark-for-close each circuit that starts at us but has not yet been used. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_afbc3a3bf5eccd42bc5dc3f75d5aec392_icgraph.png" border="0" usemap="#circuitlist_8c_afbc3a3bf5eccd42bc5dc3f75d5aec392_icgraph" alt=""/></div>
<map name="circuitlist_8c_afbc3a3bf5eccd42bc5dc3f75d5aec392_icgraph" id="circuitlist_8c_afbc3a3bf5eccd42bc5dc3f75d5aec392_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8h.html#ad0daecc03b3062716a6845b8a522d3da" title="circuit_note_clock\l_jumped" alt="" coords="217,5,343,47"/>
<area shape="rect" id="node3" href="main_8h.html#ac64189cc036980dc5785f76d85db9fa6" title="directory_info_has\l_arrived" alt="" coords="216,71,344,112"/>
</map>
</div>

</div>
</div>
<a id="aa984f19d399dd7cc2e1bb2c1d8f67271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa984f19d399dd7cc2e1bb2c1d8f67271">&#9670;&nbsp;</a></span>circuit_max_queued_cell_age()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC uint32_t circuit_max_queued_cell_age </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the age of the oldest cell queued on <b>c</b>, in timestamp units. Return 0 if there are no cells queued on c. Requires that <b>now</b> be the current coarse timestamp.</p>
<p>This function will return incorrect results if the oldest cell queued on the circuit is older than about 2**32 msec (about 49 days) old. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_aa984f19d399dd7cc2e1bb2c1d8f67271_icgraph.png" border="0" usemap="#circuitlist_8c_aa984f19d399dd7cc2e1bb2c1d8f67271_icgraph" alt=""/></div>
<map name="circuitlist_8c_aa984f19d399dd7cc2e1bb2c1d8f67271_icgraph" id="circuitlist_8c_aa984f19d399dd7cc2e1bb2c1d8f67271_icgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#a0683212f0e98953ec1752019b7e3f822" title="circuit_max_queued\l_item_age" alt="" coords="192,5,331,47"/>
</map>
</div>

</div>
</div>
<a id="a87dc7128c6aaba5b68de157f06901bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87dc7128c6aaba5b68de157f06901bd5">&#9670;&nbsp;</a></span>circuit_max_queued_data_age()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC uint32_t circuit_max_queued_data_age </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the age in timestamp units of the oldest buffer chunk on any stream attached to the circuit <b>c</b>, where age is taken before the timestamp <b>now</b>. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a87dc7128c6aaba5b68de157f06901bd5_icgraph.png" border="0" usemap="#circuitlist_8c_a87dc7128c6aaba5b68de157f06901bd5_icgraph" alt=""/></div>
<map name="circuitlist_8c_a87dc7128c6aaba5b68de157f06901bd5_icgraph" id="circuitlist_8c_a87dc7128c6aaba5b68de157f06901bd5_icgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#a0683212f0e98953ec1752019b7e3f822" title="circuit_max_queued\l_item_age" alt="" coords="192,5,331,47"/>
</map>
</div>

</div>
</div>
<a id="a0683212f0e98953ec1752019b7e3f822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0683212f0e98953ec1752019b7e3f822">&#9670;&nbsp;</a></span>circuit_max_queued_item_age()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC uint32_t circuit_max_queued_item_age </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the age of the oldest cell or stream buffer chunk on the circuit <b>c</b>, where age is taken in timestamp units before the timestamp <b>now</b> </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a0683212f0e98953ec1752019b7e3f822_cgraph.png" border="0" usemap="#circuitlist_8c_a0683212f0e98953ec1752019b7e3f822_cgraph" alt=""/></div>
<map name="circuitlist_8c_a0683212f0e98953ec1752019b7e3f822_cgraph" id="circuitlist_8c_a0683212f0e98953ec1752019b7e3f822_cgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#aa984f19d399dd7cc2e1bb2c1d8f67271" title="circuit_max_queued\l_cell_age" alt="" coords="192,5,331,47"/>
<area shape="rect" id="node3" href="circuitlist_8c.html#a87dc7128c6aaba5b68de157f06901bd5" title="circuit_max_queued\l_data_age" alt="" coords="192,71,331,112"/>
</map>
</div>

</div>
</div>
<a id="a086953aba35fad817919757859c45f82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a086953aba35fad817919757859c45f82">&#9670;&nbsp;</a></span>circuit_purpose_to_controller_hs_state_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* circuit_purpose_to_controller_hs_state_string </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a string specifying the state of the hidden-service circuit purpose <b>purpose</b>, or NULL if <b>purpose</b> is not a hidden-service-related circuit purpose. </p>

</div>
</div>
<a id="a812936e0ba7830eaaf06aee73fd7ac88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a812936e0ba7830eaaf06aee73fd7ac88">&#9670;&nbsp;</a></span>circuit_purpose_to_controller_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* circuit_purpose_to_controller_string </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Map a circuit purpose to a string suitable to be displayed to a controller. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a812936e0ba7830eaaf06aee73fd7ac88_cgraph.png" border="0" usemap="#circuitlist_8c_a812936e0ba7830eaaf06aee73fd7ac88_cgraph" alt=""/></div>
<map name="circuitlist_8c_a812936e0ba7830eaaf06aee73fd7ac88_cgraph" id="circuitlist_8c_a812936e0ba7830eaaf06aee73fd7ac88_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="181,13,268,39"/>
<area shape="rect" id="node3" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="316,13,411,39"/>
</map>
</div>

</div>
</div>
<a id="a6c79060856f98208dbdbf81c4f5ed336"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c79060856f98208dbdbf81c4f5ed336">&#9670;&nbsp;</a></span>circuit_purpose_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* circuit_purpose_to_string </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a human-readable string for the circuit purpose <b>purpose</b>. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_cgraph.png" border="0" usemap="#circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_cgraph" alt=""/></div>
<map name="circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_cgraph" id="circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_cgraph">
<area shape="rect" id="node2" href="compat_8c.html#af032ac661214ae28b4f205781a515290" title="tor_snprintf" alt="" coords="181,13,268,39"/>
<area shape="rect" id="node3" href="compat_8c.html#a1df7873b16ae8936d25dfedb706f4ea6" title="tor_vsnprintf" alt="" coords="316,13,411,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_icgraph.png" border="0" usemap="#circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_icgraph" alt=""/></div>
<map name="circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_icgraph" id="circuitlist_8c_a6c79060856f98208dbdbf81c4f5ed336_icgraph">
<area shape="rect" id="node2" href="circuituse_8h.html#a407966b13bb02eb365910ea9f07e08be" title="circuit_change_purpose" alt="" coords="181,13,340,39"/>
</map>
</div>

</div>
</div>
<a id="a38413accb1cc33e6949c1083f30f86f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38413accb1cc33e6949c1083f30f86f4">&#9670;&nbsp;</a></span>circuit_set_n_circid_chan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_set_n_circid_chan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the n_conn field of a circuit <b>circ</b>, along with the corresponding circuit ID, and add the circuit as appropriate to the (chan,id)-&gt;circuit map. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a38413accb1cc33e6949c1083f30f86f4_cgraph.png" border="0" usemap="#circuitlist_8c_a38413accb1cc33e6949c1083f30f86f4_cgraph" alt=""/></div>
<map name="circuitlist_8c_a38413accb1cc33e6949c1083f30f86f4_cgraph" id="circuitlist_8c_a38413accb1cc33e6949c1083f30f86f4_cgraph">
<area shape="rect" id="node2" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="247,5,340,32"/>
<area shape="rect" id="node3" href="circuitlist_8c.html#a71e07c8c1e138de359a2f6e9c7690d27" title="channel_mark_circid\l_unusable" alt="" coords="223,57,364,98"/>
</map>
</div>

</div>
</div>
<a id="a2b04e080622ab9d4fb23f9b9ffafeeac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b04e080622ab9d4fb23f9b9ffafeeac">&#9670;&nbsp;</a></span>circuit_set_p_circid_chan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_set_p_circid_chan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structor__circuit__t.html">or_circuit_t</a> *&#160;</td>
          <td class="paramname"><em>or_circ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the p_conn field of a circuit <b>circ</b>, along with the corresponding circuit ID, and add the circuit as appropriate to the (chan,id)-&gt;circuit map. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a2b04e080622ab9d4fb23f9b9ffafeeac_cgraph.png" border="0" usemap="#circuitlist_8c_a2b04e080622ab9d4fb23f9b9ffafeeac_cgraph" alt=""/></div>
<map name="circuitlist_8c_a2b04e080622ab9d4fb23f9b9ffafeeac_cgraph" id="circuitlist_8c_a2b04e080622ab9d4fb23f9b9ffafeeac_cgraph">
<area shape="rect" id="node2" href="util_8c.html#aca03d8cb6a22d540b13b92ea5945df33" title="approx_time" alt="" coords="247,5,340,32"/>
<area shape="rect" id="node3" href="circuitlist_8c.html#a71e07c8c1e138de359a2f6e9c7690d27" title="channel_mark_circid\l_unusable" alt="" coords="223,57,364,98"/>
</map>
</div>

</div>
</div>
<a id="a59a56e94fe3ac816942314b7172c3b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a56e94fe3ac816942314b7172c3b30">&#9670;&nbsp;</a></span>circuit_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_set_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>circ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change the state of <b>circ</b> to <b>state</b>, adding it to or removing it from lists as appropriate. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_cgraph.png" border="0" usemap="#circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_cgraph" alt=""/></div>
<map name="circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_cgraph" id="circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_cgraph">
<area shape="rect" id="node2" href="container_8c.html#ad318adf5db2ec229a43c0c567e1f6fce" title="smartlist_remove" alt="" coords="172,5,295,32"/>
<area shape="rect" id="node3" href="container_8c.html#accf59a8b7d39a4286ff99653b6878006" title="smartlist_add" alt="" coords="183,56,283,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_icgraph.png" border="0" usemap="#circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_icgraph" alt=""/></div>
<map name="circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_icgraph" id="circuitlist_8c_a59a56e94fe3ac816942314b7172c3b30_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8h.html#ac8532320d2ec89a1d23738911ef3673f" title="origin_circuit_init" alt="" coords="172,5,291,32"/>
<area shape="rect" id="node3" href="circuitbuild_8h.html#ad080a73b41f96d923417f2b5b3535f50" title="circuit_establish_circuit" alt="" coords="339,5,497,32"/>
</map>
</div>

</div>
</div>
<a id="ae84ef8267cda6f1d07cf1103a409e327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae84ef8267cda6f1d07cf1103a409e327">&#9670;&nbsp;</a></span>circuit_state_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* circuit_state_to_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to make circ-&gt;state human-readable </p>

</div>
</div>
<a id="aefaec2ca33f3b6b2dd23d12719b9773f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefaec2ca33f3b6b2dd23d12719b9773f">&#9670;&nbsp;</a></span>circuit_unlink_all_from_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuit_unlink_all_from_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For each circuit that has <b>chan</b> as n_chan or p_chan, unlink the circuit from the chan,circid map, and mark it for close if it hasn't been marked already. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_aefaec2ca33f3b6b2dd23d12719b9773f_cgraph.png" border="0" usemap="#circuitlist_8c_aefaec2ca33f3b6b2dd23d12719b9773f_cgraph" alt=""/></div>
<map name="circuitlist_8c_aefaec2ca33f3b6b2dd23d12719b9773f_cgraph" id="circuitlist_8c_aefaec2ca33f3b6b2dd23d12719b9773f_cgraph">
<area shape="rect" id="node2" href="relay_8c.html#a2236881e0b46dc12ce1a0d7e082abd56" title="channel_unlink_all\l_circuits" alt="" coords="172,5,300,47"/>
<area shape="rect" id="node3" href="circuitmux_8c.html#a41e57338dd2ad963deb020980aa22e62" title="circuitmux_detach_all\l_circuits" alt="" coords="348,5,496,47"/>
</map>
</div>

</div>
</div>
<a id="a4b241b1bf7965929622477090a6c7b36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b241b1bf7965929622477090a6c7b36">&#9670;&nbsp;</a></span>circuits_handle_oom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void circuits_handle_oom </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>current_allocation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We're out of memory for cells, having allocated <b>current_allocation</b> bytes' worth. Kill the 'worst' circuits until we're under FRACTION_OF_DATA_TO_RETAIN_ON_OOM of our maximum usage. </p>

</div>
</div>
<a id="acfc4347c59e1edf62f58a0cfa72080ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc4347c59e1edf62f58a0cfa72080ab">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">channel_note_destroy_not_pending&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="structchannel__s.html">channel_t</a> *chan, <a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a> id)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to indicate that a DESTROY is no longer pending on <b>chan</b> with circuit ID <b>id</b> &ndash; typically, because it has been sent. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_acfc4347c59e1edf62f58a0cfa72080ab_cgraph.png" border="0" usemap="#circuitlist_8c_acfc4347c59e1edf62f58a0cfa72080ab_cgraph" alt=""/></div>
<map name="circuitlist_8c_acfc4347c59e1edf62f58a0cfa72080ab_cgraph" id="circuitlist_8c_acfc4347c59e1edf62f58a0cfa72080ab_cgraph">
<area shape="rect" id="node2" href="circuitlist_8c.html#a0b3f5de779a301bc93a2293e6f689b60" title="circuit_get_by_circid\l_channel_even_if_marked" alt="" coords="153,5,327,47"/>
</map>
</div>

</div>
</div>
<a id="a6fad396f3e0850a9330c2d7c7aa43c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fad396f3e0850a9330c2d7c7aa43c67">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsmartlist__t.html">smartlist_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">circuit_get_global_list&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to the global list of circuits. </p>

</div>
</div>
<a id="af5c002c85c1165ee85550bffe9f80f4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c002c85c1165ee85550bffe9f80f4b">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">circuit_mark_for_close_&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(<a class="el" href="structcircuit__t.html">circuit_t</a> *circ, int reason, int line, const char *file)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark <b>circ</b> to be closed next time we call <a class="el" href="circuitlist_8c.html#a11c312b3a8d3a28dc90a5ec70e617043">circuit_close_all_marked()</a>. Do any cleanup needed:</p><ul>
<li>If state is onionskin_pending, remove circ from the onion_pending list.</li>
<li>If circ isn't open yet: call <a class="el" href="circuituse_8c.html#a0bd87fd29ee842fc8518b17c9f7cb9ac">circuit_build_failed()</a> if we're the origin.</li>
<li>If purpose is C_INTRODUCE_ACK_WAIT, report the intro point failure we just had to the hidden service client module.</li>
<li>If purpose is C_INTRODUCING and <b>reason</b> isn't TIMEOUT, report to the hidden service client module that the intro point we just tried may be unreachable.</li>
<li>Send appropriate destroys and edge_destroys for conns and streams attached to circ.</li>
<li>If circ-&gt;rend_splice is set (we are the midpoint of a joined rendezvous stream), then mark the other circuit to close as well. </li>
</ul>

</div>
</div>
<a id="a8bd7c61397e708cf05c1c06d3188ab30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bd7c61397e708cf05c1c06d3188ab30">&#9670;&nbsp;</a></span>MOCK_IMPL() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCK_IMPL </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">assert_circuit_ok&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="structcircuit__t.html">circuit_t</a> *c)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Verify that circuit <b>c</b> has all of its invariants correct. Trigger an assert if anything is invalid. </p>

</div>
</div>
<a id="a334868eea72d5bf22fef327ace35887c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334868eea72d5bf22fef327ace35887c">&#9670;&nbsp;</a></span>n_cells_in_circ_queues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC size_t n_cells_in_circ_queues </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcircuit__t.html">circuit_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the number of cells used by the circuit <b>c</b>'s cell queues. </p>

</div>
</div>
<a id="af1b61a8de4d2d95f7cb3a119cbb01368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b61a8de4d2d95f7cb3a119cbb01368">&#9670;&nbsp;</a></span>or_circuit_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structor__circuit__t.html">or_circuit_t</a>* or_circuit_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="or_8h.html#a6607d3e1cd2b5deca02212435116a2ac">circid_t</a>&#160;</td>
          <td class="paramname"><em>p_circ_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__s.html">channel_t</a> *&#160;</td>
          <td class="paramname"><em>p_chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a new <a class="el" href="structor__circuit__t.html">or_circuit_t</a>, connected to <b>p_chan</b> as <b>p_circ_id</b>. If <b>p_chan</b> is NULL, the circuit is unattached. </p>

</div>
</div>
<a id="a543a0ac445cdd07bd65cd176092a48a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a543a0ac445cdd07bd65cd176092a48a8">&#9670;&nbsp;</a></span>origin_circuit_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structorigin__circuit__t.html">origin_circuit_t</a>* origin_circuit_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate space for a new circuit, initializing with <b>p_circ_id</b> and <b>p_conn</b>. Add it to the global circuit list. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="circuitlist_8c_a543a0ac445cdd07bd65cd176092a48a8_icgraph.png" border="0" usemap="#circuitlist_8c_a543a0ac445cdd07bd65cd176092a48a8_icgraph" alt=""/></div>
<map name="circuitlist_8c_a543a0ac445cdd07bd65cd176092a48a8_icgraph" id="circuitlist_8c_a543a0ac445cdd07bd65cd176092a48a8_icgraph">
<area shape="rect" id="node2" href="circuitbuild_8h.html#ac8532320d2ec89a1d23738911ef3673f" title="origin_circuit_init" alt="" coords="180,5,299,32"/>
<area shape="rect" id="node3" href="circuitbuild_8h.html#ad080a73b41f96d923417f2b5b3535f50" title="circuit_establish_circuit" alt="" coords="347,5,505,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
